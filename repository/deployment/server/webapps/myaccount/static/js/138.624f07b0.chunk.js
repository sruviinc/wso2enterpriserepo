"use strict";(self.webpackChunk_wso2is_myaccount=self.webpackChunk_wso2is_myaccount||[]).push([[138],{13138:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var l=t(96433),r=t(83374),o=t(17680),i=t(52983),u=t(9202),c=t(42822),a=t(26084),s=t(27505),d=t(95849),f=t(14866),v=t(67680),E=t(66323),m=t(64517),C=t(24324);function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,o,i,u=[],c=!0,a=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(l=o.call(t)).done)&&(u.push(l.value),u.length!==n);c=!0);}catch(e){a=!0,r=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(a)throw r}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}var A=function(e){var n,t,I,A,R,T,p,S,h,b,w,_,g=e.enableNonLocalCredentialUserView,N=(0,u.$)().t,O=(0,c.I0)(),U=(0,c.v9)((function(e){return e.authenticationInformation})),F=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.features})),Y=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.disableMFAforSuperTenantUser})),$=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.disableMFAForFederatedUsers})),D=(0,c.v9)((function(e){var n;return null==e||null===(n=e.authenticationInformation)||void 0===n?void 0:n.scope})),Z=(0,c.v9)((function(e){return e.authenticationInformation.profileInfo.isReadOnly})),x=(0,c.v9)((function(e){return e.authenticationInformation.hasLocalAccount})),V=y((0,i.useState)(!1),2),k=V[0],L=V[1],X=y((0,i.useState)(null),2),M=X[0],j=X[1],P=(0,i.useRef)(null),G=(0,i.useRef)(null),H=(0,i.useRef)(null);(0,i.useEffect)((function(){setTimeout((function(){switch(e.location.hash){case"#".concat(d.F$.CONSENTS_CONTROL):P.current.scrollIntoView({behavior:"smooth",block:"center"});break;case"#".concat(d.F$.ACCOUNT_ACTIVITY):H.current.scrollIntoView({behavior:"smooth",block:"center"});break;case"#".concat(d.F$.ACCOUNT_SECURITY):G.current.scrollIntoView({behavior:"smooth",block:"center"})}}),100)}),[e.location]),(0,i.useEffect)((function(){var e,n;if(g){var t=null==U||null===(e=U.profileInfo)||void 0===e||null===(n=e[v.k.scim.customEnterpriseSchema])||void 0===n?void 0:n[null===l.Cb||void 0===l.Cb?void 0:l.Cb.SCIM2_SCHEMA_DICTIONARY.get("LOCAL_CREDENTIAL_EXISTS")];t&&"false"==t&&L(!0)}}),[null==U?void 0:U.profileInfo]),(0,i.useEffect)((function(){var e;if(null!=U&&null!==(e=U.profileInfo)&&void 0!==e&&e.userName){var n=(0,E.tF)(U.profileInfo.userName);j(n)}}),[null==U?void 0:U.profileInfo]);var W=function(e){O((0,m.V_)(e))},q=function(){return d.$x.getTenant()===d.$x.getSuperTenant()};return i.createElement(o.Xg,{pageTitle:"Security",title:N("myAccount:pages.security.title"),description:k?"Secure your account by managing your sessions":N("myAccount:pages.security.subTitle")},i.createElement(a.Z,null,!C.DN.isProfileReadOnly(Z)&&!k&&(0,r.Xr)(null==F?void 0:F.security,null==F||null===(n=F.security)||void 0===n||null===(t=n.scopes)||void 0===t?void 0:t.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_CHANGE_PASSWORD"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.GR,{onAlertFired:W}))):null,!C.DN.isProfileReadOnly(Z)&&!k&&(0,r.Xr)(null==F?void 0:F.security,null==F||null===(I=F.security)||void 0===I||null===(A=I.scopes)||void 0===A?void 0:A.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_ACCOUNT_RECOVERY"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",{ref:G},i.createElement(s.Rx,{featureConfig:F,onAlertFired:W})))):null,!x||!(0,r.Xr)(null==F?void 0:F.security,null==F||null===(R=F.security)||void 0===R||null===(T=R.scopes)||void 0===T?void 0:T.read,D)||(!k||$&&q())&&k||!(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_MFA"))||Y&&q()?null:i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.P$,{featureConfig:F,onAlertFired:W,userStore:M}))),(0,r.Xr)(null==F?void 0:F.security,null==F||null===(p=F.security)||void 0===p||null===(S=p.scopes)||void 0===S?void 0:S.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_LOGIN_VERIFY_DATA"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.wD,{featureConfig:F,onAlertFired:W}))):null,(0,r.Xr)(null==F?void 0:F.security,null==F||null===(h=F.security)||void 0===h||null===(b=h.scopes)||void 0===b?void 0:b.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_ACTIVE_SESSIONS"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",{ref:H},i.createElement(s.E4,{onAlertFired:W})))):null,x&&(0,r.Xr)(null==F?void 0:F.security,null==F||null===(w=F.security)||void 0===w||null===(_=w.scopes)||void 0===_?void 0:_.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_CONSENTS"))&&f.x.utils.isManageConsentAllowedForUser(M)?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",null,i.createElement(s.pj,{onAlertFired:W})),i.createElement("div",{ref:P}))):null))};A.defaultProps={enableNonLocalCredentialUserView:f.x.nonLocalCredentialUser.enableNonLocalCredentialUserView};const R=A}}]);