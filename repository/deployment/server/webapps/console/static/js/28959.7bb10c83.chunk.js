"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[28959,17826],{17826:(e,t,n)=>{n.r(t),n.d(t,{sendFeedback:()=>c});var r=n(93967),a=n(14603),l=n(30640),o=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()).bind(r.AsgardeoSPAClient.getInstance()),c=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:window.AppUtils.getConfig().extensions.feedbackEndPoint};return o(t).then((function(e){return 201!==e.status?Promise.reject(new Error("Failed to add feedback")):Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},28959:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r,a=n(14603),l=n(90268),o=n(13318),c=n(81816),i=n(53337),u=n(52983),m=n(9202),s=n(54221),d=n(94635),g=n(74691),b=n(75917),f=n(88171),p=n(21921),E=n(17826),h=n(30640),y=["title","titleId"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=function(e,t){var n=e.title,a=e.titleId,l=w(e,y);return u.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:14.005,height:13.338,viewBox:"0 0 14.005 13.338",ref:t,"aria-labelledby":a},l),n?u.createElement("title",{id:a},n):null,r||(r=u.createElement("path",{id:"Union_50","data-name":"Union 50",d:"M1.873,13.312A.333.333,0,0,1,1.667,13V10H1A1,1,0,0,1,0,9V1A1,1,0,0,1,1,0H13.005a1,1,0,0,1,1,1V9a1,1,0,0,1-1,1H5.473L2.237,13.24a.334.334,0,0,1-.236.1A.318.318,0,0,1,1.873,13.312ZM.667,1V9A.333.333,0,0,0,1,9.337H2a.333.333,0,0,1,.333.333V12.2L5.1,9.434a.333.333,0,0,1,.236-.1h7.67A.333.333,0,0,0,13.337,9V1a.332.332,0,0,0-.332-.332H1A.332.332,0,0,0,.667,1ZM6.6,7.155a.3.3,0,1,1,.3.3A.3.3,0,0,1,6.6,7.155Zm0-.755V3h.6V6.4Z"})))},k=(0,u.forwardRef)(C);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,c=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const S=function(){var e=Z((0,u.useState)(!1),2),t=e[0],n=e[1],r=Z((0,u.useState)(!1),2),y=r[0],v=r[1],w=Z((0,u.useState)("suggestion"),2),C=w[0],A=w[1],S=Z((0,u.useState)(0),2),O=S[0],P=S[1],R=Z((0,u.useState)(!1),2),q=R[0],N=R[1],F=(0,s.v9)((function(e){return e.profile.profileInfo.id})),I=(0,s.v9)((function(e){return e.profile.profileInfo.emails[0]})),j=h.h.getState().config.deployment.tenant,M=(0,m.$)().t,T=(0,s.I0)(),V=Z((0,o.cC)(),2),U=V[0],x=V[1],H=function(){n(!1),P(0),v(!1),A("suggestion")},z=[{content:u.createElement(u.Fragment,null,u.createElement(o.Es,{onSubmit:function(e){return _(e)},submitState:U,onChange:function(e,t){"suggestion"!==C&&"complement"!==C&&"bugReport"!==C||t.get("allowToContact").includes("contactAllowed")!==y&&v(!!t.get("allowToContact").includes("contactAllowed"))}},u.createElement(d.Z,{columns:3,className:"feedback-category"},u.createElement("label",null,"Please select your feedback category below"),u.createElement(d.Z.Row,null,u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"suggestion",name:"feedbackOption",id:"suggestion",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"suggestion"},u.createElement(g.Z,{name:"lightbulb"})," Suggestion")),u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"complement",name:"feedbackOption",id:"complement",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"complement"},u.createElement(g.Z,{name:"thumbs up"})," Complement")),u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"bugReport",name:"feedbackOption",id:"bugReport",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"bugReport"},u.createElement(g.Z,{name:"bug"})," Report a Bug"))),u.createElement(d.Z.Row,null,u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"helpRequest",name:"feedbackOption",id:"helpRequest",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"helpRequest"},u.createElement(g.Z,{name:"question circle"})," Need Help")),u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"contactUs",name:"feedbackOption",id:"contactUs",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"contactUs"},u.createElement(g.Z,{name:"comments"})," Contact Us")),u.createElement(d.Z.Column,null,u.createElement("input",{type:"radio",value:"other",name:"feedbackOption",id:"other",onChange:function(e){A(e.currentTarget.value.toString())}}),u.createElement("label",{htmlFor:"other"},u.createElement(g.Z,{name:"comment alternate"})," Other")))),u.createElement(o.gN,{label:"Please leave your feedback below (maximum 2000 characters)",name:"message",placeholder:"Enter your suggestion/problem/complaint here",required:!0,requiredErrorMessage:"Feedback message cannot be empty.",type:"textarea",maxLength:"2000"}),!C||"helpRequest"!==C&&"contactUs"!==C&&"other"!==C?!C||"suggestion"!==C&&"complement"!==C&&"bugReport"!==C?"":u.createElement(u.Fragment,null,u.createElement(o.gN,{name:"allowToContact",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:"Asgardeo may contact me regarding this feedback",value:"contactAllowed"}],value:y?["contactAllowed"]:[]}),y&&u.createElement(o.gN,{label:"Email Address",name:"email",placeholder:"Enter your email address",required:y,disabled:y,requiredErrorMessage:"Email cannot be empty if you are okay with us contacting you regarding this feedback",validation:function(e,t){i.I.email(e)||(t.isValid=!1,t.errorMessages.push("Please enter a valid email address"))},value:y?I:null,type:"email"}),y&&u.createElement(o.gN,{label:"Contact No (Optional)",name:"contactNo",placeholder:"Enter your contact number",required:!1,disabled:!y,requiredErrorMessage:M(""),type:"number",min:"1",validation:function(e,t){i.I.mobileNumber(e)||(t.isValid=!1,t.errorMessages.push("Please enter a valid contact number"))}}),u.createElement(c.kW,{disabled:!y},"Your contact details will not be used for any purpose other than this. Please see our ",u.createElement("a",{href:"../privacy"},"Privacy Policy")," for more information.")):u.createElement(d.Z,{columns:2},u.createElement(d.Z.Row,null,u.createElement(d.Z.Column,null,u.createElement(o.gN,{label:"Email Address",name:"email",placeholder:"Enter your email address",required:!0,disabled:!0,requiredErrorMessage:"Email cannot be empty if you want us to contact you regarding this feedback",validation:function(e,t){i.I.email(e)||(t.isValid=!1,t.errorMessages.push("Please enter a valid email address"))},value:I,type:"email"})),u.createElement(d.Z.Column,null,u.createElement(o.gN,{label:"Contact Number (Optional)",name:"contactNo",placeholder:"Enter your contact number",required:!1,requiredErrorMessage:M(""),type:"number",min:"1",validation:function(e,t){i.I.mobileNumber(e)||(t.isValid=!1,t.errorMessages.push("Please enter a valid contact number"))}}))),u.createElement(c.kW,null,"Your contact details will not be used for any purpose other than this. Please see our ",u.createElement("a",{href:"../privacy"},"Privacy Policy")," for more information."))))},{content:u.createElement(u.Fragment,null,u.createElement(d.Z,null,u.createElement(d.Z.Row,null,u.createElement(d.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},u.createElement("div",{style:{padding:"1rem"}},u.createElement("div",{style:{marginBottom:"1rem",marginTop:"2rem"}},u.createElement(g.Z,{color:"orange",name:"check circle",size:"massive"})),C&&(y||"helpRequest"===C||"contactUs"===C||"other"===C)?u.createElement(u.Fragment,null,u.createElement(c.X6,{size:"medium"}," Thank you for submitting your feedback. "),u.createElement(c.X6,{subHeading:!0,compact:!0,size:"small"}," We need some time to review your request."),u.createElement(c.X6,{subHeading:!0,size:"small"}," When we are done, we will be in touch.")):!C||"suggestion"!==C&&"complement"!==C&&"bugReport"!==C?"":u.createElement(u.Fragment,null,u.createElement(c.X6,{size:"medium"}," Thank you for submitting your feedback. ")),u.createElement(b.Z,{hidden:!0}),u.createElement(c.KM,{size:"medium",onClick:function(){return H()}},"Close"))))))}],_=function(e){var t=[];t.push(C);var n={contactNo:e.get("contactNo"),email:e.get("email"),message:e.get("message"),tags:t,tenantDomain:j,userId:F};N(!0),(0,E.sendFeedback)(n).then((function(){P(O+1),T((0,l.V_)({description:"Your feedback was submitted successfully",level:a.QU.SUCCESS,message:"Feedback submitted successfully"}))})).catch((function(e){H(),T((0,l.V_)({description:(null==e?void 0:e.description)||"There was an error while submitting the feedback",level:a.QU.ERROR,message:(null==e?void 0:e.message)||"Error submitting the feedback"}))})).finally((function(){N(!1)}))};return u.createElement(u.Fragment,null,u.createElement(f.Z,{className:"feedback",onClick:function(){return n(!0)}},u.createElement(k,{className:"feedback-icon"})," Feedback"),t&&u.createElement(p.Z,{open:!0,dimmer:"inverted",size:"small",onClose:function(){return H()},closeOnDimmerClick:!0,closeOnEscape:!0},0==O&&u.createElement(p.Z.Header,{className:"wizard-header"},"Let us Discuss Your Feedback"),u.createElement(p.Z.Content,{className:"content-container",scrolling:!0},z[O].content),0==O&&u.createElement(p.Z.Actions,null,u.createElement(d.Z,null,u.createElement(d.Z.Row,{column:1},u.createElement(d.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(c.Qj,{floated:"left",onClick:function(){return H()}},"Cancel")),u.createElement(d.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(c.KM,{type:"submit",floated:"right",onClick:function(){x()},loading:q,disabled:q},"Submit")))))))}}}]);