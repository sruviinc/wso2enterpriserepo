/*! For license information please see 18580.985b11a0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[18580],{74014:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(73909),a=r(78934),o=r(52983),s=r(14517),i=r(85411),l=r(21479),u=r(16630),c=r(28159),m=r(63832),d=r(79596);function f(e){return(0,d.Z)("MuiAlertTitle",e)}(0,m.Z)("MuiAlertTitle",["root"]);var p=r(97458);const g=["className"],h=(0,l.ZP)(c.Z,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2}))),v=o.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiAlertTitle"}),{className:o}=r,l=(0,a.Z)(r,g),c=r,m=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"]},f,t)})(c);return(0,p.jsx)(h,(0,n.Z)({gutterBottom:!0,component:"div",ownerState:c,ref:t,className:(0,s.Z)(m.root,o)},l))}))},18580:(e,t,r)=>{r.d(t,{O:()=>he});var n=r(1124),a=r(74014),o=r(31092),s=r(42139),i=r(27716),l=r(51036),u=r(31380),c=r(46439),m=r(61555),d=r(14603),f=r(90268),p=r(81816),g=r(53337),h=r(76004),v=r.n(h),b=r(52983),y=r(9202),E=r(39990),S=r(54221),w=r(94635),C=r(88171),I=r(16029),U=r(5873),k=r(74691),R=r(78768),A=r(99839),O=r(63793),z=r(68836),L=r(79232),N=r(33614),M=r(30640),T=r(96627),x=r(58900),_=r(99778),W=r(85585),P=r(26021),Z=r(89423),F=r(35797),j=r(53830),H=r(76016),D=r(5931),G=r(97860),K=r(73949);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B="ALL",q=function(e){var t=e.responseList,r=e.isLoading,n=e.bulkResponseSummary,s=e.hasError,i=e.successAlert,l=e["data-componentid"],u=V((0,b.useState)(!1),2),c=u[0],d=u[1],f=V((0,b.useState)(""),2),g=f[0],h=f[1],v=V((0,b.useState)(B),2),S=v[0],C=v[1],I=V((0,b.useState)([]),2),k=I[0],R=I[1],A=V((0,b.useState)(Z.tr.USER_CREATION),2),O=A[0],z=A[1],L=V((0,b.useState)(0),2),N=L[0],T=L[1],x=(0,y.$)().t,_=n.failedUserCreation+n.successUserCreation,W=n.failedUserAssignment+n.successUserAssignment,P=M.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,F=[{key:0,text:"All",value:B},{key:1,text:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableStatus.success"),value:Z.IC.SUCCESS},{key:2,text:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableStatus.failed"),value:Z.IC.FAILED}],j=[{key:0,text:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.responseOperationType.userCreation"),value:Z.tr.USER_CREATION},{key:1,text:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.responseOperationType.roleAssignment"),value:Z.tr.ROLE_ASSIGNMENT}];(0,b.useEffect)((function(){Q()}),[t]),(0,b.useEffect)((function(){J(),C(B),Q()}),[O]);var Q=function(){var e=t.filter((function(e){return e.operationType===O}));R(e)};(0,b.useEffect)((function(){!function(){var e=null==t?void 0:t.filter((function(e){return(null==e?void 0:e.operationType)===O}));if(g&&""!==g){var r=V(g.split(" "),3),n=r[1],a=r[2];e=e.filter((function(e){var t,r,o;if(S!==B&&e.statusCode!==S)return!1;switch(n){case"sw":return null===(t=e.resourceIdentifier)||void 0===t?void 0:t.startsWith(a);case"ew":return null===(r=e.resourceIdentifier)||void 0===r?void 0:r.endsWith(a);case"co":return null===(o=e.resourceIdentifier)||void 0===o?void 0:o.includes(a);case"eq":return e.resourceIdentifier===a;default:return!1}}))}S!==B&&(e=e.filter((function(e){return e.statusCode===S&&e.operationType===O}))),R(e)}()}),[g,S]);var q,Y,$,X,J=function(){d(!c),h("")},ee=function(e,t){var r=j.find((function(e){return e.key===t}));r&&(z(r.value),T(t))},te=O===Z.tr.USER_CREATION?[{key:0,text:x("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}]:[{key:1,text:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),value:"roleName"}];return b.createElement(b.Fragment,null,b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},r||s?null:0===n.failedUserCreation&&0===n.failedUserAssignment?null!=i?i:b.createElement(o.Z,{severity:"success","data-componentid":"".concat(l,"-success-alert")},b.createElement(a.Z,{"data-componentid":"".concat(l,"-success-alert-title")},x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.message")),x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.description")):b.createElement(o.Z,{severity:"error","data-componentid":"".concat(l,"-error-alert")},b.createElement(a.Z,{"data-componentid":"".concat(l,"-error-alert-title")},x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.message")),0!==n.failedUserCreation&&b.createElement("li",null,b.createElement(E.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.userCreation",tOptions:{failedUserCreationCount:n.failedUserCreation}},"Issues encountered in",b.createElement("b",null,n.failedUserCreation," user creations"),".")),0!==n.failedUserAssignment&&b.createElement("li",null,b.createElement(E.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.groupAssignment",tOptions:{failedUserAssignmentCount:n.failedUserAssignment}},"Issues encountered in",b.createElement("b",null,n.failedUserAssignment," group assignments"),". Users in the affected groups were created but not assigned. Please navigate to User Management section to review  and assign groups to the users."))))),b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},b.createElement(D.Z,{value:N,onChange:ee,"component-id":"".concat(l,"-operation-type-tab")},j.map((function(e){return b.createElement(H.Z,{key:e.key,label:b.createElement("div",{className:"beta-feature-tab-item"},b.createElement(m.Z,{sx:{fontWeight:500}},e.text)),"data-componentid":"".concat(l,"-").concat(e.value,"-tab")})}))))),b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},b.createElement(p.PS,{advancedSearch:b.createElement(M.nC,{onFilter:function(e){h(e),e||Q()},filterAttributeOptions:te,filterAttributePlaceholder:O===Z.tr.USER_CREATION?x("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"):x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),filterConditionsPlaceholder:x("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:x("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:O===Z.tr.USER_CREATION?x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByUsername"):x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByGroup"),defaultSearchAttribute:"resourceName",defaultSearchOperator:"co",triggerClearQuery:c,"data-testid":"".concat(l,"-advanced-search"),"data-componentid":"".concat(l,"-advanced-search")}),rightActionPanel:b.createElement(b.Fragment,null,b.createElement(U.Z,{"data-testid":"".concat(l,"-filter-status-dropdown"),"data-componentid":"".concat(l,"-filter-status-dropdown"),selection:!0,options:F,onChange:function(e,t){var r=t.value;C(r),d(!c)},value:S,disabled:(q=O===Z.tr.USER_CREATION,Y=O===Z.tr.ROLE_ASSIGNMENT,$=0===n.failedUserCreation||0===n.successUserCreation,X=0===n.failedUserAssignment||0===n.successUserAssignment,q&&$||Y&&X)})),showPagination:!1,showTopActionPanel:!0,totalPages:Math.ceil(_/P),totalListSize:_,isLoading:r,listItemLimit:M.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,"data-testid":"".concat(l,"-list-layout"),"data-componentid":"".concat(l,"-list-layout"),onPageChange:function(){return null},disableRightActionPanel:!1},b.createElement(m.Z,{variant:"body2",style:{textAlign:"right"}},O===Z.tr.USER_CREATION?x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.totalUserCreationCount")+" : "+_:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.totalUserAssignmentCount")+" : "+W),b.createElement(p.wQ,{className:"addon-field-wrapper",isLoading:r,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return b.createElement(G.Z,{as:"h6","data-componentid":"".concat(l,"-username-item-heading")},b.createElement(G.Z.Content,null,e.resourceIdentifier))},title:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return b.createElement(G.Z,{as:"h6","data-componentid":"".concat(l,"-status-item-heading")},b.createElement(G.Z.Content,null,b.createElement(K.Z,{"data-componentid":"".concat(l,"-bulk-label"),content:e.status,size:"small",color:e.statusCode===Z.IC.SUCCESS?"green":"red",className:"group-label"})))},title:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return b.createElement(G.Z,{as:"h6","data-componentid":"".concat(l,"-status-item-heading")},b.createElement(G.Z.Content,null,e.message))},title:x("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:k,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:b.createElement(p.$J,{"data-testid":"".concat(l,"-empty-search-result"),"data-componentid":"".concat(l,"-empty-search-result"),action:g?b.createElement(p.Qj,{onClick:J},x("console:manage.features.users.usersList.search.emptyResultPlaceholder.clearButton")):null,image:(0,M.jF)().emptySearch,imageSize:"tiny",title:x("console:manage.features.users.usersList.search.emptyResultPlaceholder.title"),subtitle:[x("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.0",{query:g||S}),x("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.1")]}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(l,"-data-table"),"data-componentid":"".concat(l,"-data-table"),loadingStateOptions:{count:M.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}})))))};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$.apply(this,arguments)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ie(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function ne(){ne=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new z(n||[]);return a(s,"_invoke",{value:k(e,r,i)}),s}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function b(){}function y(){}var E={};u(E,s,(function(){return this}));var S=Object.getPrototypeOf,w=S&&S(S(L([])));w&&w!==r&&n.call(w,s)&&(E=w);var C=y.prototype=v.prototype=Object.create(E);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function U(e,t){function r(a,o,s,i){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Y(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function k(t,r,n){var a=d;return function(o,s){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=R(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?g:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=g,n.method="throw",n.arg=u.arg)}}}function R(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Y(t)+" is not iterable")}return b.prototype=y,a(C,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},I(U.prototype),u(U.prototype,i,(function(){return this})),t.AsyncIterator=U,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new U(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},I(C),u(C,l,"Generator"),u(C,s,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function ae(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(u){return void r(u)}i.done?t(l):Promise.resolve(l).then(n,a)}function oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){ae(o,n,a,s,i,"next",e)}function i(e){ae(o,n,a,s,i,"throw",e)}s(void 0)}))}}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}q.defaultProps={isLoading:!1,responseList:[]};var ue="identity/askPassword",ce=new p.Wc(void 0,O.userConfig.bulkUserImportLimit.fileSize*p.Wc.KILOBYTE,O.userConfig.bulkUserImportLimit.userCount),me="Data validation error",de="TIMEOUT_ERROR",fe="addresses#home",pe="addresses",ge="bulkId",he=function(e){var t=e.closeWizard,r=e.userstore,h=e["data-componentid"],H=(0,y.$)().t,D=(0,T.z)().isSubOrganization,G=(0,S.I0)(),K=se((0,b.useState)(null),2),V=K[0],Q=K[1],B=se((0,b.useState)(),2),Y=B[0],X=B[1],ae=se((0,b.useState)(!1),2),ie=ae[0],le=ae[1],he=se((0,b.useState)(!1),2),be=he[0],ye=he[1],Ee=se((0,b.useState)(!1),2),Se=Ee[0],we=Ee[1],Ce=se((0,b.useState)([]),2),Ie=Ce[0],Ue=Ce[1],ke=se((0,b.useState)([]),2),Re=ke[0],Ae=ke[1],Oe=se((0,b.useState)(!1),2),ze=Oe[0],Le=Oe[1],Ne=se((0,b.useState)(!1),2),Me=Ne[0],Te=Ne[1],xe=se((0,b.useState)(ve),2),_e=xe[0],We=xe[1],Pe=se((0,b.useState)(ve),2),Ze=Pe[0],Fe=Pe[1],je=se((0,b.useState)(F.Wv.MANUAL),2),He=je[0],De=je[1],Ge=se((0,b.useState)(),2),Ke=Ge[0],Ve=Ge[1],Qe=se((0,b.useState)(!1),2),Be=Qe[0],qe=Qe[1],Ye=se((0,b.useState)(""),2),$e=Ye[0],Xe=Ye[1],Je=se((0,b.useState)(),2),et=Je[0],tt=Je[1],rt=se((0,p.IK)({"data-componentid":"".concat(h,"-alert")}),3),nt=rt[0],at=rt[1],ot=rt[2],st=se((0,p.IK)({"data-componentid":"".concat(h,"-manual-invite-alert")}),3),it=st[0],lt=st[1],ut=st[2],ct=se((0,b.useState)([]),2),mt=ct[0],dt=ct[1],ft=se((0,b.useState)(""),2),pt=ft[0],gt=ft[1],ht=se((0,b.useState)(!1),2),vt=ht[0],bt=ht[1],yt=se((0,b.useState)(!1),2),Et=yt[0],St=yt[1],wt=(0,W.W)().data,Ct=(0,j.t$)(wt),It="true"===(null==Ct?void 0:Ct.enableValidator),Ut=[],kt=(0,L.Ug)(pt,"members",null,!0),Rt=kt.data,At=kt.error;(0,b.useEffect)((function(){var e,t,r,n,a,o,s,i,l;At&&G((0,f.V_)({description:null!==(e=null!==(t=null==At||null===(r=At.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.description)&&void 0!==t?t:null==At||null===(a=At.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.detail)&&void 0!==e?e:H("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:d.QU.ERROR,message:null!==(s=null==At||null===(i=At.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)&&void 0!==s?s:H("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[At]),(0,b.useEffect)((function(){gt(r),Ot()}),[r]);var Ot=function(){we(!0);var e=[{key:-1,text:H("console:manage.features.users.userstores.userstoreOptions.primary"),value:"PRIMARY"}];(0,x.GN)(null).then((function(t){null==t||t.forEach(function(){var t=oe(ne().mark((function t(r,n){return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zt(r);case 2:if(!t.sent){t.next=4;break}e.push({key:n,text:r.name.toUpperCase(),value:r.name.toUpperCase()});case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),bt(!1),dt(e)})).catch((function(e){var t,r,n,a,o,s,i,l,u,c,m;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.description?G((0,f.V_)({description:null!==(n=null!==(a=null==e||null===(o=e.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.description)&&void 0!==a?a:null==e||null===(i=e.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.detail)&&void 0!==n?n:H("console:manage.features.userstores.notifications.fetchUserstores.error.description"),level:d.QU.ERROR,message:null!==(u=null==e||null===(c=e.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.message)&&void 0!==u?u:H("console:manage.features.userstores.notifications.fetchUserstores.error.message")})):(G((0,f.V_)({description:H("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:d.QU.ERROR,message:H("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")})),bt(!0))})).finally((function(){we(!1)}))},zt=function(e){var t=!1;return(0,x.YZ)(null==e?void 0:e.id).then((function(e){var r;return null==e||null===(r=e.properties)||void 0===r||r.some((function(e){if(e.name===A.UsersConstants.USER_STORE_PROPERTY_READ_ONLY)return t="false"===e.value,!0})),t})).catch((function(){return G((0,f.V_)({description:H("console:manage.features.users.notifications.fetchUserStores.genericError.description"),level:d.QU.ERROR,message:H("console:manage.features.users.notifications.fetchUserStores.genericError.message")})),!1}))},Lt=function(){return!(null!==O.userConfig&&void 0!==O.userConfig&&O.userConfig.enableBulkImportSecondaryUserStore&&!vt)||(mt?0===(null==mt?void 0:mt.length)||1===(null==mt?void 0:mt.length)&&(null===(e=mt[0])||void 0===e?void 0:e.value)===r:void 0);var e},Nt=function(){var e=oe(ne().mark((function e(){var t,r,n,a;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.hI)(pt);case 3:return n=e.sent,a=null==n||null===(t=n.data)||void 0===t||null===(r=t.Resources)||void 0===r?void 0:r.reduce((function(e,t){return e[null==t?void 0:t.displayName.toLowerCase()]={displayName:null==t?void 0:t.displayName,id:null==t?void 0:t.id,members:[]},e}),{}),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),le(!0),G((0,f.V_)({description:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.description"),level:d.QU.ERROR,message:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.message")}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,b.useEffect)((function(){De(It&&null!==O.userConfig&&void 0!==O.userConfig&&O.userConfig.enableUsernameValidation?F.Wv.META_FILE:F.Wv.MANUAL)}),[It]);var Mt,Tt=function(){var e=oe(ne().mark((function e(){var t,r,n,a,o,s,i,l,u,c,m,p,g;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we(!0),e.prev=1,e.next=4,(0,N.Pq)();case 4:t=e.sent,r=null==t?void 0:t.Resources,a=re(r);try{for(a.s();!(o=a.n()).done;)"User"===(null==(s=o.value)?void 0:s.id)&&(i=null==s?void 0:s.schemaExtensions,(n=i.map((function(e){return e.schema}))).push(null==s?void 0:s.schema))}catch(h){a.e(h)}finally{a.f()}return e.next=10,(0,N.jp)({});case 10:return l=e.sent,u=l.filter((function(e){return n.includes(e.dialectURI)})),e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(1),le(!0),G((0,f.V_)({description:(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.description)||H("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.description"),level:d.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(g=p.data)||void 0===g?void 0:g.message)||H("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.message")}));case 19:return e.prev=19,we(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),xt=function(){var e=oe(ne().mark((function e(){var t,r,n,a,o,s,i,l,u,c;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt();case 2:return t=e.sent,r=[],t.forEach((function(e){r.push((0,N.gR)(e.id,null))})),e.prev=5,we(!0),e.next=9,v().all(r);case 9:return n=e.sent,a=[],n.forEach((function(e){var t=e.map((function(e){return{attributeName:null==e?void 0:e.mappedLocalClaimURI.replace(Z._F.WSO2_LOCAL_CLAIM_DIALECT+"/","").toLowerCase(),mappedLocalClaimURI:null==e?void 0:e.mappedLocalClaimURI,mappedSCIMAttributeURI:null==e?void 0:e.claimURI,mappedSCIMClaimDialectURI:null==e?void 0:e.claimDialectURI}}));a.push.apply(a,te(t))})),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(5),le(!0),G((0,f.V_)({description:(null===(o=e.t0[0])||void 0===o||null===(s=o.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.description)||H("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.description"),level:d.QU.ERROR,message:(null===(l=e.t0[0])||void 0===l||null===(u=l.response)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.message)||H("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.message")}));case 19:return e.prev=19,we(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),_t=function(e){return 0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},Wt=function(e){return 0===e.length},Pt=function(e){return!e||""===e.trim()},Zt=function(e){at({description:H("console:manage.features.users.notifications.bulkImportUser.validation.".concat(e.descriptionKey),e.descriptionValues||{}),level:d.QU.ERROR,message:H("console:manage.features.users.notifications.bulkImportUser.validation.".concat(e.messageKey))})},Ft=function(e,t){var r,n=e.headers,a=e.items,o=Object.values(Z.NS),s=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.toLowerCase()===t.toLowerCase()}))}))}(n,o),i=(r=n.reduce((function(e,t){var r=t.toLowerCase();return e[r]=(e[r]||0)+1,e}),{}),Object.keys(r).filter((function(e){return r[e]>1}))),l=Object.values(Z.GU),u=function(e,t){return e.filter((function(e){return t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(n,l),c=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(n,t),m=function(e){return e.map((function(e,t){return Pt(e)?t:-1})).filter((function(e){return-1!==e}))}(n);return!!function(e){var t,r=re(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!n.check())return Zt(n.error),!1}}catch(a){r.e(a)}finally{r.f()}return!0}([{check:function(){return!(Wt(n)||Wt(a))},error:{descriptionKey:"emptyRowError.description",messageKey:"emptyRowError.message"}},{check:function(){return a.every((function(e){return e.length===n.length}))},error:{descriptionKey:"columnMismatchError.description",messageKey:"columnMismatchError.message"}},{check:function(){return 0===m.length},error:{descriptionKey:"emptyHeaderError.description",messageKey:"emptyHeaderError.message"}},{check:function(){return 0===s.length},error:{descriptionKey:"missingRequiredHeaderError.description",descriptionValues:{headers:_t(s)},messageKey:"missingRequiredHeaderError.message"}},{check:function(){return 0===u.length},error:{descriptionKey:"blockedHeaderError.description",descriptionValues:{headers:_t(u)},messageKey:"blockedHeaderError.message"}},{check:function(){return 0===i.length},error:{descriptionKey:"duplicateHeaderError.description",descriptionValues:{headers:_t(i)},messageKey:"duplicateHeaderError.message"}},{check:function(){return 0===c.length},error:{descriptionKey:"invalidHeaderError.description",descriptionValues:{headers:_t(c)},messageKey:"invalidHeaderError.message"}}])},jt=function(e,t){var r=e.map((function(e){return t.find((function(t){return e.toLowerCase()===t.attributeName.toLowerCase()}))})).filter(Boolean);return r.push(t.find((function(e){return e.attributeName.toLowerCase()===ue.toLowerCase()}))),r},Ht=function(e){le(!0),Zt({descriptionKey:"emptyDataField.description",descriptionValues:{dataField:e},messageKey:"emptyDataField.message"})},Dt=function(e,t,r){var n,a={},o=new Set([Z._F.SCIM2_USER_SCHEMA]),s=re(t);try{var i=function(){var t=n.value,s=t.mappedSCIMAttributeURI.replace("".concat(t.mappedSCIMClaimDialectURI,":"),""),i=e[r.indexOf(t.attributeName.toLowerCase())],l=s.includes("#");if(t.attributeName===Z._F.ROLES||t.attributeName===Z._F.GROUPS)return"continue";if(s===Z.NS.USERNAME){if(Pt(i))throw Ht(t.attributeName),new Error(me);return a[Z.NS.USERNAME]=pt&&pt.toLowerCase()!==_.pH.toLowerCase()?"".concat(pt,"/").concat(i):i,"continue"}if(t.attributeName===Z.NS.EMAILADDRESS){if(Pt(i))throw Ht(t.attributeName),new Error(me);if(!g.I.email(i))throw at({description:H("console:manage.features.user.forms.addUserForm.inputs.email.validations.invalid"),level:d.QU.ERROR,message:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage")}),new Error(me)}if(t.attributeName.toLowerCase()===ue.toLowerCase())return a[t.mappedSCIMClaimDialectURI]=J(J({},a[t.mappedSCIMClaimDialectURI]||{}),{},ee({},s,"true")),"continue";var u=Object.values(Z.DD).find((function(e){return s.includes(e)}));if(!l&&u){var c=s.includes(u+".")?{type:s.split(".")[1],value:i}:{primary:!0,value:i};return a[u]=a[u]||[],a[u].push(c),"continue"}if(s.includes(fe))return a[pe]=a[pe]||[],a[pe].push(ee({type:"home"},s.replace("".concat(fe,"."),""),i)),"continue";o.add(t.mappedSCIMClaimDialectURI);var m=l?s.split("#")[0]:s;if(!m.includes(".")){var f=t.mappedSCIMClaimDialectURI===Z._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return f[m]=l?(f[m]||[]).concat(i):i,"continue"}if(m.includes(".")){var p=se(m.split("."),2),h=p[0],v=p[1],b=t.mappedSCIMClaimDialectURI===Z._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return l?b[h]=(b[h]||[]).concat(ee({},v,i)):(b[h]||(b[h]={}),b[h][v]=i),"continue"}};for(s.s();!(n=s.n()).done;)i()}catch(l){s.e(l)}finally{s.f()}return J({schema:Array.from(o)},a)},Gt=function(e,t,r,n){var a=(0,R.Z)(),o="".concat(ge,":").concat(e[r.indexOf(Z.NS.USERNAME.toLowerCase())],":").concat(a),s=e[r.indexOf(Z.NS.USERNAME.toLowerCase())],i=J({},n);if(r.includes(Z._F.GROUPS)){var l=e[r.indexOf(Z._F.GROUPS)].split("|");te(new Set(l)).forEach((function(e){if(!Pt(e)){var t=pt&&pt.toLowerCase()!==_.pH.toLowerCase()?"".concat(pt,"/").concat(e):e;if(!(t.toLowerCase()in n))throw Zt({descriptionKey:"invalidGroup.description",descriptionValues:{group:t},messageKey:"invalidGroup.message"}),new Error(me);i=Kt(t,{display:s,value:"bulkId:".concat(o)},i)}}))}var u={bulkId:o,data:Dt(e,t,r),method:d.f2.POST,path:Z._F.SCIM_USER_PATH};return{newGroupMemberAssociations:i,userOperation:u}},Kt=function(e,t,r){var n=J({},r),a=n[e.toLowerCase()];return n[e.toLowerCase()]=J(J({},a),{},{members:Array.from(new Set([].concat(te(a.members),[t])))}),n},Vt=function(e){var t=(0,R.Z)();return Object.values(e).filter((function(e){return e.members.length>0})).map((function(e){return{bulkId:"".concat(ge,":").concat(e.displayName,":").concat(t),data:{Operations:[{op:"add",value:{members:e.members.map((function(e){return{display:e.display,value:e.value}}))}}]},method:d.f2.PATCH,path:"".concat(Z._F.SCIM_GROUP_PATH,"/").concat(e.id)}}))},Qt=function(){var e=oe(ne().mark((function e(t){var r,n,a,o,s,i,l,u,c,m;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Y.headers.map((function(e){return e.toLowerCase()})),n=Y.items,a=jt(r,t),e.next=5,Nt();case 5:for(o=e.sent,s=[],i=[],l=0;l<n.length;l++)u=n[l],c=Gt(u,a,r,o),s.push(c.userOperation),o=c.newGroupMemberAssociations;return r.includes(Z._F.GROUPS)&&(i=Vt(o)),m=s.concat(i),e.abrupt("return",{Operations:m,failOnErrors:0,schemas:[Z._F.BULK_REQUEST_SCHEMA]});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=[],t=[],n=(0,R.Z)();return null==Ke||Ke.map((function(a){var o=ee({emails:[{primary:!0,value:a}],schemas:["urn:ietf:params:scim:schemas:core:2.0:User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],userName:pt.toLowerCase()!==_.pH.toLowerCase()?"".concat(pt,"/").concat(a):a},r.toLowerCase()!==_.pH.toLowerCase()?Z._F.CUSTOMSCHEMA:Z._F.ENTERPRISESCHEMA,{askPassword:"true"}),s={bulkId:"bulkId:".concat(a,":").concat(n),data:o,method:d.f2.POST,path:Z._F.SCIM_USER_PATH},i={display:a,value:"bulkId:bulkId:".concat(a,":").concat(n)};t.push(i),e.push(s)})),null==et||et.map((function(r){var a={Operations:[{op:"add",value:{members:t}}]},o={bulkId:"bulkId:".concat(null==r?void 0:r.displayName,":").concat(n),data:a,method:d.f2.PATCH,path:"".concat(Z._F.SCIM_GROUP_PATH,"/").concat(null==r?void 0:r.id)};e.push(o)})),{Operations:e,failOnErrors:0,schemas:[Z._F.BULK_REQUEST_SCHEMA]}},qt=function(){var e=oe(ne().mark((function e(){var t,r,n;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Bt(),e.prev=1,e.next=4,(0,P.er)(t);case 4:if(r=e.sent,Te(!0),200===r.status){e.next=8;break}throw new Error("Failed to import users.");case 8:n=r.data.Operations.map(Xt),Ae(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),le(!0),lt({description:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.description"),level:d.QU.ERROR,message:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.message")});case 16:return e.prev=16,ye(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),Yt=function(){var e=oe(ne().mark((function e(){var t,r,n,a,o,s,i;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),e.prev=1,e.next=4,xt();case 4:if(t=e.sent,r=t.map((function(e){return e.attributeName})),Ft(Y,r)){e.next=10;break}return le(!0),ye(!1),e.abrupt("return");case 10:return e.next=12,Qt(t);case 12:return n=e.sent,Le(!0),a=(0,P.er)(n),o=new Promise((function(e,t){setTimeout((function(){return t(new Error(de))}),6e4)})),e.next=18,Promise.race([a,o]);case 18:if(200===(s=e.sent).status){e.next=21;break}throw new Error("Failed to import users.");case 21:i=s.data.Operations.map($t),Ue(i),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),le(!0),e.t0.message===de?(St(!0),at({description:H("console:manage.features.users.notifications.bulkImportUser.timeOut.description"),level:d.QU.WARNING,message:H("console:manage.features.users.notifications.bulkImportUser.timeOut.message")})):e.t0.message!==me&&at({description:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.description"),level:d.QU.ERROR,message:H("console:manage.features.users.notifications.bulkImportUser.submit.genericError.message")});case 29:return e.prev=29,we(!1),ye(!1),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[1,25,29,33]])})));return function(){return e.apply(this,arguments)}}(),$t=function(e){var t,r,n=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=Z.tr.USER_CREATION,s=H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),i={};(null==e?void 0:e.method)===d.f2.POST?i={201:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(r=e.response)&&void 0!==r&&r.includes(Z._F.USERNAME_REGEX_ERROR_CODE)?H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===d.f2.PATCH&&(o=Z.tr.ROLE_ASSIGNMENT,i={200:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:n}),400:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:n}),500:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:n})});We((function(t){var r=(null==e?void 0:e.method)===d.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,n=(null==e?void 0:e.method)===d.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,o=(null==e?void 0:e.method)!==d.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,s=(null==e?void 0:e.method)===d.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return J(J({},t),{},{failedUserAssignment:n,failedUserCreation:s,successUserAssignment:r,successUserCreation:o})}));var l=Z.IC.FAILED;return 201!==a&&202!==a&&200!==a||(l=Z.IC.SUCCESS),{message:i[a]||s,operationType:o,resourceIdentifier:n,status:Jt(a),statusCode:l}},Xt=function(e){var t,r,n=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=Z.tr.USER_CREATION,s=H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),i={};(null==e?void 0:e.method)===d.f2.POST?i={201:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(r=e.response)&&void 0!==r&&r.includes(Z._F.USERNAME_REGEX_ERROR_CODE)?H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===d.f2.PATCH&&(o=Z.tr.ROLE_ASSIGNMENT,i={200:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:n}),400:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:n}),500:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:n})});Fe((function(t){var r=(null==e?void 0:e.method)===d.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,n=(null==e?void 0:e.method)===d.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,o=(null==e?void 0:e.method)!==d.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,s=(null==e?void 0:e.method)===d.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return J(J({},t),{},{failedUserAssignment:n,failedUserCreation:s,successUserAssignment:r,successUserCreation:o})}));var l=Z.IC.FAILED;return 201!==a&&202!==a&&200!==a||(l=Z.IC.SUCCESS),{message:i[a]||s,operationType:o,resourceIdentifier:n,status:Jt(a),statusCode:l}},Jt=function(e){return H(201===e||200===e?"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableStatus.success":202===e?"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableStatus.warning":"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.tableStatus.failed")},er=function(){return b.createElement(I.Z.Field,{required:!0},b.createElement(u.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"spacing-bottom","data-componentid":"".concat(h,"-userstore-label")},H("console:manage.features.user.forms.addUserForm.inputs.domain.label")),b.createElement(U.Z,{className:"mt-2",fluid:!0,selection:!0,labeled:!0,options:mt,loading:!1,"data-testid":"".concat(h,"-userstore-dropdown"),"data-componentid":"".concat(h,"-userstore-dropdown"),name:"userstore",disabled:!1,readOnly:!1,value:pt,onChange:function(e,t){gt(t.value.toString())},tabIndex:1,maxLength:60}))},tr=function(){return M.m8.push(M.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",z.Q.SCIM))};return b.createElement(M.wv,{"data-testid":h,"data-componentid":h,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},b.createElement(M.wv.MainPanel,null,b.createElement(M.wv.Header,{className:"wizard-header"},H("console:manage.features.user.modals.bulkImportUserWizard.title"),b.createElement(p.X6,{as:"h6"},H("console:manage.features.user.modals.bulkImportUserWizard.subTitle"))),b.createElement(M.wv.Content,{className:"content-container"},b.createElement(w.Z,null,b.createElement(b.Fragment,null,b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,null,b.createElement(p.v0,{icon:"mail",content:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.inviteEmailInfo"),hideDefaultIcon:!0})))),b.createElement(w.Z.Row,null,b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},b.createElement(C.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(F.Wv).map((function(e,t){return b.createElement(b.Fragment,null,b.createElement(p.GI,{trigger:b.createElement("div",{className:"inline-button"},b.createElement(C.Z,{disabled:It&&e===F.Wv.MANUAL&&(null===O.userConfig||void 0===O.userConfig?void 0:O.userConfig.enableUsernameValidation),"data-componentid":"".concat(h,"-").concat(e,"-tab-option"),key:t,active:He===e,className:"multiple-users-config-mode-wizard-tab",content:j.QH.resolveMultipleInvitesDisplayName(e),onClick:function(t){t.preventDefault(),De(e)}})),content:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.disabledHint"),size:"mini",wide:!0,disabled:e===F.Wv.META_FILE||!It||!(null!==O.userConfig&&void 0!==O.userConfig&&O.userConfig.enableUsernameValidation),"data-componentid":"".concat(h,"-disabled-hint")}))}))))),He==F.Wv.MANUAL?b.createElement(b.Fragment,null,it&&b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},ut)),Me?b.createElement(b.Fragment,null,it&&b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},ut)),b.createElement(q,{isLoading:be,"data-componentid":"".concat(h,"-manual-response-list"),hasError:ie,responseList:Re,bulkResponseSummary:Ze,successAlert:b.createElement(o.Z,{severity:"success","data-componentid":"".concat(h,"-success-alert")},b.createElement(a.Z,{"data-componentid":"".concat(h,"-success-alert-title")},H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.message")),H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.description"))})):b.createElement(b.Fragment,null,!Lt()&&b.createElement(w.Z.Row,{columns:1,className:"mb-0 pb-0"},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},er())),b.createElement(n.Z,{size:"small",limitTags:O.userConfig.bulkUserImportLimit.inviteEmails,fullWidth:!0,multiple:!0,id:"tags-filled",options:Ut.map((function(e){return e})),defaultValue:[],freeSolo:!0,renderTags:function(e,t){return e.map((function(e,r){return b.createElement(i.Z,$({key:r,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:r})))}))},renderInput:function(e){return b.createElement(b.Fragment,null,b.createElement(u.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(h,"-emails-label")},H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsLabel")),b.createElement(c.Z,$({id:"tags-filled",margin:"normal",error:Be,helperText:Be&&$e,InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsPlaceholder"),"data-componentid":"".concat(h,"-email-input")})))},onChange:function(e,t){var r;Ve(t),r=t,g.I.email(r[r.length-1])||(qe(!0),Xe(H("console:manage.features.users.guestUsers.fields.username.validations.regExViolation")),r.pop())},onInputChange:function(){qe(!1)}}),b.createElement(p.kW,null,H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),b.createElement(n.Z,{size:"small",multiple:!0,fullWidth:!0,disablePortal:!0,id:"combo-box-demo",options:null!==(Mt=null==Rt?void 0:Rt.Resources)&&void 0!==Mt?Mt:[],getOptionLabel:function(e){return null==e?void 0:e.displayName},renderOption:function(e,t){return b.createElement(s.Z,$({component:"li"},e),b.createElement(m.Z,{sx:{fontWeight:500}},null==t?void 0:t.displayName))},renderInput:function(e){return b.createElement(b.Fragment,null,b.createElement(u.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(h,"-roles-label")},H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsLabel")),b.createElement(c.Z,$({id:"tags-filled",margin:"normal",InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsPlaceholder"),"data-componentid":"".concat(h,"-roles-input")})))},onChange:function(e,t){tt(t)},renderTags:function(e,t){return e.map((function(e,r){return b.createElement(i.Z,$({key:r,size:"small",className:"oxygen-chip-beta",label:b.createElement("label",null,null==e?void 0:e.displayName)},t({index:r})))}))}}))):He===F.Wv.META_FILE?ze?b.createElement(b.Fragment,null,nt&&b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},ot)),!Et&&b.createElement(q,{isLoading:be,"data-componentid":"".concat(h,"-response-list"),hasError:ie,responseList:Ie,bulkResponseSummary:_e})):b.createElement(b.Fragment,null,nt&&b.createElement(w.Z.Row,{columns:1},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},ot)),!Se&&!Lt()&&b.createElement(w.Z.Row,{columns:1,className:"mb-0 pb-0"},b.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16},er())),b.createElement(w.Z.Row,{columns:1,className:"pt-0"},b.createElement(w.Z.Column,{mobile:16},b.createElement(p.GB,{key:1,fileStrategy:ce,file:V,onChange:function(e){Q(e.file),X(e.serialized),at(null),le(!1)},uploadButtonText:"Upload CSV File",dropzoneText:"Drag and drop a CSV file here.","data-testid":"".concat(h,"-form-wizard-csv-file-picker"),"data-componentid":"".concat(h,"-form-wizard-csv-file-picker"),icon:(0,M._5)().uploadPlaceholder,placeholderIcon:b.createElement(k.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:!1,hidePasteOption:!0}))),b.createElement(p.kW,null,H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.fileBased.hint"))):void 0)),b.createElement(M.wv.Actions,null,b.createElement(w.Z,null,He==F.Wv.MANUAL?b.createElement(w.Z.Row,{column:1},b.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},b.createElement(p.Qj,{"data-testid":"".concat(h,"-close-button"),"data-componentid":"".concat(h,"-close-button"),floated:"left",onClick:function(){t(),Te(!1)},disabled:be},H("common:close"))),!Me||be?b.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},b.createElement(p.KM,{"data-testid":"".concat(h,"-invite-button"),"data-componentid":"".concat(h,"-invite-button"),floated:"right",onClick:qt,loading:be,disabled:Se||be||ie||!Ke||0===(null==Ke?void 0:Ke.length)},H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.primaryButton"))):null):b.createElement(w.Z.Row,{column:1},b.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},b.createElement(p.Qj,{"data-testid":"".concat(h,"-cancel-button"),"data-componentid":"".concat(h,"-cancel-button"),floated:"left",onClick:function(){t(),Le(!1)},disabled:be},H("common:close"))),!ze||be?b.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},b.createElement(p.KM,{"data-testid":"".concat(h,"-finish-button"),"data-componentid":"".concat(h,"-finish-button"),floated:"right",onClick:Yt,loading:be,disabled:Se||be||ie||!V},H("console:manage.features.user.modals.bulkImportUserWizard.buttons.import"))):null)))),b.createElement(M.wv.SidePanel,null,b.createElement(M.wv.Header,{className:"wizard-header help-panel-header muted"},b.createElement("div",{className:"help-panel-header-text"},H("console:develop.features.applications.wizards.minimalAppCreationWizard.help.heading"))),b.createElement(M.wv.Content,null,b.createElement(b.Suspense,{fallback:b.createElement(p.pO,null)},b.createElement(p.X6,{as:"h5"},H("console:manage.features.user.modals.bulkImportUserWizard.sidePanel.manual")),b.createElement("p",null,H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),b.createElement(l.Z,null),b.createElement(p.X6,{as:"h5"},H("console:manage.features.user.modals.bulkImportUserWizard.sidePanel.fileBased")),b.createElement("p",null,H("console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.fileBased.hint")),b.createElement(p.X6,{as:"h6"},H("console:manage.features.user.modals.bulkImportUserWizard.sidePanel.fileFormatTitle")),b.createElement("p",null,D()?b.createElement(E.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to",b.createElement("b",null,"local attribute")," names."):b.createElement(E.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to local ",b.createElement(p.rU,{onClick:tr},"attribute names"),".")),b.createElement("p",null," ",H("console:manage.features.user.modals.bulkImportUserWizard.sidePanel.fileFormatSampleHeading")),b.createElement("p",null,b.createElement("code",null,"username,givenname,emailaddress,groups",b.createElement("br",null),"user1,john,john@test.com,group1|group2",b.createElement("br",null),"user2,jake,jake@test.com,group2",b.createElement("br",null),"user3,jane,jane@test.com,group1",b.createElement("br",null)))))))},ve={failedUserAssignment:0,failedUserCreation:0,successUserAssignment:0,successUserCreation:0}},76016:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(64062),a=r(97458),o=r(29460),s=r(14517),i=r(52983),l=r(22854);const u=(0,i.forwardRef)(((e,t)=>{const{className:r}=e,i=(0,n.__rest)(e,["className"]),l=(0,s.Z)("oxygen-tab",r);return(0,a.jsx)(o.Z,Object.assign({className:l,ref:t},i))}));u.displayName=(0,l.I)("Tab"),u.muiName="Tab";const c=u;var m,d,f;m='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-tab {\n  font-size: 1rem;\n  font-weight: 400; }\n  .oxygen-tab:not(.Mui-selected) {\n    color: var(--oxygen-palette-text-primary); }\n',d=document.getElementsByTagName("head")[0],(f=document.createElement("style")).setAttribute("type","text/css"),f.appendChild(document.createTextNode(m)),d.appendChild(f)},5931:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(64062),a=r(97458),o=r(94676),s=r(14517),i=r(52983),l=r(22854),u=r(42139),c=r(51036);const m="Tabs",d=(0,i.forwardRef)(((e,t)=>{const{className:r}=e,i=(0,n.__rest)(e,["className"]),l=(0,s.Z)("oxygen-tabs",r);return(0,a.jsxs)(u.Z,Object.assign({className:l},{children:[(0,a.jsx)(o.Z,Object.assign({ref:t},i)),(0,a.jsx)(c.Z,{})]}))}));d.displayName=(0,l.I)(m),d.muiName=m;const f=d;var p,g,h;p='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-tabs {\n  /** Add Styles */ }\n',g=document.getElementsByTagName("head")[0],(h=document.createElement("style")).setAttribute("type","text/css"),h.appendChild(document.createTextNode(p)),g.appendChild(h)}}]);