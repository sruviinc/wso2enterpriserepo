"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[57202],{57202:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var o=t(83374),r=t(14603),a=t(90268),i=t(59206),l=t(81816),c=t(97032),s=t(67127),u=t(52983),d=t(9202),m=t(54221),p=t(30640),f=t(43234),v=t(55175);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){C(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function C(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==g(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===g(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,a,i,l=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=a.call(t)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var E=function(e){var n=e["data-componentid"],t=(0,d.$)().t,g=(0,m.I0)(),b="governance-connectors-attribute-verification-form",O="Attribute Verification Settings",E=c.v.USER_CLAIM_UPDATE_CONNECTOR_ID,N=c.v.OTHER_SETTINGS_CONNECTOR_CATEGORY_ID,U="UserClaimUpdate.Email.VerificationCode.ExpiryTime",S="UserClaimUpdate.Email.EnableNotification",P="UserClaimUpdate.Email.EnableVerification",L="UserClaimUpdate.MobileNumber.EnableVerification",T="UserClaimUpdate.MobileNumber.EnableVerificationByPrivilegedUser",w=["UserClaimUpdate.OTP.UseLowercaseCharactersInOTP","UserClaimUpdate.OTP.UseNumbersInOTP","UserClaimUpdate.OTP.UseUppercaseCharactersInOTP","UserClaimUpdate.MobileNumber.VerificationCode.ExpiryTime","UserClaimUpdate.OTP.OTPLength","UserClaimUpdate.OTP.SendOTPInEmail"],j=h((0,u.useState)(void 0),2),I=j[0],_=j[1],R=h((0,u.useState)(void 0),2),V=R[0],F=R[1],A=h((0,u.useState)(void 0),2),k=A[0],x=A[1],D=h((0,u.useState)(!1),2),M=D[0],Q=D[1],B=h((0,u.useState)(!1),2),$=B[0],q=B[1],G=h((0,u.useState)(!1),2),H=G[0],J=G[1],z=(0,m.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),X=(0,m.v9)((function(e){return e.config.ui.features})),Y=(0,u.useMemo)((function(){var e,n;return!(0,o.hasRequiredScopes)(null==X?void 0:X.governanceConnectors,null==X||null===(e=X.governanceConnectors)||void 0===e||null===(n=e.scopes)||void 0===n?void 0:n.update,z)}),[X,z]);(0,u.useEffect)((function(){Q(!0),I||(Z(),Q(!1))}),[I]),(0,u.useEffect)((function(){H&&(W(V),Q(!1))}),[V]);var Z=function(){(0,f.PP)(N,E).then((function(e){_(e),K(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?g((0,a.V_)({description:t("console:manage.features.governanceConnectors.notifications.getConnector.error.description",{description:e.response.data.description}),level:r.QU.ERROR,message:t("console:manage.features.governanceConnectors.notifications.getConnector.error.message")})):g((0,a.V_)({description:t("console:manage.features.governanceConnectors.notifications.getConnector.genericError.description"),level:r.QU.ERROR,message:t("console:manage.features.governanceConnectors.notifications.getConnector.genericError.message")}))})).finally((function(){J(!0),Q(!1)}))},K=function(e){var n;if(!(0,s.Z)(null==e?void 0:e.properties)){var t=null,o=null;null===(n=e.properties)||void 0===n||n.map((function(e){var n;w.includes(e.name)||(t=y(y({},t),{},C({},e.name,JSON.parse(e.value))),o=y(y({},o),{},C({},e.name,(C(n={},"description",e.description),C(n,"displayName",e.displayName),n))))})),F(t),x(o)}},W=function(e){var n={operation:"UPDATE",properties:[]};for(var o in e)w.includes(o)||n.properties.push({name:o,value:e[o]});q(!0),(0,f.u9)(n,N,E).then((function(){g((0,a.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.success.description"),level:r.QU.SUCCESS,message:t("console:manage.features.governanceConnectors.notifications.updateConnector.success.message")}))})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?g((0,a.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.error.description"),level:r.QU.ERROR,message:t("console:manage.features.governanceConnectors.notifications.updateConnector.error.message")})):g((0,a.V_)({description:t("console:manage.features.governanceConnectors.notifications.updateConnector.genericError.description"),level:r.QU.ERROR,message:t("console:manage.features.governanceConnectors.notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){q(!1),Q(!1)}))},ee=function(){var e,o,r,a,l,c,s,d,m,p,f,g,h,E,N;return u.createElement(i.l0,{id:b,uncontrolledForm:!0,initialValues:V,onSubmit:function(e){return n=function(e){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n=y(y({},n),{},C({},v.e.decodeConnectorPropertyName(t),e[t])));return n}(e),void F((function(e){return y(y({},e),n)}));var n}},u.createElement(i.gN.Checkbox,{ariaLabel:v.e.resolveFieldLabel(O,P,null==k||null===(e=k[P])||void 0===e?void 0:e.displayName),name:v.e.encodeConnectorPropertyName(P),className:"toggle",label:v.e.resolveFieldLabel(O,P,null==k||null===(o=k[P])||void 0===o?void 0:o.displayName),defaultValue:1==(null==V?void 0:V[P]),readOnly:Y,disabled:!1,width:16,"data-componentid":"".concat(n,"-enable-auto-login"),hint:v.e.resolveFieldLabel(O,P,null==k||null===(r=k[P])||void 0===r?void 0:r.description)}),u.createElement(i.gN.Input,{ariaLabel:v.e.resolveFieldLabel(O,U,null==k||null===(a=k[U])||void 0===a?void 0:a.displayName),inputType:"number",name:v.e.encodeConnectorPropertyName(U),type:"number",width:16,required:!0,labelPosition:"top",minLength:3,maxLength:100,readOnly:Y,initialValue:null==V?void 0:V[U],"data-componentId":"".concat(n,"-otp-length"),label:v.e.resolveFieldLabel(O,U,null==k||null===(l=k[U])||void 0===l?void 0:l.displayName),disabled:!1,hint:v.e.resolveFieldLabel(O,U,null==k||null===(c=k[U])||void 0===c?void 0:c.description)}),u.createElement(i.gN.Checkbox,{ariaLabel:v.e.resolveFieldLabel(O,S,null==k||null===(s=k[S])||void 0===s?void 0:s.displayName),name:v.e.encodeConnectorPropertyName(S),className:"toggle",label:v.e.resolveFieldLabel(O,S,null==k||null===(d=k[S])||void 0===d?void 0:d.displayName),defaultValue:1==(null==V?void 0:V[S]),readOnly:Y,disabled:!1,width:16,"data-componentid":"".concat(n,"-enable-auto-login"),hint:v.e.resolveFieldLabel(O,S,null==k||null===(m=k[S])||void 0===m?void 0:m.description)}),u.createElement(i.gN.Checkbox,{ariaLabel:v.e.resolveFieldLabel(O,L,null==k||null===(p=k[L])||void 0===p?void 0:p.displayName),name:v.e.encodeConnectorPropertyName(L),className:"toggle",label:v.e.resolveFieldLabel(O,L,null==k||null===(f=k[L])||void 0===f?void 0:f.displayName),defaultValue:1==(null==V?void 0:V[L]),readOnly:Y,disabled:!1,width:16,"data-componentid":"".concat(n,"-enable-auto-login"),hint:v.e.resolveFieldLabel(O,L,null==k||null===(g=k[L])||void 0===g?void 0:g.description)}),u.createElement(i.gN.Checkbox,{ariaLabel:v.e.resolveFieldLabel(O,T,null==k||null===(h=k[T])||void 0===h?void 0:h.displayName),name:v.e.encodeConnectorPropertyName(T),className:"toggle",label:v.e.resolveFieldLabel(O,T,null==k||null===(E=k[T])||void 0===E?void 0:E.displayName),defaultValue:1==(null==V?void 0:V[T]),readOnly:Y,disabled:!1,width:16,"data-componentid":"".concat(n,"-enable-auto-login"),hint:v.e.resolveFieldLabel(O,T,null==k||null===(N=k[T])||void 0===N?void 0:N.description)}),u.createElement(i.gN.Button,{form:b,size:"small",buttonType:"primary_btn",ariaLabel:"Self registration update button",name:"update-button","data-componentId":"".concat(n,"-submit-button"),disabled:$,loading:$,label:t("common:update"),hidden:Y}))};return u.createElement(l.Xg,{title:t("console:manage.features.governanceConnectors.connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName"),pageTitle:t("console:manage.features.governanceConnectors.connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName"),description:t("console:manage.features.governanceConnectors.connectorSubHeading",{name:t("console:manage.features.governanceConnectors.connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName")}),"data-componentid":"".concat(n,"-page-layout"),backButton:{onClick:function(){p.m8.push(p.$x.getPaths().get("CLAIM_DIALECTS"))},text:t("console:manage.features.claims.local.pageLayout.local.back")}},u.createElement(l.pJ,{className:"very padded"},!M&&V?u.createElement(ee,null):u.createElement(l.pO,null)))};E.defaultProps={"data-componentid":"attribute-verification-settings-form"};const N=E}}]);