"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1025,78095],{1025:(e,t,n)=>{n.r(t),n.d(t,{PermissionAPIResource:()=>P});var r=n(31092),o=n(89101),i=n(13318),s=n(81816),a=n(30640),c=n(52983),l=n(9202),u=n(39990),d=n(74691),m=n(14969),p=n(16892),f=n(78095);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t=e.apiResourceData,n=e.isAPIResourceDataLoading,g=e.isSubmitting,P=e.isReadOnly,A=e.isManagedByChoreo,v=e.handleUpdateAPIResource,R=e["data-componentid"],y=(0,l.$)().t,b=h((0,c.useState)([]),2),E=b[0],I=b[1],w=h((0,c.useState)([]),2),x=w[0],C=w[1],S=h((0,c.useState)(null),2),k=S[0],L=S[1],O=h((0,i.cC)(),2),j=O[0],N=O[1],Z=h((0,c.useState)(""),2),z=Z[0],M=Z[1];(0,c.useEffect)((function(){t&&(I(t.permissions),C(t.permissions))}),[t,k]);return c.createElement(c.Fragment,null,A&&c.createElement(r.Z,{severity:"warning"},c.createElement(u.c,{i18nKey:"extensions:develop.apiResource.tabs.choreoApiEditWarning"},"Updating this API resource will create unforeseen errors as this is an API resource managed by Choreo. ",c.createElement("b",null,"Proceed with caution."))),c.createElement(s.pJ,{className:"padded",loading:n},c.createElement(o.Z,{container:!0,className:"mb-1"},c.createElement(o.Z,{xs:8},c.createElement(s.X6,{as:"h4",compact:!0},y("extensions:develop.apiResource.tabs.permissions.title")),c.createElement(s.X6,{as:"h6",color:"grey",subHeading:!0,className:"mb-5"},y("extensions:develop.apiResource.tabs.permissions.subTitle"))),c.createElement(o.Z,{xs:4,alignItems:"flex-end"},0!==(null==E?void 0:E.length)&&c.createElement(s.KM,{"data-componentid":"".concat(R,"-add-permission-button"),size:"medium",floated:"right",onClick:function(){return N()}},c.createElement(d.Z,{name:"add"}),y("extensions:develop.apiResource.tabs.permissions.button")))),c.createElement(s.PS,{showTopActionPanel:!n&&(null==E?void 0:E.length)>0,showPagination:!1,onPageChange:function(){return null},totalPages:100,"data-testid":"".concat(R,"-list-layout"),totalListSize:null==E?void 0:E.length,leftActionPanel:c.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default"},c.createElement(m.Z,{className:"advanced-search with-add-on","data-testid":"".concat(R,"-list-search-input"),icon:"search",iconPosition:"left",onChange:function(e){var t=e.target.value;M(t),t.length>0?C(E.filter((function(e){return e.displayName.toLowerCase().includes(t.toLowerCase())}))):C(E)},placeholder:y("extensions:develop.apiResource.tabs.permissions.search"),floated:"right",size:"small",value:z}))},E?c.createElement(p.PermissionListAPIResource,{isAPIResourceDataLoading:n,isReadOnly:P,permissionList:E,serachedPermissionList:x,isSubmitting:g,clearSearchPermission:function(){M(""),C(E)},setRemovePermission:L,setTriggerAddAPIResourcePermissionModal:N}):c.createElement(s.$J,{subtitle:[y("extensions:develop.apiResource.apiResourceError.subtitles.0"),y("extensions:develop.apiResource.apiResourceError.subtitles.1")],title:y("extensions:develop.apiResource.apiResourceError.title"),image:(0,a.jF)().genericError,imageSize:"tiny"}))),j&&c.createElement(f.AddAPIResourcePermission,{closeWizard:function(){return N()},handleUpdateAPIResource:v}),k&&c.createElement(s.cV,{primaryActionLoading:g,open:null!==k,onClose:function(){return L(null)},type:"negative",assertionHint:y("extensions:develop.apiResource.confirmations.deleteAPIResourcePermission.assertionHint"),assertionType:"checkbox",primaryAction:y("common:confirm"),secondaryAction:y("common:cancel"),onSecondaryActionClick:function(){return L(null)},onPrimaryActionClick:function(){v({deletedPermissions:[k.id]},(function(){return L(null)}))},"data-testid":"".concat(R,"-delete-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(s.cV.Header,{"data-testid":"".concat(R,"-delete-confirmation-modal-header")},y("extensions:develop.apiResource.confirmations.deleteAPIResourcePermission.header")),c.createElement(s.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(R,"-delete-confirmation-modal-message")},y("extensions:develop.apiResource.confirmations.deleteAPIResourcePermission.message")),c.createElement(s.cV.Content,{"data-testid":"".concat(R,"-delete-confirmation-modal-content")},y("extensions:develop.apiResource.confirmations.deleteAPIResourcePermission.content"))))};P.defaultProps={"data-componentid":"permission-api-resource"}},78095:(e,t,n)=>{n.r(t),n.d(t,{AddAPIResource:()=>r.AddAPIResource,AddAPIResourcePermission:()=>o.AddAPIResourcePermission});var r=n(41723),o=n(972)}}]);