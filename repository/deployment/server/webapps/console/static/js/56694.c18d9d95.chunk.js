"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[56694,38594,38685,16242,64964],{38594:(e,t,n)=>{n.r(t),n.d(t,{InviteeRoleSelection:()=>i.InviteeRoleSelection});var i=n(38685)},38685:(e,t,n)=>{n.r(t),n.d(t,{InviteeRoleSelection:()=>p});var i=n(81816),a=n(39345),o=n(67127),l=n(52983),r=n(9202),s=n(21921),c=n(94635),u=n(49238);function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return r}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=function(e){var t=e.invitee,n=e.showSelectionModal,f=e.handleSelectionModalClose,v=e.handleInviteeRolesUpdate,p=e["data-testid"],g=(0,r.$)().t,h=m((0,l.useState)(void 0),2),E=h[0],y=h[1],S=m((0,l.useState)(void 0),2),I=S[0],b=S[1],C=m((0,l.useState)(void 0),2),R=C[0],P=C[1],A=m((0,l.useState)(!1),2),w=(A[0],A[1]),U=m((0,l.useState)(!1),2),k=U[0],T=U[1];(0,l.useEffect)((function(){var e=[];w(!0),(0,u.Sd)(null).then((function(t){t.data.Resources.map((function(t){"system"!==t.displayName&&"everyone"!==t.displayName&&e.push(t)})),y(e),b(e)})).finally((function(){w(!1)}))}),[]),(0,l.useEffect)((function(){null!=t&&t.roles&&P(t.roles)}),[null==t?void 0:t.roles]),(0,l.useEffect)((function(){if(k){var e=d(null==t?void 0:t.roles);E.map((function(t){e.push(t.displayName)})),P(e)}else P([])}),[k]);return l.createElement(s.Z,{open:n,size:"small",className:"user-roles attribute-modal",dimmer:"blurring"},l.createElement(s.Z.Header,null,g("console:manage.features.invite.rolesUpdateModal.header"),l.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},g("console:manage.features.invite.rolesUpdateModal.subHeader"))),l.createElement(s.Z.Content,null,l.createElement(i.IX,{selectionComponent:!0,searchPlaceholder:g("console:manage.features.invite.rolesUpdateModal.searchPlaceholder"),handleHeaderCheckboxChange:function(){T(!k)},isHeaderCheckboxChecked:k,handleUnelectedListSearch:function(e,t){var n=t.value;if((0,o.Z)(n))b(E);else{var i=[],l=new RegExp((0,a.Z)(n),"i");E&&(null==E||E.map((function(e){var t,n=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?e.displayName.split("/")[1]:e.displayName;l.test(n)&&(i.push(e),b(i))})))}},"data-testid":"".concat(p,"-transfer-component")},l.createElement(i.Jv,{selectionComponent:!0,isListEmpty:!((null==E?void 0:E.length)>0),listType:"unselected","data-testid":"".concat(p,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:g("console:manage.features.transferList.list.emptyPlaceholders.default")},null==I?void 0:I.map((function(e,t){return l.createElement(i.qT,{handleItemChange:function(){return t=null==e?void 0:e.displayName,n=d(R),null!=R&&R.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void P(n);var t,n},key:t,listItem:null==e?void 0:e.displayName,listItemId:null==e?void 0:e.id,listItemIndex:null==e?void 0:e.id,isItemChecked:null==R?void 0:R.includes(null==e?void 0:e.displayName),showSecondaryActions:!1,showListSubItem:!0,listSubItem:null,"data-testid":"".concat(p,"-unselected-transfer-list-item-").concat(t)})}))))),l.createElement(s.Z.Actions,null,l.createElement(c.Z,null,l.createElement(c.Z.Row,{column:2},l.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.Qj,{"data-testid":"group-mgt-update-roles-modal-cancel-button",floated:"left",onClick:f},g("common:cancel"))),l.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.KM,{"data-testid":"group-mgt-update-roles-modal-save-button",floated:"right",onClick:function(){return v(null==t?void 0:t.id,R)}},g("common:save")))))))}},16242:(e,t,n)=>{n.r(t),n.d(t,{InviteUserStatus:()=>i.InviteUserStatus,InviteValidationStatus:()=>i.InviteValidationStatus});var i=n(64964)},64964:(e,t,n)=>{var i,a;n.r(t),n.d(t,{InviteUserStatus:()=>i,InviteValidationStatus:()=>a}),function(e){e.PENDING="PENDING",e.EXPIRED="EXPIRED"}(i||(i={})),function(e){e.ACCEPTED="ACCEPTED",e.EXPIRED="EXPIRED",e.REJECTED="REJECTED"}(a||(a={}))},71817:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var i=n(14603),a=n(90268),o=n(81816),l=n(52983),r=n(9202),s=n(39990),c=n(54221),u=n(73949),d=n(74691),m=n(5873),f=n(97860),v=n(30640),p=n(78304),g=n(38594),h=n(16242);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var S=function(e){var t=e["data-testid"],n=e.setUpdateInviteList,y=e.totalAdminDevList,S=e.setShowWizard,I=e.isUserListRequestLoading,b=(0,r.$)().t,C=(0,c.I0)(),R=E((0,l.useState)(""),2),P=R[0],A=R[1],w=E((0,l.useState)(""),2),U=w[0],k=w[1],T=E((0,l.useState)(0),2),V=T[0],O=T[1],M=E((0,l.useState)(v.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),x=M[0],D=(M[1],E((0,l.useState)(!1),2)),N=D[0],Z=D[1],_=E((0,l.useState)(void 0),2),L=_[0],j=_[1],Q=E((0,l.useState)(!1),2),H=Q[0],X=Q[1],z=E((0,l.useState)(void 0),2),J=z[0],$=z[1],q=E((0,l.useState)(void 0),2),B=q[0],F=q[1],G=E((0,l.useState)(!1),2),K=G[0],W=G[1],Y=E((0,l.useState)([]),2),ee=Y[0],te=Y[1],ne=E((0,l.useState)([]),2),ie=ne[0],ae=ne[1],oe=E((0,l.useState)([]),2),le=oe[0],re=oe[1],se=E((0,l.useState)([]),2),ce=se[0],ue=se[1],de=E((0,l.useState)(!0),2),me=de[0],fe=de[1],ve=E((0,l.useState)(!1),2),pe=ve[0],ge=ve[1],he=E((0,l.useState)(!1),2),Ee=he[0],ye=he[1],Se=E((0,l.useState)(!1),2),Ie=Se[0],be=Se[1];(0,l.useEffect)((function(){me&&(n(!0),fe(!1))}),[me]),(0,l.useEffect)((function(){te(y)}),[y]),(0,l.useEffect)((function(){pe&&(Ce(),ge(!1))}),[pe]),(0,l.useEffect)((function(){var e=ee;e.length>x?(e=e.slice(V,V+x),ae(e),ye(e.length===x),be(V>1)):(ae(e),ye(!1))}),[ee,V]);var Ce=function(){A("")};(0,l.useEffect)((function(){if(O(0),"all"===U)le.length>0?te(le):te(y),ue([]);else{var e=y;le.length>0&&(e=le),e=e.filter((function(e){return e.status.includes(U)})),te(e),ue(e)}}),[U]),(0,l.useEffect)((function(){if(O(0),"email co "===P||""===P)return ce.length>0?te(ce):te(y),void re([]);if(P.includes("email co ")){var e=y;ce.length>0&&(e=ce);var t=P.split("co ")[1];e=e.filter((function(e){return e.email.includes(t)})),te(e),re(e)}else if(P.includes("status")){var n=y;ce.length>0&&(n=ce);var i=P.split("co ")[1];n=n.filter((function(e){return e.status.includes(i)})),te(n),re(n)}}),[P]);var Re=function(e){!function(e){(0,p.deleteInvite)(e).then((function(){C((0,a.V_)({description:b("console:manage.features.invite.notifications.deleteInvite.success.description"),level:i.QU.SUCCESS,message:b("console:manage.features.invite.notifications.deleteInvite.success.message")})),n(!0)})).catch((function(e){var t,n,o,l,r,s,c,u,d,m,f;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?C((0,a.V_)({description:null!==(o=null!==(l=null==e||null===(r=e.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==l?l:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==o?o:b("console:manage.features.invite.notifications.deleteInvite.error.description"),level:i.QU.ERROR,message:null!==(d=null==e||null===(m=e.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)&&void 0!==d?d:b("console:manage.features.invite.notifications.deleteInvite.error.message")})):C((0,a.V_)({description:b("console:manage.features.invite.notifications.deleteInvite.genericError.description"),level:i.QU.ERROR,message:b("console:manage.features.invite.notifications.deleteInvite.genericError.message")}))}))}(e),Z(!1),fe(!0)},Pe=function(e){!function(e){(0,p.resendInvite)(e).then((function(e){C((0,a.V_)({description:b("console:manage.features.invite.notifications.resendInvite.success.description"),level:i.QU.SUCCESS,message:b("console:manage.features.invite.notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,o,l,r,s,c,u,d,m,f;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?C((0,a.V_)({description:null!==(o=null!==(l=null==e||null===(r=e.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==l?l:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==o?o:b("console:manage.features.invite.notifications.resendInvite.error.description"),level:i.QU.ERROR,message:null!==(d=null==e||null===(m=e.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)&&void 0!==d?d:b("console:manage.features.invite.notifications.resendInvite.error.message")})):C((0,a.V_)({description:b("console:manage.features.invite.notifications.resendInvite.genericError.description"),level:i.QU.ERROR,message:b("console:manage.features.invite.notifications.resendInvite.genericError.message")}))}))}(e),X(!1),fe(!0)},Ae=function(){return P?l.createElement(o.$J,{action:l.createElement(o.Qj,{onClick:Ce},b("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,v.jF)().emptySearch,imageSize:"tiny",title:b("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.title"),subtitle:[b("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.subTitle.0",{query:P}),b("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===y.length?l.createElement(o.$J,{action:l.createElement(o.KM,{onClick:function(){return S(!0)}},l.createElement(d.Z,{name:"add"}),b("console:manage.features.invite.placeholder.emptyResultPlaceholder.addButton")),image:(0,v.jF)().newList,imageSize:"tiny",title:b("console:manage.features.invite.placeholder.emptyResultPlaceholder.title"),subtitle:[b("console:manage.features.invite.placeholder.emptyResultPlaceholder.subTitle.0"),b("console:manage.features.invite.placeholder.emptyResultPlaceholder.subTitle.1"),b("console:manage.features.invite.placeholder.emptyResultPlaceholder.subTitle.2")]}):null},we=function(e,t){var o={roles:t};(0,p.updateInvite)(e,o).then((function(){C((0,a.V_)({description:b("console:manage.features.invite.notifications.updateInvite.success.description"),level:i.QU.SUCCESS,message:b("console:manage.features.invite.notifications.updateInvite.success.message")})),n(!0)})).catch((function(e){var t,n,o,l,r,s,c,u,d,m,f;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?C((0,a.V_)({description:null!==(o=null!==(l=null==e||null===(r=e.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==l?l:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==o?o:b("console:manage.features.invite.notifications.updateInvite.error.description"),level:i.QU.ERROR,message:null!==(d=null==e||null===(m=e.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)&&void 0!==d?d:b("console:manage.features.invite.notifications.updateInvite.error.message")})):C((0,a.V_)({description:b("console:manage.features.invite.notifications.updateInvite.genericError.description"),level:i.QU.ERROR,message:b("console:manage.features.invite.notifications.updateInvite.genericError.message")}))})),W(!1)};return l.createElement(o.PS,{advancedSearch:l.createElement(v.nC,{onFilter:function(e){A(e)},filterAttributeOptions:[{key:1,text:b("console:manage.features.invite.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:b("console:manage.features.invite.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:b("console:manage.features.invite.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:b("console:manage.features.invite.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:b("console:manage.features.invite.advancedSearch.placeholder"),defaultSearchAttribute:"email",defaultSearchOperator:"co",triggerClearQuery:pe}),currentListSize:ie.length,listItemLimit:x,onPageChange:function(e,t){O((t.activePage-1)*x)},showPagination:y.length>x,showTopActionPanel:I||!(y.length<5),totalPages:Math.ceil(y.length/x),totalListSize:y.length,paginationOptions:{disableNextButton:!Ee,disablePreviousButton:!Ie},rightActionPanel:l.createElement(m.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:[{key:"all",text:"All",value:"all"},{key:h.InviteUserStatus.EXPIRED,text:"Expired",value:h.InviteUserStatus.EXPIRED},{key:h.InviteUserStatus.PENDING,text:"Pending",value:h.InviteUserStatus.PENDING}],onChange:function(e,t){k(t.value.toString())},defaultValue:"all"})},l.createElement(o.wQ,{padded:!0,isLoading:I,loadingStateOptions:{count:5,imageType:"square"},placeholders:Ae(),actions:[{icon:function(){return"briefcase"},onClick:function(e,t){F(t),W(!0)},popupText:function(){return"roles"},renderer:"semantic-icon"},{icon:function(){return"redo alternate"},onClick:function(e,t){$(t),X(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{icon:function(){return"trash alternate"},onClick:function(e,t){j(t),Z(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:ie,columns:[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return l.createElement(f.Z,{as:"h6",image:!0},l.createElement(o.JT,{image:l.createElement(o.Xo,{name:e.email,size:"mini","data-testid":"".concat(t,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(t,"-item-image")}),l.createElement(f.Z.Content,null,e.email,l.createElement(f.Z.Subheader,null,e.roles.toString())))},title:"Email"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",textAlign:"right",key:1,render:function(e){return(t=e.status)===h.InviteUserStatus.EXPIRED?l.createElement(u.Z,{color:"red"},t):l.createElement(u.Z,{color:"blue"},t);var t},title:"Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:"Actions"}],onRowClick:null,showHeader:!1,transparent:!I&&null!==Ae()}),l.createElement(g.InviteeRoleSelection,{invitee:B,showSelectionModal:K,handleSelectionModalClose:function(){return W(!1)},handleInviteeRolesUpdate:we}),N&&l.createElement(o.cV,{"data-testid":"".concat(t,"-confirmation-modal"),onClose:function(){return Z(!1)},type:"negative",open:N,assertion:L.email,assertionHint:l.createElement("p",null,l.createElement(s.c,{i18nKey:"console:manage.features.invite.confirmationModal.deleteInvite.assertionHint",tOptions:{name:L.email}},"Please type ",l.createElement("strong",null,L.email)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return Z(!1)},onPrimaryActionClick:function(){return Re(L.id)},closeOnDimmerClick:!1},l.createElement(o.cV.Header,{"data-testid":"".concat(t,"-confirmation-modal-header")},b("console:manage.features.invite.confirmationModal.deleteInvite.header")),l.createElement(o.cV.Message,{"data-testid":"".concat(t,"-confirmation-modal-message"),attached:!0,warning:!0},b("console:manage.features.invite.confirmationModal.deleteInvite.message")),l.createElement(o.cV.Content,{"data-testid":"".concat(t,"-confirmation-modal-content")},b("console:manage.features.invite.confirmationModal.deleteInvite.content"))),H&&l.createElement(o.cV,{"data-testid":"".concat(t,"-confirmation-modal"),onClose:function(){return X(!1)},type:"warning",open:H,assertion:J.email,assertionHint:l.createElement("p",null,l.createElement(s.c,{i18nKey:"console:manage.features.invite.confirmationModal.resendInvite.assertionHint",tOptions:{name:J.email}},"Please type ",l.createElement("strong",null,J.email)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return X(!1)},onPrimaryActionClick:function(){return Pe(J.id)},closeOnDimmerClick:!1},l.createElement(o.cV.Header,{"data-testid":"".concat(t,"-confirmation-modal-header")},b("console:manage.features.invite.confirmationModal.resendInvite.header")),l.createElement(o.cV.Message,{"data-testid":"".concat(t,"-confirmation-modal-message"),attached:!0,warning:!0},b("console:manage.features.invite.confirmationModal.resendInvite.message")),l.createElement(o.cV.Content,{"data-testid":"".concat(t,"-confirmation-modal-content")},b("console:manage.features.invite.confirmationModal.resendInvite.content"))))};S.defaultProps={"data-testid":"users"};const I=S}}]);