"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[88311,62199],{62199:(e,n,t)=>{t.r(n),t.d(n,{AddTenantWizard:()=>a.AddTenantWizard});var a=t(84464)},88311:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var a=t(93967),r=t(40904),i=t(7955),s=t(14603),o=t(90268),c=t(81816),l=t(52983),d=t(9202),u=t(54221),m=t(17616),f=t(73030),g=t(5873),p=t(28141),h=t(94635),E=t(74691),v=t(75917),T=t(14969),y=t(85850),k=t(60611),N=t(65211),A=t(5163),b=t(96627),w=t(30458),Z=t(4196),S=t(17589),C=t(62199);function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i,s,o=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(a=i.call(t)).done)&&(o.push(a.value),o.length!==n);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw r}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}const O=function(e){var n=e.dropdownTrigger,t=e.disable,x=(0,d.$)().t,O=(0,u.I0)(),z=(0,u.v9)((function(e){return e.auth.username})),R=(0,u.v9)((function(e){return e.auth.email})),_=(0,u.v9)((function(e){return e.auth.tenantDomain})),D=(0,u.v9)((function(e){return e.auth.isPrivilegedUser})),U=I((0,l.useState)(void 0),2),G=U[0],B=U[1],F=I((0,l.useState)(void 0),2),L=F[0],M=F[1],P=I((0,l.useState)(!1),2),j=P[0],$=P[1],H=I((0,l.useState)(!1),2),Q=H[0],V=H[1],W=I((0,l.useState)(!1),2),q=W[0],K=W[1],J=I((0,l.useState)([]),2),X=J[0],Y=J[1],ee=I((0,l.useState)(""),2),ne=ee[0],te=ee[1],ae=I((0,l.useState)(!1),2),re=ae[0],ie=ae[1],se=I((0,l.useState)(""),2),oe=se[0],ce=se[1],le=I((0,l.useState)(""),2),de=le[0],ue=le[1],me=I((0,l.useState)(!1),2),fe=me[0],ge=me[1],pe=(0,b.z)().organizationType,he=(0,i.Ac)(w.FeatureGateConstants.SAAS_FEATURES_IDENTIFIER),Ee=window.AppUtils.getConfig().organizationName;(0,l.useEffect)((function(){D||he===i.iK.DISABLED||(0,Z.getAssociatedTenants)().then((function(e){var n="",t=[];e.associatedTenants.forEach((function(e){e.default&&(n=e.domain),t.push(e.domain)})),O((0,o.ip)(e.associatedTenants)),Y(t),te(n)})).catch((function(e){O((0,o.V_)({description:(null==e?void 0:e.description)&&x("extensions:manage.features.tenant.notifications.getTenants.description"),level:s.QU.ERROR,message:(null==e?void 0:e.description)&&x("extensions:manage.features.tenant.notifications.getTenants.message")}))})),Te()}),[]),(0,l.useEffect)((function(){var e={associatedTenants:X,currentTenant:_,defaultTenant:ne,username:R||z};if(Array.isArray(e.associatedTenants)){var n=e.associatedTenants.indexOf(e.currentTenant);-1!=n&&e.associatedTenants.splice(n,1),M(e.associatedTenants)}B(e)}),[X,ne,_]);var ve=function(e){e.stopPropagation()},Te=function(){a.AsgardeoSPAClient.getInstance().getDecodedIDToken().then((function(e){ce(null==e?void 0:e.org_id),ue(null==e?void 0:e.org_name)})).catch((function(){O((0,o.V_)({description:x("extensions:console.organizationInfo.notifications.getConfiguration.error.description"),level:s.QU.ERROR,message:x("extensions:console.organizationInfo.notifications.getConfiguration.error.message")}))}))},ye=[{icon:l.createElement(r.pO,{fill:"black"}),name:x("extensions:manage.features.tenant.header.tenantAddHeader"),onClick:function(){$(!0)}}],ke=function(){V(!1),G&&Array.isArray(G.associatedTenants)&&M(G.associatedTenants)},Ne=l.createElement(f.Z.Item,{compact:!0,className:"contained-trigger-wrapper",key:"tenant-dropdown"},l.createElement(g.Z,{onClick:function(){t||ie(!re)},open:re,onBlur:function(){ie(!1),ke()},item:!0,floating:!0,className:"tenant-dropdown","data-testid":"tenant-dropdown","data-componentid":"tenant-dropdown",trigger:n},Q?l.createElement(g.Z.Menu,{onClick:ve},l.createElement(m.Z.Group,{className:"current-tenant",unstackable:!0},l.createElement(m.Z,{className:"header back-button-wrapper",key:"current-tenant"},l.createElement("div",{className:"link pointing",onClick:ke},l.createElement(E.Z,{className:"link-icon spaced-right",name:"arrow left"}),x("extensions:manage.features.tenant.header.backButton")))),l.createElement(m.Z.Group,{className:"search-bar tenant"},l.createElement("div",{className:"tenant-dropdown-search\n                                    advanced-search-wrapper aligned-left fill-default"},l.createElement(T.Z,{className:"advanced-search with-add-on","data-testid":"list-search-input",icon:"search",iconPosition:"left",onChange:function(e){var n,t=e.target.value;G&&Array.isArray(G.associatedTenants)&&(n=t.length>0?G.associatedTenants.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())})):G.associatedTenants,M(n))},placeholder:x("extensions:manage.features.tenant.header.tenantSearch.placeholder"),floated:"right",size:"small"}))),G?function(){if(Array.isArray(L))return l.createElement(m.Z.Group,{className:"tenants-list",unstackable:!0,"data-testid":"associated-tenants-container"},L.length>0?L.map((function(e,n){return e!==G.currentTenant?l.createElement(m.Z,{className:"tenant-account",key:n,onClick:function(){return(0,S.handleTenantSwitch)(e)}},l.createElement(c.dn,{icon:(0,y.FL)().tenantIcon,inline:!0,size:"x22",fill:"white",className:"mt-3"}),l.createElement(m.Z.Content,{className:"tenant-list-item-content"},l.createElement("div",{className:"name","data-testid":"".concat(e,"-tenant-la-name")},e))):null})):l.createElement(m.Z,{className:"empty-list"},l.createElement(m.Z.Content,{verticalAlign:"middle"},l.createElement(m.Z.Description,null,l.createElement("div",{className:"message"},x("extensions:manage.features.tenant.header.tenantSearch.emptyResultMessage"))))))}():null):l.createElement(g.Z.Menu,{className:"tenant-dropdown-menu",onClick:ve},l.createElement(m.Z.Group,{className:"current-tenant",unstackable:!0},l.createElement(m.Z,{className:Ee?"header sub-org-header":"header",key:"current-tenant"},l.createElement(c.dn,{transparent:!0,inline:!0,className:"associated-tenant-icon","data-testid":"associated-tenant-icon",icon:(0,y.FL)().tenantIcon,size:"mini"}),l.createElement(m.Z.Content,{verticalAlign:"middle"},l.createElement(m.Z.Description,null,l.createElement("div",{className:"name ellipsis","data-testid":"tenant-dropdown-display-name"},pe===A.$B.SUBORGANIZATION?de:G?G.currentTenant:l.createElement(p.Z,null,l.createElement(p.Z.Line,null))),l.createElement(h.Z,{className:"middle aligned content"},l.createElement(h.Z.Row,null,l.createElement("div",{className:"org-id ellipsis","data-componentId":"tenant-dropdown-organization-id"},oe),l.createElement("div",null,l.createElement(c.zx,{basic:!0,inline:!0,"data-componentid":"org-id-copy-icon","data-inverted":!0,"data-tooltip":x(fe?"extensions:manage.features.tenant.header.copied":"extensions:manage.features.tenant.header.copyOrganizationId"),icon:l.createElement(E.Z,{name:"copy outline",color:"grey"}),className:"org-id-copy-btn",onClick:function(){return ge(!0),navigator.clipboard.writeText(oe),void setTimeout((function(){ge(!1)}),1e3)}})))))))),!Ee&&l.createElement(g.Z.Header,{className:"tenant-dropdown-links-category-header",content:"Primary organizations"}),!Ee&&pe!==A.$B.SUBORGANIZATION&&G?G.currentTenant===G.defaultTenant?l.createElement(g.Z.Item,{className:"action-panel","data-testid":"default-button",disabled:!0},l.createElement(r.Rd,{fill:"black"}),x("extensions:manage.features.tenant.header.makeDefaultOrganization")):l.createElement(g.Z.Item,{className:"action-panel",onClick:function(){return e=G.currentTenant,K(!0),void(0,Z.makeTenantDefault)(e).then((function(n){200===n.status&&(O((0,o.V_)({description:x("extensions:manage.features.tenant.notifications.defaultTenant.success.description",{tenantName:e}),level:s.QU.SUCCESS,message:x("extensions:manage.features.tenant.notifications.defaultTenant.success.message")})),te(e))})).catch((function(){O((0,o.V_)({description:x("extensions:manage.features.tenant.notifications.defaultTenant.genericError.description"),level:s.QU.ERROR,message:x("extensions:manage.features.tenant.notifications.defaultTenant.genericError.message")}))})).finally((function(){K(!1),ie(!re)}));var e},"data-testid":"default-button",disabled:q},l.createElement(r.Rd,{fill:"black"}),x("extensions:manage.features.tenant.header.makeDefaultOrganization")):null,!Ee&&G&&G.associatedTenants&&Array.isArray(G.associatedTenants)&&G.associatedTenants.length>0?l.createElement(g.Z.Item,{className:"action-panel",onClick:function(){return V(!0)},"data-testid":"tenant-switch-menu"},l.createElement(r.M2,{fill:"black"}),x("extensions:manage.features.tenant.header.tenantSwitchHeader")):null,!Ee&&ye&&ye.length&&ye.length>0?ye.map((function(e,n){var t=e.content,a=e.icon,r=e.name,i=e.onClick;return l.createElement(g.Z.Item,{key:n,className:"action-panel",onClick:i,"data-testid":"tenant-dropdown-link-".concat(r.replace(" ","-"))},a,r,t)})):null,!Ee&&l.createElement(l.Fragment,null,l.createElement(v.Z,null),l.createElement(g.Z.Item,{className:"action-panel",onClick:function(){N.m.push(k.$x.getPaths().get("ORGANIZATIONS")),ie(!re)},"data-componentid":"sub-organizations-menu"},l.createElement(r.qW,{fill:"black"}),"Organizations")))));return l.createElement(l.Fragment,null,!D&&j?l.createElement(C.AddTenantWizard,{openModal:j,onCloseHandler:function(){return $(!1)}}):null,!D&&Ne)}}}]);