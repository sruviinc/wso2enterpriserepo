"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[20708,14761],{14761:(e,n,t)=>{t.r(n),t.d(n,{getAssociationType:()=>r});var r=function(e,n){var t="";if((null==e?void 0:e.length)>0){var r=e.find((function(e){return e.domain===n}));r&&(t=r.associationType)}return t}},20708:(e,n,t)=>{t.d(n,{I:()=>J});var r=t(7955),a=t(96433),o=t(83374),s=t(14603),i=t(90268),l=t(83831),c=t(13318),u=t(81816),d=t(67127),m=t(6901),f=t.n(m),p=t(52983),g=t(9202),v=t(54221),C=t(94635),E=t(16029),S=t(14969),b=t(88171),h=t(75917),y=t(39990),A=t(74691),_=t(21921),U=t(30640),R=t(80617),O=t(77499),M=t(85585),I=t(26021),w=t(53830);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function T(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==N(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===N(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,n)||D(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){if(e){if("string"==typeof e)return L(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?L(e,n):void 0}}function L(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Z=function(e){var n=e.onAlertFired,t=e.user,r=e.handleUserUpdate,i=e.openChangePasswordModal,l=e.handleCloseChangePasswordModal,d=e.connectorProperties,m=e.handleForcePasswordResetTrigger,f=e["data-testid"],E=(0,g.$)().t,S=P((0,p.useState)(void 0),2),b=S[0],h=S[1],N=P((0,p.useState)(""),2),L=N[0],Z=N[1],k=P((0,p.useState)(!1),2),H=k[0],x=k[1],Y=P((0,p.useState)(!0),2),q=Y[0],F=Y[1],V=P((0,p.useState)(void 0),2),j=V[0],G=V[1],W=P((0,p.useState)(""),2),Q=W[0],B=W[1],K=P((0,p.useState)("setPassword"),2),$=K[0],z=K[1],X=P((0,c.cC)(),2),J=X[0],ee=X[1],ne=P((0,p.useState)(void 0),2),te=ne[0],re=ne[1],ae=P((0,p.useState)("false"),2),oe=ae[0],se=ae[1],ie=P((0,p.useState)(!1),2),le=ie[0],ce=ie[1],ue=(0,v.v9)((function(e){return e.config.ui.features})),de=(0,v.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),me=(0,M.W)().data;(0,p.useEffect)((function(){me&&h((0,w.P_)(me))}),[me]),(0,p.useEffect)((function(){var e;x(!0);var n=null==t||null===(e=t.userName)||void 0===e?void 0:e.split("/"),r=(null==n?void 0:n.length)>1?n[0]:O.pH;U.w3.getUserStoreRegEx(r,O.y8.PasswordRegEx).then((function(e){Z(e)})).finally((function(){x(!1)}))}),[t]),(0,p.useEffect)((function(){d&&void 0===te&&re(d)}),[d]),(0,p.useEffect)((function(){if(te&&Array.isArray(te)&&(null==te?void 0:te.length)>0){var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=D(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(i)throw o}}}}(te);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.name===R.vH.RECOVERY_LINK_PASSWORD_RESET&&"true"===t.value&&se(t.value)}}catch(r){n.e(r)}finally{n.f()}}}),[te]);var fe=function(){B(""),z("setPassword"),G(void 0)},pe=[{label:E("console:manage.features.user.modals.changePasswordModal.passwordOptions.setPassword"),value:"setPassword"},{label:E("console:manage.features.user.modals.changePasswordModal.passwordOptions.forceReset"),value:"forceReset"}],ge=function(){U.m8.push(U.$x.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",R.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID).replace(":connectorId",R.vH.ADMIN_FORCED_PASSWORD_RESET))},ve=function(e){F(e)},Ce=function(e){var n,t=null==e||null===(n=e.get("newPassword"))||void 0===n?void 0:n.toString();B(t)},Ee=function(e,n){var t;(function(e){return b?q:U.w3.validateInputAgainstRegEx(e,L)})(e)||(n.isValid=!1,null==n||null===(t=n.errorMessages)||void 0===t||t.push(E(b?"extensions:manage.features.user.addUser.validation.error.passwordValidation":"extensions:manage.features.user.addUser.validation.password")))},Se=function(){return p.createElement(p.Fragment,null,p.createElement(C.Z.Row,null,p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(c.gN,{"data-testid":"user-mgt-edit-user-form-newPassword-input",className:"addon-field-wrapper",hidePassword:E("common:hidePassword"),label:E("console:manage.features.user.forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:E("console:manage.features.user.forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:E("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:E("common:showPassword"),type:"password",value:"",listen:Ce,loading:H,validation:Ee}),b&&p.createElement(u.Tj,{password:Q,minLength:Number(null==b?void 0:b.minLength),maxLength:Number(null==b?void 0:b.maxLength),minNumbers:Number(null==b?void 0:b.minNumbers),minUpperCase:Number(null==b?void 0:b.minUpperCaseCharacters),minLowerCase:Number(null==b?void 0:b.minLowerCaseCharacters),minSpecialChr:Number(null==b?void 0:b.minSpecialCharacters),minUniqueChr:Number(null==b?void 0:b.minUniqueCharacters),maxConsecutiveChr:Number(null==b?void 0:b.maxConsecutiveCharacters),onPasswordValidate:ve,translations:{case:Number(null==b?void 0:b.minUpperCaseCharacters)>0&&Number(null==b?void 0:b.minLowerCaseCharacters)>0?E("extensions:manage.features.user.addUser.validation.passwordCase",{minLowerCase:null==b?void 0:b.minLowerCaseCharacters,minUpperCase:null==b?void 0:b.minUpperCaseCharacters}):Number(null==b?void 0:b.minUpperCaseCharacters)>0?E("extensions:manage.features.user.addUser.validation.upperCase",{minUpperCase:null==b?void 0:b.minUpperCaseCharacters}):E("extensions:manage.features.user.addUser.validation.lowerCase",{minLowerCase:null==b?void 0:b.minLowerCaseCharacters}),consecutiveChr:E("extensions:manage.features.user.addUser.validation.consecutiveCharacters",{repeatedChr:null==b?void 0:b.maxConsecutiveCharacters}),length:E("extensions:manage.features.user.addUser.validation.passwordLength",{max:null==b?void 0:b.maxLength,min:null==b?void 0:b.minLength}),numbers:E("extensions:manage.features.user.addUser.validation.passwordNumeric",{min:null==b?void 0:b.minNumbers}),specialChr:E("extensions:manage.features.user.addUser.validation.specialCharacter",{specialChr:null==b?void 0:b.minSpecialCharacters}),uniqueChr:E("extensions:manage.features.user.addUser.validation.uniqueCharacters",{uniqueChr:null==b?void 0:b.minUniqueCharacters})}}))),p.createElement(C.Z.Row,null,p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(c.gN,{"data-testid":"user-mgt-edit-user-form-confirmPassword-input",className:"addon-field-wrapper",hidePassword:E("common:hidePassword"),label:E("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.label"),name:"confirmPassword",placeholder:E("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.placeholder"),required:!0,requiredErrorMessage:E("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.empty"),showPassword:E("common:showPassword"),type:"password",value:"",listen:function(e){(null==e?void 0:e.get("newPassword"))!==(null==e?void 0:e.get("confirmPassword"))||""===(null==e?void 0:e.get("confirmPassword"))?void 0!==j&&G(void 0):G(!0)},validation:function(e,n,t){var r;(null==t?void 0:t.get("newPassword"))!==e&&(n.isValid=!1,G(!1),null==n||null===(r=n.errorMessages)||void 0===r||r.push(E("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.mismatch")))}}),p.createElement("div",{className:"password-policy-description"},p.createElement(A.Z,{className:void 0===j?"circle thin":j?"check circle":"remove circle",color:void 0===j?"grey":j?"green":"red",inverted:!0}),p.createElement("p",null,E("extensions:manage.features.user.addUser.validation.confirmPassword"))))))},be=function(){return $&&"setPassword"===$?Se():function(e){return null==e?void 0:e.map((function(e,n){var t,r;if((null==e?void 0:e.name)===R.vH.RECOVERY_LINK_PASSWORD_RESET)return"true"===(null==e?void 0:e.value)?p.createElement(C.Z.Row,{key:n},p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(u.v0,{key:n,hideDefaultIcon:!0,icon:"mail",content:E("extensions:manage.users.editUserProfile.resetPassword.changePasswordModal.emailResetWarning")}))):p.createElement(C.Z.Row,{key:n},p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(u.v0,{hideDefaultIcon:!0,error:!0,key:n,content:p.createElement(p.Fragment,null,p.createElement(A.Z,{color:"red",name:"times circle"}),p.createElement(y.c,{i18nKey:"extensions:manage.users.editUserProfile.resetPassword.changePasswordModal.passwordResetConfigDisabled"},"Password reset via recovery email is not enabled. Please make sure to enable it from",(0,o.hasRequiredScopes)(null==ue?void 0:ue.loginAndRegistration,null==ue||null===(t=ue.loginAndRegistration)||void 0===t||null===(r=t.scopes)||void 0===r?void 0:r.feature,de)?p.createElement("a",{onClick:ge,className:"ml-1 external-link link pointing primary"},"Login and Registration"):"Login and Registration"," configurations"))})))}))}(te)};return p.createElement(_.Z,{"data-testid":f,open:i,size:"tiny"},p.createElement(_.Z.Header,null,E("console:manage.features.user.modals.changePasswordModal.header")),p.createElement(_.Z.Content,null,p.createElement(c.Es,{"data-testid":"".concat(f,"-form"),onSubmit:function(e){"setPassword"===$?function(e){var a={Operations:[{op:"replace",value:{password:e.get("newPassword").toString()}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};ce(!0),(0,I.gS)(t.id,a).then((function(){n({description:E("console:manage.features.user.profile.notifications.changeUserPassword.success.description"),level:s.QU.SUCCESS,message:E("console:manage.features.user.profile.notifications.changeUserPassword.success.message")}),l(),fe(),r(t.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?n({description:e.response.data.description,level:s.QU.ERROR,message:E("console:manage.features.user.profile.notifications.changeUserPassword.error.message")}):(n({description:E("console:manage.features.user.profile.notifications.changeUserPassword.genericError.description"),level:s.QU.ERROR,message:E("console:manage.features.user.profile.notifications.changeUserPassword.genericError.message")}),l(),fe())})).finally((function(){ce(!1)}))}(e):function(){if("false"!==oe){var e={Operations:[{op:"add",value:T({},a.Cb.SCIM2_ENT_USER_SCHEMA,{forcePasswordReset:!0})}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};ce(!0),(0,I.gS)(t.id,e).then((function(){n({description:E("console:manage.features.user.profile.notifications.forcePasswordReset.success.description"),level:s.QU.SUCCESS,message:E("console:manage.features.user.profile.notifications.forcePasswordReset.success.message")}),m(),fe(),l(),r(t.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?n({description:e.response.data.description,level:s.QU.ERROR,message:E("console:manage.features.user.profile.notifications.forcePasswordReset.error.message")}):(n({description:E("console:manage.features.user.profile.notifications.forcePasswordReset.genericError.description"),level:s.QU.ERROR,message:E("console:manage.features.user.profile.notifications.forcePasswordReset.genericError.message")}),fe(),l())})).finally((function(){ce(!1)}))}else n({description:E("console:manage.features.user.profile.notifications.noPasswordResetOptions.error.description"),level:s.QU.WARNING,message:E("console:manage.features.user.profile.notifications.noPasswordResetOptions.error.message")})}()},submitState:J},p.createElement(C.Z,null,(null==te?void 0:te.length)>1?p.createElement(p.Fragment,null,p.createElement(C.Z.Row,null,p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(c.gN,{"data-testid":"user-mgt-add-user-form-passwordOption-radio-button",type:"radio",label:E("console:manage.features.user.forms.addUserForm.buttons.radioButton.label"),name:"passwordOption",default:"setPassword",listen:function(e){z(e.get("passwordOption").toString())},children:pe,value:"setPassword",tabIndex:4,maxWidth:60,width:60}))),be(),p.createElement(C.Z.Row,null,p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(u.v0,{type:"warning",content:E("console:manage.features.user.modals.changePasswordModal.message")})))):p.createElement(p.Fragment,null,Se(),p.createElement(C.Z.Row,null,p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:14},p.createElement(u.v0,{type:"warning",content:E("console:manage.features.user.modals.changePasswordModal.message")}))))))),p.createElement(_.Z.Actions,null,p.createElement(C.Z,null,p.createElement(C.Z.Row,{column:1},p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:16},p.createElement(u.KM,{"data-testid":"".concat(f,"-save-button"),floated:"right",loading:le,disabled:le,onClick:function(){return ee()}},E("console:manage.features.user.modals.changePasswordModal.button")),p.createElement(u.Qj,{"data-testid":"".concat(f,"-cancel-button"),floated:"left",onClick:function(){l(),fe()}},E("common:cancel")))))))};Z.defaultProps={"data-testid":"user-mgt-change-password"};var k=t(91478),H=t(14761),x=t(99839),Y=t(17643),q=t(2653),F=t(54004),V=t(89423);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function G(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=z(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(i)throw o}}}}function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach((function(n){K(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function K(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==j(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===j(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,n)||z(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,n){if(e){if("string"==typeof e)return X(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,n):void 0}}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var J=function(e){var n,t,m=e.adminUsername,y=e.onAlertFired,A=e.user,_=e.handleUserUpdate,O=e.isReadOnly,M=e.allowDeleteOnly,w=e.featureConfig,N=e.connectorProperties,T=e.isReadOnlyUserStoresLoading,P=e.isReadOnlyUserStore,D=e.tenantAdmin,L=e.editUserDisclaimerMessage,j=e.adminUserType,Q=e.isUserManagedByParentOrg,z=e["data-testid"],X=(0,g.$)().t,J=(0,v.I0)(),ee=(0,v.v9)((function(e){return e.profile.profileSchemas})),ne=(0,v.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),te=(0,v.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.providedUsername})),re=(0,v.v9)((function(e){return e.auth.isPrivilegedUser})),ae=(0,v.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.deployment)||void 0===t?void 0:t.tenant})),oe=(0,v.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.tenants})),se=(0,v.v9)((function(e){return e.global.supportedI18nLanguages})),ie=$((0,p.useState)(new Map),2),le=ie[0],ce=ie[1],ue=$((0,p.useState)(),2),de=ue[0],me=ue[1],fe=$((0,p.useState)(!1),2),pe=fe[0],ge=fe[1],ve=$((0,p.useState)(!1),2),Ce=ve[0],Ee=ve[1],Se=$((0,p.useState)(void 0),2),be=Se[0],he=Se[1],ye=$((0,p.useState)(void 0),2),Ae=ye[0],_e=ye[1],Ue=$((0,p.useState)(!1),2),Re=Ue[0],Oe=Ue[1],Me=$((0,p.useState)(!1),2),Ie=Me[0],we=Me[1],Ne=$((0,p.useState)({accountDisable:"false",accountLock:"false",forcePasswordReset:"false"}),2),Te=Ne[0],Pe=Ne[1],De=$((0,p.useState)(!1),2),Le=De[0],Ze=De[1],ke=$((0,p.useState)(!1),2),He=ke[0],xe=ke[1],Ye=$((0,p.useState)(!1),2),qe=Ye[0],Fe=Ye[1],Ve=$((0,p.useState)(void 0),2),je=Ve[0],Ge=Ve[1],We=$((0,u.ZK)(),3),Qe=We[0],Be=We[1],Ke=We[2],$e=$((0,p.useState)([]),2),ze=$e[0],Xe=$e[1],Je=$((0,p.useState)(!1),2),en=Je[0],nn=Je[1],tn=$((0,p.useState)(""),2),rn=tn[0],an=tn[1],on=$((0,p.useState)(""),2),sn=on[0],ln=on[1],cn=null==A||null===(n=A.meta)||void 0===n?void 0:n.created,un=null==A||null===(t=A.meta)||void 0===t?void 0:t.lastModified;(0,p.useEffect)((function(){if(N&&Array.isArray(N)&&(null==N?void 0:N.length)>0){var e,n=B({},Te),t=W(N);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.name===R.vH.ACCOUNT_DISABLING_ENABLE?n=B(B({},n),{},{accountDisable:r.value}):r.name===R.vH.RECOVERY_LINK_PASSWORD_RESET||r.name===R.vH.OTP_PASSWORD_RESET||r.name===R.vH.OFFLINE_PASSWORD_RESET?"true"===r.value&&(n=B(B({},n),{},{forcePasswordReset:r.value})):r.name===R.vH.ACCOUNT_LOCK_ON_CREATION&&(n=B(B({},n),{},{accountLock:r.value}))}}catch(a){t.e(a)}finally{t.f()}Pe(n)}}),[N]),(0,p.useEffect)((function(){if(void 0!==(null==A?void 0:A.id)){var e=V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ONETIME_PASSWORD");(0,I.M_)(null==A?void 0:A.id,e).then((function(e){var n;Ge(null===(n=e[a.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===n?void 0:n.oneTimePassword)}))}}),[Le]),(0,p.useEffect)((function(){if(void 0!==(null==A?void 0:A.id)){var e=V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")+","+V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_DISABLED")+","+V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ONETIME_PASSWORD");(0,I.M_)(null==A?void 0:A.id,e).then((function(e){var n,t,r,o,s;xe(null!==(n=null===(t=e[a.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===t?void 0:t.accountLocked)&&void 0!==n&&n),Fe(null!==(r=null===(o=e[a.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===o?void 0:o.accountDisabled)&&void 0!==r&&r),Ge(null===(s=e[a.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===s?void 0:s.oneTimePassword)}))}}),[A]),(0,p.useEffect)((function(){Xe(l.CommonUtils.getCountryList()),j===V.lu.INTERNAL&&null!==k.userConfig&&void 0!==k.userConfig&&k.userConfig.enableAdminPrivilegeRevokeOption&&fn()}),[]),(0,p.useEffect)((function(){ln((0,H.getAssociationType)(oe,ae))}),[]);var dn=(0,p.useCallback)((function(e){null!==e&&(e.children[0].children[1].children[0].role="presentation")}),[]);(0,p.useEffect)((function(){var e=l.ProfileUtils.flattenSchemas(G(ee)).filter((function(e){return e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("META_VERSION"))})).sort((function(e,n){return e.displayOrder?n.displayOrder?parseInt(e.displayOrder,10)-parseInt(n.displayOrder,10):1:-1}));me(e)}),[ee]),(0,p.useEffect)((function(){!function(e,n){if(!(0,d.Z)(de)&&!(0,d.Z)(n)){var t=new Map;j===V.lu.INTERNAL?e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var o=r[0];if(l.ProfileUtils.isStringArray(n[o])){var s=n[o].find((function(e){return"string"==typeof e}));t.set(e.name,s)}}else{var i=r[0];if(e.extended&&n[a.Cb.SCIM2_ENT_USER_SCHEMA]&&n[a.Cb.SCIM2_ENT_USER_SCHEMA][r[0]])return void t.set(e.name,n[a.Cb.SCIM2_ENT_USER_SCHEMA][r[0]]);if(e.extended&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA]&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA][r[0]])return void t.set(e.name,n[a.Cb.SCIM2_WSO2_CUSTOM_SCHEMA][r[0]]);t.set(e.name,n[i])}else if("name"===r[0]){var c=r[0],u=r[1];u&&n[c]&&n[c][u]&&t.set(e.name,n[c][u])}else{var d=r[0],m=r[1];if(e.extended&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA])d&&m&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA][d]&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA][d][m]&&t.set(e.name,n[a.Cb.SCIM2_WSO2_USER_SCHEMA][d][m]);else{var f=n[d]&&Array.isArray(n[d])&&n[d].find((function(e){return e.type===m}));"addresses"===d?t.set(e.name,f?f.formatted:""):t.set(e.name,f?f.value:"")}}})):e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var o=r[0];if(l.ProfileUtils.isStringArray(n[o])){var s=n[o].find((function(e){return"string"==typeof e}));t.set(e.name,s)}}else{var i=r[0];if(e.extended&&n[a.Cb.SCIM2_ENT_USER_SCHEMA]&&n[a.Cb.SCIM2_ENT_USER_SCHEMA][r[0]])return void t.set(e.name,n[a.Cb.SCIM2_ENT_USER_SCHEMA][r[0]]);if(e.extended&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA]&&n[a.Cb.SCIM2_WSO2_USER_SCHEMA][r[0]])return void t.set(e.name,n[a.Cb.SCIM2_WSO2_CUSTOM_SCHEMA][r[0]]);t.set(e.name,n[i])}else if("name"===r[0]){var c=r[0],u=r[1];u&&n[c]&&n[c][u]&&t.set(e.name,n[c][u])}else{var d=r[0],m=r[1];if(e.extended&&n[a.Cb.SCIM2_ENT_USER_SCHEMA])d&&m&&n[a.Cb.SCIM2_ENT_USER_SCHEMA][d]&&n[a.Cb.SCIM2_ENT_USER_SCHEMA][d][m]&&t.set(e.name,n[a.Cb.SCIM2_ENT_USER_SCHEMA][d][m]);else{var f=n[d]&&Array.isArray(n[d])&&n[d].find((function(e){return e.type===m}));"addresses"===d?t.set(e.name,f?f.formatted:""):t.set(e.name,f?f.value:"")}}})),ce(t)}}(de,A)}),[de,A]);var mn=function(e,n){var t=null==e?void 0:e.userName;return 0===t.length&&n?e.email:(t.split("/").length>1&&(t=t.split("/")[1]),t)},fn=function(){var e={filter:"displayName eq "+Y.administratorConfig.adminRoleName,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:0};(0,F.QW)(e).then((function(e){var n;if((null==e||null===(n=e.data)||void 0===n?void 0:n.Resources.length)>0){var t,r,a=null==e||null===(t=e.data)||void 0===t||null===(r=t.Resources[0])||void 0===r?void 0:r.id;an(a)}})).catch((function(e){e.response&&e.response.data&&e.response.data.description?J((0,i.V_)({description:e.response.data.description,level:s.QU.ERROR,message:X("console:manage.features.users.notifications.getAdminRole.error.message")})):J((0,i.V_)({description:X("console:manage.features.users.notifications.getAdminRole.genericError.description"),level:s.QU.ERROR,message:X("console:manage.features.users.notifications.getAdminRole.genericError.message")}))}))},pn=function(e){var n,t,r,a,o;(_e({name:null==e||null===(n=e.target)||void 0===n?void 0:n.id,value:null==e||null===(t=e.target)||void 0===t?void 0:t.checked}),null!=e&&null!==(r=e.target)&&void 0!==r&&r.checked)?Oe(!0):gn(null==e||null===(a=e.target)||void 0===a?void 0:a.id,null==e||null===(o=e.target)||void 0===o?void 0:o.checked)},gn=function(e,n){var t,r,i,l,c={Operations:[{op:"replace",value:K({},a.Cb.SCIM2_ENT_USER_SCHEMA,K({},e,n))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};"internal"===j&&(c={Operations:[{op:"replace",value:K({},null!==k.SCIMConfigs&&void 0!==k.SCIMConfigs&&null!==(t=k.SCIMConfigs.scimEnterpriseUserClaimUri)&&void 0!==t&&null!==(r=t.accountDisabled)&&void 0!==r&&r.startsWith(a.Cb.SCIM2_WSO2_USER_SCHEMA)&&null!==k.SCIMConfigs&&void 0!==k.SCIMConfigs&&null!==(i=k.SCIMConfigs.scimEnterpriseUserClaimUri)&&void 0!==i&&null!==(l=i.accountLocked)&&void 0!==l&&l.startsWith(a.Cb.SCIM2_WSO2_USER_SCHEMA)?a.Cb.SCIM2_WSO2_USER_SCHEMA:a.Cb.SCIM2_ENT_USER_SCHEMA,K({},e,n))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]});(0,I.gS)(A.id,c).then((function(){y({description:e===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X(n?"console:manage.features.user.profile.notifications.lockUserAccount.success.description":"console:manage.features.user.profile.notifications.unlockUserAccount.success.description"):X(n?"console:manage.features.user.profile.notifications.disableUserAccount.success.description":"console:manage.features.user.profile.notifications.enableUserAccount.success.description"),level:s.QU.SUCCESS,message:e===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X(n?"console:manage.features.user.profile.notifications.lockUserAccount.success.message":"console:manage.features.user.profile.notifications.unlockUserAccount.success.message",{name:A.emails&&void 0!==A.emails?(0,o.r1)(null==A?void 0:A.emails):mn(A,!0)}):X(n?"console:manage.features.user.profile.notifications.disableUserAccount.success.message":"console:manage.features.user.profile.notifications.enableUserAccount.success.message",{name:A.emails&&void 0!==A.emails?(0,o.r1)(null==A?void 0:A.emails):mn(A,!1)})}),Oe(!1),_(A.id),_e(void 0)})).catch((function(n){n.response&&n.response.data&&n.response.data.description?y({description:n.response.data.description,level:s.QU.ERROR,message:e===V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.profile.notifications.lockUserAccount.error.message"):X("console:manage.features.user.profile.notifications.disableUserAccount.error.message")}):y({description:(null==Ae?void 0:Ae.name)===V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.profile.notifications.lockUserAccount.genericError.description"):X("console:manage.features.user.profile.notifications.disableUserAccount.genericError.description"),level:s.QU.ERROR,message:(null==Ae?void 0:Ae.name)===V._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.profile.notifications.lockUserAccount.genericError.message"):X("console:manage.features.user.profile.notifications.disableUserAccount.genericError.message")})}))},vn=function(e,n){var t,r=X("console:manage.features.user.profile.fields."+e.name.replace(".","_"),{defaultValue:e.displayName}),o=null==le||null===(t=le.get(e.name))||void 0===t?void 0:t.toString().split("/");return p.createElement(C.Z.Row,{columns:1,key:n},p.createElement(C.Z.Column,{mobile:12,tablet:12,computer:6},"userName"===e.name&&o.length>1?p.createElement(p.Fragment,null,"internal"===j?p.createElement(E.Z.Field,null,p.createElement("label",null,k.commonConfig.userEditSection.showEmail?r:r+" (Email)"),p.createElement(S.Z,{"data-testid":"".concat(z,"-profile-form-").concat(e.name,"-input"),name:e.name,required:e.required,requiredErrorMessage:r+" is required",placeholder:"Enter your "+r,type:"text",value:o[1],key:n,readOnly:!0,maxLength:e.maxLength?e.maxLength:a.Cb.CLAIM_VALUE_MAX_LENGTH})):p.createElement(E.Z.Field,null,p.createElement("label",null,k.commonConfig.userEditSection.showEmail?r:r+" (Email)"),p.createElement(S.Z,{"data-testid":"".concat(z,"-profile-form-").concat(e.name,"-input"),name:e.name,label:o[0]+" / ",required:e.required,requiredErrorMessage:r+" is required",placeholder:"Enter your "+r,type:"text",value:o[1],key:n,readOnly:O||e.mutability===a.Cb.READONLY_SCHEMA,maxLength:e.maxLength?e.maxLength:a.Cb.CLAIM_VALUE_MAX_LENGTH}))):function(e,n,t){return"BOOLEAN"===e.type.toUpperCase()?p.createElement(c.gN,{"data-testid":"".concat(z,"-profile-form-").concat(e.name,"-input"),name:e.name,required:e.required,requiredErrorMessage:n+" is required",type:"checkbox",value:le.get(e.name)?[e.name]:[],children:[{label:n,value:e.name}],readOnly:O||e.mutability===a.Cb.READONLY_SCHEMA,key:t}):"country"===e.name?p.createElement(c.gN,{ref:dn,"data-testid":"".concat(z,"-profile-form-").concat(e.name,"-input"),name:e.name,label:n,required:e.required,requiredErrorMessage:n+" is required",placeholder:"Select your "+n,type:"dropdown",value:le.get(e.name),children:[{"data-testid":"".concat(z,"-profile-form-country-dropdown-empty"),key:"empty-country",text:"Select your country",value:""}].concat(ze?ze.map((function(e){return{"data-testid":"".concat(z,"-profile-form-country-dropdown-")+e.value,flag:e.flag,key:e.key,text:e.text,value:e.value}})):[]),key:t,disabled:!1,readOnly:O||e.mutability===a.Cb.READONLY_SCHEMA,clearable:!e.required,search:!0,selection:!0,fluid:!0}):"locale"===(null==e?void 0:e.name)?p.createElement(c.gN,{"data-testid":"".concat(z,"-profile-form-").concat(null==e?void 0:e.name,"-input"),name:null==e?void 0:e.name,label:n,required:null==e?void 0:e.required,requiredErrorMessage:X("console:manage.features.user.profile.forms.generic.inputs.validations.empty",{fieldName:n}),placeholder:X("console:manage.features.user.profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:n}),type:"dropdown",value:le.get(null==e?void 0:e.name),children:[{"data-testid":"".concat(z,"-profile-form-locale-dropdown-empty"),key:"empty-locale",text:X("console:manage.features.user.profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:n}),value:""}].concat(se?Object.keys(se).map((function(e){return{"data-testid":"".concat(z,"-profile-form-locale-dropdown-")+se[e].code,flag:se[e].flag,key:se[e].code,text:"".concat(se[e].name,",\n                                                ").concat(se[e].code),value:se[e].code}})):[]),key:t,disabled:!1,readOnly:O||(null==e?void 0:e.mutability)===a.Cb.READONLY_SCHEMA,clearable:!(null!=e&&e.required),search:!0,selection:!0,fluid:!0}):p.createElement(c.gN,{"data-testid":"".concat(z,"-profile-form-").concat(e.name,"-input"),name:e.name,label:"profileUrl"===e.name?"Profile Image URL":k.commonConfig.userEditSection.showEmail||"userName"!==e.name?n:n+" (Email)",required:e.required,requiredErrorMessage:n+" is required",placeholder:"Enter your "+n,type:"text",value:le.get(e.name),key:t,disabled:"userName"===e.name,readOnly:O||e.mutability===a.Cb.READONLY_SCHEMA,validation:function(t,r){RegExp(e.regEx).test(t)||(r.isValid=!1,r.errorMessages.push(X("console:manage.features.users.forms.validation.formatError",{field:n})))},maxLength:n.toLowerCase().includes("uri")||n.toLowerCase().includes("url")?1024:e.maxLength?e.maxLength:a.Cb.CLAIM_VALUE_MAX_LENGTH})}(e,r,n)))};return T?p.createElement(u.pO,{dimmer:!0}):p.createElement(p.Fragment,null,!(0,d.Z)(le)&&p.createElement(u.pJ,{padded:"very"},O&&!(0,d.Z)(D)&&L,p.createElement(c.Es,{"data-testid":"".concat(z,"-form"),onSubmit:function(e){return function(e){var n={Operations:[],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]},t={op:"replace",value:{}};j===V.lu.INTERNAL?de.forEach((function(r){if(r.mutability!==a.Cb.READONLY_SCHEMA){var o={},s=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(l.ProfileUtils.isMultiValuedSchemaAttribute(de,s[0])||"phoneNumbers"===s[0]){var i=[],c=new Map;if(1===s.length||"phoneNumbers.mobile"===r.name){var u,d=W(e.keys());try{for(d.s();!(u=d.n()).done;){var m=u.value;m.split(".")[0]===s[0]&&c.set(m,e.get(m))}}catch(y){d.e(y)}finally{d.f()}var f,p=W(c);try{for(p.s();!(f=p.n()).done;){var g=$(f.value,2),v=g[0],C=g[1],E=v.split(".");C&&""!==C&&(1===E.length?i.push(C):i.push({type:E[1],value:C}))}}catch(y){p.e(y)}finally{p.f()}o=K({},s[0],i)}}else{var S,b;if(1===s.length)o=r.extended?K({},null!=r&&r.schemaId?r.schemaId:a.Cb.SCIM2_ENT_USER_SCHEMA,K({},s[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(S=e.get(r.name))||void 0===S||!S.includes(r.name)):e.get(s[0]))):s[0]===V._F.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:K({},s[0],e.get(s[0]));else if(r.extended)o=K({},null!=r&&r.schemaId?r.schemaId:a.Cb.SCIM2_ENT_USER_SCHEMA,K({},s[0],K({},s[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(b=e.get(r.name))||void 0===b||!b.includes(r.name)):e.get(r.name))));else if(s[0]===V._F.SCIM2_SCHEMA_DICTIONARY.get("NAME"))e.get(r.name)&&(o={name:K({},s[1],e.get(r.name))});else if("addresses"===s[0])o=K({},s[0],[{formatted:e.get(r.name),type:s[1]}]);else if("emails"!==s[0]&&"phoneNumbers"!==s[0]){var h;o=K({},s[0],[{type:s[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(h=e.get(r.name))||void 0===h||!h.includes(r.name)):e.get(r.name)}])}}t={op:"replace",value:o},"addresses"===s[0]&&(t.op="add"),n.Operations.push(t)}})):de.forEach((function(r){if(r.mutability!==a.Cb.READONLY_SCHEMA){var o={},s=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(l.ProfileUtils.isMultiValuedSchemaAttribute(de,s[0])||"phoneNumbers"===s[0]){var i=[],c=new Map;if(1===s.length||"phoneNumbers.mobile"===r.name){var u,d=W(e.keys());try{for(d.s();!(u=d.n()).done;){var m=u.value;m.split(".")[0]===s[0]&&c.set(m,e.get(m))}}catch(y){d.e(y)}finally{d.f()}var f,p=W(c);try{for(p.s();!(f=p.n()).done;){var g=$(f.value,2),v=g[0],C=g[1],E=v.split(".");C&&""!==C&&(1===E.length?i.push(C):i.push({type:E[1],value:C}))}}catch(y){p.e(y)}finally{p.f()}o=K({},s[0],i)}}else{var S,b;if(1===s.length)o=r.extended?K({},null!=r&&r.schemaId?r.schemaId:a.Cb.SCIM2_ENT_USER_SCHEMA,K({},s[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(S=e.get(r.name))||void 0===S||!S.includes(r.name)):e.get(s[0]))):s[0]===V._F.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:K({},s[0],e.get(s[0]));else if(r.extended)o=K({},null!=r&&r.schemaId?r.schemaId:a.Cb.SCIM2_ENT_USER_SCHEMA,K({},s[0],K({},s[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(b=e.get(r.name))||void 0===b||!b.includes(r.name)):e.get(r.name))));else if(s[0]===V._F.SCIM2_SCHEMA_DICTIONARY.get("NAME"))o={name:K({},s[1],e.get(r.name))};else if("addresses"===s[0])o=K({},s[0],[{formatted:e.get(r.name),type:s[1]}]);else if("emails"!==s[0]&&"phoneNumbers"!==s[0]){var h;o=K({},s[0],[{type:s[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(h=e.get(r.name))||void 0===h||!h.includes(r.name)):e.get(r.name)}])}}t={op:"replace",value:o},"addresses"===s[0]&&(t.op="add"),n.Operations.push(t)}})),nn(!0),(0,I.gS)(A.id,n).then((function(){y({description:X("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:s.QU.SUCCESS,message:X("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")}),_(A.id)})).catch((function(e){var n,t,r,a,o,l,c,u;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.detail||null!=e&&null!==(r=e.response)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.description?J((0,i.V_)({description:(null==e||null===(o=e.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.detail)||(null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.description),level:s.QU.ERROR,message:X("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):J((0,i.V_)({description:X("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:s.QU.ERROR,message:X("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){nn(!1)}))}(e)}},p.createElement(C.Z,null,A.id&&p.createElement(C.Z.Row,{columns:1},p.createElement(C.Z.Column,{mobile:12,tablet:12,computer:6},p.createElement(E.Z.Field,null,p.createElement("label",null,X("console:manage.features.user.profile.fields.userId")),p.createElement(S.Z,{name:"userID",type:"text",value:A.id,readOnly:!0})))),de&&de.map((function(e,n){if(e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ROLES_DEFAULT"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACTIVE"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("GROUPS"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("PROFILE_URL"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_DISABLED"))&&e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ONETIME_PASSWORD"))&&(k.commonConfig.userEditSection.showEmail||e.name!==(null===a.Cb||void 0===a.Cb?void 0:a.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")))&&function(e){return!(0,d.Z)(le.get(e.name))||!O&&e.mutability!==a.Cb.READONLY_SCHEMA}(e))return vn(e,n)})),je&&p.createElement(C.Z.Row,{columns:1},p.createElement(C.Z.Column,{mobile:12,tablet:12,computer:6},p.createElement(c.gN,{"data-testid":"".concat(z,"-profile-form-one-time-pw }\n                                                        -input"),name:"oneTimePassword",label:X("console:manage.features.user.profile.fields.oneTimePassword"),required:!1,requiredErrorMessage:"",type:"text",hidden:void 0===je,value:je&&je,readOnly:!0}))),cn&&p.createElement(C.Z.Row,{columns:1},p.createElement(C.Z.Column,{mobile:12,tablet:12,computer:6},p.createElement(E.Z.Field,null,p.createElement("label",null,X("console:manage.features.user.profile.fields.createdDate")),p.createElement(S.Z,{name:"createdDate",type:"text",value:cn?f()(cn).format("YYYY-MM-DD"):"",readOnly:!0})))),un&&p.createElement(C.Z.Row,{columns:1},p.createElement(C.Z.Column,{mobile:12,tablet:12,computer:6},p.createElement(E.Z.Field,null,p.createElement("label",null,X("console:manage.features.user.profile.fields.modifiedDate")),p.createElement(S.Z,{name:"modifiedDate",type:"text",value:un?f()(un).format("YYYY-MM-DD"):"",readOnly:!0})))),p.createElement(C.Z.Row,{columns:1},p.createElement(C.Z.Column,{mobile:16,tablet:16,computer:8},!O&&p.createElement(b.Z,{"data-testid":"".concat(z,"-form-update-button"),primary:!0,type:"submit",size:"small",className:"form-button",loading:en,disabled:en},"Update")))))),p.createElement(h.Z,{hidden:!0}),function(){var e,n,t;if(!(0,o.hasRequiredScopes)(null==w?void 0:w.users,null==w||null===(e=w.users)||void 0===e||null===(n=e.scopes)||void 0===n?void 0:n.update,ne))return null;var a=mn(A,!1),s=(null===(t=[D,m])||void 0===t?void 0:t.includes(a))||(null==te?void 0:te.includes(a));return p.createElement(p.Fragment,null,O&&!M&&!Q||s?null:p.createElement(r.di,{when:q.T.USER_DELETE},p.createElement(u.v9,{sectionHeader:X("console:manage.features.user.editUser.dangerZoneGroup.header")},O||P||A.userName===m||Q?null:p.createElement(r.di,{when:q.T.USER_EDIT},p.createElement(u.cN,{"data-testid":"".concat(z,"-revoke-admin-privilege-danger-zone"),actionTitle:X("console:manage.features.user.editUser.dangerZoneGroup.passwordResetZone.actionTitle"),header:X("console:manage.features.user.editUser.dangerZoneGroup.passwordResetZone.header"),subheader:X("console:manage.features.user.editUser.dangerZoneGroup.passwordResetZone.subheader"),onActionClick:function(){return we(!0)}})),!M&&"true"===(null==Te?void 0:Te.accountDisable)&&p.createElement(u.cN,{"data-testid":"".concat(z,"-danger-zone"),actionTitle:X("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.actionTitle"),header:X("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.header"),subheader:X("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.subheader"),onActionClick:void 0,toggle:{checked:qe,id:"accountDisabled",onChange:pn}}),!M&&!Q&&p.createElement(u.cN,{"data-testid":"".concat(z,"-danger-zone"),actionTitle:X("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.actionTitle"),header:X("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.header"),subheader:X("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.subheader"),onActionClick:void 0,toggle:{checked:He,id:"accountLocked",onChange:pn}}),(null===k.userConfig||void 0===k.userConfig?void 0:k.userConfig.enableAdminPrivilegeRevokeOption)&&!re&&j===V.lu.INTERNAL&&sn!==x.GUEST_ADMIN_ASSOCIATION_TYPE&&p.createElement(u.cN,{"data-testid":"".concat(z,"-revoke-admin-privilege-danger-zone"),actionTitle:X("console:manage.features.user.editUser.dangerZoneGroup.deleteAdminPriviledgeZone.actionTitle"),header:X("console:manage.features.user.editUser.dangerZoneGroup.deleteAdminPriviledgeZone.header"),subheader:X("console:manage.features.user.editUser.dangerZoneGroup.deleteAdminPriviledgeZone.subheader"),onActionClick:function(){Ee(!0),he(A)}}),p.createElement(u.cN,{"data-testid":"".concat(z,"-danger-zone"),actionTitle:X("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.actionTitle"),header:X("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.header"),subheader:k.commonConfig.userEditSection.isGuestUser?X("extensions:manage.guest.editUser.dangerZoneGroup.deleteUserZone.subheader"):X("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.subheader"),onActionClick:function(){ge(!0),he(A)},isButtonDisabled:j===V.lu.INTERNAL&&P,buttonDisableHint:X("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.buttonDisableHint")}))))}(),be&&p.createElement(u.cV,{"data-testid":"".concat(z,"-confirmation-modal"),onClose:function(){return ge(!1)},type:"negative",open:pe,assertionHint:X("console:manage.features.user.deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:X("common:confirm"),secondaryAction:X("common:cancel"),onSecondaryActionClick:function(){ge(!1),Be(null)},onPrimaryActionClick:function(){return function(e){k.userConfig.deleteUser(e).then((function(){y({description:X("console:manage.features.users.notifications.deleteUser.success.description"),level:s.QU.SUCCESS,message:X("console:manage.features.users.notifications.deleteUser.success.message")}),j===V.lu.EXTERNAL?U.m8.push(U.$x.getPaths().get("ADMINISTRATORS")):U.m8.push(U.$x.getPaths().get("USERS"))})).catch((function(e){e.response&&e.response.data&&e.response.data.description?Be({description:e.response.data.description,level:s.QU.ERROR,message:X("console:manage.features.users.notifications.deleteUser.error.message")}):Be({description:X("console:manage.features.users.notifications.deleteUser.genericError.description"),level:s.QU.ERROR,message:X("console:manage.features.users.notifications.deleteUser.genericError.message")})}))}(be)},closeOnDimmerClick:!1},p.createElement(u.cV.Header,{"data-testid":"".concat(z,"-confirmation-modal-header")},X("console:manage.features.user.deleteUser.confirmationModal.header")),p.createElement(u.cV.Message,{"data-testid":"".concat(z,"-confirmation-modal-message"),attached:!0,negative:!0},k.commonConfig.userEditSection.isGuestUser?X("extensions:manage.guest.deleteUser.confirmationModal.message"):X("console:manage.features.user.deleteUser.confirmationModal.message")),p.createElement(u.cV.Content,null,p.createElement("div",{className:"modal-alert-wrapper"}," ",Qe&&Ke),k.commonConfig.userEditSection.isGuestUser?X("extensions:manage.guest.deleteUser.confirmationModal.content"):X("console:manage.features.user.deleteUser.confirmationModal.content"))),be&&p.createElement(u.cV,{"data-testid":"".concat(z,"-admin-privilege-revoke-confirmation-modal"),onClose:function(){return Ee(!1)},type:"negative",open:Ce,assertionHint:X("console:manage.features.user.revokeAdmin.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:X("common:confirm"),secondaryAction:X("common:cancel"),onSecondaryActionClick:function(){Ee(!1),Be(null)},onPrimaryActionClick:function(){return function(e){var n={Operations:[{op:"remove",path:"users[display eq ".concat(e.userName,"]"),value:{}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(0,F.dB)(rn,n).then((function(){J((0,i.V_)({description:X("console:manage.features.users.notifications.revokeAdmin.success.description"),level:s.QU.SUCCESS,message:X("console:manage.features.users.notifications.revokeAdmin.success.message")})),U.m8.push(U.$x.getPaths().get("ADMINISTRATORS"))})).catch((function(e){e.response&&e.response.data&&e.response.data.description?J((0,i.V_)({description:e.response.data.description,level:s.QU.ERROR,message:X("console:manage.features.users.notifications.revokeAdmin.error.message")})):J((0,i.V_)({description:X("console:manage.features.users.notifications.revokeAdmin.genericError.description"),level:s.QU.ERROR,message:X("console:manage.features.users.notifications.revokeAdmin.genericError.message")}))}))}(be)},closeOnDimmerClick:!1},p.createElement(u.cV.Header,{"data-testid":"".concat(z,"-admin-privilege-revoke-confirmation-modal-header")},X("console:manage.features.user.revokeAdmin.confirmationModal.header")),p.createElement(u.cV.Content,null,p.createElement("div",{className:"modal-alert-wrapper"}," ",Qe&&Ke),X("console:manage.features.user.revokeAdmin.confirmationModal.content"))),Ae&&p.createElement(u.cV,{"data-testid":"".concat(z,"-confirmation-modal"),onClose:function(){Oe(!1),_e(void 0)},type:"warning",open:Re,assertion:mn(A,!1),assertionHint:Ae.name===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.lockUser.confirmationModal.assertionHint"):X("console:manage.features.user.disableUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:X("common:confirm"),secondaryAction:X("common:cancel"),onSecondaryActionClick:function(){_e(void 0),Oe(!1)},onPrimaryActionClick:function(){return gn(Ae.name,Ae.value)},closeOnDimmerClick:!1},p.createElement(u.cV.Header,{"data-testid":"".concat(z,"-confirmation-modal-header")},Ae.name===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.lockUser.confirmationModal.header"):X("console:manage.features.user.disableUser.confirmationModal.header")),p.createElement(u.cV.Message,{"data-testid":"".concat(z,"-disable-confirmation-modal-message"),attached:!0,warning:!0},Ae.name===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.lockUser.confirmationModal.message"):X("console:manage.features.user.disableUser.confirmationModal.message")),p.createElement(u.cV.Content,null,Ae.name===a.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?X("console:manage.features.user.lockUser.confirmationModal.content"):X("console:manage.features.user.disableUser.confirmationModal.content"))),p.createElement(Z,{handleForcePasswordResetTrigger:function(){return Ze(!0)},connectorProperties:N,handleCloseChangePasswordModal:function(){return we(!1)},openChangePasswordModal:Ie,onAlertFired:y,user:A,handleUserUpdate:_}))};J.defaultProps={adminUserType:"None","data-testid":"user-mgt-user-profile",isReadOnlyUserStore:!1}}}]);