"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[19011,9060],{19011:(e,i,n)=>{n.r(i),n.d(i,{PermissionList:()=>b});var t=n(13318),a=n(81816),m=n(42363),s=n(52983),r=n(9202),o=n(75917),d=n(94635),p=n(88171),l=n(30640),c=n(85814),g=n(86407),u=n(80617),y=n(9060);function f(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,m,s,r=[],o=!0,d=!1;try{if(m=(n=n.call(e)).next,0===i){if(Object(n)!==n)return;o=!1}else for(;!(o=(t=m.call(n)).done)&&(r.push(t.value),r.length!==i);o=!0);}catch(e){d=!0,a=e}finally{try{if(!o&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw a}}return r}}(e,i)||w(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,i){if(e){if("string"==typeof e)return v(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,i):void 0}}function v(e,i){(null==i||i>e.length)&&(i=e.length);for(var n=0,t=new Array(i);n<i;n++)t[n]=e[n];return t}var b=function(e){var i=e.onChange,n=e.isReadOnly,w=e.emphasize,v=e.triggerSubmit,b=e.onSubmit,k=e.roleObject,E=e.isEdit,S=e.initialValues,A=e.isRole,x=e["data-testid"],I=(0,r.$)().t,j=h((0,s.useState)([]),2),N=j[0],O=j[1],C=h((0,s.useState)([]),2),L=C[0],T=C[1],P=h((0,s.useState)([]),2),R=P[0],_=P[1],$=h((0,s.useState)(!0),2),q=$[0],Z=$[1],z=h((0,s.useState)(void 0),2),U=z[0],K=z[1];(0,s.useEffect)((function(){M()}),[]),(0,s.useEffect)((function(){if(void 0!==U){var e=l.$x.getTenant()!==l.$x.getSuperTenant()?y.hiddenPermissions:[];g.J.getAllPermissions(e).then((function(e){D(U,e),O(e),_([e[0].key.toString()]),Z(!1)}))}}),[U]),(0,s.useEffect)((function(){if(N&&Array.isArray(N)&&N.length>0){var e=[];if(S&&S.length>0){var n=[];S.forEach((function(e){n.push(e.key.toString())})),null==n||n.forEach((function(i){e.push(V(i,N))}))}if(A&&k){var t=null!=k&&k.permissions&&Array.isArray(k.permissions)?f(k.permissions):[];null==t||t.forEach((function(i){e.push(V(i,N))}))}T(e),i&&i(e)}}),[N,S]);var M=function(){(0,u.Un)().then((function(e){l.h.getState().profile.profileInfo.userName!==(null==e?void 0:e.realmConfig.adminUser)?K(!1):K(!0)})).catch((function(){return K(!1)}))},D=function(e,i){i[0].children.forEach((function(i){i.key!==c.nL.SUPER_ADMIN_PERMISSION_KEY||e||(i.disableCheckbox=!0,i.children&&F(i.children,!0))}))},F=function e(i,n){i.forEach((function(i){i.disableCheckbox=n,i.children&&e(i.children,n)}))},J=function(e,n){var t=[];if(n.checked){if(!L.find((function(e){return e.key===n.node.key}))){var a,m,s=V(n.node.key,N,!0),r=1;if(null==s||null===(a=s.children)||void 0===a||a.forEach((function(e){L.filter((function(i){return i.key===e.key})).length>0&&++r})),(null==s||null===(m=s.children)||void 0===m?void 0:m.length)===r){var o=L.filter((function(e){e.key.toString().replace(/^\/|\/$/g,"").split("/"),s.key.toString().replace(/^\/|\/$/g,"").split("/")}));t=[].concat(f(o),[s])}else t=[].concat(f(L),[n.node])}}else t=n.checkedNodes;T(t),i&&i(t)},V=function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=[i[0]];t.length;){var a=t.shift();if(n){if(a.key===e.slice(0,e.lastIndexOf("/")))return a}else if(a.key===e)return a;a.children&&t.push.apply(t,f(a.children))}return null},W=function(e){return e.isLeaf?null:s.createElement("div",{className:"tree-arrow-wrap"},s.createElement("span",{className:"tree-arrow ".concat(e.expanded?"":"active")},s.createElement("span",null),s.createElement("span",null)))},Y=function(){return s.createElement(s.Fragment,null,s.createElement(t.Es,{submitState:v,onSubmit:function(){b(L)}},q?s.createElement(a.pO,{className:"p-3",active:!0}):s.createElement("div",{className:"treeview-container"},s.createElement(m.Z,{className:"customIcon","data-testid":"".concat(x,"-tree"),disabled:n,checkedKeys:L.map((function(e){return null==e?void 0:e.key})),defaultExpandedKeys:R,showLine:!0,showIcon:!1,checkable:!0,selectable:!1,onCheck:J,treeData:N,switcherIcon:W})),E&&!q&&s.createElement(s.Fragment,null,s.createElement(o.Z,{hidden:!0}),s.createElement(d.Z.Row,{columns:1},s.createElement(d.Z.Column,{mobile:16,tablet:16,computer:8},s.createElement(p.Z,{"data-testid":"".concat(x,"-update-button"),primary:!0,type:"submit",size:"small",className:"form-button"},I("console:manage.features.roles.addRoleWizard.permissions.buttons.update")))))))};return w?s.createElement(a.pJ,{"data-testid":x,padded:"very"},Y()):s.createElement("div",{"data-testid":x},Y())};b.defaultProps={emphasize:!0,isReadOnly:!1}},9060:(e,i,n)=>{n.r(i),n.d(i,{hiddenPermissions:()=>t});var t=["/permission/applications","/permission/protected","/permission/protected/configure","/permission/protected/configure/components","/permission/protected/manage","/permission/protected/manage/modify","/permission/protected/manage/modify/tenants","/permission/protected/manage/monitor","/permission/protected/manage/monitor/tenants","/permission/protected/manage/monitor/tenants/list","/permission/protected/server-admin","/permission/protected/server-admin/homepage","/permission/protected/server-admin/jmx","/permission/protected/server-admin/jmx/readonly","/permission/protected/server-admin/jmx/readwrite","/permission/admin/monitor","/permission/admin/monitor/metrics","/permission/admin/monitor/bpel","/permission/admin/monitor/attachment","/permission/admin/configure","/permission/admin/configure/security","/permission/admin/configure/security/usermgt","/permission/admin/configure/security/usermgt/passwords","/permission/admin/configure/security/usermgt/profiles","/permission/admin/configure/security/usermgt/users","/permission/admin/configure/security/usermgt/provisioning","/permission/admin/configure/datasources","/permission/admin/configure/remotefetch","/permission/admin/configure/theme","/permission/admin/manage/search","/permission/admin/manage/search/advanced-search","/permission/admin/manage/search/resources","/permission/admin/manage/attachment","/permission/admin/manage/extensions","/permission/admin/manage/extensions/add","/permission/admin/manage/extensions/list","/permission/admin/manage/topic","/permission/admin/manage/topic/deleteTopic","/permission/admin/manage/topic/browseTopic","/permission/admin/manage/topic/purgeTopic","/permission/admin/manage/topic/addTopic","/permission/admin/manage/humantask","/permission/admin/manage/humantask/packages","/permission/admin/manage/humantask/viewtasks","/permission/admin/manage/humantask/add","/permission/admin/manage/humantask/task","/permission/admin/manage/event-streams","/permission/admin/manage/bpel","/permission/admin/manage/bpel/instances","/permission/admin/manage/bpel/processes","/permission/admin/manage/bpel/packages","/permission/admin/manage/bpel/add","/permission/admin/manage/resources","/permission/admin/manage/resources/browse","/permission/admin/manage/resources/notifications","/permission/admin/manage/add","/permission/admin/manage/add/webapp","/permission/admin/manage/identity/pep","/permission/admin/manage/identity/template","/permission/admin/manage/identity/template/mgt","/permission/admin/manage/identity/template/mgt/view","/permission/admin/manage/identity/template/mgt/add","/permission/admin/manage/identity/template/mgt/delete","/permission/admin/manage/identity/template/mgt/list","/permission/admin/manage/identity/consentmgt","/permission/admin/manage/identity/consentmgt/list","/permission/admin/manage/identity/consentmgt/view","/permission/admin/manage/identity/consentmgt/add","/permission/admin/manage/identity/consentmgt/delete","/permission/admin/manage/identity/apptemplatemgt","/permission/admin/manage/identity/apptemplatemgt/view","/permission/admin/manage/identity/apptemplatemgt/update","/permission/admin/manage/identity/apptemplatemgt/delete","/permission/admin/manage/identity/apptemplatemgt/create","/permission/admin/manage/identity/identitymgt","/permission/admin/manage/identity/identitymgt/view","/permission/admin/manage/identity/identitymgt/update","/permission/admin/manage/identity/identitymgt/create","/permission/admin/manage/identity/identitymgt/delete","/permission/admin/manage/identity/userprofile","/permission/admin/manage/identity/userprofile/view","/permission/admin/manage/identity/userprofile/create","/permission/admin/manage/identity/userprofile/delete","/permission/admin/manage/identity/userprofile/update","/permission/admin/manage/event-publish","/permission/admin/manage/cors","/permission/admin/manage/cors/origins","/permission/admin/manage/cors/origins/view","/permission/admin/manage/modify","/permission/admin/manage/modify/webapp","/permission/admin/manage/modify/user-profile","/permission/admin/manage/identity/workflow","/permission/admin/manage/identity/workflow/association","/permission/admin/manage/identity/workflow/association/view","/permission/admin/manage/identity/workflow/association/delete","/permission/admin/manage/identity/workflow/association/create","/permission/admin/manage/identity/workflow/association/update","/permission/admin/manage/identity/workflow/definition","/permission/admin/manage/identity/workflow/definition/create","/permission/admin/manage/identity/workflow/definition/delete","/permission/admin/manage/identity/workflow/definition/view","/permission/admin/manage/identity/workflow/definition/update","/permission/admin/manage/identity/workflow/profile","/permission/admin/manage/identity/workflow/profile/view","/permission/admin/manage/identity/workflow/profile/create","/permission/admin/manage/identity/workflow/profile/delete","/permission/admin/manage/identity/workflow/profile/update","/permission/admin/manage/identity/workflow/monitor","/permission/admin/manage/identity/workflow/monitor/view","/permission/admin/manage/identity/workflow/monitor/delete","/permission/admin/manage/identity/emailmgt","/permission/admin/manage/identity/emailmgt/update","/permission/admin/manage/identity/emailmgt/create","/permission/admin/manage/identity/emailmgt/delete","/permission/admin/manage/identity/emailmgt/view","/permission/admin/manage/identity/provisioning","/permission/admin/manage/identity/user","/permission/admin/manage/identity/user/association","/permission/admin/manage/identity/user/association/view","/permission/admin/manage/identity/user/association/update","/permission/admin/manage/identity/user/association/delete","/permission/admin/manage/identity/user/association/create","/permission/admin/manage/identity/userstore","/permission/admin/manage/identity/userstore/count","/permission/admin/manage/identity/userstore/count/delete","/permission/admin/manage/identity/userstore/count/view","/permission/admin/manage/identity/userstore/count/create","/permission/admin/manage/identity/userstore/count/update","/permission/admin/manage/identity/userstore/config","/permission/admin/manage/identity/userstore/config/delete","/permission/admin/manage/identity/userstore/config/create","/permission/admin/manage/identity/userstore/config/update","/permission/admin/manage/identity/userstore/config/view","/permission/admin/manage/identity/functionsLibrarymgt","/permission/admin/manage/identity/functionsLibrarymgt/update","/permission/admin/manage/identity/functionsLibrarymgt/create","/permission/admin/manage/identity/functionsLibrarymgt/delete","/permission/admin/manage/identity/functionsLibrarymgt/view","/permission/admin/manage/identity/userroleuimgt","/permission/admin/manage/identity/userroleuimgt/create","/permission/admin/manage/identity/defaultauthSeq","/permission/admin/manage/identity/defaultauthSeq/view","/permission/admin/manage/identity/defaultauthSeq/update","/permission/admin/manage/identity/defaultauthSeq/create","/permission/admin/manage/identity/defaultauthSeq/delete","/permission/admin/manage/identity/entitlement","/permission/admin/manage/identity/entitlement/pap","/permission/admin/manage/identity/entitlement/pap/policy","/permission/admin/manage/identity/entitlement/pap/policy/delete","/permission/admin/manage/identity/entitlement/pap/policy/publish","/permission/admin/manage/identity/entitlement/pap/policy/create","/permission/admin/manage/identity/entitlement/pap/policy/view","/permission/admin/manage/identity/entitlement/pap/policy/rollback","/permission/admin/manage/identity/entitlement/pap/policy/order","/permission/admin/manage/identity/entitlement/pap/policy/demote","/permission/admin/manage/identity/entitlement/pap/policy/update","/permission/admin/manage/identity/entitlement/pap/policy/enable","/permission/admin/manage/identity/entitlement/pap/policy/list","/permission/admin/manage/identity/entitlement/pap/subscriber","/permission/admin/manage/identity/entitlement/pap/subscriber/update","/permission/admin/manage/identity/entitlement/pap/subscriber/view","/permission/admin/manage/identity/entitlement/pap/subscriber/list","/permission/admin/manage/identity/entitlement/pap/subscriber/create","/permission/admin/manage/identity/entitlement/pap/subscriber/delete","/permission/admin/manage/identity/entitlement/pdp","/permission/admin/manage/identity/entitlement/pdp/view","/permission/admin/manage/identity/entitlement/pdp/manage","/permission/admin/manage/identity/entitlement/pdp/test","/permission/admin/manage/identity/entitlement/pep","/permission/admin/manage/identity/challenge","/permission/admin/manage/identity/challenge/delete","/permission/admin/manage/identity/challenge/create","/permission/admin/manage/identity/challenge/update","/permission/admin/manage/identity/challenge/view"]}}]);