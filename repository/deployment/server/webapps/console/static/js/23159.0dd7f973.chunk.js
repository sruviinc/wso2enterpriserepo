"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[23159,21297,30798,44559,68660,22756,64873,51776],{23159:(e,t,n)=>{n.r(t),n.d(t,{DiagnosticLogsPage:()=>g});var o=n(81816),r=n(30640),a=n(52983),i=n(9202),l=n(74691),s=n(73949),c=n(75262),u=n(44559),m=n(22756),d=n(51776),f=n(8802),p=n(78237);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var g=function(e){var t=e["data-componentid"],n=v((0,a.useState)(!1),2),T=n[0],g=n[1],y=v((0,a.useState)(!1),2),E=y[0],x=y[1],S=v((0,a.useState)(""),2),h=S[0],b=S[1],k=v((0,a.useState)(""),2),C=k[0],O=k[1],G=v((0,a.useState)(""),2),w=G[0],M=G[1],N=v((0,a.useState)(""),2),I=N[0],R=N[1],_=v((0,a.useState)(""),2),L=_[0],D=_[1],Z=v((0,a.useState)(.25),2),A=Z[0],F=Z[1],j=v((0,a.useState)(new Map),2),P=j[0],H=j[1],U=v((0,a.useState)([]),2),W=U[0],$=U[1],B=v((0,a.useState)(null),2),q=B[0],J=B[1],z=v((0,a.useState)(!1),2),Q=z[0],K=z[1],Y=v((0,a.useState)(!1),2),V=Y[0],X=Y[1],ee=v((0,a.useState)(""),2),te=ee[0],ne=ee[1],oe=v((0,a.useState)(.25),2),re=oe[0],ae=oe[1],ie=v((0,a.useState)(!1),2),le=ie[0],se=ie[1],ce=v((0,a.useState)(!1),2),ue=ce[0],me=ce[1],de=v((0,a.useState)([]),2),fe=de[0],pe=de[1],ve=(0,i.$)().t,Te="GMT+0000 UTC";(0,a.useEffect)((function(){setTimeout((function(){X(!0)}),m.LogsConstants.DELAY_MESSEGE_TIMEOUT),-1===A?K(!1):(K(!0),ue||(me(!0),setTimeout((function(){se(!0),me(!1)}),m.LogsConstants.REFRESH_BUTTON_TIMEOUT)))}),[te]),(0,a.useEffect)((function(){se(!1)}),[I,L,w,C]),(0,a.useEffect)((function(){var e=(0,p.getDateTimeWithOffset)(Te),t=e.toString(),n=(e-36e5*A).toString();R(t),D(n),ne(t),J({endTime:t,filter:"",limit:m.LogsConstants.LOG_FETCH_COUNT,logType:f.TabIndex.DIAGNOSTIC_LOGS,startTime:n})}),[]);var ge=(0,a.useRef)(null),ye=(0,d.default)(q),Ee=ye.error,xe=ye.list,Se=ye.loading,he=ye.next,be=ye.previous;(0,a.useEffect)((function(){pe(xe)}),[xe]);var ke=function(e){var t=e.target;X(!1),0===t.scrollTop&&(be?(J({filter:h,limit:m.LogsConstants.LOG_FETCH_COUNT,previousToken:be}),g(!1),x(!1)):g(!0)),t.scrollHeight-t.scrollTop===t.clientHeight&&(he?(J({filter:h,limit:m.LogsConstants.LOG_FETCH_COUNT,nextToken:he}),x(!1),g(!1)):x(!0))},Ce=function(){var e="";P.forEach((function(t){e=e?"".concat(e," and logentry co '").concat(t,"'"):"logentry co '".concat(t,"'")})),O(e)},Oe=function(){var e="";0===w.length?e=w:(e="logentry co '".concat(w,"'"),C&&(e=" and ".concat(e))),b(e);var t=L,n=I,o=(0,p.getDateTimeWithOffset)(Te);-1!==A&&(n=o.toString(),t=(o-36e5*A).toString()),X(!1),ne(o.toString()),ae(A),J({endTime:n,filter:"".concat(C).concat(e),limit:m.LogsConstants.LOG_FETCH_COUNT,logType:f.TabIndex.DIAGNOSTIC_LOGS,startTime:t})},Ge=function(){b(""),M(""),se(!1)},we=function(e){var t=P;t.set(e.property,e.value),H(t),Ce();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),$(n)},Me=function(e){var t=P;t.delete(e),H(t),Ce();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),$(n)},Ne=function(){var e=P;e.clear(),H(e),Ce(),$([])},Ie=function(){return a.createElement("form",{className:"advance-search-form",onSubmit:function(e){e.preventDefault()}},a.createElement("div",{className:"search-input-wrapper"},a.createElement("div",{className:"search-box ui action left icon input advanced-search with-add-on"},a.createElement("input",{autoComplete:"off",placeholder:ve("extensions:develop.monitor.filter.searchBar.placeholderDiagnostic"),maxLength:120,name:"query",type:"text",className:"search-input",value:w,onChange:function(e){return M(e.target.value)},"data-componentid":"".concat(t,"-search-input")}),a.createElement(l.Z,{name:"search",color:"grey"})),a.createElement("div",{className:"search-box-addons",hidden:!w},a.createElement(l.Z,{name:"close",color:"grey",onClick:Ge,className:"icon-button"})),a.createElement("input",{hidden:!0,type:"submit",value:"Submit","data-componentid":"".concat(t,"-search-input-submit")})))},Re=function(){return Ee?a.createElement(o.$J,{subtitle:[ve("extensions:develop.monitor.notifications.genericError.subtitle.0"),ve("extensions:develop.monitor.notifications.genericError.subtitle.1")],title:ve("extensions:develop.monitor.notifications.genericError.title"),image:(0,r.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-generic-error-placeholder")}):h&&0===xe.length?a.createElement(o.$J,{action:a.createElement(o.Qj,{onClick:Ge},ve("extensions:develop.monitor.notifications.emptySearchResult.actionLabel")),image:(0,r.jF)().emptySearch,imageSize:"tiny",title:ve("extensions:develop.monitor.notifications.emptySearchResult.title"),subtitle:[ve("extensions:develop.monitor.notifications.emptySearchResult.subtitle.0"),ve("extensions:develop.monitor.notifications.emptySearchResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-search-placeholder")}):C&&0===xe.length?a.createElement(o.$J,{action:a.createElement(o.Qj,{onClick:Ne},ve("extensions:develop.monitor.notifications.emptyFilterResult.actionLabel")),image:(0,r.jF)().emptySearch,imageSize:"tiny",title:ve("extensions:develop.monitor.notifications.emptyFilterResult.title"),subtitle:[ve("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.0"),ve("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-filter-placeholder")}):0!==xe.length||he&&be||Se?a.createElement(a.Fragment,null,Se&&V&&a.createElement("div",{className:"diagnostic-logs-delay-message"},a.createElement(o.v0,{type:"info",compact:!0,content:ve("extensions:develop.monitor.filter.delayMessage.text")})),a.createElement(c.default,{handleScroll:ke,scrollRef:ge,logs:fe,loading:Se,rowHeight:m.LogsConstants.LOG_ROW_HEIGHT,logCount:m.LogsConstants.LOG_FETCH_COUNT,isPreviousEmpty:T,isNextEmpty:E,logType:f.TabIndex.DIAGNOSTIC_LOGS,setSearchQuery:we,"data-componentid":t})):a.createElement(o.$J,{image:(0,r.jF)().emptySearch,imageSize:"tiny",title:ve("extensions:develop.monitor.notifications.emptyResponse.title"),subtitle:[ve("extensions:develop.monitor.notifications.emptyResponse.subtitle.0")+"".concat(null===(e=m.LogsConstants.TIMERANGE_DROPDOWN_OPTIONS.find((function(e){return e.value===re})))||void 0===e?void 0:e.text.toLowerCase()),ve("extensions:develop.monitor.notifications.emptyResponse.subtitle.1")],"data-componentid":"".concat(t,"-empty-data-placeholder")});var e},_e=function(){if(C)return a.createElement(o.Qj,{basic:!0,compact:!0,primary:!1,"data-componentid":"".concat(t,"-clear-filter-button"),onClick:Ne,disabled:!C},ve("extensions:develop.monitor.filter.topToolbar.buttons.clearFilters.label"))},Le=function(){if(-1!==A){var e=(0,p.getDateTimeWithOffset)(Te);R(e.toString()),D((e-36e5*A).toString())}Oe()},De=function(){var e=new Date(Number(te)).toISOString();return a.createElement("div",{className:"logs-refresh-component"},Q&&a.createElement(o.kW,{icon:"warning sign",popup:!0,compact:!0,warning:!0},ve("extensions:develop.monitor.filter.refreshMessage.tooltipText")),a.createElement("p",null,Q&&ve("extensions:develop.monitor.filter.refreshMessage.text")+(0,p.getTimeFromTimestamp)(e)))},Ze=function(e){return"requestId"===e?"traceId":e};return a.createElement("div",null,a.createElement("div",null,a.createElement("div",{className:"top-action-bar"},Ie(),a.createElement(u.default,{setFromTime:function(e){return D(e)},setToTime:function(e){return R(e)},setTimeRange:function(e){return F(e)},"data-componentid":t}),le?a.createElement(o.KM,{onClick:function(){return Le()},"data-componentid":"".concat(t,"-refresh-button")},a.createElement(l.Z,{name:"refresh"}),ve("extensions:develop.monitor.filter.refreshButton.label")):a.createElement(o.KM,{onClick:function(){return Oe()},"data-componentid":"".concat(t,"-search-button")},a.createElement(l.Z,{name:"search"}),ve("extensions:develop.monitor.filter.queryButton.label"))),a.createElement("div",null,a.createElement(a.Fragment,null,a.createElement("div",{className:"top-toolbar"},De(),a.createElement(s.Z.Group,null,W&&W.map((function(e,t){return a.createElement(s.Z,{key:t,className:"filter-pill"},Ze(e.key),a.createElement(s.Z.Detail,null,e.value),a.createElement(l.Z,{name:"delete",onClick:function(){return Me(e.key)}}))})),_e())),Re()))))}},30798:(e,t,n)=>{n.r(t),n.d(t,{useLogs:()=>i});var o=n(14603),r=n(43991),a=n(26187),i=function(e){var t={data:e,headers:{"Content-Type":"application/json"},method:o.f2.POST,url:0===(null==e?void 0:e.logType)?a.h.getState().config.endpoints.diagnosticLogsEndpoint:a.h.getState().config.endpoints.auditLogsEndpoint};return(0,r.Z)(e?t:null)}},44559:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(52983),r=n(9202),a=n(5873),i=n(74691),l=n(35244),s=n(48684),c=n(16029),u=n(14969),m=n(88171),d=n(68660),f=n(64873);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const T=function(e){var t=e["data-componentid"],n=e.setToTime,v=e.setFromTime,T=e.setTimeRange,g=p((0,o.useState)(!1),2),y=g[0],E=g[1],x=p((0,o.useState)(""),2),S=x[0],h=x[1],b=p((0,o.useState)(""),2),k=b[0],C=b[1],O=p((0,o.useState)(""),2),G=O[0],w=O[1],M=p((0,o.useState)(""),2),N=M[0],I=M[1],R=p((0,o.useState)(.25),2),_=R[0],L=R[1],D=p((0,o.useState)(.25),2),Z=D[0],A=D[1],F=p((0,o.useState)("+0000"),2),j=F[0],P=F[1],H=p((0,o.useState)(void 0),2),U=H[0],W=H[1],$=(0,r.$)().t,B=new Date,q=new Date,J=new Date(B.setDate(B.getDate()-60)),z=function(e){return e.toLocaleDateString("en-GB").split("/").reverse().join("-")},Q=function(){G&&N&&S&&k||L(Z),E(!1)};return o.createElement("div",{className:"time-range-selector-wrapper"},o.createElement(a.Z,{scrolling:!0,pointing:"top right",open:U,options:f.LogsConstants.TIMERANGE_DROPDOWN_OPTIONS,onOpen:function(){return W(!0)},onClose:function(){return W(!1)},onChange:function(e,t){var o=t.value;if(T(o),L(o),-1!==o){A(o),h(""),w(""),C(""),I("");var r=(new Date).getTime();n(r.toString()),v((r-36e5*o).toString())}else E(!0)},onClick:Q,value:_,"data-componentid":"".concat(t,"-timerange-dropdown")}),o.createElement("span",{hidden:-1!==_},o.createElement(i.Z,{name:y?"close":"calendar alternate",className:"icon-btn",color:"grey",onClick:y?Q:function(){return E(!y)}})),o.createElement(l.Z,{onOpen:function(){return E(!0)},open:y},o.createElement(s.Z,{className:"custom-portal-wrapper"},o.createElement("div",{className:"main-container",onClick:function(e){return e.stopPropagation()}},o.createElement(c.Z,{className:"date-picker-form",onSubmit:function(e){e.preventDefault();var t=new Date("".concat(S,"T").concat(G).concat(j)).getTime().toString(),o=new Date("".concat(k,"T").concat(N).concat(j)).getTime().toString();v(t),n(o),E(!1)}},o.createElement(c.Z.Group,null,o.createElement(c.Z.Field,{width:16},o.createElement("label",null,$("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.timeZone")),o.createElement(d.default,{getTimeZone:P,selectedTimeZone:j}))),o.createElement(c.Z.Group,null,o.createElement(c.Z.Field,{width:16},o.createElement("label",null,$("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.from")),o.createElement("div",{className:"date-time-picker-row"},o.createElement("div",null,o.createElement(u.Z,{className:"date-input",type:"date",value:S,min:z(J),max:z(q),onChange:function(e){return h(e.target.value)},required:!0})),o.createElement("div",null,o.createElement(u.Z,{className:"time-input",type:"time",value:G,onChange:function(e){return w(e.target.value)},required:!0}))))),o.createElement(c.Z.Group,null,o.createElement(c.Z.Field,{width:16},o.createElement("label",null,$("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.to")),o.createElement("div",{className:"date-time-picker-row"},o.createElement("div",null,o.createElement(u.Z,{className:"date-input",type:"date",min:S||z(J),max:z(q),value:k,onChange:function(e){return C(e.target.value)},required:!0})),o.createElement("div",null,o.createElement(u.Z,{className:"time-input",type:"time",value:N,onChange:function(e){return I(e.target.value)},required:!0}))))),o.createElement(c.Z.Group,null,o.createElement(c.Z.Field,{width:16},o.createElement(m.Z,{fluid:!0,icon:"check",type:"submit"}))))))))}},68660:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(52983),r=n(9202),a=n(5873),i=n(22756).LogsConstants.TIME_ZONE_DATA;const l=function(e){var t=e.getTimeZone,n=e.selectedTimeZone,l=(0,r.$)().t;return o.createElement(a.Z,{search:!0,selection:!0,placeholder:l("extensions:develop.monitor.filter.dropdowns.timeZone.placeholder"),value:n,options:i,onChange:function(e,n){var o=n.value;t(o)}})}},22756:(e,t,n)=>{n.r(t),n.d(t,{LogsConstants:()=>o.LogsConstants});var o=n(64873)},64873:(e,t,n)=>{n.r(t),n.d(t,{LogsConstants:()=>c});var o=n(41482);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}var c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));l(c,"LOG_FETCH_COUNT",100),l(c,"LOG_ROW_HEIGHT",48),l(c,"DELAY_MESSEGE_TIMEOUT",15e3),l(c,"REFRESH_BUTTON_TIMEOUT",12e4),l(c,"TIME_ZONE_DATA",[{key:0,text:"(GMT+00:00) UTC",value:"+0000"},{key:1,text:"(GMT+01:00) ECT",value:"+0100"},{key:2,text:"(GMT+02:00) EET",value:"+0200"},{key:3,text:"(GMT+02:00) ART",value:"+0200"},{key:4,text:"(GMT+03:00) EAT",value:"+0300"},{key:5,text:"(GMT+03:30) MET",value:"+0330"},{key:6,text:"(GMT+04:00) NET",value:"+0400"},{key:7,text:"(GMT+05:00) PLT",value:"+0500"},{key:8,text:"(GMT+05:30) IST",value:"+0530"},{key:9,text:"(GMT+06:00) BST",value:"+0600"},{key:10,text:"(GMT+07:00) VST",value:"+0700"},{key:11,text:"(GMT+08:00) CTT",value:"+0800"},{key:12,text:"(GMT+09:00) JST",value:"+0900"},{key:13,text:"(GMT+09:30) ACT",value:"+0930"},{key:14,text:"(GMT+10:00) AET",value:"+1000"},{key:15,text:"(GMT+11:00) SST",value:"+1100"},{key:16,text:"(GMT+12:00) NST",value:"+1200"},{key:17,text:"(GMT-11:00) MIT",value:"-1100"},{key:18,text:"(GMT-10:00) HST",value:"-1000"},{key:19,text:"(GMT-09:00) AST",value:"-0900"},{key:20,text:"(GMT-08:00) PST",value:"-0800"},{key:21,text:"(GMT-07:00) PNT",value:"-0700"},{key:22,text:"(GMT-07:00) MST",value:"-0700"},{key:23,text:"(GMT-06:00) CST",value:"-0600"},{key:24,text:"(GMT-05:00) EST",value:"-0500"},{key:25,text:"(GMT-05:00) IET",value:"-0500"},{key:26,text:"(GMT-04:00) PRT",value:"-0400"},{key:27,text:"(GMT-03:30) CNT",value:"-0330"},{key:28,text:"(GMT-03:00) AGT",value:"-0300"},{key:29,text:"(GMT-03:00) BET",value:"-0300"},{key:30,text:"(GMT-01:00) CAT",value:"-0100"}]),l(c,"TIMERANGE_DROPDOWN_OPTIONS",[{key:0,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.0"),value:.25},{key:1,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.1"),value:.5},{key:2,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.2"),value:1},{key:3,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.3"),value:4},{key:4,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.4"),value:12},{key:5,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.5"),value:24},{key:6,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.6"),value:48},{key:7,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.7"),value:72},{key:8,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.8"),value:168},{key:9,text:o.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.9"),value:-1}])},51776:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(30798);const r=function(e){var t=(0,o.useLogs)(e),n=t.data,r=t.error,a=t.isLoading;return{error:r,list:(null==n?void 0:n.logs)||[],loading:a,next:(null==n?void 0:n.nextToken)||null,previous:(null==n?void 0:n.previousToken)||null}}},78237:(e,t,n)=>{n.r(t),n.d(t,{formatTimestampToDateTime:()=>o.formatTimestampToDateTime,getDateFromTimestamp:()=>o.getDateFromTimestamp,getDateTimeWithOffset:()=>o.getDateTimeWithOffset,getTimeFromTimestamp:()=>o.getTimeFromTimestamp});var o=n(15449)}}]);