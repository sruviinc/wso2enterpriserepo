"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[75081],{75081:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var o=n(14603),r=n(90268),a=n(81816),i=n(52983),l=n(9202),s=n(54221),c=n(55498),u=n(30640),d=n(57477),p=n(83374),m=n(74691),f=n(97860),g=n(94635),h=n(14969),v=n(39345),y=n(67127),E=n(21921),b=n(79232);function I(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const C=function(e){var t=e.closeWizard,n=e.handleGroupAdd,o=e.existingGroupsList,r=e.isSubmitting,s=e["data-componentid"],c=(0,l.$)().t,u=S((0,i.useState)(!0),2),d=u[0],p=u[1],m=S((0,i.useState)([]),2),f=m[0],h=m[1],R=S((0,i.useState)([]),2),A=R[0],C=R[1],w=S((0,i.useState)([]),2),x=w[0],G=w[1],O=S((0,i.useState)([]),2)[1],L=S((0,i.useState)([]),2),T=L[0],P=L[1],j=S((0,i.useState)(!1),2),k=j[0],U=j[1];(0,i.useEffect)((function(){Z()}),[]),(0,i.useEffect)((function(){P(A)}),[A]);var Z=function(){p(!0),(0,b.hI)(null).then((function(e){var t;N(null==e||null===(t=e.data)||void 0===t?void 0:t.Resources,null==o?void 0:o.groups)})).finally((function(){p(!1)}))},N=function(e,t){var n=[];(null==e?void 0:e.length)>0&&(e.forEach((function(e){-1===t.findIndex((function(t){return(null==t?void 0:t.name)===(null==e?void 0:e.displayName)}))&&n.push(e)})),h(n),G(n))},_=function(e){h(e)},z=function(e){C(e)},M=function(e){O(e)},$=function(e){var t=e.split("/");return t.length>1?{labelColor:"teal",labelText:t[0].toString()}:{labelColor:"olive",labelText:"Primary"}};return i.createElement(E.Z,{open:!0,className:"wizard create-role-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!1,"data-componentId":s},i.createElement(E.Z.Header,{className:"wizard-header"},c("extensions:console.applicationRoles.assignGroupWizard.heading"),i.createElement(a.X6,{as:"h6"},c("extensions:console.applicationRoles.assignGroupWizard.subHeading"))),i.createElement(E.Z.Content,{className:"content-container",scrolling:!0},d?i.createElement(a.pO,null):i.createElement(a.IX,{selectionComponent:!0,searchPlaceholder:c("console:manage.features.transferList.searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:function(e,t){var n=t.value,o=[];if((0,y.Z)(n))_(x);else{var r=new RegExp((0,v.Z)(n),"i");x&&x.map((function(e){r.test(e.displayName)&&(o.push(e),_(o))}))}},"data-componentid":"application-role-assign-group-modal",isLoading:d},i.createElement(a.Jv,{isListEmpty:!((null==f?void 0:f.length)>0),listType:"unselected",listHeaders:[c("console:manage.features.transferList.list.headers.0"),c("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:function(){k?P([]):(P(f),z(f)),U(!k)},isHeaderCheckboxChecked:k,emptyPlaceholderContent:c("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:c("console:manage.features.transferList.list.emptyPlaceholders.default")},null==f?void 0:f.map((function(e,t){var n,o=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");return i.createElement(a.qT,{style:{height:"100%"},handleItemChange:function(){return function(e){var t=I(T);null!=t&&t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),z(t),M(t),U((null==f?void 0:f.length)===t.length)}(e)},key:t,listItem:(null==o?void 0:o.length)>1?o[1]:null==e?void 0:e.displayName,listItemId:e.id,listItemIndex:t,listItemTypeLabel:$(null==e?void 0:e.displayName),isItemChecked:T.includes(e),showSecondaryActions:!1,"data-componentid":"application-role-assign-group-modal-unselected"})}))))),i.createElement(E.Z.Actions,null,i.createElement(g.Z,null,i.createElement(g.Z.Row,{column:1},i.createElement(g.Z.Column,{mobile:8,tablet:8,computer:8},i.createElement(a.Qj,{floated:"left",onClick:function(){return t()},"data-componentId":"".concat(s,"-cancel-button")},c("common:cancel"))),i.createElement(g.Z.Column,{mobile:8,tablet:8,computer:8},i.createElement(a.KM,{floated:"right",onClick:function(){return e=[],A.forEach((function(t){e.push({name:t.displayName})})),void n(e);var e},"data-componentId":"".concat(s,"-assign-button"),loading:r||d,disabled:r||d||0===(null==f?void 0:f.length)},c("extensions:console.applicationRoles.assign")))))))};var w=n(99778);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const O=function(e){var t=e.appId,n=e.roleId,v=e["data-componentid"],y=(0,l.$)().t,E=(0,s.I0)(),b=x((0,i.useState)(""),2),I=b[0],S=b[1],R=x((0,i.useState)([]),2),A=R[0],G=R[1],O=x((0,i.useState)(!1),2),L=O[0],T=O[1],P=x((0,i.useState)(!1),2),j=P[0],k=P[1],U=x((0,i.useState)(void 0),2),Z=U[0],N=U[1],_=x((0,i.useState)(!1),2),z=_[0],M=_[1],$=(0,c.useApplicationRoleMappedGroups)(t,n),Q=$.data,D=$.mutate,V=$.isLoading,F=$.error;(0,i.useEffect)((function(){Q instanceof d.u||F?H({description:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.description"),level:o.QU.ERROR,message:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.message")}):Q&&Q.groups&&G(Q.groups)}),[Q]);var H=function(e){E((0,r.V_)(e))},X=function(){S(""),G(null==Q?void 0:Q.groups)};return V?i.createElement(a.pO,null):i.createElement(i.Fragment,null,i.createElement(g.Z,null,(I||0!==(null==A?void 0:A.length))&&i.createElement(g.Z.Row,{columns:1,className:"pb-0"},i.createElement(g.Z.Column,{width:6},i.createElement(h.Z,{"data-componentid":"".concat(v,"-groups-list-search-input"),icon:i.createElement(m.Z,{name:"search"}),iconPosition:"left",onChange:function(e){return function(e){if(S(e),""!==e){var t=Q.groups.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}));G(t)}else G(Q.groups)}(e.target.value)},value:I,placeholder:y("extensions:console.applicationRoles.roleGroups.searchGroup"),floated:"left",fluid:!0})),i.createElement(g.Z.Column,{width:10},i.createElement(a.KM,{"data-testid":"".concat(v,"-groups-list-assign-button"),onClick:function(){return k(!0)},floated:"right"},i.createElement(m.Z,{name:"add"}),y("extensions:console.applicationRoles.roleGroups.assignGroup")))),i.createElement(g.Z.Row,{columns:1},i.createElement(g.Z.Column,{width:16},i.createElement(a.wQ,{loadingStateOptions:{count:u.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:[{icon:function(){return"trash alternate"},onClick:function(e,t){N(t),T(!L)},popupText:function(){return y("common:delete")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n;return i.createElement(f.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(v,"-item-heading")},i.createElement(a.JT,{image:i.createElement(a.Xo,{name:null==e||null===(t=e.name)||void 0===t?void 0:t.split("/")[1],size:"mini","data-testid":"".concat(v,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(v,"-item-image")}),i.createElement(f.Z.Content,null,i.createElement("div",{className:"mt-1"},null==e||null===(n=e.name)||void 0===n?void 0:n.split("/")[1]," ")))},title:y("console:manage.features.groups.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"type",id:"type",key:"type",render:function(e){var t=(0,p.tF)(e.name);return t===w.XS?w.XS:t.toUpperCase()},title:i.createElement(i.Fragment,null,y("console:manage.features.groups.list.columns.source"),i.createElement(a.GI,{trigger:i.createElement("div",{className:"inline"},i.createElement(m.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:"Where group is managed.",position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:null}],data:A,onRowClick:function(){return null},"data-testid":v,placeholders:I&&0===(null==A?void 0:A.length)?i.createElement(a.$J,{"data-testid":"".concat(v,"-search-empty-placeholder"),action:i.createElement(a.Qj,{"data-testid":"".concat(v,"-search-empty-placeholder-clear-button"),onClick:X},y("console:manage.features.roles.list.emptyPlaceholders.search.action")),title:y("console:manage.features.roles.list.emptyPlaceholders.search.title"),subtitle:[y("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.0",{searchQuery:I}),y("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.1")]}):0===(null==A?void 0:A.length)?i.createElement(a.$J,{"data-testid":"".concat(v,"-search-empty-placeholder"),action:i.createElement(a.KM,{"data-testid":"".concat(v,"-groups-list-assign-button"),onClick:function(){return k(!0)}},i.createElement(m.Z,{name:"add"}),y("extensions:console.applicationRoles.roleGroups.assignGroup")),title:y("extensions:console.applicationRoles.roleGroups.placeholder.title"),subtitle:[y("extensions:console.applicationRoles.roleGroups.placeholder.subTitle.0"),y("extensions:console.applicationRoles.roleGroups.placeholder.subTitle.1")]}):null,isLoading:V})))),L&&i.createElement(a.cV,{"data-testid":"".concat(v,"-delete-item-confirmation-modal"),onClose:function(){return T(!1)},type:"negative",open:L,assertionHint:y("console:manage.features.roles.list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return T(!1)},onPrimaryActionClick:function(){var e;e={added_groups:[],removed_groups:[{name:Z.name}]},M(!0),(0,c.updateApplicationRoleMappedGroups)(t,n,e).then((function(){H({description:y("console:manage.features.groups.notifications.deleteGroup.success.description"),level:o.QU.SUCCESS,message:y("console:manage.features.groups.notifications.deleteGroup.success.message")}),D()})).catch((function(){H({description:y("console:manage.features.groups.notifications.deleteGroup.genericError.description"),level:o.QU.ERROR,message:y("console:manage.features.groups.notifications.deleteGroup.error.message")})})).finally((function(){M(!1),T(!1)}))},closeOnDimmerClick:!1,primaryActionLoading:z},i.createElement(a.cV.Header,null,y("console:manage.features.roles.list.confirmations.deleteItem.header")),i.createElement(a.cV.Message,{attached:!0,negative:!0},y("extensions:console.applicationRoles.roleGroups.confirmation.deleteRole.message")),i.createElement(a.cV.Content,null,y("extensions:console.applicationRoles.roleGroups.confirmation.deleteRole.content"))),j&&i.createElement(C,{"data-testid":"".concat(v,"-assign-group-wizard"),closeWizard:function(){return k(!1)},existingGroupsList:Q,handleGroupAdd:function(e){var r={added_groups:e,removed_groups:[]};M(!0),(0,c.updateApplicationRoleMappedGroups)(t,n,r).then((function(){H({description:y("extensions:console.applicationRoles.roleGroups.notifications.addGroups.success.description"),level:o.QU.SUCCESS,message:y("extensions:console.applicationRoles.roleGroups.notifications.addGroups.success.message")}),D()})).catch((function(){H({description:y("extensions:console.applicationRoles.roleGroups.notifications.addGroups.error.message"),level:o.QU.ERROR,message:y("extensions:console.applicationRoles.roleGroups.notifications.addGroups.error.message")})})).finally((function(){M(!1),k(!1)}))},isSubmitting:z}))};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const P=function(e){var t=e.appId,n=e.roleId,v=e["data-componentid"],y=(0,l.$)().t,E=(0,s.I0)(),b=L((0,i.useState)(""),2),I=b[0],S=b[1],R=L((0,i.useState)([]),2),A=R[0],C=R[1],x=L((0,i.useState)([]),2),G=x[0],O=x[1],T=(0,c.useApplicationRoleInvitedUserGroups)(t,n),P=T.data,j=T.isLoading,k=T.error,U=(0,c.useDescendantsOfSubOrg)(),Z=U.data,N=U.isLoading,_=U.error;(0,i.useEffect)((function(){(P instanceof d.u||k)&&M({description:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.description"),level:o.QU.ERROR,message:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.message")})}),[P]),(0,i.useEffect)((function(){(Z instanceof d.u||_)&&M({description:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.description"),level:o.QU.ERROR,message:y("extensions:console.applicationRoles.roleGroups.fetchGroups.error.message")})}),[Z]),(0,i.useEffect)((function(){var e;(null==P||null===(e=P.groups)||void 0===e?void 0:e.length)>0&&(null==Z?void 0:Z.length)>0&&z()}),[P,Z]);var z=function(){var e=P.groups,t=Z,n=e.filter((function(e){var n=t.find((function(t){return t.id===e.organization}));if(n)return e.orgName=n.name,e}));O(n),C(n)},M=function(e){E((0,r.V_)(e))},$=function(){S(""),C(G)};return j&&N?i.createElement(a.pO,null):i.createElement(i.Fragment,null,i.createElement(g.Z,null,(I||0!==(null==A?void 0:A.length))&&i.createElement(g.Z.Row,{columns:1,className:"pb-0"},i.createElement(g.Z.Column,{width:6},i.createElement(h.Z,{"data-componentid":"".concat(v,"-groups-list-search-input"),icon:i.createElement(m.Z,{name:"search"}),iconPosition:"left",onChange:function(e){return function(e){if(S(e),""!==e){var t=G.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}));C(t)}else C(G)}(e.target.value)},value:I,placeholder:y("extensions:console.applicationRoles.roleGroups.searchGroup"),floated:"left",fluid:!0}))),i.createElement(g.Z.Row,{columns:1},i.createElement(g.Z.Column,{width:16},i.createElement(a.wQ,{loadingStateOptions:{count:u.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n;return i.createElement(f.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(v,"-item-heading")},i.createElement(a.JT,{image:i.createElement(a.Xo,{name:null==e||null===(t=e.name)||void 0===t?void 0:t.split("/")[1],size:"mini","data-testid":"".concat(v,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(v,"-item-image")}),i.createElement(f.Z.Content,null,i.createElement("div",{className:"mt-1"},null==e||null===(n=e.name)||void 0===n?void 0:n.split("/")[1]," ")))},title:y("console:manage.features.groups.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"organizationName",id:"organizationName",key:"organizationName",render:function(e){var t=null==e?void 0:e.orgName;return"super"===t?"Asgardeo":t},title:"Organization"},{allowToggleVisibility:!1,dataIndex:"type",id:"type",key:"type",render:function(e){var t=(0,p.tF)(e.name);return t===w.XS?w.XS:t.toUpperCase()},title:i.createElement(i.Fragment,null,y("console:manage.features.groups.list.columns.source"),i.createElement(a.GI,{trigger:i.createElement("div",{className:"inline"},i.createElement(m.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:"Where group is managed.",position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))}],data:A,onRowClick:function(){return null},"data-testid":v,placeholders:I&&0===(null==A?void 0:A.length)?i.createElement(a.$J,{"data-testid":"".concat(v,"-search-empty-placeholder"),action:i.createElement(a.Qj,{"data-testid":"".concat(v,"-search-empty-placeholder-clear-button"),onClick:$},y("console:manage.features.roles.list.emptyPlaceholders.search.action")),title:y("console:manage.features.roles.list.emptyPlaceholders.search.title"),subtitle:[y("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.0",{searchQuery:I}),y("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.1")]}):0===(null==A?void 0:A.length)?i.createElement(a.$J,{"data-testid":"".concat(v,"-search-empty-placeholder"),title:y("extensions:console.applicationRoles.roleGroups.placeholder.title"),subtitle:[y("extensions:console.applicationRoles.roleGroups.placeholder.subTitle.0")]}):null,isLoading:j||N})))))};var j=n(6299),k=n(1751);function U(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const z=function(e){var t=e.appId,n=e.authenticatorId,u=e.roleId,p=e["data-componentid"],m=(0,l.$)().t,f=(0,s.I0)(),h=Z((0,i.useState)(!0),2),E=h[0],b=h[1],I=Z((0,i.useState)(!0),2),S=I[0],R=I[1],A=Z((0,i.useState)(!1),2),C=A[0],w=A[1],x=Z((0,i.useState)([]),2),G=x[0],O=x[1],L=Z((0,i.useState)([]),2),T=L[0],P=L[1],j=Z((0,i.useState)([]),2),N=j[0],_=j[1],z=Z((0,i.useState)([]),2),M=z[0],$=z[1],Q=Z((0,i.useState)([]),2),D=Q[0],V=Q[1],F=Z((0,i.useState)(!1),2),H=F[0],X=F[1],J=(0,c.useIdentityProviderAssignedGroups)(t,u,n),q=J.data,W=J.mutate,B=J.isLoading,K=J.error;(0,i.useEffect)((function(){R(!0),(0,k.OL)(n).then((function(e){var t=[];e.groups.map((function(e){t.push(e.name)})),P(t),$(t)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?te({description:m("console:develop.features.authenticationProvider.notifications.getIDP.error.description",{description:e.response.data.description}),level:o.QU.ERROR,message:m("console:develop.features.authenticationProvider.notifications.getIDP.error.message")}):te({description:m("console:develop.features.authenticationProvider.notifications.getIDP.genericError.description"),level:o.QU.ERROR,message:m("console:develop.features.authenticationProvider.notifications.getIDP.genericError.message")})})).finally((function(){R(!1)}))}),[]),(0,i.useEffect)((function(){b(S||B)}),[S,B]),(0,i.useEffect)((function(){var e;q instanceof d.u||K?te({description:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.fetchAssignedGroups.genericError.description"),level:o.QU.ERROR,message:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.fetchAssignedGroups.genericError.message")}):q&&(null==q||null===(e=q.groups)||void 0===e?void 0:e.length)>0&&(O(q.groups),V(null==q?void 0:q.groups.map((function(e){return e.name}))),_(null==q?void 0:q.groups.map((function(e){return e.name}))))}),[q]),(0,i.useEffect)((function(){V(N)}),[N]);var Y=function(e){P(e)},ee=function(e){_(e)},te=function(e){f((0,r.V_)(e))};return E?i.createElement(a.pJ,{padded:"very"},i.createElement(a.pO,null)):i.createElement(g.Z,null,i.createElement(g.Z.Row,null,i.createElement(g.Z.Column,{width:10},i.createElement(a.IX,{selectionComponent:!0,searchPlaceholder:m("console:manage.features.transferList.searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:function(e,t){var n=t.value,o=[];if((0,y.Z)(n))Y(M);else{var r=new RegExp((0,v.Z)(n),"i");M&&M.map((function(e){r.test(e)&&(o.push(e),Y(o))}))}},"data-componentid":"application-role-assign-group-modal",isLoading:E,bordered:!1,basic:!0},i.createElement(a.Jv,{isListEmpty:!((null==T?void 0:T.length)>0),listType:"unselected",handleHeaderCheckboxChange:function(){H?V([]):(V(T),ee(T)),X(!H)},isHeaderCheckboxChecked:H,emptyPlaceholderContent:m("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:m("console:manage.features.transferList.list.emptyPlaceholders.default")},null==T?void 0:T.map((function(e,t){return i.createElement(a.qT,{style:{height:"100%"},handleItemChange:function(){return function(e){var t=U(D);null!=t&&t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),ee(t),X((null==T?void 0:T.length)===t.length)}(e)},key:t,listItem:e,listItemId:e,listItemIndex:t,isItemChecked:D.includes(e),showSecondaryActions:!1,"data-componentid":"application-role-assign-group-modal-unselected"})})))))),(null==T?void 0:T.length)>0&&i.createElement(a.KM,{className:"ml-6 mb-5",size:"small",floated:"left",onClick:function(){return function(){w(!0);var e={added_groups:null==N?void 0:N.filter((function(e){return!(null!=G&&G.find((function(t){return(null==t?void 0:t.name)===e})))})).map((function(e){return{name:e}})),removed_groups:null==G?void 0:G.filter((function(e){return!N.includes(null==e?void 0:e.name)}))};(0,c.updateIdentityProviderAssignedGroups)(t,u,n,e).then((function(){te({description:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.updateAssignedGroups.success.description"),level:o.QU.SUCCESS,message:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.updateAssignedGroups.success.message")}),W()})).catch((function(){te({description:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.updateAssignedGroups.genericError.description"),level:o.QU.ERROR,message:m("extensions:console.applicationRoles.authenticatorGroups.groupsList.notifications.updateAssignedGroups.genericError.message")})})).finally((function(){w(!1)}))}()},"data-componentId":"".concat(p,"-assign-button"),loading:C||E,disabled:C||E},m("extensions:console.applicationRoles.authenticatorGroups.groupsList.assignGroups")))};function M(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var V=function(e){var t=e.appId,n=e.groupsList,o=e.roleId,r=e["data-componentid"],s=(0,l.$)().t,c=$((0,i.useState)([]),2),d=c[0],p=c[1],m=function(){return u.m8.push(u.$x.getPaths().get("CONNECTIONS"))},f=function(){return 0===(null==n?void 0:n.length)?i.createElement(a.$J,{"data-testid":"".concat(r,"-empty-list-empty-placeholder"),action:i.createElement(a.Qj,{onClick:m},s("extensions:console.applicationRoles.authenticatorGroups.goToConnections")),image:(0,u.jF)().newList,imageSize:"tiny",title:s("extensions:console.applicationRoles.authenticatorGroups.placeholder.title"),subtitle:[s("extensions:console.applicationRoles.authenticatorGroups.placeholder.subTitle.0"),s("extensions:console.applicationRoles.authenticatorGroups.placeholder.subTitle.1")]}):null};return i.createElement(i.Fragment,null,i.createElement(g.Z.Row,null,i.createElement(g.Z.Column,{mobile:16,tablet:16,computer:12},i.createElement(j.Z,{"data-componentid":"".concat(r,"-authenticator-groups")},function(e){return i.createElement(i.Fragment,null,f(),i.createElement(a.el,null,e.map((function(e){return i.createElement(i.Fragment,{key:e.id},i.createElement(a.el.Title,{id:e.id,"data-componentid":"".concat(r,"-").concat(e.name,"-title"),attached:!0,active:null==d?void 0:d.includes(e.name),accordionIndex:e.name,className:"nested-list-accordion-title",onClick:function(){return function(e,t,n){var o=M(t);null!=t&&t.includes(e.name)?o=o.filter((function(t){return t!==e.name})):o.push(e.name),n(o)}(e,d,p)},hideChevron:!1},i.createElement(a.JT,{image:i.createElement(a.Xo,{name:e.name,size:"mini","data-componentid":"".concat(r,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(r,"-item-image")}),e.name),i.createElement(a.el.Content,{secondary:!1,active:null==d?void 0:d.includes(e.name),"data-componentid":"".concat(r,"-color-palette-accordion-content")},i.createElement(z,{authenticatorId:e.id,roleId:o,appId:t})))}))))}(n)))))};V.defaultProps={selection:!0,showHeader:!1,showListItemActions:!0,showMetaContent:!0,showRoleType:!1};var F=n(43469),H=n(61133),X=n(69466);function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const W=function(e){var t=e.appId,n=e.roleId,c=e["data-componentid"],u=(0,s.I0)(),d=(0,l.$)().t,p=J((0,i.useState)(!0),2),m=p[0],f=p[1],g=J((0,i.useState)(!0),2),h=g[0],v=g[1],y=J((0,i.useState)(!0),2),E=y[0],b=y[1],I=J((0,i.useState)([]),2),S=I[0],R=I[1],A=J((0,i.useState)([]),2),C=A[0],w=A[1],x=J((0,i.useState)([]),2),G=x[0],O=x[1];(0,i.useEffect)((function(){L(t)}),[t]),(0,i.useEffect)((function(){T()}),[]),(0,i.useEffect)((function(){f(h||E)}),[h,E]),(0,i.useEffect)((function(){S.length<=0||G.length<=0||P()}),[S,G]);var L=function(e){v(!0),(0,H.sl)(e).then((function(e){var t,n,o,r=null==e||null===(t=e.authenticationSequence)||void 0===t?void 0:t.attributeStepId,a=null==e||null===(n=e.authenticationSequence)||void 0===n||null===(o=n.steps)||void 0===o?void 0:o.find((function(e){return e.id===r}));O(null==a?void 0:a.options)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?u((0,r.V_)({description:e.response.data.description,level:o.QU.ERROR,message:d("console:develop.features.applications.notifications.fetchApplication.error.message")})):u((0,r.V_)({description:d("console:develop.features.applications.notifications.fetchApplication.genericError.description"),level:o.QU.ERROR,message:d("console:develop.features.applications.notifications.fetchApplication.genericError.message")}))})).finally((function(){v(!1)}))},T=function(){b(!0),(0,k.ag)(null,X.S_.FEDERATED).then((function(e){var t=e.filter((function(e){return e.name!==F.ApplicationRolesConstants.ORGANIZATION_LOGIN}));R(t)})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?u((0,r.V_)({description:d("console:develop.features.authenticationProvider.notifications.getIDPList.error.message",{description:e.response.data.description}),level:o.QU.ERROR,message:d("console:develop.features.authenticationProvider.notifications.getIDPList.error.message")})):u((0,r.V_)({description:d("console:develop.features.authenticationProvider.notifications.getIDPList.genericError.description"),level:o.QU.ERROR,message:d("console:develop.features.authenticationProvider.notifications.getIDPList.genericError.message")}))})).finally((function(){b(!1)}))},P=function(){var e=S.filter((function(e){return G.find((function(t){return e.name===t.idp}))}));w(e)};return m?i.createElement(a.pO,null):i.createElement(V,{"data-componentid":"".concat(c,"-application-list"),isLoading:m,groupsList:C,roleId:n,appId:t})};var B=n(87089);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const ee=function(e){var t,n,o=e.appId,r=e.roleId,l=e["data-componentid"],c=K((0,i.useState)(void 0),2),d=c[0],p=c[1],m=(0,s.v9)((function(e){return e.config.ui.features})),f=window.AppUtils.getConfig().organizationName,g=function(e){u.m8.push({hash:"#".concat(B.El.TAB_INDEX).concat(e),pathname:window.location.pathname}),p(e)},h=function(){return i.createElement(a.M$.Pane,{controlledSegmentation:!0},i.createElement(O,{appId:o,roleId:r,"data-componentid":"".concat(l,"-application-role-groups")}))},v=function(){return i.createElement(a.M$.Pane,{controlledSegmentation:!0},i.createElement(P,{appId:o,roleId:r,"data-componentid":"".concat(l,"-application-role-invited-user-groups")}))},y=function(){return i.createElement(a.M$.Pane,{controlledSegmentation:!0},i.createElement(W,{appId:o,roleId:r,"data-componentid":"".concat(l,"-application-role-authenticator-groups")}))};return i.createElement(i.Fragment,null,i.createElement(a.M$,{activeIndex:d,"data-testid":"".concat(l,"-resource-tabs"),defaultActiveIndex:0,onTabChange:function(e,t){g(t.activeIndex)},panes:(n=[{componentId:"groups",menuItem:"Groups",render:h}],null!=m&&null!==(t=m.identityProviderGroups)&&void 0!==t&&t.enabled&&n.push({componentId:"authenticator-groups",menuItem:"External Groups",render:y}),f&&n.push({componentId:"invited-user-groups",menuItem:"Invited User Groups",render:v}),n)}))};function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var oe=function(e){var t=e["data-componentid"],n=(0,l.$)().t,d=(0,s.I0)(),p=window.AppUtils.getConfig().organizationName,m=te((0,i.useState)(void 0),2),f=m[0],g=m[1],h=te((0,i.useState)(void 0),2),v=h[0],y=h[1],E=te((0,i.useState)(!0),2),b=E[0],I=E[1],S=te((0,i.useState)(!1),2),R=S[0],A=S[1];(0,i.useEffect)((function(){var e=u.m8.location.pathname.split("/"),t=e[e.length-1],n=e[e.length-2];g(t),y(n)}),[]),(0,i.useEffect)((function(){f&&v&&function(e){I(!0),(0,c.getApplicationRolesList)(v,null,null,null,null).then((function(t){t.roles.find((function(t){return t.name===e}))?A(!0):A(!1)})).catch((function(e){var t,a,i,l,s,c,u,p,m,f,g;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.description?d((0,r.V_)({description:null!==(i=null!==(l=null==e||null===(s=e.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.description)&&void 0!==l?l:null==e||null===(u=e.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.detail)&&void 0!==i?i:n("extensions:develop.applications.edit.sections.roles.notifications.fetchApplicationRoles.error.description"),level:o.QU.ERROR,message:null!==(m=null==e||null===(f=e.response)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.message)&&void 0!==m?m:n("extensions:develop.applications.edit.sections.roles.notifications.fetchApplicationRoles.error.message")})):d((0,r.V_)({description:n("extensions:develop.applications.edit.sections.roles.notifications.fetchApplicationRoles.genericError.description"),level:o.QU.ERROR,message:n("extensions:develop.applications.edit.sections.roles.notifications.fetchApplicationRoles.genericError.message")}))})).finally((function(){I(!1)}))}(f)}),[f,v]);return i.createElement(a.O9,{pageTitle:"Edit Role",title:i.createElement("span",null,f),contentTopMargin:!0,description:null,image:i.createElement(a.Xo,{name:f,size:"tiny",floated:"left"}),loadingStateOptions:{count:5,imageType:"square"},isLoading:b,backButton:{onClick:function(){p?u.m8.push(u.$x.getPaths().get("APPLICATION_ROLES_SUB")):u.m8.push(u.$x.getPaths().get("APPLICATION_ROLES"))},text:n("console:manage.pages.rolesEdit.backButton",{type:"application roles"})},titleTextAlign:"left",bottomMargin:!1,pageHeaderMaxWidth:!0,"data-testid":"".concat(t,"-page-layout"),truncateContent:!0},R?i.createElement(ee,{appId:v,roleId:f}):null)};oe.DefaultProps={"data-componentid":"application-role-edit-page"};const re=oe}}]);