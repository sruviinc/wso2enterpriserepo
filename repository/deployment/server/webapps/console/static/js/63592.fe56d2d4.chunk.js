(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[63592],{6239:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ye});var r=t(42125),a=t(89101),o=t(14603),l=t(90268),i=t(81816),s=t(52983),c=t(9202),u=t(54221),d=t(73949),p=t(92305),m=t(33834),f=t(65211),v=t(54004),g=t(50593),y=t(20996),b=t(96433),h=t(83374),E=t(10250),I=t(46439),O=t(46440),R=t(67127),S=t(90656),A=t(80785),N=t(90820),L=t(17999),C=t(61549);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_.apply(this,arguments)}function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var w=function(e){var n,t,r=e.isReadOnly,a=e.role,d=e.onRoleUpdate,p=e.tabIndex,m=e.isSubOrganization,f=e["data-componentid"],y=(0,u.I0)(),b=(0,c.$)().t,h=(0,A.Z)(!m,"type eq tenant","apiResources").data,T=(0,A.Z)(!m,"type eq organization","apiResources").data,w=(0,u.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.legacyMode})),Z=j((0,s.useState)(void 0),2),U=Z[0],x=Z[1],M=(0,s.useMemo)((function(){var e;if(!h)return null;var n=(0,O.Z)(h),t=[];return null!=w&&w.rolesV1?t.push(N.S.ROLE_API_RESOURCES_COLLECTION_NAME):t.push(N.S.ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[h]),P=(0,s.useMemo)((function(){var e;if(!T)return null;var n=(0,O.Z)(T),t=[];return null!=w&&w.rolesV1?t.push(N.S.ORG_ROLE_API_RESOURCES_COLLECTION_NAME):t.push(N.S.ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[T]),z=function(e,n){var t=e.apiResources.read.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),r=e.apiResources.write.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),a=t.every((function(e){return n.includes(e)})),o=r.every((function(e){return n.includes(e)}));return a||o?{permissions:(0,L.Z)(e.apiResources[o?"write":"read"]),read:!o&&a,write:o}:null},G=(0,s.useMemo)((function(){var e,n,t,r=null==a||null===(e=a.permissions)||void 0===e?void 0:e.map((function(e){return e.value})),o={organization:{},tenant:{}};return null==M||null===(n=M.apiResourceCollections)||void 0===n||n.forEach((function(e){var n=z(e,r);n&&(o.tenant[e.id]=n)})),null==P||null===(t=P.apiResourceCollections)||void 0===t||t.forEach((function(e){var n=z(e,r);n&&(o.organization[e.id]=n)})),o}),[a,M,P]);return s.createElement(i.pJ,{padded:"very",className:"console-role-permissions"},s.createElement("div",{className:"section-heading"},s.createElement(i.X6,{as:"h4"},b("console:manage.features.roles.edit.permissions.heading")),s.createElement(i.X6,{as:"h6",color:"grey",subHeading:!0},b(r?"console:manage.features.roles.edit.permissions.readOnlySubHeading":"console:manage.features.roles.edit.permissions.subHeading"))),m?s.createElement(E.Z,{readOnly:!0,multiple:!0,options:null!==(n=null==a?void 0:a.permissions)&&void 0!==n?n:[],defaultValue:null!==(t=null==a?void 0:a.permissions)&&void 0!==t?t:[],getOptionLabel:function(e){return e.display},renderInput:function(e){return s.createElement(I.Z,_({},e,{"data-componentid":"".concat(f,"-textfield")}))},renderTags:function(e,n){return e.map((function(e,t){return s.createElement(S.w,_({},n({index:t}),{key:t,primaryText:e.display,secondaryText:e.value,option:e,activeOption:null,setActiveOption:function(){return null},variant:"solid"}))}))}}):s.createElement(C.Z,{defaultExpandedIfPermissionsAreSelected:!0,isReadOnly:r,initialValues:G,onPermissionsChange:x}),!r&&s.createElement(i.KM,{className:"submit-button",variant:"contained",size:"small",loading:!1,disabled:(0,R.Z)(null==a?void 0:a.permissions)||U&&(0,R.Z)(U),onClick:function(){!function(e){var n=null!=e?e:null==a?void 0:a.permissions,t={Operations:[{op:"replace",value:{permissions:null==n?void 0:n.map((function(e){return{value:e.value}}))}}],schemas:[g.lg.PATCH_OP]};(0,v.dB)(a.id,t).then((function(){d(p),y((0,l.V_)({description:b("console:manage.features.roles.notifications.updateRole.success.description"),level:o.QU.SUCCESS,message:b("console:manage.features.roles.notifications.updateRole.success.message")}))})).catch((function(){y((0,l.V_)({description:b("console:manage.features.roles.notifications.updateRole.genericError.description"),level:o.QU.ERROR,message:b("console:manage.features.roles.notifications.updateRole.genericError.message")}))}))}(U)},"data-componentid":"".concat(f,"-update-button")},b("common:update")))};w.defaultProps={"data-componentid":"console-roles-table"};const Z=w;var U=t(96627),x=t(14157),M=t(97860),P=t(75917),z=t(14969),G=t(74691),J=t(79890),$=t(16782),V=t(30640);function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var X=function(e){var n=e.role,t=e.isLoading,r=e["data-componentid"],a=(0,c.$)().t,o=(0,u.v9)((function(e){return e.config.ui.features})),l=k((0,s.useState)([]),2),d=l[0],p=l[1],m=k((0,s.useState)(""),2),f=m[0],v=m[1],g=null==n?void 0:n.associatedApplications;(0,s.useEffect)((function(){g&&p(g)}),[g]);var y=function(e,t){V.m8.push({pathname:V.$x.getPaths().get("APPLICATION_SIGN_IN_METHOD_EDIT").replace(":id",e).replace(":tabName",t),state:{id:n.id,name:n.displayName,redirectTo:$.jo.ROLE_CALLBACK_REDIRECT}})},b=function(){return f&&0===(null==d?void 0:d.length)?s.createElement(i.$J,{image:(0,V.jF)().emptySearch,imageSize:"tiny",title:a("console:develop.placeholders.emptySearchResult.title"),subtitle:[a("console:develop.placeholders.emptySearchResult.subtitles.0",{query:f}),a("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(r,"-empty-search-placeholder")}):0===(null==d?void 0:d.length)?s.createElement(i.$J,{image:(0,V.jF)().newList,imageSize:"tiny",subtitle:[a("console:develop.features.idp.connectedApps.placeholders.emptyList",{idpName:null==n?void 0:n.displayName})],"data-componentid":"".concat(r,"-empty-placeholder")}):null},E=function(e){var n=null==g?void 0:g.filter((function(n){var t,r;return-1!==(null==n||null===(t=n.display)||void 0===t||null===(r=t.toLowerCase())||void 0===r?void 0:r.indexOf(e.toLowerCase()))}));p(n)};return s.createElement(i.pJ,{padded:"very"},s.createElement(i.X6,{as:"h4"},a("console:develop.features.idp.connectedApps.header",{idpName:null==n?void 0:n.displayName})),s.createElement(P.Z,{hidden:!0}),g&&s.createElement(z.Z,{icon:s.createElement(G.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var n=e.target.value.trim();v(n),n.length>0?E(n):p(g)},placeholder:a("console:develop.features.idp.connectedApps.placeholders.search"),floated:"left",size:"small",style:{width:"250px"},"data-componentid":"".concat(r,"-searched")}),s.createElement(i.wQ,{className:"connected-applications-table",isLoading:t,loadingStateOptions:{count:V.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:[{"data-componentid":"".concat(r,"-item-edit-button"),hidden:function(){return!(0,h.cr)(null==o?void 0:o.applications,$.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(){return"caret right"},onClick:function(e,n){return y(n.value,"#tab="+$.jo.ROLES_TAB_URL_FRAG)},popupText:function(){return a("console:develop.features.idp.connectedApps.action")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return s.createElement(M.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(r,"-item-heading")},s.createElement(i.JT,{image:s.createElement(i.Xo,{name:null==e?void 0:e.display,size:"mini","data-componentid":"".concat(r,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(r,"-item-image")}),s.createElement(M.Z.Content,null,null==e?void 0:e.display))},title:a("console:develop.features.applications.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:a("console:develop.features.applications.list.columns.actions")}],data:d,onRowClick:function(e,n){y(n.value,"#tab="+$.jo.ROLES_TAB_URL_FRAG)},placeholders:b(),showHeader:J.applicationListConfig.enableTableHeaders,transparent:!t&&null!==b(),"data-componentid":"".concat(r,"-data-table")}))};X.defaultProps={"data-componentid":"role-edit-connected-apps"};var W=t(47447),D=t(51883),F=t(62132),Q=t.n(F),H=t(27899),q=t.n(H),Y=t(76569),K=t.n(Y),ee=t(34753),ne=t.n(ee),te=t(93598),re=t.n(te),ae=t(46244),oe=t.n(ae),le=t(83259),ie=t.n(le),se={};se.styleTagTransform=oe(),se.setAttributes=ne(),se.insert=K().bind(null,"head"),se.domAPI=q(),se.insertStyleElement=re();Q()(ie(),se);ie()&&ie().locals&&ie().locals;function ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ue(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ue(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var de=function(e){var n=e.isLoading,t=e.roleObject,r=e.onRoleUpdate,a=e.defaultActiveIndex,o=(0,c.$)().t,l=(0,U.z)().organizationType,d=(0,u.v9)((function(e){var n,t,r;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t||null===(r=t.features)||void 0===r?void 0:r.userRoles})),p=(0,u.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),m=(0,u.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.administratorRoleDisplayName})),f=ce((0,s.useState)(!1),2),v=f[0],E=f[1],I=l===y.$B.SUBORGANIZATION;(0,s.useEffect)((function(){t&&E(t.displayName===b.nL.ADMIN_ROLE||(null==t?void 0:t.displayName)===b.nL.ADMIN_GROUP||(null==t?void 0:t.displayName)===m)}),[t]);var O;return s.createElement(i.M$,{isLoading:n,defaultActiveIndex:a,panes:[{menuItem:o("console:manage.features.roles.edit.menuItems.basic"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(x.Q,{isReadOnly:I||v||!(0,h.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:t,onRoleUpdate:r,tabIndex:0,enableDeleteErrorConnetedAppsModal:!1}))}},{menuItem:o("console:manage.features.roles.edit.menuItems.permissions"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(Z,{isReadOnly:I||v||!(0,h.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:t,onRoleUpdate:r,tabIndex:1,isSubOrganization:I}))}},{menuItem:o("console:manage.features.roles.edit.menuItems.groups"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(W.q,{isReadOnly:!(0,h.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:t,onRoleUpdate:r,tabIndex:2}))}},{menuItem:o("console:manage.features.roles.edit.menuItems.users"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(D.G,{isReadOnly:!(0,h.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:t,onRoleUpdate:r,tabIndex:3}))}},(null==t||null===(O=t.audience)||void 0===O?void 0:O.type)===g.cv.ORGANIZATION.toLocaleLowerCase()?{menuItem:o("console:manage.features.roles.edit.menuItems.connectedApps"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(X,{isReadOnly:!(0,h.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:t,onRoleUpdate:r,tabIndex:4}))}}:null]})};de.defaultProps={defaultActiveIndex:0};const pe=de;var me=t(62574);function fe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ve(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var ge=function(e){var n,t,y,b=e["data-componentid"],h=(0,c.$)().t,E=(0,u.I0)(),I=fe((0,s.useState)(void 0),2),O=I[0],R=I[1],S=fe((0,s.useState)(0),2),A=S[0],N=S[1];(0,s.useEffect)((function(){var e=f.m.location.pathname.split("/"),n=e[e.length-1];R(n)}),[]);var L=(0,v.tE)(O),C=L.data,_=L.isLoading,j=L.error,T=L.mutate;(0,s.useEffect)((function(){j&&E((0,l.V_)({description:h("console:manage.features.roles.notifications.fetchRole.genericError.description"),level:o.QU.ERROR,message:h("console:manage.features.roles.notifications.fetchRole.genericError.message")}))}),[j]);var w=function(){f.m.push(m.$.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(me.w.ROLES))};return j?function(){if(j)return s.createElement(i.$J,{subtitle:[h("console:manage.features.roles.edit.placeholders.errorPlaceHolder.subtitles.0"),h("console:manage.features.roles.edit.placeholders.errorPlaceHolder.subtitles.1")],title:h("console:manage.features.roles.edit.placeholders.errorPlaceHolder.title"),image:(0,p.jF)().emptySearch,action:s.createElement(r.Z,{onClick:w},h("console:manage.features.roles.edit.placeholders.errorPlaceHolder.action")),imageSize:"tiny"})}():s.createElement(i.O9,{"data-componentid":b,isLoading:_,title:C&&null!=C&&C.displayName?null==C?void 0:C.displayName:h("console:manage.pages.rolesEdit.title"),description:s.createElement(a.Z,{container:!0,alignItems:"center"},s.createElement(a.Z,null,g.cv.ORGANIZATION===(null==C||null===(n=C.audience)||void 0===n?void 0:n.type.toUpperCase())?h("console:manage.features.roles.list.columns.managedByOrg.label"):h("console:manage.features.roles.list.columns.managedByApp.label")),s.createElement(a.Z,null,s.createElement(d.Z,{className:g.cv.ORGANIZATION===(null==C||null===(t=C.audience)||void 0===t?void 0:t.type.toUpperCase())?"issuer-label":"client-id-label"},null==C||null===(y=C.audience)||void 0===y?void 0:y.display))),pageTitle:h("console:manage.pages.rolesEdit.title"),backButton:{onClick:w,text:h("console:manage.pages.rolesEdit.backButton",{type:"roles"})},titleTextAlign:"left",bottomMargin:!1},s.createElement(pe,{isLoading:_,roleObject:C,onRoleUpdate:function(e){T(),N(e)},defaultActiveIndex:A}))};ge.defaultProps={"data-componentid":"console-roles-edit-page"};const ye=ge},83259:e=>{e.exports=[[e.id,".console-role-permissions .section-heading{margin-bottom:2rem}.console-role-permissions .submit-button{margin-top:2rem}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnNvbGUtcm9sZXMtZWRpdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQyxrQkFBa0IsQ0FBQyx5Q0FBeUMsZUFBZSIsImZpbGUiOiJjb25zb2xlLXJvbGVzLWVkaXQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb25zb2xlLXJvbGUtcGVybWlzc2lvbnMgLnNlY3Rpb24taGVhZGluZ3ttYXJnaW4tYm90dG9tOjJyZW19LmNvbnNvbGUtcm9sZS1wZXJtaXNzaW9ucyAuc3VibWl0LWJ1dHRvbnttYXJnaW4tdG9wOjJyZW19Il19 */","",""]]},6590:(e,n,t)=>{"use strict";t.d(n,{Z:()=>d});var r=t(64062),a=t(97458),o=t(45364),l=t(14517),i=t(52983),s=t(22854);const c="Paper",u=(0,i.forwardRef)(((e,n)=>{const{className:t}=e,i=(0,r.__rest)(e,["className"]),s=(0,l.Z)("oxygen-paper",t);return(0,a.jsx)(o.Z,Object.assign({className:s},i,{ref:n}))}));u.displayName=(0,s.I)(c),u.muiName=c,u.defaultProps={};const d=u}}]);