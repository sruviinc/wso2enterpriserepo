"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[60594],{60594:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var a=r(7955),n=r(14603),o=r(90268),l=r(13318),s=r(81816),i=r(52983),u=r(9202),c=r(54221),d=r(74691),f=r(46408),m=r(2653),h=r(30640),g=r(58900),p=r(62868);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,l,s=[],i=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(a=o.call(r)).done)&&(s.push(a.value),s.length!==t);i=!0);}catch(e){u=!0,n=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var y=function(e){var t=e["data-testid"],r=(0,u.$)().t,v=[{key:0,text:r("common:name"),value:"name"},{key:1,text:r("common:description"),value:"description"}],y=(0,c.v9)((function(e){return e.config.ui.features})),E=S((0,i.useState)([]),2),b=E[0],A=E[1],C=S((0,i.useState)(0),2),P=C[0],L=C[1],O=S((0,i.useState)(h.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),T=O[0],w=O[1],_=S((0,i.useState)(!0),2),k=_[0],R=_[1],I=S((0,i.useState)([]),2),U=I[0],x=I[1],M=S((0,i.useState)(v[0]),2),Q=M[0],j=M[1],V=S((0,i.useState)(!0),2),$=V[0],F=V[1],z=S((0,i.useState)(""),2),D=z[0],G=z[1],K=S((0,i.useState)(!1),2),N=K[0],W=K[1],X=(0,c.I0)(),Z=S((0,l.cC)(),2),q=Z[0],B=Z[1],H=function(e,t,a,l){var s={filter:l||null,limit:e||null,offset:a||null,sort:t||null};R(!0),(0,g.GN)(s).then((function(e){A(e),x(e),R(!1)})).catch((function(e){R(!1),X((0,o.V_)({description:(null==e?void 0:e.description)||r("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:n.QU.ERROR,message:(null==e?void 0:e.message)||r("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}))}))};(0,i.useEffect)((function(){H(null,null,null,null)}),[]),(0,i.useEffect)((function(){x((0,h.fS)(U,Q.value,$))}),[Q,$]);var J=function(e){x((0,h.gQ)(b,e,"name",!0)),G(e),L(0),B()};return i.createElement(s.Xg,{action:(k||!(!D&&(null==U?void 0:U.length)<=0))&&f.userstoresConfig.userstoreList.allowAddingUserstores&&i.createElement(a.di,{when:m.T.USER_STORE_WRITE},i.createElement(s.KM,{onClick:function(){h.m8.push(h.$x.getPaths().get("USERSTORE_TEMPLATES"))},"data-testid":"".concat(t,"-list-layout-add-button")},i.createElement(d.Z,{name:"add"}),r("console:manage.features.userstores.pageLayout.list.primaryAction"))),isLoading:k,title:r("console:manage.features.userstores.pageLayout.list.title"),pageTitle:r("console:manage.features.userstores.pageLayout.list.title"),description:r("console:manage.features.userstores.pageLayout.list.description"),"data-testid":"".concat(t,"-page-layout")},i.createElement(s.PS,{advancedSearch:i.createElement(h.nC,{onFilter:J,filterAttributeOptions:[{key:0,text:r("common:name"),value:"name"},{key:1,text:r("common:description"),value:"description"}],filterAttributePlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:r("console:manage.features.userstores.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:N,"data-testid":"".concat(t,"-advanced-search")}),currentListSize:T,listItemLimit:T,onItemsPerPageDropdownChange:function(e,t){w(t.value)},onPageChange:function(e,t){L((t.activePage-1)*T)},onSortStrategyChange:function(e,t){j(v.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){F(e)},resetPagination:q,leftActionPanel:null,showPagination:!0,sortOptions:v,sortStrategy:Q,showTopActionPanel:k||!(!D&&(null==U?void 0:U.length)<=0),totalPages:Math.ceil((null==U?void 0:U.length)/T),totalListSize:null==U?void 0:U.length,isLoading:k,"data-testid":"".concat(t,"-list-layout")},i.createElement(p.rO,{advancedSearch:i.createElement(h.nC,{onFilter:J,filterAttributeOptions:[{key:0,text:r("common:name"),value:"name"},{key:1,text:r("common:description"),value:"description"}],filterAttributePlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:r("console:manage.features.userstores.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:r("console:manage.features.userstores.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:N,"data-testid":"".concat(t,"-advanced-search")}),list:function(e,t,r){return null==e?void 0:e.slice(r,r+t)}(U,T,P),onEmptyListPlaceholderActionClick:function(){return h.m8.push(h.$x.getPaths().get("USERSTORE_TEMPLATES"))},onSearchQueryClear:function(){W(!N),G(""),x(b)},searchQuery:D,update:H,featureConfig:y,"data-testid":"".concat(t,"-list")})))};y.defaultProps={"data-testid":"userstores"};const E=y}}]);