/*! For license information please see 63731.7f2aea31.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[63731],{59632:(e,t,r)=>{r.d(t,{Z:()=>b});var n=r(78934),o=r(73909),a=r(52983),i=r(14517),l=r(85411),s=r(45104),c=r(83052),u=r(16630),d=r(63832),p=r(79596);function f(e){return(0,p.Z)("MuiFab",e)}const m=(0,d.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var v=r(21479),h=r(97458);const g=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],y=(0,v.ZP)(s.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,v.FO)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,c.Z)(r.size)}`],"inherit"===r.color&&t.colorInherit,t[(0,c.Z)(r.size)],t[r.color]]}})((({theme:e,ownerState:t})=>{var r,n;return(0,o.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(r=(n=e.palette).getContrastText)?void 0:r.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${m.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})}),(({theme:e,ownerState:t})=>(0,o.Z)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}})),(({theme:e})=>({[`&.${m.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),b=a.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiFab"}),{children:a,className:s,color:d="default",component:p="button",disabled:m=!1,disableFocusRipple:v=!1,focusVisibleClassName:b,size:S="large",variant:E="circular"}=r,A=(0,n.Z)(r,g),w=(0,o.Z)({},r,{color:d,component:p,disabled:m,disableFocusRipple:v,size:S,variant:E}),I=(e=>{const{color:t,variant:r,classes:n,size:a}=e,i={root:["root",r,`size${(0,c.Z)(a)}`,"inherit"===t?"colorInherit":t]},s=(0,l.Z)(i,f,n);return(0,o.Z)({},n,s)})(w);return(0,h.jsx)(y,(0,o.Z)({className:(0,i.Z)(I.root,s),component:p,disabled:m,focusRipple:!v,focusVisibleClassName:(0,i.Z)(I.focusVisible,b),ownerState:w,ref:t},A,{classes:I,children:a}))}))},31748:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(78934),o=r(73909),a=r(52983),i=r(14517),l=r(85411),s=r(96651),c=r(83052),u=r(44493),d=r(16630),p=r(21479),f=r(63832),m=r(79596);function v(e){return(0,m.Z)("MuiSwitch",e)}const h=(0,f.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var g=r(97458);const y=["className","color","edge","size","sx"],b=(0,p.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${(0,c.Z)(r.edge)}`],t[`size${(0,c.Z)(r.size)}`]]}})((({ownerState:e})=>(0,o.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===e.edge&&{marginLeft:-8},"end"===e.edge&&{marginRight:-8},"small"===e.size&&{width:40,height:24,padding:7,[`& .${h.thumb}`]:{width:16,height:16},[`& .${h.switchBase}`]:{padding:4,[`&.${h.checked}`]:{transform:"translateX(16px)"}}}))),S=(0,p.ZP)(u.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${h.input}`]:t.input},"default"!==r.color&&t[`color${(0,c.Z)(r.color)}`]]}})((({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${"light"===e.palette.mode?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${h.checked}`]:{transform:"translateX(20px)"},[`&.${h.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${h.checked} + .${h.track}`]:{opacity:.5},[`&.${h.disabled} + .${h.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:""+("light"===e.palette.mode?.12:.2)},[`& .${h.input}`]:{left:"-100%",width:"300%"}})),(({theme:e,ownerState:t})=>(0,o.Z)({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${h.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${"light"===e.palette.mode?(0,s.$n)(e.palette[t.color].main,.62):(0,s._j)(e.palette[t.color].main,.55)}`}},[`&.${h.checked} + .${h.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}}))),E=(0,p.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((({theme:e})=>({height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${"light"===e.palette.mode?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:""+("light"===e.palette.mode?.38:.3)}))),A=(0,p.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),w=a.forwardRef((function(e,t){const r=(0,d.Z)({props:e,name:"MuiSwitch"}),{className:a,color:s="primary",edge:u=!1,size:p="medium",sx:f}=r,m=(0,n.Z)(r,y),h=(0,o.Z)({},r,{color:s,edge:u,size:p}),w=(e=>{const{classes:t,edge:r,size:n,color:a,checked:i,disabled:s}=e,u={root:["root",r&&`edge${(0,c.Z)(r)}`,`size${(0,c.Z)(n)}`],switchBase:["switchBase",`color${(0,c.Z)(a)}`,i&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=(0,l.Z)(u,v,t);return(0,o.Z)({},t,d)})(h),I=(0,g.jsx)(A,{className:w.thumb,ownerState:h});return(0,g.jsxs)(b,{className:(0,i.Z)(w.root,a),sx:f,ownerState:h,children:[(0,g.jsx)(S,(0,o.Z)({type:"checkbox",icon:I,checkedIcon:I,ref:t,ownerState:h},m,{classes:(0,o.Z)({},w,{root:w.switchBase})})),(0,g.jsx)(E,{className:w.track,ownerState:h})]})}))},90656:(e,t,r)=>{r.d(t,{w:()=>m});var n=r(27716),o=r(52983),a=r(62334),i=r(89101),l=r(36510),s=r(81816),c=r(92305),u=function(e){var t=e.popoverAnchorEl,r=e.onPopoverClose,u=e.primaryText,d=e.secondaryText,p=e.userStore;return o.createElement(a.J2,{className:"role-chip-popover",open:!!t,anchorEl:t,onClose:r,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},elevation:0,disableRestoreFocus:!0},o.createElement(a.Xk,null,o.createElement(a.Zb,{className:"role-chip-more-details"},o.createElement(a.aY,null,o.createElement(i.Z,{container:!0,alignItems:"center",columnSpacing:2},o.createElement(i.Z,{container:!0,alignItems:"center",justifyContent:"flex-start"},o.createElement(i.Z,null,o.createElement(s.JT,{image:o.createElement(s.Xo,{name:u,size:"mini"}),size:"mini"})),o.createElement(i.Z,null,o.createElement(l.Z,{primary:u,secondary:d}))),o.createElement(i.Z,{justifyContent:"flex-end"},p?o.createElement(n.Z,{icon:o.createElement(s.dn,{inline:!0,size:"default",transparent:!0,icon:(0,c.Uz)().userStore,verticalAlign:"middle"}),label:p}):null))))))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t=e.key,r=e.setActiveOption,a=e.primaryText,i=e.secondaryText,l=e.userStore,s=e.option,c=e.activeOption,f=p((0,o.useState)(null),2),m=f[0],v=f[1],h=function(){v(null),r(null)};return o.createElement(o.Fragment,null,o.createElement(n.Z,d({},e,{key:t,label:a,onMouseEnter:function(e){v(e.currentTarget),r(s)},onMouseLeave:h})),(null==c?void 0:c.id)===s.id?o.createElement(u,{popoverAnchorEl:m,onPopoverClose:h,primaryText:a,secondaryText:i,userStore:l}):null)}},31434:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ve});var n=r(89101),o=r(20996),a=r(14603),i=r(90268),l=r(81816),s=r(52983),c=r(9202),u=r(54221),d=r(60611),p=r(82915),f=r(26187),m=r(96627),v=r(54004),h=r(31092),g=r(36510),y=r(59206),b=r(53337),S=r(36382),E=r(39990),A=r(17007),w=r(30640),I=r(85814);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function O(){O=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new k(n||[]);return o(i,"_invoke",{value:x(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",v="completed",h={};function g(){}function y(){}function b(){}var S={};c(S,i,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(z([])));A&&A!==r&&n.call(A,i)&&(S=A);var w=b.prototype=g.prototype=Object.create(S);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function r(o,a,i,l){var s=d(e[o],e,a);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==R(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var s=P(l,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?v:f,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function z(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(R(t)+" is not iterable")}return y.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},I(N.prototype),c(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new N(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(w),c(w,s,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=z,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:z(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function N(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,o)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.onSubmit,r=e.triggerSubmission,n=e.initialValues,o=e.setIsNextDisabled,a=e["data-componentid"],i=(0,c.$)().t,u=x((0,s.useState)(I.nL.DEFAULT_ROLE_AUDIENCE),2),p=u[0],f=u[1],m=x((0,s.useState)(!1),2),R=m[0],P=m[1],Z=x((0,s.useState)(!1),2),T=Z[0],k=Z[1],z=x((0,s.useState)(!1),2),L=z[0],C=z[1],j=x((0,s.useState)(void 0),2),_=j[0],D=j[1],$=x((0,s.useState)(!1),2),B=$[0],W=$[1],M=x((0,s.useState)([]),2),G=M[0],F=M[1],U=x((0,s.useState)(void 0),2),V=U[0],H=U[1],q=(0,s.useRef)(!1),Q=(0,A.Ok)("clientId,associatedRoles.allowedAudience",null,null,_),X=Q.data,K=Q.isLoading,Y=Q.error,J=Q.mutate,ee=(0,v.bF)(void 0,void 0,V,"users,groups,permissions,associatedApplications"),te=ee.data,re=ee.isLoading,ne=ee.isValidating;(0,s.useEffect)((function(){if(Y)return k(!0),void P(!1);p===I.cv.APPLICATION?q.current&&!_?(k(!0),P(!1)):(k(!1),P(!0)):(k(!1),P(!1))}),[Y,p]),(0,s.useEffect)((function(){var e,t=[];null==X||null===(e=X.applications)||void 0===e||e.map((function(e){var r,n;I.nL.READONLY_APPLICATIONS_CLIENT_IDS.includes(null==e?void 0:e.clientId)||t.push({content:s.createElement(g.Z,{primary:e.name,secondary:(null==e||null===(r=e.associatedRoles)||void 0===r?void 0:r.allowedAudience)===I.cv.ORGANIZATION?s.createElement(s.Fragment,null,i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.applicationSubTitle.organization"),s.createElement(l.rU,{"data-componentid":"".concat(a,"-link-navigate-roles"),onClick:function(){return ae(null==e?void 0:e.id)},external:!1},i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.applicationSubTitle.changeAudience"))):i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.applicationSubTitle.application")}),disabled:(null==e||null===(n=e.associatedRoles)||void 0===n?void 0:n.allowedAudience)===I.cv.ORGANIZATION,key:e.id,text:e.name,value:e.id})})),q.current=0===t.length,F(t)}),[X]),(0,s.useEffect)((function(){o(!(!L&&!T))}),[L]);var oe=(0,s.useCallback)((0,S.Z)((function(e){D(e?"name co ".concat(e):null),J().finally((function(){W(!1)}))}),I.nL.DEBOUNCE_TIMEOUT),[]),ae=function(e){return w.m8.push({pathname:d.$x.getPaths().get("APPLICATION_SIGN_IN_METHOD_EDIT").replace(":id",e).replace(":tabName","#tab=".concat(5))})},ie=function(){var e,t=(e=O().mark((function e(t){var r,n,o,a,l,s,c,u,d;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={assignedApplicationId:void 0,roleName:void 0},c=null===(r=w.h.getState())||void 0===r||null===(n=r.organization)||void 0===n||null===(o=n.organization)||void 0===o?void 0:o.id,u=p===I.cv.ORGANIZATION?c:null==t?void 0:t.assignedApplicationId,p!==I.cv.APPLICATION||null!==(a=t.assignedApplicationId)&&void 0!==a&&a.toString().trim()||(s.assignedApplicationId=i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.validations.empty",{type:"Role"})),null!==(l=t.roleName)&&void 0!==l&&l.toString().trim()?b.I.isValidRoleName(null===(d=t.roleName)||void 0===d?void 0:d.toString().trim())?(H("displayName eq ".concat(t.roleName," and audience.value eq ").concat(u)),re&&ne||(null==te?void 0:te.totalResults)>0&&(s.roleName=i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicateInAudience"))):s.roleName=i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.invalid",{type:"Role"}):s.roleName=i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.empty",{type:"Role"}),s.roleName||s.assignedApplicationId?C(!0):C(!1),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){N(a,n,o,i,l,"next",e)}function l(e){N(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return s.createElement(y.l0,{"data-testid":a,"data-componentid":a,onSubmit:function(e){return t(function(e){var t;return{assignedApplicationId:e.roleAudience===I.cv.APPLICATION?e.assignedApplicationId.toString():null,assignedApplicationName:e.roleAudience===I.cv.APPLICATION?null==G||null===(t=G.find((function(t){return t.key===e.assignedApplicationId.toString()})))||void 0===t?void 0:t.text:null,roleAudience:e.roleAudience.toString(),roleName:e.roleName.toString()}}(e))},triggerSubmit:function(e){return r(e)},id:"add-role-basics-form",uncontrolledForm:!0,validate:ie,initialValues:n},s.createElement(y.gN.Input,{ariaLabel:"roleName",inputType:"roleName","data-componentid":"".concat(a,"-role-name-input"),type:"text",name:"roleName",defaultValue:null==n?void 0:n.roleName,maxLength:I.nL.ROLE_NAME_MAX_LENGTH,minLength:I.nL.ROLE_NAME_MIN_LENGTH,label:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.label",{type:"Role"}),placeholder:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.placeholder",{type:"Role"}),required:!0}),s.createElement("div",{className:"ui form required field"},s.createElement("label",null,i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleAudience.label")),Object.values(I.cv).map((function(e,t){var r;return s.createElement(y.gN.Radio,{key:t,ariaLabel:"roleAudience",name:"roleAudience",label:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails."+"roleAudience.values.".concat(e.toLowerCase())),value:e,defaultValue:null!==(r=null==n?void 0:n.roleAudience)&&void 0!==r?r:I.nL.DEFAULT_ROLE_AUDIENCE,"data-componentid":"".concat(a,"-").concat(e,"-audience"),listen:function(){return f(e)},hint:t===Object.keys(I.cv).length-1?s.createElement(E.c,{i18nKey:"console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleAudience.hint"},"Set the audience of the role.",s.createElement("b",null,"Note that audience of the role cannot be changed.")):null})}))),T?s.createElement(h.Z,{severity:"error"},s.createElement(E.c,{i18nKey:"console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.notes.cannotCreateRole"},"You cannot create an application-scoped role because there are currently no applications that support application-scoped role. Please (",s.createElement(l.rU,{"data-componentid":"".concat(a,"-link-api-resource-page"),onClick:function(){return w.m8.push(d.$x.getPaths().get("APPLICATIONS"))},external:!1},"create an application"),") that supports application-scoped roles to proceed.")):s.createElement(h.Z,{severity:"info"},p===I.cv.ORGANIZATION?i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.notes.orgNote"):i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.notes.appNote")),R?s.createElement(y.gN.Dropdown,{ariaLabel:"assignedApplicationId",name:"assignedApplicationId",label:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.label"),options:G,required:R,value:null==n?void 0:n.assignedApplicationId,search:!0,loading:K||B,"data-componentid":"".concat(a,"-typography-font-family-dropdown"),hint:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.hint"),placeholder:i("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.assignedApplication.placeholder"),noResultsMessage:i(K||B?"common:searching":"common:noResultsFound"),onSearchChange:function(e,t){W(!0),oe(t.searchQuery.toString().trim())}}):null)};Z.defaultProps={"data-componentid":"add-role-basics-form"};var T=r(10250),k=r(46439),z=r(97860),L=r(73949),C=r(40904),j=r(93023),_=r(5948),D=r(22405),$=r(33697),B=r(71682),W=r(54278),M=r(92991),G=r(90656);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(e){var t=e.apiResource,r=e.selectedPermissions,n=e.onChangeScopes,o=e["data-componentid"],a=(0,c.$)().t,i=U(s.useState(void 0),2),l=i[0],u=i[1];return s.createElement(T.Z,{multiple:!0,disableCloseOnSelect:!0,options:null!=t&&t.scopes?null==t?void 0:t.scopes:[],value:r||[],getOptionLabel:function(e){return e.displayName},renderInput:function(e){return s.createElement(k.Z,F({},e,{"data-componentid":"".concat(o,"-textfield"),placeholder:a("console:manage.features.roles.addRoleWizard.forms.rolePermission.permissions.placeholder")}))},onChange:function(e,r){n(t,r)},renderTags:function(e,t){return e.map((function(e,r){return s.createElement(G.w,F({},t({index:r}),{key:r,primaryText:e.displayName,secondaryText:e.name,option:e,activeOption:l,setActiveOption:u}))}))},renderOption:function(e,t,r){var n=r.selected;return s.createElement(M.U,{selected:n,subTitle:t.name,displayName:t.displayName,renderOptionProps:e})}})};H.defaultProps={"data-componentid":"permissions-list"};var q=function(e){var t,r,o,a=e.apiResource,i=e.selectedPermissions,u=e.onChangeScopes,d=e.onRemoveAPIResource,p=e["data-componentid"],f=(0,c.$)().t,m=function(){var e,t;return 0!==(null==a||null===(e=a.scopes)||void 0===e?void 0:e.length)&&(null==a||null===(t=a.scopes)||void 0===t?void 0:t.length)===(null==i?void 0:i.length)};return s.createElement(j.Z,{disableGutters:!0,defaultExpanded:!0,elevation:1},s.createElement(D.Z,{expandIcon:s.createElement(C.v4,null)},s.createElement(W.Z,{className:"list-item-text",secondaryAction:s.createElement(n.Z,{container:!0,alignItems:"center",spacing:2},s.createElement(n.Z,null,s.createElement(l.u,{trigger:s.createElement($.Z,{edge:"end",checked:m(),disabled:(null==a||null===(t=a.scopes)||void 0===t?void 0:t.length)<0,"data-componentid":"".concat(p,"-select-all"),onChange:function(){m()?u(a,[]):u(a,null==a?void 0:a.scopes)}}),content:(null==a||null===(r=a.scopes)||void 0===r?void 0:r.length)<0?f("console:manage.features.roles.addRoleWizard.forms.rolePermission.permissions.tooltips.noScopes"):f("console:manage.features.roles.addRoleWizard.forms.rolePermission.permissions.tooltips.selectAllScopes")})),s.createElement(n.Z,null,s.createElement(l.u,{trigger:s.createElement(B.Z,{"data-componentid":"".concat(p,"-remove"),onClick:function(){d(null==a?void 0:a.id)}},s.createElement(C.DX,null)),content:f("console:manage.features.roles.addRoleWizard.forms.rolePermission.permissions.tooltips.removeAPIResource")}))),disablePadding:!0},s.createElement(g.Z,{primary:null==a?void 0:a.name}))),(null==a||null===(o=a.scopes)||void 0===o?void 0:o.length)>0?s.createElement(_.Z,null,s.createElement(H,{apiResource:a,selectedPermissions:i,onChangeScopes:u})):null)};q.defaultProps={"data-componentid":"role-api-resources-list"};var Q=r(14525),X=r(42466),K=r(77965),Y=r(78476),J=r(49238),ee=r(50593);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function re(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie,le=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,o=e.setIsPermissionStepNextButtonDisabled,d=e.roleAudience,p=e.assignedApplicationId,f=e.assignedApplicationName,m=e["data-componentid"],v=(0,c.$)().t,g=(0,u.I0)(),y=ne((0,s.useState)(void 0),2),b=y[0],S=y[1],A=ne((0,s.useState)([]),2),w=A[0],I=A[1],R=ne((0,s.useState)(void 0),2),O=R[0],N=R[1],x=ne((0,s.useState)(!1),2),P=x[0],Z=x[1],C=ne((0,s.useState)([]),2),j=C[0],_=C[1],D=ne((0,s.useState)([]),2),$=D[0],B=D[1],W=ne((0,s.useState)(null),2),M=W[0],G=W[1],F=(0,Q.cQ)(M,null,null,d===ee.cv.ORGANIZATION),U=F.data,V=F.isLoading,H=F.error,oe=F.mutate,ae=(0,J.Eb)(O),ie=ae.data,le=ae.isLoading,se=ae.isValidating,ce=ae.error,ue=(0,J.IA)(p),de=ue.data,pe=ue.isLoading,fe=ue.error;(0,s.useEffect)((function(){d!==b&&(I([]),r([]),S(d))}),[d]),(0,s.useEffect)((function(){ce||fe?(g((0,i.V_)({description:v("console:manage.features.roles.addRoleWizard.forms.rolePermission.notifications.fetchAPIResourceError.error.description"),level:a.QU.ERROR,message:v("console:manage.features.roles.addRoleWizard.forms.rolePermission.notifications.fetchAPIResourceError.error.message")})),o(!0)):o(!1)}),[ce,fe]),(0,s.useEffect)((function(){var e=[];d===ee.cv.APPLICATION&&(null==de||de.map((function(t){w.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}))||t.policyId!=Y.G.ROLE||e.push({identifier:null==t?void 0:t.identifier,key:t.id,text:t.displayName,type:null==t?void 0:t.type,value:t.id})})),_(e))}),[de,w]),(0,s.useEffect)((function(){var e=[];if(d===ee.cv.ORGANIZATION){$.map((function(t){w.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}))||e.push({identifier:null==t?void 0:t.identifier,key:t.id,text:t.name,type:t.type,value:t.id})}));var t=e.filter((function(e,t,r){return t===r.findIndex((function(t){return t.key===e.key}))}));_(t)}}),[w]),(0,s.useEffect)((function(){var e;if(P||Z(!0),U){var t,r=null==U?void 0:U.apiResources.reduce((function(e,t){0!==(null==w?void 0:w.length)&&(null!=w&&w.some((function(e){return e.identifier===t.identifier})))||(0===j.length||!(null!=j&&j.some((function(e){return e.key===t.id}))))&&e.push({identifier:null==t?void 0:t.identifier,key:t.id,text:t.name,type:t.type,value:t.id});return e}),[]);_([].concat(re(j),re(r||[]))),B([].concat(re($),re(U.apiResources)));var n=!1;null==U||null===(t=U.links)||void 0===t||t.forEach((function(t){t.rel===X.KG.NEXT_REL&&(e=t.href.split("".concat(X.KG.AFTER,"="))[1])!==M&&(G(e),n=!0)})),n?oe():Z(!1)}}),[U]),(0,s.useEffect)((function(){H&&g((0,i.V_)({description:v("extensions:develop.apiResource.notifications.getAPIResources.genericError.description"),level:a.QU.ERROR,message:v("extensions:develop.apiResource.notifications.getAPIResources.genericError.message")}))}),[H]),(0,s.useEffect)((function(){!ie||le||se||(w.find((function(e){return(null==ie?void 0:ie.id)===(null==e?void 0:e.id)}))||I([ie].concat(re(w))),O&&N(void 0))}),[ie]);var me=function(e){I(w.filter((function(t){return t.id!==e}))),r(t.filter((function(t){return t.apiResourceId!==e})))},ve=function(e,n){var o=t.filter((function(t){return t.apiResourceId!==e.id}));o.push({apiResourceId:e.id,scopes:n}),r(o)};return s.createElement(n.Z,{container:!0,direction:"column",justifyContent:"center",alignItems:"flex-start",spacing:2},d===ee.cv.APPLICATION?s.createElement(n.Z,{xs:12},s.createElement(h.Z,{severity:"info"},s.createElement(E.c,{i18nKey:"console:manage.features.roles.addRoleWizard.forms.rolePermission.notes.applicationRoles",tOptions:{applicationName:f}},"Only the APIs and the permissions(scopes) that are authorized in the selected application (",s.createElement("b",null,f),") will be listed to select"))):null,s.createElement(n.Z,{xs:12},s.createElement(T.Z,{fullWidth:!0,"aria-label":"API resource selection",componentsProps:{paper:{elevation:2},popper:{modifiers:[{enabled:!1,name:"flip"},{enabled:!1,name:"preventOverflow"}]}},getOptionLabel:function(e){return e.text},renderOption:function(e,t){return s.createElement("div",e,s.createElement(z.Z.Content,null,t.text,t.type==X.KG.BUSINESS&&s.createElement(z.Z.Subheader,null,s.createElement(l.EK,{className:"inline-code compact transparent",withBackground:!1},null==t?void 0:t.identifier),s.createElement(L.Z,{pointing:"left",size:"mini",className:"client-id-label"},v("extensions:develop.apiResource.table.identifier.label")))))},groupBy:function(e){return K.H.resolveApiResourceGroup(null==e?void 0:e.type)},isOptionEqualToValue:function(e,t){return e.value===t.value},loading:d===ee.cv.ORGANIZATION&&V,onChange:function(e,t){if(e.preventDefault(),d===ee.cv.ORGANIZATION){var r;N(null==t||null===(r=t.value)||void 0===r?void 0:r.toString())}else{var n=null==de?void 0:de.find((function(e){var r;return(null==e?void 0:e.id)===(null==t||null===(r=t.value)||void 0===r?void 0:r.toString())}));if(!n)return;I([{id:n.id,name:n.displayName,scopes:n.authorizedScopes}].concat(re(w)))}},options:null==j?void 0:j.filter((function(e){return(null==e?void 0:e.type)===X.sM.TENANT||(null==e?void 0:e.type)===X.sM.ORGANIZATION||(null==e?void 0:e.type)===X.sM.BUSINESS})).sort((function(e,t){var r;return null===(r=K.H.resolveApiResourceGroup(null==e?void 0:e.type))||void 0===r?void 0:r.localeCompare(K.H.resolveApiResourceGroup(null==t?void 0:t.type))})),noOptionsText:v("common:noResultsFound"),renderInput:function(e){return s.createElement(k.Z,te({},e,{label:v("console:manage.features.roles.addRoleWizard.forms.rolePermission.apiResource.label"),placeholder:v("console:manage.features.roles.addRoleWizard.forms.rolePermission.apiResource.placeholder"),size:"small",variant:"outlined"}))}})),s.createElement(n.Z,{xs:12},(null==w?void 0:w.length)>0?s.createElement("div",{className:"role-permission-list field"},s.createElement("label",{className:"form-label"},v("console:manage.features.roles.addRoleWizard.forms.rolePermission.permissions.label")),s.createElement(l.pJ,{"data-componentid":m,className:"role-permission-list",basic:!0,loading:O&&(le||se||pe)},null==w?void 0:w.map((function(e){var r;return s.createElement(q,{key:null==e?void 0:e.id,apiResource:e,onChangeScopes:ve,onRemoveAPIResource:me,selectedPermissions:null==t||null===(r=t.find((function(t){return t.apiResourceId===(null==e?void 0:e.id)})))||void 0===r?void 0:r.scopes})})))):null))};function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}le.defaultProps={"data-componentid":"role-permission-list"},function(e){e.BASIC_DETAILS="BasicDetails",e.PERM_LIST="PermissionList"}(ie||(ie={}));var me=function(e){var t,r,h,g,y=e["data-componentid"],b=(0,c.$)().t,S=(0,u.I0)(),E=(0,m.z)(),A=E.isSuperOrganization,w=E.isFirstLevelOrganization,R=pe((0,s.useState)(void 0),2),O=R[0],N=R[1],x=pe((0,s.useState)(!0),2),P=x[0],T=x[1],k=pe((0,s.useState)(!0),2),z=k[0],L=k[1],C=pe((0,s.useState)([]),2),j=C[0],_=C[1],D=pe((0,s.useState)(!1),2),$=D[0],B=D[1],W=[{preventGoToNextStep:P,stepAction:function(){return g()},stepContent:s.createElement(Z,{triggerSubmission:function(e){g=e},setIsNextDisabled:T,initialValues:O&&O[ie.BASIC_DETAILS],onSubmit:function(e){!function(e,t){N(ue(ue({},O),{},de({},t,e)))}(e,ie.BASIC_DETAILS)}}),stepTitle:b("console:manage.features.roles.addRoleWizard.wizardSteps.0")},{preventGoToNextStep:z,stepContent:s.createElement(le,{selectedPermissions:j,setSelectedPermissions:_,setIsPermissionStepNextButtonDisabled:L,roleAudience:O&&(null===(t=O[ie.BASIC_DETAILS])||void 0===t?void 0:t.roleAudience),assignedApplicationId:O&&(null===(r=O[ie.BASIC_DETAILS])||void 0===r?void 0:r.assignedApplicationId),assignedApplicationName:O&&(null===(h=O[ie.BASIC_DETAILS])||void 0===h?void 0:h.assignedApplicationName)}),stepTitle:b("console:manage.features.roles.addRoleWizard.wizardSteps.1")}];return s.createElement(l.Xg,{title:b("console:manage.features.roles.addRoleWizard.heading",{type:"Role"}),contentTopMargin:!0,description:b("console:manage.features.roles.addRoleWizard.subHeading",{type:"role"}),backButton:{"data-componentid":"".concat(y,"-page-back-button"),onClick:function(){return p.m.push(d.$x.getPaths().get("ROLES"))},text:b("console:manage.features.roles.addRoleWizard.back")},titleTextAlign:"left",bottomMargin:!1,showBottomDivider:!0,"data-componentid":"".concat(y,"-page-layout")},s.createElement("div",{className:"remote-user-store-create-section"},s.createElement(l.pJ,{padded:"very",loading:$},s.createElement(n.Z,{container:!0},s.createElement(n.Z,null,s.createElement(o.tb,{alwaysOpen:!1,isSidePanelOpen:!1,stepContent:W,isNextEnabled:!0,"data-componentid":"".concat(y,"-vertical-stepper"),handleFinishAction:function(){if(!z){B(!0);var e=O[ie.BASIC_DETAILS].roleAudience,t=f.h.getState().organization.organization.id,r=(null==j?void 0:j.flatMap((function(e){var t;return(null==e||null===(t=e.scopes)||void 0===t?void 0:t.map((function(e){return{value:null==e?void 0:e.name}})))||[]})))||[],n={audience:e===I.cv.ORGANIZATION?{type:e,value:t}:{type:e,value:O[ie.BASIC_DETAILS].assignedApplicationId},displayName:O[ie.BASIC_DETAILS].roleName,permissions:r,schemas:[]};(A()||w())&&e===I.cv.ORGANIZATION&&delete n.audience,(0,v.fA)(n).then((function(e){201===e.status&&(S((0,i.V_)({description:b("console:manage.features.roles.notifications.createRole.success.description"),level:a.QU.SUCCESS,message:b("console:manage.features.roles.notifications.createRole.success.message")})),p.m.push(d.$x.getPaths().get("ROLE_EDIT").replace(":id",e.data.id)))})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?S((0,i.V_)({description:b("console:manage.features.roles.notifications.createRole.error.description",{description:e.response.data.detail}),level:a.QU.ERROR,message:b("console:manage.features.roles.notifications.createRole.error.message")})):S((0,i.V_)({description:b("console:manage.features.roles.notifications.createRole.genericError.description"),level:a.QU.ERROR,message:b("console:manage.features.roles.notifications.createRole.genericError.message")})):S((0,i.V_)({description:b("console:manage.features.roles.notifications.createRole.error.description"),level:a.QU.ERROR,message:b("console:manage.features.roles.notifications.createRole.error.message")}))})).finally((function(){B(!1)}))}}}))))))};me.defaultProps={"data-componentid":"create-role-wizard"};const ve=me}}]);