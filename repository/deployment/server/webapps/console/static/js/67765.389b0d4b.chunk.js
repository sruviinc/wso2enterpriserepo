"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[67765,53475],{67765:(e,t,n)=>{n.r(t),n.d(t,{APIResourcesList:()=>g});var o=n(83374),i=n(14603),r=n(90268),a=n(81816),s=n(52983),c=n(9202),l=n(54221),u=n(97860),d=n(73949),p=n(74691),m=n(30640),f=n(15522),v=n(55379),R=n(53475);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var g=function(e){var t=e.apiResourcesList,n=e.featureConfig,h=e.isAPIResourcesListLoading,g=e.setShowAddAPIWizard,b=e.onAPIResourceDelete,A=e.onListItemClick,I=e.showListItemActions,E=e["data-componentid"],S=(0,c.$)().t,P=(0,l.I0)(),C=y((0,s.useState)(!1),2),w=C[0],x=C[1],_=y((0,s.useState)(!1),2),O=_[0],k=_[1],T=y((0,s.useState)(void 0),2),U=T[0],L=T[1],N=(0,l.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),V=function(){return!t||t&&0===t.length?s.createElement(a.$J,{image:(0,m.jF)().emptyList,action:s.createElement(a.KM,{"data-testid":"".concat(E,"-empty-placeholder-add-api-resource-button"),onClick:function(){return g(!0)}},s.createElement(p.Z,{name:"add"}),S("extensions:develop.apiResource.addApiResourceButton")),imageSize:"tiny",subtitle:[S("extensions:develop.apiResource.empty")],"data-testid":"".concat(E,"-empty-search-placeholder-icon")}):null},j=function(e,t){m.m8.push(v.APIResourcesConstants.getPaths().get("API_RESOURCE_EDIT").replace(":id",e.id)),A&&A(t,e)};return s.createElement(s.Fragment,null,s.createElement(a.wQ,{className:"api-resources-table",loadingStateOptions:{count:m.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},showHeader:!1,"data-componentid":E,"data-testid":E,columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n=e?e.displayName:"",o=e?e.gwName:"";return t=n&&""!==n?n:o&&""!==o?o:"",s.createElement(u.Z,{as:"h6",className:"header-with-icon","data-testid":"".concat(E,"-item-heading")},s.createElement(a.JT,{image:s.createElement(a.Xo,{name:t,size:"mini","data-testid":"".concat(E,"-item-display-name-avatar")}),size:"mini",spaced:"right","data-testid":"".concat(E,"-item-display-name")}),s.createElement(u.Z.Content,null,t,s.createElement(u.Z.Subheader,null,R.APIResourceUtils.checkIfAPIResourceManagedByChoreo(e.gwName)&&s.createElement(d.Z,{size:"mini",className:"choreo-label ml-0"},S("extensions:develop.apiResource.managedByChoreoText")))))},title:S("extensions:develop.apiResource.table.name.column")},{allowToggleVisibility:!1,dataIndex:"identifier",id:"identifier",key:"identifier",render:function(e){var t=e?e.identifier:"",n="";return t&&""!==t&&(n=t),s.createElement(u.Z,{as:"h6","data-testid":"".concat(E,"-col-2-item-heading")},s.createElement(u.Z.Content,null,s.createElement(u.Z.Subheader,{"data-testid":"".concat(E,"-col-2-item-sub-heading")},n,n&&s.createElement(d.Z,{pointing:"left",size:"mini",className:"client-id-label"},S("extensions:develop.apiResource.table.identifier.label")))))},title:S("extensions:develop.apiResource.table.identifier.column")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:S("extensions:develop.apiResource.table.actions.column")}],placeholders:V(),actions:function(){if(I)return[{"data-componentid":"".concat(E,"-item-edit-button"),hidden:function(){var e,t,i,r,a=!(0,o.hasRequiredScopes)(null==n?void 0:n.apiResources,null==n||null===(e=n.apiResources)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.read,N);return!(0,o.hasRequiredScopes)(null==n?void 0:n.apiResources,null==n||null===(i=n.apiResources)||void 0===i||null===(r=i.scopes)||void 0===r?void 0:r.update,N)||a},icon:function(){var e,t;return(0,o.hasRequiredScopes)(null==n?void 0:n.applications,null==n||null===(e=n.applications)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,N)?"pencil alternate":"eye"},onClick:function(e,t){j(t,e)},popupText:function(){var e,t;return(0,o.hasRequiredScopes)(null==n?void 0:n.applications,null==n||null===(e=n.applications)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,N)?S("common:edit"):S("common:view")},renderer:"semantic-icon"},{"data-componentid":"".concat(E,"-item-delete-button"),hidden:function(){var e,t;return!(0,o.hasRequiredScopes)(null==n?void 0:n.apiResources,null==n||null===(e=n.apiResources)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.delete,N)},icon:function(){return"trash alternate"},onClick:function(e,t){k(!0),L(t)},popupText:function(){return S("common:delete")},renderer:"semantic-icon"}]}(),data:t,transparent:h||null!==V(),isLoading:h,onRowClick:function(e,t){j(t,e)}}),U&&s.createElement(a.cV,{primaryActionLoading:w,onClose:function(){return k(!1)},type:"negative",open:O,assertionHint:S("extensions:develop.apiResource.confirmations.deleteAPIResource.assertionHint"),assertionType:"checkbox",primaryAction:S("common:confirm"),secondaryAction:S("common:cancel"),onSecondaryActionClick:function(){k(!1)},onPrimaryActionClick:function(){return e=U.id,x(!0),void(0,f.deleteAPIResource)(e).then((function(){P((0,r.V_)({description:S("extensions:develop.apiResource.notifications.deleteAPIResource.success.description"),level:i.QU.SUCCESS,message:S("extensions:develop.apiResource.notifications.deleteAPIResource.success.message")})),k(!1),b&&b()})).catch((function(e){switch(null==e?void 0:e.code){case v.APIResourcesConstants.UNAUTHORIZED_ACCESS:P((0,r.V_)({description:S("extensions:develop.apiResource.notifications.deleteAPIResource.unauthorizedError.description"),level:i.QU.ERROR,message:S("extensions:develop.apiResource.notifications.deleteAPIResource.unauthorizedError.message")}));break;case v.APIResourcesConstants.NO_VALID_API_RESOURCE_ID_FOUND:case v.APIResourcesConstants.API_RESOURCE_NOT_FOUND:P((0,r.V_)({description:S("extensions:develop.apiResource.notifications.deleteAPIResource.notFoundError.description"),level:i.QU.ERROR,message:S("extensions:develop.apiResource.notifications.deleteAPIResource.notFoundError.message")}));break;default:P((0,r.V_)({description:S("extensions:develop.apiResource.notifications.deleteAPIResource.genericError.description"),level:i.QU.ERROR,message:S("extensions:develop.apiResource.notifications.deleteAPIResource.genericError.message")}))}})).finally((function(){x(!1),L(void 0)}));var e},"data-testid":"".concat(E,"-delete-confirmation-modal"),closeOnDimmerClick:!1},s.createElement(a.cV.Header,{"data-testid":"".concat(E,"-delete-confirmation-modal-header")},S("extensions:develop.apiResource.confirmations.deleteAPIResource.header")),s.createElement(a.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(E,"-delete-confirmation-modal-message")},S("extensions:develop.apiResource.confirmations.deleteAPIResource.message")),s.createElement(a.cV.Content,{"data-testid":"".concat(E,"-delete-confirmation-modal-content")},S("extensions:develop.apiResource.confirmations.deleteAPIResource.content"))))};g.defaultProps={"data-componentid":"api-resources",showListItemActions:!0}},53475:(e,t,n)=>{n.r(t),n.d(t,{APIResourceUtils:()=>d});var o=n(56254);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var c,l,u,d=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));c=d,u=function(e){return e===o.APIResourcesConstants.CHOREO_GW_NAME},(l=s(l="checkIfAPIResourceManagedByChoreo"))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u}}]);