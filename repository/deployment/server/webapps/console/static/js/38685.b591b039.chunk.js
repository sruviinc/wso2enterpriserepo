"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[38685],{38685:(e,t,n)=>{n.r(t),n.d(t,{InviteeRoleSelection:()=>v});var l=n(81816),a=n(39345),r=n(67127),o=n(52983),i=n(9202),s=n(21921),u=n(94635),c=n(49238);function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l,a,r,o,i=[],s=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(l=r.call(n)).done)&&(i.push(l.value),i.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}var v=function(e){var t=e.invitee,n=e.showSelectionModal,f=e.handleSelectionModalClose,p=e.handleInviteeRolesUpdate,v=e["data-testid"],h=(0,i.$)().t,y=m((0,o.useState)(void 0),2),b=y[0],g=y[1],E=m((0,o.useState)(void 0),2),S=E[0],C=E[1],I=m((0,o.useState)(void 0),2),w=I[0],k=I[1],A=m((0,o.useState)(!1),2),N=(A[0],A[1]),Z=m((0,o.useState)(!1),2),j=Z[0],M=Z[1];(0,o.useEffect)((function(){var e=[];N(!0),(0,c.Sd)(null).then((function(t){t.data.Resources.map((function(t){"system"!==t.displayName&&"everyone"!==t.displayName&&e.push(t)})),g(e),C(e)})).finally((function(){N(!1)}))}),[]),(0,o.useEffect)((function(){null!=t&&t.roles&&k(t.roles)}),[null==t?void 0:t.roles]),(0,o.useEffect)((function(){if(j){var e=d(null==t?void 0:t.roles);b.map((function(t){e.push(t.displayName)})),k(e)}else k([])}),[j]);return o.createElement(s.Z,{open:n,size:"small",className:"user-roles attribute-modal",dimmer:"blurring"},o.createElement(s.Z.Header,null,h("console:manage.features.invite.rolesUpdateModal.header"),o.createElement(l.X6,{subHeading:!0,ellipsis:!0,as:"h6"},h("console:manage.features.invite.rolesUpdateModal.subHeader"))),o.createElement(s.Z.Content,null,o.createElement(l.IX,{selectionComponent:!0,searchPlaceholder:h("console:manage.features.invite.rolesUpdateModal.searchPlaceholder"),handleHeaderCheckboxChange:function(){M(!j)},isHeaderCheckboxChecked:j,handleUnelectedListSearch:function(e,t){var n=t.value;if((0,r.Z)(n))C(b);else{var l=[],o=new RegExp((0,a.Z)(n),"i");b&&(null==b||b.map((function(e){var t,n=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?e.displayName.split("/")[1]:e.displayName;o.test(n)&&(l.push(e),C(l))})))}},"data-testid":"".concat(v,"-transfer-component")},o.createElement(l.Jv,{selectionComponent:!0,isListEmpty:!((null==b?void 0:b.length)>0),listType:"unselected","data-testid":"".concat(v,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:h("console:manage.features.transferList.list.emptyPlaceholders.default")},null==S?void 0:S.map((function(e,t){return o.createElement(l.qT,{handleItemChange:function(){return t=null==e?void 0:e.displayName,n=d(w),null!=w&&w.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void k(n);var t,n},key:t,listItem:null==e?void 0:e.displayName,listItemId:null==e?void 0:e.id,listItemIndex:null==e?void 0:e.id,isItemChecked:null==w?void 0:w.includes(null==e?void 0:e.displayName),showSecondaryActions:!1,showListSubItem:!0,listSubItem:null,"data-testid":"".concat(v,"-unselected-transfer-list-item-").concat(t)})}))))),o.createElement(s.Z.Actions,null,o.createElement(u.Z,null,o.createElement(u.Z.Row,{column:2},o.createElement(u.Z.Column,{mobile:8,tablet:8,computer:8},o.createElement(l.Qj,{"data-testid":"group-mgt-update-roles-modal-cancel-button",floated:"left",onClick:f},h("common:cancel"))),o.createElement(u.Z.Column,{mobile:8,tablet:8,computer:8},o.createElement(l.KM,{"data-testid":"group-mgt-update-roles-modal-save-button",floated:"right",onClick:function(){return p(null==t?void 0:t.id,w)}},h("common:save")))))))}}}]);