"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7372],{7372:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(83374),a=n(14603),r=n(90268),i=n(81816),s=n(52983),l=n(9202),c=n(39990),d=n(54221),u=n(74691),m=n(64226),f=n(30640),p=n(96627),v=n(43234),g=n(97032),h=n(18319),A=n(90631),S=n(58413),E=n(7502),O=n(62574);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var _=function(e){var t,n,C=e["data-componentid"],_=(0,l.$)().t,b=(0,d.I0)(),I=(0,p.z)().isSuperOrganization,N=(0,d.v9)((function(e){return e.config.ui.features})),R=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),M=(0,d.v9)((function(e){return e.profile.profileInfo})),U=y((0,s.useState)(a.I),2),T=U[0],w=U[1],k=y((0,s.useState)(!1),2),G=k[0],D=k[1],P=y((0,s.useState)(void 0),2),L=P[0],B=P[1],x=y((0,s.useState)(!1),2),j=x[0],z=x[1],F=y((0,s.useState)(void 0),2),Q=F[0],V=F[1],Z=y((0,s.useState)(!1),2),$=Z[0],q=Z[1],K=y((0,s.useState)(!1),2),W=K[0],Y=K[1];(0,s.useEffect)((function(){if(!I){var e=[];(0,v.aA)(g.v.ACCOUNT_MANAGEMENT_CATEGORY_ID).then((function(t){t.map((function(t){t.id!==g.v.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==g.v.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),(0,v.aA)(g.v.USER_ONBOARDING_CONNECTOR_ID).then((function(t){t.map((function(t){t.id===g.v.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===g.v.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),V(e)}))}))}}),[]),(0,s.useEffect)((function(){var e=f.m8.location.pathname.split("/"),t=e[e.length-1];J(t)}),[]),(0,s.useEffect)((function(){I&&(q(!0),f.w3.getReadOnlyUserStores().then((function(e){B(e)})).finally((function(){q(!1)})))}),[T]);var X,H,J=function(e){D(!0),(0,h.M_)(e,null).then((function(e){w(e)})).catch((function(){})).finally((function(){D(!1)}))},ee=function(e){J(e),E.Q.isAuthenticatedUser(null==M?void 0:M.userName,null==T?void 0:T.userName)&&b((0,m.G)())};return s.createElement(S.Z,null,s.createElement(i.O9,{isLoading:G,title:s.createElement(s.Fragment,null,void 0!==(null==T?void 0:T.active)?s.createElement(s.Fragment,null,null!=T&&T.active?s.createElement(i.GI,{trigger:s.createElement(u.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:_("common:enabled"),inverted:!0}):s.createElement(i.GI,{trigger:s.createElement(u.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:_("common:disabled"),inverted:!0}),(0,o.nk)(T,null,"Administrator")):s.createElement(s.Fragment,null,(0,o.nk)(T,null,"Administrator"))),pageTitle:"Edit User",description:_(""+T.emails&&void 0!==T.emails?(X=null==T?void 0:T.emails,H="",X&&Array.isArray(X)&&X.length>0&&(H=X.find((function(e){return"string"==typeof e}))),H):T.userName),image:s.createElement(i.Yt,{editable:(0,o.hasRequiredScopes)(null==N?void 0:N.users,null==N||null===(t=N.users)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,R),name:(0,o.nk)(T),size:"tiny",image:null==T?void 0:T.profileUrl,onClick:function(){var e,t;return(0,o.hasRequiredScopes)(null==N?void 0:N.users,null==N||null===(e=N.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,R)&&z(!0)}}),loadingStateOptions:{count:5,imageType:"circular"},backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:function(){f.m8.push(f.$x.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(O.w.ADMINISTRATORS))},text:_("console:consoleSettings.administrators.edit.backButton")},titleTextAlign:"left",bottomMargin:!1,"data-componentid":C},s.createElement(A.X,{featureConfig:N,user:T,handleUserUpdate:ee,readOnlyUserStores:L,connectorProperties:Q,isLoading:G,isReadOnlyUserStoresLoading:$}),j&&s.createElement(i.Oi,{open:j,name:(0,o.nk)(T),emails:(0,o.r1)(null==T?void 0:T.emails),onClose:function(){return z(!1)},closeOnDimmerClick:!1,onCancel:function(){return z(!1)},onSubmit:function(e,t){var n={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};Y(!0),(0,h.gS)(null==T?void 0:T.id,n).then((function(){b((0,r.V_)({description:_("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:a.QU.SUCCESS,message:_("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")})),ee(null==T?void 0:T.id)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?b((0,r.V_)({description:e.response.data.description||e.response.data.detail,level:a.QU.ERROR,message:_("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):b((0,r.V_)({description:_("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:a.QU.ERROR,message:_("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){z(!1),Y(!1)}))},imageUrl:null==M?void 0:M.profileUrl,isSubmitting:W,heading:_("console:common.modals.editAvatarModal.heading"),submitButtonText:_("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:_("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:s.createElement(c.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",s.createElement("a",{href:"https://www.gravatar.com"}," Gravatar Official Website"),"or use one of the following."),header:_("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:_("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:_("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:_("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:_("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}})))};_.defaultProps={"data-componentid":"console-administrators-edit-page"};const b=_}}]);