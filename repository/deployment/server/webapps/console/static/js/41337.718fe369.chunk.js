"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[41337,62278],{41337:(e,t,a)=>{a.r(t),a.d(t,{AttributeMappings:()=>C,default:()=>y});var n=a(14603),i=a(90268),r=a(81816),l=a(76004),c=a.n(l),o=a(52983),s=a(9202),u=a(54221),d=a(32442),m=a(62278),f=a(91478),p=a(33614),g=a(30640),E=(a(97988),a(68836)),h=a(97865);function I(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,r,l,c=[],o=!0,s=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=r.call(a)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{if(!o&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw i}}return c}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var C=function(e){var t,a,l=e["data-testid"],b=e.match.params,A=b.type,C=b.customAttributeMappingID,y=(0,u.I0)(),S=(0,u.v9)((function(e){return e.config.ui.listAllAttributeDialects})),T=(0,s.$)().t,M=(0,r.fQ)().getLink,R=v((0,o.useState)(!0),2),D=R[0],U=R[1],Q=v((0,o.useState)(null),2),_=Q[0],L=Q[1],O=v((0,o.useState)([]),2),w=O[0],Z=O[1],P=v((0,o.useState)(!0),2),x=P[0],j=P[1];(0,o.useEffect)((function(){H()}),[]),(0,o.useEffect)((function(){_&&_.length>0&&x&&(k(_.map((function(e){return e.id}))),j(!1))}),[_,x]);var k=function(e,t,a,r,l){var o=[];e.forEach((function(e){o.push((0,p.gR)(e,{filter:l,limit:t,offset:a,sort:r}))})),c().all(o).then((function(e){var t=[];e.forEach((function(e){var a=f.attributeConfig.attributeMappings.getExternalAttributes(A,e);t.push.apply(t,I(a.map((function(e){return e.mappedLocalClaimURI}))))})),Z(t)})).catch((function(e){var t,a,r,l,c,o;y((0,i.V_)({description:(null===(t=e[0])||void 0===t||null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.description)||T("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,h.i)(A)}),level:n.QU.ERROR,message:(null===(l=e[0])||void 0===l||null===(c=l.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message)||T("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){return U(!1)}))},B=function(){var e;switch(A){case E.Q.OIDC:return T("console:manage.features.claims.attributeMappings.oidc.heading");case E.Q.SCIM:return T("console:manage.features.claims.attributeMappings.scim.heading");case E.Q.AXSCHEMA:return T("console:manage.features.claims.attributeMappings.axschema.heading");case E.Q.EIDAS:return T("console:manage.features.claims.attributeMappings.eidas.heading");case E.Q.OTHERS:return _&&(null===(e=_[0])||void 0===e?void 0:e.dialectURI);default:return T("console:manage.features.claims.attributeMappings.custom.heading")}},H=function(e,t,a,r){U(!0),(0,p.jp)({filter:r,limit:e,offset:t,sort:a}).then((function(e){var t=e.filter((function(e){return S?"local"!==e.id&&e.id!==E.Q.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET"):e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("LOCAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("AXSCHEMA")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("EIDAS_LEGAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("EIDAS_NATURAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&(f.attributeConfig.attributeMappings.showSCIMCore1||"urn:scim:schemas:core:1.0"!==e.dialectURI)})),a=[];t.forEach((function(e){E.Q.OIDC_MAPPING.includes(e.dialectURI)?A===E.Q.OIDC&&a.push(e):Object.values(E.Q.SCIM_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?A===E.Q.SCIM&&a.push(e):E.Q.AXSCHEMA_MAPPING===e.dialectURI?A===E.Q.AXSCHEMA&&a.push(e):Object.values(E.Q.EIDAS_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?A===E.Q.EIDAS&&a.push(e):A===E.Q.OTHERS&&C===e.id&&a.push(e)})),A===E.Q.SCIM&&f.attributeConfig.showCustomDialectInSCIM&&t.filter((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI})).length>0&&a.push(t.filter((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI}))[0]),L(a)})).catch((function(e){var t,a,r,l;y((0,i.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.description)||T("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.description"),level:n.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||T("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.message")}))})).finally((function(){U(!1)}))};return o.createElement(r.Xg,{isLoading:D,title:B(),pageTitle:B(),description:function(){switch(A){case E.Q.OIDC:return o.createElement(o.Fragment,null,T("console:manage.features.claims.attributeMappings.oidc.description"),o.createElement(r.eb,{link:M("manage.attributes.oidcAttributes.learnMore")},T("common:learnMore")));case E.Q.SCIM:return o.createElement(o.Fragment,null,T("console:manage.features.claims.attributeMappings.scim.description"),o.createElement(r.eb,{link:M("manage.attributes.scimAttributes.learnMore")},T("common:learnMore")));case E.Q.AXSCHEMA:return T("console:manage.features.claims.attributeMappings.axschema.description");case E.Q.EIDAS:return T("console:manage.features.claims.attributeMappings.eidas.description");default:return T("console:manage.features.claims.attributeMappings.custom.description")}}(),"data-testid":"".concat(l,"-page-layout"),image:function(){var e;switch(A){case E.Q.OIDC:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().oidc,spaced:"right",size:"tiny",floated:"left",transparent:!0});case E.Q.SCIM:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().scim,spaced:"right",size:"tiny",floated:"left"});case E.Q.AXSCHEMA:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().axschema,spaced:"right",size:"tiny",floated:"left"});case E.Q.EIDAS:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().eidas,spaced:"right",size:"tiny",floated:"left"});case E.Q.OTHERS:return o.createElement(d.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"tiny"},o.createElement(r.Xo,null),o.createElement("span",{className:"claims-letter"},_&&(null===(e=_[0])||void 0===e?void 0:e.dialectURI.charAt(0).toUpperCase())));default:return o.createElement(d.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"tiny"},o.createElement(r.Xo,null),o.createElement("span",{className:"claims-letter"},"C"))}}(),backButton:{onClick:function(){g.m8.push(g.$x.getPaths().get("CLAIM_DIALECTS"))},text:T("console:manage.features.claims.local.pageLayout.local.back")}},(null==_?void 0:_.length)>1?o.createElement(r.M$,{panes:function(){if(A===E.Q.SCIM){var e=[];if(E.Q.SCIM_TABS.forEach((function(t){if(!f.SCIMConfigs.hideCore1Schema||f.SCIMConfigs.scim.core1Schema!==t.uri){var a=null==_?void 0:_.find((function(e){return e.dialectURI===t.uri}));a&&e.push({menuItem:t.name,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:a.id,attributeUri:t.uri,attributeType:A,mappedLocalClaims:w,updateMappedClaims:j}))}})}})),f.attributeConfig.showCustomDialectInSCIM){var t=null==_?void 0:_.find((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI}));t&&e.push({menuItem:"Custom Schema",render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:t.id,attributeType:A,attributeUri:t.dialectURI,mappedLocalClaims:w,updateMappedClaims:j}))}})}return e}if(A===E.Q.EIDAS){var a=[];return E.Q.EIDAS_TABS.forEach((function(e){var t=null==_?void 0:_.find((function(t){return t.dialectURI===e.uri}));t&&a.push({menuItem:e.name,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:t.id,attributeUri:e.uri,attributeType:A,mappedLocalClaims:w,updateMappedClaims:j}))}})})),a}return null==_?void 0:_.map((function(e){return{menuItem:e.dialectURI,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:e.id,attributeType:A,attributeUri:e.dialectURI,mappedLocalClaims:w,updateMappedClaims:j}))}}}))}(),"data-testid":"".concat(l,"-tabs")}):o.createElement(m.default,{id:_&&(null===(t=_[0])||void 0===t?void 0:t.id),attributeType:A,attributeUri:_&&(null===(a=_[0])||void 0===a?void 0:a.dialectURI),mappedLocalClaims:w,updateMappedClaims:j}))};C.defaultProps={"data-testid":"edit-attribute-mappings"};const y=C},62278:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(7955),i=a(14603),r=a(90268),l=a(81816),c=a(52983),o=a(9202),s=a(54221),u=a(94635),d=a(97860),m=a(28141),f=a(75917),p=a(91478),g=a(33614),E=a(30640),h=a(97988),I=a(68836),v=a(97865);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,r,l,c=[],o=!0,s=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=r.call(a)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{if(!o&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw i}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var C=function(e){var t=e.attributeType,a=e.attributeUri,I=e.mappedLocalClaims,A=e.updateMappedClaims,C=e["data-testid"],y=e.id,S=b((0,c.useState)(null),2),T=S[0],M=S[1],R=b((0,c.useState)(void 0),2),D=R[0],U=R[1],Q=b((0,c.useState)(!0),2),_=Q[0],L=Q[1],O=b((0,c.useState)(!1),2),w=O[0],Z=O[1],P=(0,s.I0)(),x=(0,o.$)().t,j=function(e){(0,g.vR)(null!=e?e:y).then((function(e){M(e)})).catch((function(e){P((0,r.V_)({description:(null==e?void 0:e.description)||x("console:manage.features.claims.dialects.notifications.fetchADialect.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||x("console:manage.features.claims.dialects.notifications.fetchADialect.genericError.message")}))}))};(0,c.useEffect)((function(){y&&j()}),[y]);var k=function(e,a,n,l){y&&L(!0),y&&U(void 0),y&&(0,g.gR)(y,{filter:l,limit:e,offset:a,sort:n}).then((function(e){var a=p.attributeConfig.attributeMappings.getExternalAttributes(t,e);U((0,E.fS)(a,"claimURI",!0))})).catch((function(e){var a,n,l,c;P((0,r.V_)({description:(null==e||null===(a=e.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.description)||x("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,v.i)(t)}),level:i.QU.ERROR,message:(null==e||null===(l=e.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.message)||x("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){L(!1)}))};(0,c.useEffect)((function(){k()}),[y]);var B=function(e){(0,g.Nx)(e).then((function(){E.m8.push(E.$x.getPaths().get("CLAIM_DIALECTS")),P((0,r.V_)({description:x("console:manage.features.claims.dialects.notifications.deleteDialect.success.description",{type:(0,v.i)(t,!0)}),level:i.QU.SUCCESS,message:x("console:manage.features.claims.dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){P((0,r.V_)({description:(null==e?void 0:e.description)||x("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.description",{type:(0,v.i)(t,!0)}),level:i.QU.ERROR,message:(null==e?void 0:e.message)||x("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.message")}))}))};return c.createElement(c.Fragment,null,p.attributeConfig.attributeMappings.editAttributeMappingDetails&&c.createElement(c.Fragment,null,c.createElement(u.Z,null,c.createElement(u.Z.Row,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(d.Z,{as:"h4"},x("console:manage.features.claims.dialects.pageLayout.edit.updateDialectURI",{type:(0,v.i)(t,!0)})),c.createElement(l.pJ,null,_?c.createElement(m.Z,null,c.createElement(m.Z.Line,{length:"short"}),c.createElement(m.Z.Line,{length:"medium"})):c.createElement(h.T8,{dialect:T,"data-testid":"".concat(C,"-edit-dialect-details"),attributeType:t,onUpdate:function(e){j(e)}}))))),c.createElement(f.Z,{hidden:!0}),c.createElement(u.Z,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(d.Z,{as:"h4"},x("console:manage.features.claims.dialects.pageLayout.edit.updateExternalAttributes",{type:(0,v.i)(t,!0)})))),c.createElement(f.Z,{hidden:!0}),c.createElement(f.Z,{hidden:!0})),c.createElement(h._v,{dialectID:y,isLoading:_,claims:D,update:k,"data-testid":"".concat(C,"-edit-external-claims"),attributeType:t,attributeUri:a,mappedLocalClaims:I,updateMappedClaims:A}),c.createElement(f.Z,{hidden:!0}),p.attributeConfig.attributeMappings.showDangerZone&&c.createElement(u.Z,null,c.createElement(u.Z.Row,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(n.di,{when:n.TA.SCOPE_DELETE},c.createElement(l.v9,{sectionHeader:x("common:dangerZone"),"data-testid":"".concat(C,"-danger-zone-group")},c.createElement(l.cN,{actionTitle:x("console:manage.features.claims.dialects.dangerZone.actionTitle",{type:(0,v.i)(t,!0,!0)}),header:x("console:manage.features.claims.dialects.dangerZone.header",{type:(0,v.i)(t,!0)}),subheader:x("console:manage.features.claims.dialects.dangerZone.subheader",{type:(0,v.i)(t)}),onActionClick:function(){return Z(!0)},"data-testid":"".concat(C,"-dialect-delete-danger-zone")})))))),p.attributeConfig.attributeMappings.showDangerZone&&w&&c.createElement(l.cV,{onClose:function(){return Z(!1)},type:"negative",open:w,assertion:T.dialectURI,assertionHint:c.createElement("p",null,"Please type ",c.createElement("strong",null,T.dialectURI)," to confirm."),assertionType:"input",primaryAction:x("console:manage.features.claims.dialects.confirmations.action"),secondaryAction:x("common:cancel"),onSecondaryActionClick:function(){return Z(!1)},onPrimaryActionClick:function(){return B(T.id)},"data-testid":"".concat(C,"-delete-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(l.cV.Header,{"data-testid":"".concat(C,"-delete-confirmation-modal-header")},x("console:manage.features.claims.dialects.confirmations.header")),c.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(C,"-delete-confirmation-modal-message")},x("console:manage.features.claims.dialects.confirmations.message")),c.createElement(l.cV.Content,{"data-testid":"".concat(C,"-delete-confirmation-modal-content")},x("console:manage.features.claims.dialects.confirmations.content",{type:(0,v.i)(t)}))))};C.defaultProps={attributeType:I.Q.OTHERS,"data-testid":"external-dialect-edit"};const y=C}}]);