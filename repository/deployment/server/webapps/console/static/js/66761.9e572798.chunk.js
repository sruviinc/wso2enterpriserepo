"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[66761],{66761:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var o=n(42125),a=n(83374),r=n(14603),i=n(90268),s=n(83831),l=n(81816),c=n(52983),u=n(9202),d=n(39990),m=n(54221),f=n(74691),p=n(73949),v=n(67680),g=n(64226),h=n(30640),A=n(91303),S=n(43234),E=n(97032),b=n(26021),I=n(90631),C=n(58413),y=n(53830);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const R=function(){var e,t,n,N,R,U,M,_,T,k=(0,u.$)().t,w=(0,m.I0)(),P=(0,m.v9)((function(e){return e.config.ui.features})),G=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),D=(0,m.v9)((function(e){return e.profile.profileInfo})),x=O((0,c.useState)(r.I),2),L=x[0],B=x[1],Z=O((0,c.useState)(!1),2),z=Z[0],$=Z[1],j=O((0,c.useState)(void 0),2),F=j[0],Q=j[1],V=O((0,c.useState)(!1),2),q=V[0],W=V[1],X=O((0,c.useState)(void 0),2),H=X[0],J=X[1],K=O((0,c.useState)(!1),2),Y=K[0],ee=K[1],te=O((0,c.useState)(!1),2),ne=te[0],oe=te[1],ae=O((0,c.useState)(!1),2),re=ae[0],ie=ae[1],se=O((0,c.useState)(!1),2),le=se[0],ce=se[1],ue=void 0===(null===(e=L.name)||void 0===e?void 0:e.familyName)&&void 0===(null===(t=L.name)||void 0===t?void 0:t.givenName);(0,c.useEffect)((function(){var e=[];(0,S.aA)(E.v.ACCOUNT_MANAGEMENT_CATEGORY_ID).then((function(t){t.map((function(t){t.id!==E.v.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==E.v.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),(0,S.aA)(E.v.USER_ONBOARDING_CONNECTOR_ID).then((function(t){t.map((function(t){t.id===E.v.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===E.v.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),J(e)}))}))}),[]),(0,c.useEffect)((function(){var e=h.m8.location.pathname.split("/"),t=e[e.length-1];de(t)}),[]),(0,c.useEffect)((function(){ee(!0),h.w3.getReadOnlyUserStores().then((function(e){Q(e)})).finally((function(){ee(!1)}))}),[L]);var de=function(e){$(!0),(0,b.M_)(e,null).then((function(e){B(e),ie(!1),ce(!1)})).catch((function(e){var t;404===(null==e||null===(t=e.response)||void 0===t?void 0:t.status)?(w((0,i.V_)({description:e.response.data.detail,level:r.QU.ERROR,message:k("console:manage.notifications.getProfileInfo.error.message")})),ie(!0)):(w((0,i.V_)({description:k("console:manage.notifications.getProfileSchema.genericError.description"),level:r.QU.ERROR,message:k("console:manage.notifications.getProfileSchema.genericError.message")})),ce(!0))})).finally((function(){$(!1)}))},me=function(e){de(e),y.QH.isAuthenticatedUser(null==D?void 0:D.userName,null==L?void 0:L.userName)&&w((0,g.G)())},fe=function(){window.location.href.includes(h.$x.getPaths().get("ADMINISTRATORS"))?h.m8.push(h.$x.getPaths().get("ADMINISTRATORS")):h.m8.push(h.$x.getPaths().get("USERS"))},pe=function(){return!ue&&y.QH.resolveUserListSubheaderName(L)};return re||le?re?c.createElement(l.$J,{action:c.createElement(o.Z,{variant:"text",onClick:fe},k("console:manage.features.users.editUser.placeholders.undefinedUser.action")),subtitle:[k("console:manage.features.users.editUser.placeholders.undefinedUser.subtitles")],title:k("console:manage.features.users.editUser.placeholders.undefinedUser.title"),image:(0,h.jF)().emptySearch,imageSize:"tiny"}):le?c.createElement(l.$J,{action:c.createElement(o.Z,{variant:"text",onClick:s.CommonUtils.refreshPage},k("console:common.placeholders.brokenPage.action")),image:(0,h.jF)().brokenPage,imageSize:"tiny",subtitle:[k("console:common.placeholders.brokenPage.subtitles.0"),k("console:common.placeholders.brokenPage.subtitles.1")],title:k("console:common.placeholders.brokenPage.title")}):void 0:c.createElement(C.Z,null,c.createElement(l.O9,{isLoading:z,loadingStateOptions:{count:5,imageType:"circular"},title:c.createElement(c.Fragment,null,void 0!==(null==L?void 0:L.active)?c.createElement(c.Fragment,null,null!=L&&L.active?c.createElement(l.GI,{trigger:c.createElement(f.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:k("common:enabled"),inverted:!0}):c.createElement(l.GI,{trigger:c.createElement(f.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:k("common:disabled"),inverted:!0}),(0,a.WX)(null==L?void 0:L.userName)):c.createElement(c.Fragment,null,(0,a.WX)(null==L?void 0:L.userName))),pageTitle:"Edit User",description:c.createElement("div",null,pe(),(null===(n=L[v.SCIMConfigs.scim.enterpriseSchema])||void 0===n?void 0:n.userSourceId)&&c.createElement(p.Z,{className:"profile-user-source-label"},c.createElement(l.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:function(e){switch(e){case"Google":return(0,A.nI)().google;case"facebook":return(0,A.nI)().facebook;case"Github":return(0,A.nI)().github;case"Microsoft":return(0,A.nI)().microsoft;case"Apple":return(0,A.nI)().apple;default:return(0,A.nI)().enterprise}}(null===(N=L[v.SCIMConfigs.scim.enterpriseSchema])||void 0===N?void 0:N.idpType),verticalAlign:"middle"}),c.createElement(p.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(R=L[v.SCIMConfigs.scim.enterpriseSchema])||void 0===R?void 0:R.userSourceId)),(null===(U=L[v.SCIMConfigs.scim.enterpriseSchema])||void 0===U?void 0:U.userSource)&&c.createElement(p.Z,{className:pe()?"profile-user-source-label":"profile-user-source-label ml-0"},c.createElement(l.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:(0,h.Uz)().userStore,verticalAlign:"middle"}),c.createElement(p.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(M=L[v.SCIMConfigs.scim.enterpriseSchema])||void 0===M?void 0:M.userSource))),image:c.createElement(l.Yt,{editable:(0,a.hasRequiredScopes)(null==P?void 0:P.users,null==P||null===(_=P.users)||void 0===_||null===(T=_.scopes)||void 0===T?void 0:T.update,G),name:(0,a.nk)(L),size:"tiny",image:null==L?void 0:L.profileUrl,onClick:function(){var e,t;return(0,a.hasRequiredScopes)(null==P?void 0:P.users,null==P||null===(e=P.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,G)&&W(!0)}}),backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:fe,text:window.location.href.includes(h.$x.getPaths().get("ADMINISTRATORS"))?k("console:manage.pages.usersEdit.backButton",{type:"Administrators"}):k("console:manage.pages.usersEdit.backButton",{type:"Users"})},titleTextAlign:"left",bottomMargin:!1},c.createElement(I.X,{featureConfig:P,user:L,handleUserUpdate:me,readOnlyUserStores:F,connectorProperties:H,isLoading:z,isReadOnlyUserStoresLoading:Y}),q&&c.createElement(l.Oi,{open:q,name:(0,a.nk)(L),emails:(0,a.r1)(null==L?void 0:L.emails),onClose:function(){return W(!1)},closeOnDimmerClick:!1,onCancel:function(){return W(!1)},onSubmit:function(e,t){var n={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};oe(!0),(0,b.gS)(null==L?void 0:L.id,n).then((function(){w((0,i.V_)({description:k("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:r.QU.SUCCESS,message:k("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")})),me(null==L?void 0:L.id)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?w((0,i.V_)({description:e.response.data.description||e.response.data.detail,level:r.QU.ERROR,message:k("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):w((0,i.V_)({description:k("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:r.QU.ERROR,message:k("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){W(!1),oe(!1)}))},imageUrl:null==D?void 0:D.profileUrl,isSubmitting:ne,heading:k("console:common.modals.editAvatarModal.heading"),submitButtonText:k("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:k("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:c.createElement(d.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",c.createElement("a",{href:"https://www.gravatar.com"},"Gravatar Official Website"),"or use one of the following."),header:k("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:k("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:k("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:k("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:k("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:k("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}})))}}}]);