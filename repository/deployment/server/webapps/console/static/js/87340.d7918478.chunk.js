"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[87340],{87340:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(7955),n=a(14603),o=a(90268),r=a(13318),i=a(81816),c=a(52983),u=a(9202),s=a(54221),d=a(74691),f=a(91478),m=a(2653),g=a(33614),h=a(30640),v=a(97988);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,o,r,i=[],c=!0,u=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(l=o.call(a)).done)&&(i.push(l.value),i.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(u)throw n}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}var S=function(e){var t=e["data-testid"],a=(0,u.$)().t,y=(0,i.fQ)().getLink,S=[{key:0,text:a("common:name"),value:"displayName"},{key:1,text:a("console:manage.features.claims.local.attributes.attributeURI"),value:"claimURI"}],b=(0,s.v9)((function(e){return e.config.ui.features})),C=(0,s.v9)((function(e){var t,a;return null==e||null===(t=e.config)||void 0===t||null===(a=t.ui)||void 0===a?void 0:a.enableIdentityClaims})),E=p((0,c.useState)(null),2),A=E[0],I=E[1],R=p((0,c.useState)(0),2),k=R[0],L=R[1],w=p((0,c.useState)(h.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),P=w[0],O=w[1],T=p((0,c.useState)(!1),2),U=T[0],_=T[1],x=p((0,c.useState)(""),2),M=x[0],Q=x[1],N=p((0,c.useState)(null),2),V=N[0],j=N[1],D=p((0,c.useState)(S[0]),2),F=D[0],$=D[1],z=p((0,c.useState)(!0),2),B=z[0],q=z[1],H=p((0,c.useState)(""),2),W=H[0],K=H[1],X=p((0,c.useState)(!0),2),Z=X[0],G=X[1],J=p((0,c.useState)(!1),2),Y=J[0],ee=J[1],te=p((0,r.cC)(),2),ae=te[0],le=te[1],ne=(0,s.I0)(),oe=(0,c.useRef)(!0),re=function(e,t,l,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!C;G(!0);var c={"exclude-identity-claims":i,filter:r||null,limit:e||null,offset:l||null,sort:t||null};(0,g.WN)(c).then((function(e){I(e),j((0,h.fS)(e,F.value,B))})).catch((function(e){var t,l,r,i;ne((0,o.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.description)||a("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:n.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||a("console:manage.features.claims.local.notifications.getClaims.genericError.message")}))})).finally((function(){G(!1)}))};(0,c.useEffect)((function(){oe.current?oe.current=!1:j((0,h.fS)(V,F.value,B))}),[F,B]),(0,c.useEffect)((function(){re(null,null,null,null,!C),(0,g.vR)("local").then((function(e){Q(e.dialectURI)})).catch((function(e){ne((0,o.V_)({description:(null==e?void 0:e.description)||a("console:manage.features.claims.local.notifications.getLocalDialect.genericError.message"),level:n.QU.ERROR,message:(null==e?void 0:e.message)||a("console:manage.features.claims.local.notifications.getLocalDialect.genericError.message")}))}))}),[]);var ie=function(e){var t=(0,h.gQ)(A,e,F.value,B);j(t),K(ce(e)),L(0),le()},ce=function(e){var t=null==e?void 0:e.split(" "),a="";if(t)switch(t[1]){case"eq":a="".concat(t[0]," equals to ").concat(t[2]);break;case"co":a="".concat(t[0]," containing ").concat(t[2]);break;case"sw":a="".concat(t[0]," starting with ").concat(t[2]);break;case"ew":a="".concat(t[0]," ending with ").concat(t[2])}return a};return c.createElement(c.Fragment,null,U?c.createElement(v.C$,{open:U,onClose:function(){_(!1)},update:re,claimURIBase:M,"data-testid":"".concat(t,"-add-local-claims-wizard")}):null,c.createElement(i.Xg,{action:(Z||!(!W&&(null==V?void 0:V.length)<=0))&&f.attributeConfig.attributes.addAttribute&&c.createElement(l.di,{when:m.T.ATTRIBUTE_WRITE},c.createElement(i.KM,{onClick:function(){_(!0)},"data-testid":"".concat(t,"-list-layout-add-button")},c.createElement(d.Z,{name:"add"}),a("console:manage.features.claims.local.pageLayout.local.action"))),isLoading:Z,title:a("console:manage.features.claims.local.pageLayout.local.title"),pageTitle:a("console:manage.features.claims.local.pageLayout.local.title"),description:c.createElement(c.Fragment,null,a(f.attributeConfig.attributes.description),c.createElement(i.eb,{link:y("manage.attributes.attributes.learnMore")},a("common:learnMore"))),backButton:{onClick:function(){h.m8.push(h.$x.getPaths().get("CLAIM_DIALECTS"))},text:a("console:manage.features.claims.local.pageLayout.local.back")},"data-testid":"".concat(t,"-page-layout")},c.createElement(i.PS,{resetPagination:ae,advancedSearch:c.createElement(h.nC,{onFilter:ie,filterAttributeOptions:[{key:0,text:a("common:name"),value:"displayName"},{key:1,text:a("console:manage.features.claims.local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:a("console:manage.features.claims.local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:Y,"data-testid":"".concat(t,"-list-advanced-search")}),currentListSize:P,listItemLimit:P,onItemsPerPageDropdownChange:function(e,t){O(t.value)},onPageChange:function(e,t){L((t.activePage-1)*P)},onSortStrategyChange:function(e,t){$(S.filter((function(e){return e.value===t.value}))[0])},leftActionPanel:null,showPagination:!0,sortOptions:S,sortStrategy:F,showTopActionPanel:Z||!(!W&&(null==V?void 0:V.length)<=0),totalPages:Math.ceil((null==V?void 0:V.length)/P),totalListSize:null==V?void 0:V.length,onSortOrderChange:function(e){q(e)},"data-testid":"".concat(t,"-list-layout")},c.createElement(v.Sf,{advancedSearch:c.createElement(h.nC,{onFilter:ie,filterAttributeOptions:[{key:0,text:a("common:name"),value:"displayName"},{key:1,text:a("console:manage.features.claims.local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:a("console:manage.features.claims.local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:a("console:manage.features.claims.local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:Y,"data-testid":"".concat(t,"-list-advanced-search")}),showTableHeaders:!0,isLoading:Z,list:function(e,t,a){return null==e?void 0:e.slice(a,a+t)}(V,P,k),localClaim:v.RH.LOCAL,update:re,onEmptyListPlaceholderActionClick:function(){return _(!0)},onSearchQueryClear:function(){ee(!Y),K(""),j(A)},searchQuery:W,"data-testid":"".concat(t,"-list"),featureConfig:b}))))};S.defaultProps={"data-testid":"local-claims"};const b=S}}]);