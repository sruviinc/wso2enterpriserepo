"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[49735],{49735:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(7955),o=n(90009),i=n(14603),l=n(90268),c=n(41482),r=n(81816),s=n(46440),u=n(38314),p=n(52983),d=n(9202),m=n(54221),f=n(71325),v=n(94635),g=n(74691),h=n(88171),A=n(91478),S=n(30640),E=n(5163),y=n(96627),T=n(61133),C=n(11582),P=n(37340),I=n(16782),_=n(61375),b=n(87089);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i,l,c=[],r=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=i.call(n)).done)&&(c.push(a.value),c.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{if(!r&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var M=[{key:1,text:c.I18n.instance.t("common:name"),value:"name"},{key:2,text:c.I18n.instance.t("common:type"),value:"type"},{key:3,text:c.I18n.instance.t("common:createdOn"),value:"createdDate"},{key:4,text:c.I18n.instance.t("common:lastUpdatedOn"),value:"lastUpdated"}],L=function(e){var t,n,c,O=e["data-testid"],L=(0,d.$)().t,k=(0,r.fQ)().getLink,U=(0,m.I0)(),x=(0,o.Z)().UIConfig,N=(0,m.v9)((function(e){return e.config.ui.features})),w=(0,m.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isSAASDeployment})),D=R((0,p.useState)(""),2),Z=D[0],$=D[1],j=R((0,p.useState)(M[0]),2),Q=j[0],V=j[1],z=R((0,p.useState)(0),2),G=z[0],Y=z[1],F=R((0,p.useState)(S.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),B=F[0],H=F[1],W=R((0,p.useState)(!1),2),K=W[0],q=W[1],J=R((0,p.useState)(!1),2),X=J[0],ee=J[1],te=(0,m.v9)((function(e){return e.config})),ne=(0,m.v9)((function(e){var t,n,a;return null==e||null===(t=e.config)||void 0===t||null===(n=t.deployment)||void 0===n||null===(a=n.accountApp)||void 0===a?void 0:a.tenantQualifiedPath})),ae=R((0,p.useState)(S.$x.DEFAULT_MY_ACCOUNT_STATUS),2),oe=ae[0],ie=ae[1],le=R((0,p.useState)(void 0),2),ce=le[0],re=(le[1],R((0,p.useState)(null),2)),se=re[0],ue=re[1],pe=(0,y.z)().organizationType,de=S.lD.getInstance(),me=(0,T.Ok)("advancedConfigurations,templateId,clientId,issuer",B,G,Z),fe=me.data,ve=me.isLoading,ge=me.error,he=me.mutate,Ae=(0,T.az)("advancedConfigurations,templateId,clientId,issuer"),Se=Ae.data,Ee=Ae.isLoading,ye=Ae.error,Te=window.AppUtils.getConfig().organizationName,Ce=(0,T.pv)(!Te&&(null===A.applicationConfig||void 0===A.applicationConfig||null===(t=A.applicationConfig.advancedConfigurations)||void 0===t?void 0:t.showMyAccountStatus)),Pe=Ce.data,Ie=Ce.isLoading,_e=Ce.error;(0,p.useEffect)((function(){if(!1===ve&&!1===Ie&&!Ee){var e=S.$x.DEFAULT_MY_ACCOUNT_STATUS;if(Pe){var t=Pe.value;t&&"false"===t&&(e=!1)}ie(e)}}),[ve,Ie,Ee]),(0,p.useEffect)((function(){ge&&(ge.response&&ge.response.data&&ge.response.data.description?U((0,l.V_)({description:ge.response.data.description,level:i.QU.ERROR,message:L("console:develop.features.applications.notifications.fetchApplications.error.message")})):U((0,l.V_)({description:L("console:develop.features.applications.notifications.fetchApplications.genericError.description"),level:i.QU.ERROR,message:L("console:develop.features.applications.notifications.fetchApplications.genericError.message")})))}),[ge]),(0,p.useEffect)((function(){var e,t;ye&&(null!=ye&&null!==(e=ye.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?U((0,l.V_)({description:ye.response.data.description,level:i.QU.ERROR,message:L("console:develop.features.applications.notifications.fetchMyAccountApplication.error.message")})):U((0,l.V_)({description:L("console:develop.features.applications.notifications.fetchMyAccountApplication.genericError.description"),level:i.QU.ERROR,message:L("console:develop.features.applications.notifications.fetchMyAccountApplication.genericError.message")})))}),[ye]),(0,p.useEffect)((function(){if(_e)if(_e.response&&_e.response.data&&_e.response.data.description){var e;if(404===_e.response.status)return;U((0,l.V_)({description:null!==(e=_e.response.data.description)&&void 0!==e?e:L("console:develop.features.applications.myaccount.fetchMyAccountStatus.error.description"),level:i.QU.ERROR,message:L("console:develop.features.applications.myaccount.fetchMyAccountStatus.error.message")}))}else U((0,l.V_)({description:L("console:develop.features.applications.myaccount.fetchMyAccountStatus.genericError.description"),level:i.QU.ERROR,message:L("console:develop.features.applications.myaccount.fetchMyAccountStatus.genericError.message")}))}),[_e]),(0,p.useEffect)((function(){if(null!=fe&&fe.applications){var e,t=(0,s.Z)(fe);null!=x&&null!==(e=x.legacyMode)&&void 0!==e&&e.applicationListSystemApps||(t.applications=t.applications.filter((function(e){return!I.jo.SYSTEM_APPS.includes(e.name)&&!I.jo.DEFAULT_APPS.includes(e.name)})),t.count=t.count-(fe.applications.length-t.applications.length),t.totalResults=t.totalResults-(fe.applications.length-t.applications.length)),ue(t)}}),[fe]);var be,Re,Oe,Me=function(e){$(e),Y(0)};return p.createElement(r.Xg,{pageTitle:"Applications",action:pe!==E.$B.SUBORGANIZATION&&(null==se?void 0:se.totalResults)>0&&p.createElement(a.di,{when:a.TA.APPLICATION_WRITE},p.createElement(r.KM,{onClick:function(){de.publish("application-click-new-application-button"),S.m8.push(S.$x.getPaths().get("APPLICATION_TEMPLATES"))},"data-testid":"".concat(O,"-list-layout-add-button")},p.createElement(g.Z,{name:"add"}),L("console:develop.features.applications.list.actions.add"))),title:L("console:develop.pages.applications.title"),description:pe!==E.$B.SUBORGANIZATION?p.createElement("p",null,L("console:develop.pages.applications.subTitle"),p.createElement(r.eb,{link:k("develop.applications.learnMore")},L("common:learnMore"))):p.createElement("p",null,L("console:develop.pages.applications.alternateSubTitle"),p.createElement(r.eb,{link:k("develop.applications.learnMore")},L("common:learnMore"))),contentTopMargin:S.$x.getTenant()===S.$x.getSuperTenant(),"data-testid":"".concat(O,"-page-layout")},(w||!Ee&&0!==(null==Se||null===(n=Se.applications)||void 0===n?void 0:n.length))&&(!A.applicationConfig.advancedConfigurations.showMyAccount||null!=x&&null!==(Re=x.legacyMode)&&void 0!==Re&&Re.applicationListSystemApps?null:p.createElement(r.pJ,{className:"mt-0 mb-5","data-componentid":"application-consumer-account-link"},p.createElement(f.Z,null,p.createElement(f.Z.Item,null,p.createElement(v.Z,{verticalAlign:"middle"},p.createElement(v.Z.Column,{floated:"left",mobile:16,computer:9},p.createElement(r.dn,{icon:(0,S.s_)().myAccountSolidIcon,className:"mt-1",floated:"left",size:"tiny",spaced:"right",verticalAlign:"middle",inline:!0,square:!0,transparent:!0}),p.createElement(f.Z.Header,{"data-componentid":"application-consumer-account-link-title",className:"my-account-title mb-1"},L("console:develop.features.applications.myaccount.title"),(null===A.applicationConfig||void 0===A.applicationConfig||null===(Oe=A.applicationConfig.advancedConfigurations)||void 0===Oe?void 0:Oe.showMyAccountStatus)&&p.createElement(g.Z,{color:oe?"green":"grey",name:oe?"check circle":"minus circle",className:"middle aligned ml-1"})),p.createElement(f.Z.Description,{"data-componentid":"application-consumer-account-link-description"},L("console:develop.features.applications.myaccount.description"),p.createElement(r.eb,{link:k("develop.applications.myaccount.learnMore")},L("common:learnMore")))),oe?p.createElement(r.GI,{trigger:p.createElement(v.Z.Column,{mobile:16,computer:6,className:"pr-0"},p.createElement(r.OR,{value:ne,"data-componentid":"application-consumer-account-link-copy-field"})),content:L("console:develop.features.applications.myaccount.popup"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null,p.createElement(v.Z.Column,{mobile:16,computer:1},p.createElement(r.GI,{trigger:p.createElement(h.Z,{"data-componentid":"navigate-to-my-account-settings-button",icon:"setting",onClick:function(){var e,t,n,a;null!==A.applicationConfig&&void 0!==A.applicationConfig&&null!==(e=A.applicationConfig.advancedConfigurations)&&void 0!==e&&e.showDefaultMyAccountApplicationEditPage?ce?S.m8.push({pathname:S.$x.getPaths().get("APPLICATION_EDIT").replace(":id",null==Se||null===(t=Se.applications[0])||void 0===t?void 0:t.id),search:"?".concat(I.jo.APP_STATE_STRONG_AUTH_PARAM_KEY,"=").concat(I.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE)}):S.m8.push({pathname:S.$x.getPaths().get("APPLICATION_EDIT").replace(":id",null==Se||null===(n=Se.applications[0])||void 0===n?void 0:n.id),search:(null==Se||null===(a=Se.applications[0])||void 0===a?void 0:a.access)===b.Ch.READ?"?".concat(I.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY,"=true"):""}):S.m8.push({pathname:S.$x.getPaths().get("MY_ACCOUNT_EDIT"),state:I.jo.APPLICATION_STATE})}}),content:L("common:settings"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))))))),p.createElement(r.PS,{advancedSearch:p.createElement(S.nC,{onFilter:Me,filterAttributeOptions:[{key:0,text:L("common:name"),value:"name"},{key:1,text:L("common:clientId"),value:"clientId"},{key:2,text:L("common:issuer"),value:"issuer"}],filterAttributePlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:L("console:develop.features.applications.advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:K,"data-testid":"".concat(O,"-list-advanced-search")}),currentListSize:null==se?void 0:se.count,isLoading:ve||Ee,listItemLimit:B,onItemsPerPageDropdownChange:function(e,t){H(t.value)},onPageChange:function(e,t){Y((t.activePage-1)*B)},onSortStrategyChange:function(e,t){V((0,u.Z)(M,(function(e){return t.value===e.value})))},showPagination:!0,showTopActionPanel:ve||Ee||!(!Z&&(null==se?void 0:se.totalResults)<=0),sortOptions:M,sortStrategy:Q,totalPages:Math.ceil((null==se?void 0:se.totalResults)/B),totalListSize:null==se?void 0:se.totalResults,paginationOptions:{disableNextButton:(be=se,!((null==be?void 0:be.startIndex)+(null==be?void 0:be.count)!==(null==be?void 0:be.totalResults)+1))},"data-testid":"".concat(O,"-list-layout")},p.createElement(C.d,{advancedSearch:p.createElement(S.nC,{onFilter:Me,filterAttributeOptions:[{key:0,text:L("common:name"),value:"name"},{key:1,text:L("common:clientId"),value:"clientId"},{key:2,text:L("common:issuer"),value:"issuer"}],filterAttributePlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:L("console:develop.features.applications.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:L("console:develop.features.applications.advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:K,"data-testid":"".concat(O,"-list-advanced-search")}),featureConfig:N,isSetStrongerAuth:ce,isLoading:ve||Ee,list:se,onApplicationDelete:function(){he()},onEmptyListPlaceholderActionClick:function(){S.m8.push(S.$x.getPaths().get("APPLICATION_TEMPLATES"))},onSearchQueryClear:function(){$(""),q(!K)},searchQuery:Z,"data-testid":"".concat(O,"-list"),"data-componentid":"application"})),X&&p.createElement(P.y,{title:null==_?void 0:_.name,subTitle:null==_?void 0:_.description,closeWizard:function(){return ee(!1)},template:_,showHelpPanel:!0,subTemplates:null==_?void 0:_.subTemplates,subTemplatesSectionTitle:null==_?void 0:_.subTemplatesSectionTitle,addProtocol:!1,templateLoadingStrategy:null!==(c=te.ui.applicationTemplateLoadingStrategy)&&void 0!==c?c:I.jo.DEFAULT_APP_TEMPLATE_LOADING_STRATEGY}))};L.defaultProps={"data-testid":"applications"};const k=L}}]);