"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[98179],{98179:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(81816),a=n(52983),s=n(9202),i=n(54221),o=n(5873),u=n(25296),l=n(29974),c=n(30640),f=n(77499),d=n(99839),m=n(52213);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.guestUsersList,n=e.getGuestUsersList,v=e.isGuestUsersRequestLoading,S=e.isOnboardedGuestUsersListRequestLoading,h=e.onboardedGuestUserList,E=e.invitationStatusOption,g=e.handleInvitationStatusOptionChange,C=e.onEmptyListPlaceholderActionClick,P=e.getUsersList,A=e.isNextPage,I=e.isDescriptionShown,y=e.setDescriptionShown,b=(0,s.$)().t,U=(0,r.fQ)().getLink,L=p((0,a.useState)(""),2),T=L[0],D=L[1],O=p((0,a.useState)(0),2),w=O[0],_=O[1],N=p((0,a.useState)(c.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),k=N[0],x=N[1],R=p((0,a.useState)(!1),2),G=R[0],Q=R[1],M=p((0,a.useState)([]),2),F=M[0],q=M[1],H=p((0,a.useState)([]),2),j=H[0],V=H[1],W=p((0,a.useState)([]),2),X=W[0],z=W[1],B=p((0,a.useState)(!1),2),K=B[0],Y=B[1],$=p((0,a.useState)(!1),2),Z=$[0],J=$[1],ee=p((0,a.useState)(!1),2),te=ee[0],ne=ee[1],re=(0,i.v9)((function(e){return e.config.ui.features}));(0,a.useEffect)((function(){I(d.UsersConstants.QUEST_DESCRIPTION_SHOWN_STATUS_KEY)&&J(!0)}),[]),(0,a.useEffect)((function(){if(E!==m.InvitationStatus.ACCEPTED){if(_(0),"email co "===T||""===T||null===T)return q(t),void z([]);if(T){var e=t;if(X.length>0&&(e=X),T.includes("email sw ")){var n=T.split("sw ")[1];e=e.filter((function(e){return e.email.startsWith(n)}))}else if(T.includes("email ew ")){var r=T.split("ew ")[1];e=e.filter((function(e){return e.email.endsWith(r)}))}else if(T.includes("email eq ")){var a=T.split("eq ")[1];e=e.filter((function(e){return e.email===a}))}else if(T.includes("email co ")){var s=T.split("co ")[1];e=e.filter((function(e){return e.email.includes(s)}))}q(e),z(e)}}}),[T]),(0,a.useEffect)((function(){if(E!==m.InvitationStatus.ACCEPTED){var e=null==F?void 0:F.filter((function(e){return e.status===E.toUpperCase()}));e.length>k?(e=e.slice(w,w+k),V(e),Y(e.length===k)):(V(e),Y(!1))}}),[F,w,k]),(0,a.useEffect)((function(){q(t)}),[t]),(0,a.useEffect)((function(){te&&(_(0),x(c.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),se(),ne(!1))}),[te]),(0,a.useEffect)((function(){E===m.InvitationStatus.ACCEPTED&&P(k,w+1,null==T||""==T?null:T,null,f.pH)}),[w,k]),(0,a.useEffect)((function(){return n(),m.InvitationStatus.ACCEPTED.toUpperCase()===E.toUpperCase()&&(h&&0!=h.totalResults||(t.filter((function(e){return e.status===m.InvitationStatus.PENDING.toUpperCase()})).length>0?(g(m.InvitationStatus.PENDING),ne(!0)):t.filter((function(e){return e.status===m.InvitationStatus.EXPIRED.toUpperCase()})).length>0&&(g(m.InvitationStatus.EXPIRED),ne(!0)))),function(){g(m.InvitationStatus.ACCEPTED),ne(!0)}}),[]);var ae=[{key:1,text:"Accepted",value:"Accepted"},{key:2,text:"Pending",value:"Pending"},{key:3,text:"Expired",value:"Expired"}],se=function(){Q(!G),D("")},ie=function(e){if(D(e),E===m.InvitationStatus.ACCEPTED){if("userName sw "===e)return void P(k,w,null,null,f.pH);P(k,w,e,null,f.pH)}},oe=function(){J(!1),y(d.UsersConstants.QUEST_DESCRIPTION_SHOWN_STATUS_KEY)};return a.createElement(a.Fragment,null,Z&&a.createElement("div",{className:"mt-3 mb-6"},Z&&a.createElement(r.v0,{onDismiss:oe,content:a.createElement(a.Fragment,null,a.createElement(r.xv,{className:"message-info-text"},a.createElement(a.Fragment,null,b("extensions:manage.users.descriptions.guestUser"),a.createElement(r.eb,{link:U("manage.users.collaboratorAccounts.learnMore")},b("extensions:common.learnMore")))))})),a.createElement(r.PS,{advancedSearch:a.createElement(c.nC,{onFilter:ie,filterAttributeOptions:E===m.InvitationStatus.ACCEPTED?[{key:0,text:b("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:b("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}]:[{key:0,text:b("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"email"}],filterAttributePlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:b("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:E===m.InvitationStatus.ACCEPTED?"userName":"email",defaultSearchOperator:"co",triggerClearQuery:G}),currentListSize:E===m.InvitationStatus.ACCEPTED?null==h?void 0:h.totalResults:null==j?void 0:j.length,listItemLimit:k,onItemsPerPageDropdownChange:function(e,t){x(t.value)},"data-testid":"user-mgt-user-list-layout",onPageChange:function(e,t){_((t.activePage-1)*k)},showPagination:!0,showTopActionPanel:!0,totalPages:E===m.InvitationStatus.ACCEPTED?Math.ceil((null==h?void 0:h.totalResults)/k):Math.ceil((null==F?void 0:F.length)/k),totalListSize:E===m.InvitationStatus.ACCEPTED?null==h?void 0:h.totalResults:null==F?void 0:F.length,onSearchQueryClear:se,paginationOptions:{disableNextButton:E===m.InvitationStatus.ACCEPTED?!A:!K,disablePreviousButton:w<1},leftActionPanel:a.createElement(o.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:ae&&ae,onChange:function(e,t){g(t.value),ne(!0)},text:"Filter by: ".concat(E)})},E===m.InvitationStatus.ACCEPTED&&a.createElement(l.OnboardedGuestUsersList,{advancedSearch:a.createElement(c.nC,{onFilter:ie,filterAttributeOptions:[{key:0,text:b("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:b("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:b("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:b("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:G}),onboardedGuestUsersList:h,userMetaListContent:null,isLoading:S,realmConfigs:null,onEmptyListPlaceholderActionClick:C,onSearchQueryClear:se,searchQuery:T,"data-testid":"user-mgt-user-list",readOnlyUserStores:null,featureConfig:re,onUserDelete:function(){return P(k,w,null,null,f.pH)}}),E===m.InvitationStatus.PENDING&&a.createElement(u.GuestUsersList,{invitationStatusOption:E,onEmptyListPlaceholderActionClick:C,onboardedGuestUserList:h,onSearchQueryClear:se,guestUsersList:j,getGuestUsersList:function(){return n()},isGuestUsersRequestLoading:v,searchQuery:T}),E===m.InvitationStatus.EXPIRED&&a.createElement(u.GuestUsersList,{invitationStatusOption:E,onEmptyListPlaceholderActionClick:C,onboardedGuestUserList:h,onSearchQueryClear:se,guestUsersList:null==j?void 0:j.filter((function(e){return e.status===m.InvitationStatus.EXPIRED.toUpperCase()})),getGuestUsersList:function(){return n()},isGuestUsersRequestLoading:v,searchQuery:T})))};S.defaultProps={"data-testid":"asgardeo-guest-users"};const h=S}}]);