"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[83646],{83646:(e,t,n)=>{n.r(t),n.d(t,{default:()=>en});var i=n(83374),a=n(14603),o=n(90268),l=n(81816),r=n(46440),c=n(17),s=n(67127),u=n(52983),d=n(9202),p=n(54221),m=n(73949),f=n(69078),v=n(30640),g=n(24576),b=n(34942),E=n(90009),y=n(76004),h=n.n(y),C=n(73030),S=n(16029),I=n(94635),A=n(32566),O=n(5043),R=n(80254),w=n(39990),U=n(10594),P=n(14969),j=n(74691),T=n(21228),L=n(88171),_=n(48684),N=n(51019),M=n(86957);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D.apply(this,arguments)}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=[M.Q.GROUPS_CLAIM_NAME,M.Q.ROLES_CLAIM_NAME,M.Q.APPLICATION_ROLES_CLAIM_NAME,M.Q.GROUPS_CLAIM_URI,M.Q.ROLES_CLAIM_URI,M.Q.APPLICATION_ROLES_CLAIM_URI],F=function(e){var t=e.claimURI,n=e.displayName,i=e.localClaimDisplayName,a=e.localDialect,o=e.updateMapping,r=e.addToMapping,c=e.selectMandatory,p=e.selectRequested,m=e.isDefaultMappingChanged,f=e.mapping,v=e.initialMandatory,g=e.initialRequested,b=e.claimMappingOn,E=e.claimMappingError,y=e.readOnly,h=e.deleteAttribute,C=e.subject,S=e.label,I=e.isOIDCMapping,A=e.duplicatedMappingValues,O=e["data-testid"],R=(0,d.$)().t,w=Z((0,u.useState)(!1),2),L=w[0],_=w[1],N=Z((0,u.useState)(!1),2),M=N[0],k=N[1],F=Z((0,u.useState)(!1),2),H=F[0],q=F[1],V=Z((0,u.useState)(!0),2),z=V[0],G=V[1],W=Z((0,u.useState)(t),2),$=W[0],Q=W[1],B=Z((0,u.useState)($),1)[0],K="http://wso2.org/claims";(0,u.useEffect)((function(){q(v)}),[v]),(0,u.useEffect)((function(){G(g)}),[g]),(0,u.useEffect)((function(){(0,s.Z)(null==f?void 0:f.applicationClaim)&&(0,s.Z)(f)&&k(E)}),[E]),(0,u.useEffect)((function(){_(b),Q(t),f&&(r(t,b),null!=f&&f.applicationClaim?(Q(null==f?void 0:f.applicationClaim),o(t,null==f?void 0:f.applicationClaim),m(!0)):o(t,B))}),[b]);var Y=function(){return!(!t||!x.includes(t))||(C||y||I)};return u.createElement(U.Z.Row,{"data-testid":O},!a&&u.createElement(U.Z.Cell,null),u.createElement(U.Z.Cell,null,u.createElement("div",null,a?n:i),I?u.createElement(l.kW,{warning:!0,popup:!0},R("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMappingHint")):"",u.createElement(l.GI,{content:I&&t.startsWith(K)?R("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t,inverted:!0,trigger:a?u.createElement(l.EK,{compact:!0,withBackground:!1},I&&t.startsWith(K)?R("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t):u.createElement(l.EK,null,I&&t.startsWith(K)?R("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t),position:"bottom left"}),u.createElement(l.kW,{warning:!0,hidden:!S},S)),a&&L&&u.createElement(u.Fragment,null,u.createElement(U.Z.Cell,{error:M},u.createElement(P.Z,{placeholder:R("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.fields.claim.placeholder",{name:n}),value:L?$:B,onChange:!y&&function(e){var n,i=null===(n=e.target)||void 0===n?void 0:n.value.replace(/[^\w+$:/.]/g,"");Q(i),o(t,i,!0),k((0,s.Z)(i)),E&&!(0,s.Z)(i)&&k(!1),m(!0)},disabled:!L,readOnly:y,required:!0,error:M||A.includes($)||A.includes(B)}))),!a&&u.createElement(U.Z.Cell,D({},a&&!L&&{textAlign:"center"},a&&L&&{textAlign:"center"},!a&&{textAlign:"center"}),u.createElement(T.Z,{checked:g||z||C,onClick:!y&&function(){a||(z?(p(t,!1),G(!1),c(t,!1),q(!1)):(G(!0),p(t,!0)))},disabled:!!L&&!H,readOnly:C||y||I})),u.createElement(U.Z.Cell,D({},a&&!L&&{textAlign:"center"},a&&L&&{textAlign:"center"},!a&&{textAlign:"center"}),u.createElement(T.Z,{checked:v||H||C,onClick:Y()?function(){return null}:function(){a?H?(c(t,!1),q(!1)):(q(!0),c(t,!0)):H?(c(t,!1),q(!1)):(q(!0),c(t,!0),G(!0),p(t,!0))},disabled:!!L&&!z,readOnly:Y()})),y&&!I||!h?null:u.createElement(U.Z.Cell,{textAlign:"right"},u.createElement(l.GI,{trigger:u.createElement(j.Z,{link:!0,className:"list-icon pr-4",size:"large",color:"grey",name:"trash alternate",onClick:h}),position:"top right",content:R("common:remove"),inverted:!0})))},H=n(21921);function q(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var W=function(e){var t=e.selectedClaims,n=e.showAddModal,i=e.setShowAddModal,a=e.availableClaims,o=e.setAvailableClaims,r=e.setInitialSelectedClaims,c=e.updateMappings,s=e["data-testid"],p=(0,d.$)().t,m=V((0,u.useState)([]),2),f=m[0],v=m[1],g=V((0,u.useState)([]),2),b=g[0],E=g[1],y=V((0,u.useState)([]),2),h=y[0],C=y[1],S=V((0,u.useState)(!1),2),I=S[0],A=S[1];(0,u.useEffect)((function(){E(I?h:[])}),[I]),(0,u.useEffect)((function(){if(n){if(t.length>0){var e=(0,O.Z)((0,R.Z)(t,a),"displayName");v(e),C(e)}else{var i=(0,O.Z)(a,"displayName");v(i),C(i)}E(t)}else v([]),C([]),E([])}),[n]);return u.createElement(H.Z,{open:n,size:"large",className:"user-roles attribute-modal","data-testid":s},u.createElement(H.Z.Header,null,p("console:develop.features.applications.edit.sections.attributes.selection.addWizard.header"),u.createElement(l.X6,{subHeading:!0,ellipsis:!0,as:"h6"},p("console:develop.features.applications.edit.sections.attributes.selection.addWizard.subHeading"))),u.createElement(H.Z.Content,{image:!0},u.createElement(l.IX,{selectionComponent:!0,searchPlaceholder:p("console:develop.features.applications.edit.sections.attributes.selection.addWizard.steps.select.transfer.searchPlaceholders.attribute"),handleHeaderCheckboxChange:function(){A(!I)},isHeaderCheckboxChecked:I,handleUnelectedListSearch:function(e){var n=e.target.value;if(n.length>0){var i=f.filter((function(e){return-1!==e.displayName.toLowerCase().indexOf(n.toLowerCase())})),o=f.filter((function(e){return-1!==e.claimURI.toLowerCase().indexOf(n.toLowerCase())}));C((0,O.Z)((0,R.Z)(i,o),"displayName"))}else t.length>0?C((0,O.Z)((0,R.Z)(t,a),"displayName")):C((0,O.Z)(f,"displayName"))},"data-testid":"".concat(s,"-transfer-component")},u.createElement(l.Jv,{selectionComponent:!0,isListEmpty:!(h.length>0),listType:"unselected","data-testid":"".concat(s,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:p("console:manage.features.transferList.list.emptyPlaceholders.default")},null==h?void 0:h.map((function(e,t){return u.createElement(l.qT,{handleItemChange:function(){return function(e){var t=q(b);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),E(t)):(e.requested=!0,t.push(e),E(t))}(e)},key:e.claimURI,listItem:e.displayName,listItemId:e.id,listItemIndex:e.claimURI,isItemChecked:b.includes(e),showSecondaryActions:!1,showListSubItem:!0,listSubItem:u.createElement(l.EK,{compact:!0,withBackground:!1},e.claimURI),"data-testid":"".concat(s,"-unselected-transfer-list-item-").concat(t)})}))))),u.createElement(H.Z.Actions,null,u.createElement(l.Qj,{onClick:function(){i(!1)},"data-testid":"".concat(s,"-cancel-button")},p("common:cancel")),u.createElement(l.KM,{onClick:function(){var e=q(b),n=t.filter((function(t){return!(null!=e&&e.includes(t))})),a=e.filter((function(e){return!(null!=t&&t.includes(e))}));c(a,n),r(e),o(q(f)),i(!1)},"data-testid":"".concat(s,"-save-button")},p("common:save"))))};W.defaultProps={"data-testid":"application-attribute-selection-wizard"};var $=n(91478),Q=n(68836);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ie=function(e){var t=e.claims,n=e.setClaims,i=e.externalClaims,a=e.selectedClaims,o=e.setExternalClaims,r=e.selectedExternalClaims,c=e.setSelectedClaims,s=e.setSelectedExternalClaims,m=e.selectedDialect,f=e.selectedSubjectValue,g=e.setClaimMapping,b=e.createMapping,E=e.removeMapping,y=e.getCurrentMapping,h=e.updateClaimMapping,C=e.addToClaimMapping,S=e.claimConfigurations,A=e.claimMappingOn,M=e.defaultSubjectAttribute,D=e.showClaimMappingRevertConfirmation,Z=e.setClaimMappingOn,k=e.claimMappingError,x=e.readOnly,H=e.updateMappings,q=e.isUserAttributesLoading,V=e.setUserAttributesLoading,z=e.onlyOIDCConfigured,G=e.duplicatedMappingValues,B=e["data-testid"],K=(0,d.$)().t,X=(0,l.fQ)().getLink,te=ee((0,u.useState)([]),2),ne=te[0],ie=te[1],ae=ee((0,u.useState)([]),2),oe=ae[0],le=ae[1],re=ee((0,u.useState)(!1),2),ce=re[0],se=re[1],ue=ee((0,u.useState)([]),2),de=ue[0],pe=ue[1],me=ee((0,u.useState)([]),2),fe=me[0],ve=me[1],ge=ee((0,u.useState)(!1),2),be=ge[0],Ee=ge[1],ye=ee((0,u.useState)(!1),2),he=ye[0],Ce=ye[1],Se=ee((0,u.useState)(!1),2),Ie=Se[0],Ae=Se[1],Oe=ee((0,u.useState)(),2),Re=Oe[0],we=Oe[1],Ue=(0,u.useRef)(!1),Pe=v.lD.getInstance(),je=(0,p.v9)((function(e){return e.config})),Te=ee((0,u.useState)(i),1)[0];(0,u.useEffect)((function(){var e,t=J(fe);null==S||null===(e=S.claimMappings)||void 0===e||e.map((function(e){if(!fe.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=oe.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),s(t),ve(t)}),[S]),(0,u.useEffect)((function(){be&&S&&(m.localDialect&&(ne.length>0||a.length>0)&&V(!1),!m.localDialect&&(oe.length>0||r.length>0)&&V(!1))}),[ne,oe,S,be]);var Le=function(e,t){if(m.localDialect){var n=J(a);n.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),c(n)}else{var i=J(r);i.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),s(i)}},_e=function(e,t){if(m.localDialect){var n=J(a);n.forEach((function(n){n.claimURI===e&&(n.requested=t)})),c(n)}},Ne=function(){var e,t=[];"CUSTOM"===(null==S?void 0:S.dialect)?null===(e=S.claimMappings)||void 0===e||e.map((function(e){t.push(e.localClaim.uri)})):"LOCAL"===(null==S?void 0:S.dialect)&&S.requestedClaims.map((function(e){t.push(e.claim.uri)}));return t},Me=function(e){var t;if("CUSTOM"===S.dialect){var n,i=null===(n=S.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=S.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=S.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},De=function(e){if("CUSTOM"===S.dialect){var t,n=null===(t=S.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.applicationClaim;return!!(n?S.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===n})):S.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))}return!0},Ze=function(){var e,t,n;return(null==S||null===(e=S.subject)||void 0===e||null===(t=e.claim)||void 0===t?void 0:t.uri)===M&&(null===(n=S.requestedClaims)||void 0===n?void 0:n.findIndex((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===M})))<0},ke=function(){Pe.publish("application-user-attribute-click-add"),Ce(!0)};(0,u.useEffect)((function(){t&&ie(J($.applicationConfig.attributeSettings.attributeSelection.getClaims(t))),i&&le(J($.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i)))}),[t,i]),(0,u.useEffect)((function(){a&&pe(J(a)),r&&ve(J(r))}),[a,r]),(0,u.useEffect)((function(){Ue.current||(Ee(!1),function(){if(V(!0),m.localDialect){var e=Ne(),a=[],l=[];if($.applicationConfig.attributeSettings.attributeSelection.getClaims(t).map((function(t){if(!e.includes(t.claimURI)||t.claimURI===M&&Ze())l.push(t);else{var n=Y(Y({},t),{},{mandatory:Me(t.claimURI),requested:De(t.claimURI)});a.push(n)}})),c(a),n(l),ie(l),"CUSTOM"===(null==S?void 0:S.dialect)){var r=[];S.claimMappings.map((function(e){if(e&&e.localClaim&&(e.localClaim.uri!==M||!Ze())){var t={addMapping:!0,applicationClaim:e.applicationClaim,localClaim:{displayName:e.localClaim.displayName,id:e.localClaim.id,uri:e.localClaim.uri}};r.push(t)}})),g(r)}else{var u=[];a.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};u.push(t)})),g(u)}Ee(!0)}else{var d,p=Ne(),f=[],v=[];$.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i).map((function(e){if(p.includes(e.mappedLocalClaimURI)){var t=Y(Y({},e),{},{mandatory:Me(e.mappedLocalClaimURI),requested:!0});f.push(t)}else v.push(e)}));var b=J(fe);null==S||null===(d=S.claimMappings)||void 0===d||d.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:e.localClaim.uri,requested:t.requested};f.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))||f.push(n)}}))})),ve(b),s(f),o(v),le(v),Ee(!0)}}(),Ue.current=!0)}),[S]);var xe,Fe,He=function(e){if(m.localDialect){var l=a.find((function(t){return t.claimURI===e}));c(a.filter((function(t){return t.claimURI!==e}))),t.find((function(t){return t.claimURI===e}))||n([l].concat(J(t))),A&&E(e)}else{var u=r.find((function(t){return t.mappedLocalClaimURI===e}));s(r.filter((function(t){return t.mappedLocalClaimURI!==e}))),ve(fe.filter((function(t){return t.mappedLocalClaimURI!==e})));var d=i.find((function(t){return t.mappedLocalClaimURI===e}));d||o([u].concat(J(i)))}},qe=function(e){we(e),f===Ve(e)&&M!==e?Ae(!0):He(e)},Ve=function(e){if(A){var t=y(e);return void 0!==t?t.applicationClaim:e}return e},ze=function(e){var t=!1;return null==Te||Te.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==M||(t=!0)})),t};return!q&&S&&be?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{"data-testid":B},u.createElement(I.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},u.createElement(l.X6,{as:"h4"},K("console:develop.features.applications.edit.sections.attributes.selection.heading")),u.createElement(l.X6,{as:"h6",color:"grey"},K("console:develop.features.applications.edit.sections.attributes.selection.description"),(Fe=void 0,Fe=m.localDialect?X("develop.applications.editApplication.samlApplication.attributes.learnMore"):X("develop.applications.editApplication.oidcApplication.attributes.learnMore"),u.createElement(l.eb,{link:Fe},K("common:learnMore")))),a.length>0||r.length>0?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},u.createElement(U.Z,{"data-testid":"".concat(B,"-action-bar"),basic:"very",compact:!0},u.createElement(U.Z.Body,null,u.createElement(U.Z.Row,null,u.createElement(U.Z.Cell,{collapsing:!0,width:"6"},u.createElement(P.Z,{icon:u.createElement(j.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;t.length>0?function(e){if(m.localDialect){var t=a.filter((function(t){return-1!==t.displayName.toLowerCase().indexOf(e.toLowerCase())})),n=a.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));pe((0,O.Z)((0,R.Z)(t,n),"displayName"))}else{var i=r.filter((function(t){return-1!==t.localClaimDisplayName.toLowerCase().indexOf(e.toLowerCase())})),o=r.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));ve((0,O.Z)((0,R.Z)(i,o),"localClaimDisplayName"))}}(t):m.localDialect?pe(a):ve(r)},placeholder:K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(B,"-search")})),m.localDialect&&u.createElement(U.Z.Cell,{textAlign:"right"},u.createElement(T.Z,{toggle:!0,checked:A,onChange:function(){A?ce?D(!0):Z(!1):Z(!0)},label:K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.actions.enable"),readOnly:x,"data-testid":"".concat(B,"-cliam-mapping-toggle")})),!x&&u.createElement(U.Z.Cell,{textAlign:"right"},u.createElement(L.Z,{size:"medium",icon:"pencil",floated:"right",onClick:ke,"data-testid":"".concat(B,"-update-button")})))))),G.length>0&&u.createElement(l.v0,{type:"error",content:K("console:develop.features.applications.notifications.updateClaimConfig.error.description")}),u.createElement(_.Z,{className:"user-role-edit-header-segment attributes"},u.createElement(I.Z.Row,null,m.localDialect?u.createElement(U.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(B,"-list"),fixed:!0},u.createElement(U.Z.Header,null,A?u.createElement(U.Z.Row,null,u.createElement(U.Z.HeaderCell,{width:"8"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(U.Z.HeaderCell,{width:"8"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.appAttribute")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappedAtributeHint"))),u.createElement(U.Z.HeaderCell,{width:"4",textAlign:"center"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("console:develop.features.applications.edit.sections.attributes.selection.mandatoryAttributeHint",{productName:je.ui.productName}))),u.createElement(U.Z.HeaderCell,{width:"2"})):u.createElement(U.Z.Row,null,u.createElement(U.Z.HeaderCell,{width:"10"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(U.Z.HeaderCell,{width:"8",textAlign:"center"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("console:develop.features.applications.edit.sections.attributes.selection.mandatoryAttributeHint",{productName:je.ui.productName}))),u.createElement(U.Z.HeaderCell,{width:"2"}))),u.createElement(U.Z.Body,null,null==de?void 0:de.map((function(e){return u.createElement(F,{key:e.id,claimURI:e.claimURI,displayName:e.displayName,mappedURI:e.claimURI,localDialect:m.localDialect,updateMapping:h,addToMapping:C,mapping:y(e.claimURI),isDefaultMappingChanged:se,initialMandatory:f===Ve(e.claimURI)||e.mandatory,initialRequested:e.requested,selectMandatory:Le,selectRequested:_e,claimMappingOn:A,claimMappingError:k,readOnly:x,subject:f===Ve(e.claimURI),deleteAttribute:function(){qe(e.claimURI)},duplicatedMappingValues:G,"data-testid":e.claimURI})})))):u.createElement(U.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(B,"-list"),fixed:!0},u.createElement(U.Z.Header,null,u.createElement(U.Z.Row,null,u.createElement(U.Z.HeaderCell,{width:"10"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(U.Z.HeaderCell,{textAlign:"center",width:"8"},u.createElement("strong",null,K("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("console:develop.features.applications.edit.sections.attributes.selection.mandatoryAttributeHint",{productName:je.ui.productName}))),u.createElement(U.Z.HeaderCell,{width:"2"}))),u.createElement(U.Z.Body,null,null==fe?void 0:fe.map((function(e){return u.createElement(F,{key:e.id,claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:m.localDialect,initialMandatory:f===e.mappedLocalClaimURI&&!z||e.mandatory,selectMandatory:Le,initialRequested:e.requested,"data-testid":e.claimURI,readOnly:f===e.mappedLocalClaimURI&&!z||!ze(e)||x,localClaimDisplayName:e.localClaimDisplayName,deleteAttribute:function(){return qe(e.mappedLocalClaimURI)},subject:f===e.mappedLocalClaimURI&&!z,isOIDCMapping:!ze(e)})}))))))):u.createElement(_.Z,null,u.createElement(l.$J,{title:$.applicationConfig.attributeSettings.attributeSelection.showAttributePlaceholderTitle&&K("console:develop.features.applications.placeholders.emptyAttributesList.title"),subtitle:[K("console:develop.features.applications.placeholders.emptyAttributesList.subtitles")],action:!x&&u.createElement(l.KM,{basic:!0,onClick:ke},u.createElement(j.Z,{name:"plus"}),K("console:develop.features.applications.placeholders.emptyAttributesList.action")),image:(0,v.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(B,"-empty-placeholder")})),!x&&$.applicationConfig.attributeSettings.attributeSelection.showShareAttributesHint(m)?u.createElement(l.kW,null,u.createElement(w.c,{i18nKey:"console:develop.features.applications.edit.sections.attributes.selection.attributeComponentHint"},"Manage the user attributes you want to share with this application via",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes."),"You can map additional attributes under",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",Q.Q.OIDC))}}," Attribute."))):u.createElement(l.kW,null,u.createElement(w.c,{i18nKey:"console:develop.features.applications.edit.sections.attributes.selection.attributeComponentHintAlt"},"Manage the user attributes you want to share with this application. You can add new attributes and mappings by navigating to",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("LOCAL_CLAIMS"))}}," Attribute."))))),m.localDialect?u.createElement(W,{selectedClaims:a,setSelectedClaims:pe,setInitialSelectedClaims:c,showAddModal:he,setShowAddModal:Ce,availableClaims:$.applicationConfig.attributeSettings.attributeSelection.getClaims(t),setAvailableClaims:n,createMapping:b,removeMapping:E,updateMappings:H,"data-testid":"".concat(B,"-wizard")}):u.createElement(N.K,{selectedExternalClaims:r,setSelectedExternalClaims:ve,setInitialSelectedExternalClaims:s,showAddModal:he,setShowAddModal:Ce,availableExternalClaims:$.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i),setAvailableExternalClaims:o,"data-testid":"".concat(B,"-wizard-other-dialects")}),(xe=t.find((function(e){return e.claimURI===M})),u.createElement(l.cV,{onClose:function(){return Ae(!1)},type:"negative",open:Ie,primaryAction:K("common:confirm"),secondaryAction:K("common:cancel"),onSecondaryActionClick:function(){Ae(!1)},onPrimaryActionClick:function(){He(Re),Ae(!1)},"data-testid":"".concat(B,"-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(l.cV.Header,{"data-testid":"".concat(B,"-delete-confirmation-modal-header")},K("console:develop.features.applications.confirmations.removeApplicationUserAttribute.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(B,"-delete-confirmation-modal-message")},K("console:develop.features.applications.confirmations.removeApplicationUserAttribute.subHeader")),u.createElement(l.cV.Content,{"data-testid":"".concat(B,"-delete-confirmation-modal-content")},u.createElement(w.c,{i18nKey:"console:develop.features.applications.confirmations.removeApplicationUserAttribute.content",i18nOptions:{default:null==xe?void 0:xe.displayName}},"If you remove this, the subject attribute will be set to the ",u.createElement("strong",null,null==xe?void 0:xe.displayName)))))):null};ie.defaultProps={"data-testid":"application-attribute-selection"};var ae=n(97860);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==oe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||de(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var me=function(e){var t=e.claims,n=e.externalClaims,i=e.externalClaimsGroupedByScopes,a=e.setExternalClaimsGroupedByScopes,o=e.setExternalClaims,r=e.unfilteredExternalClaimsGroupedByScopes,c=e.setUnfilteredExternalClaimsGroupedByScopes,s=e.selectedExternalClaims,m=e.selectedDialect,f=e.setSelectedExternalClaims,g=e.selectedSubjectValue,b=e.claimConfigurations,E=e.defaultSubjectAttribute,y=e.readOnly,h=e.isUserAttributesLoading,C=e.setUserAttributesLoading,A=e.onlyOIDCConfigured,O=e["data-testid"],R=e["data-componentid"],T=(0,d.$)().t,L=(0,l.fQ)().getLink,_="openid",N=ue((0,u.useState)([]),2),M=N[0],D=N[1],Z=ue((0,u.useState)([]),2),k=Z[0],x=Z[1],H=ue((0,u.useState)([]),2),q=H[0],V=H[1],z=ue((0,u.useState)(""),2),G=z[0],W=z[1],B=ue((0,u.useState)(!1),2),K=B[0],Y=B[1],X=(0,u.useRef)(!1),J=(0,p.v9)((function(e){return e.config})),ee=ue((0,u.useState)(n),1)[0],te=ue((0,u.useState)([_]),2),ne=te[0],ie=te[1];(0,u.useEffect)((function(){var e,t=se(k);null==b||null===(e=b.claimMappings)||void 0===e||e.map((function(e){if(!k.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=M.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),f(t),x(t)}),[b]),(0,u.useEffect)((function(){if(0!=r.length){var e=[_];r.map((function(t){t.selected&&""!==t.name&&e.push(t.name)})),ie(e)}}),[r]),(0,u.useEffect)((function(){K&&b&&(M.length>0||s.length>0)&&C(!1)}),[M,b,K]),(0,u.useEffect)((function(){n&&D(se($.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(n)))}),[n]),(0,u.useEffect)((function(){s&&x(se(s))}),[s]),(0,u.useEffect)((function(){X.current||(Y(!1),fe(),X.current=!0)}),[b]);var oe,le=function(e,t){var n=se(r);n.forEach((function(n){n.claims.forEach((function(n){n.claimURI===e&&(n.mandatory=t)}))})),a(n),c(n),me(G)},ce=function(e,t){var n=se(r);n.forEach((function(n){var i=!1;n.claims.forEach((function(n){n.claimURI===e&&(n.requested=t),n.requested&&(i=!0)})),n.selected=i})),a(n),c(n),me(G)},de=function(e,t){var n;null===(n=se(r).find((function(e){if(e.name===t.value)return e.selected=t.checked,e})))||void 0===n||n.claims.map((function(e){ce(e.claimURI,t.checked),t.checked||le(e.claimURI,t.checked)}))},pe=function(e){var t;if("CUSTOM"===b.dialect){var n,i=null===(n=b.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=b.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=b.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},me=function(e){if(""!==e){var t=r.filter((function(t){var n,i;return-1!==(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.displayName)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))})),n=se(r),i=[],o=[];n.forEach((function(n){var a=n.claims.filter((function(t){var n,i,a,o;return-1!==(null===(n=t.claimURI)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.claimDialectURI)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(a=t.localClaimDisplayName)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(o=t.mappedLocalClaimURI)||void 0===o?void 0:o.toLowerCase().indexOf(e.toLowerCase()))}));if(void 0!==a&&0!==a.length){i.includes(n.name)||i.push(n.name);var l=re(re({},n),{},{claims:a});o.push(l)}t.map((function(e){e.name===n.name&&0===a.length&&o.push(n)}))})),a(o),V(i)}},fe=function(){var e;C(!0);var i,a,l=(a=[],"CUSTOM"===(null==b?void 0:b.dialect)?null===(i=b.claimMappings)||void 0===i||i.map((function(e){a.push(e.localClaim.uri)})):"LOCAL"===(null==b?void 0:b.dialect)&&b.requestedClaims.map((function(e){a.push(e.claim.uri)})),a),r=[],c=[];$.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(n).map((function(e){if(l.includes(e.mappedLocalClaimURI)){var t=re(re({},e),{},{mandatory:pe(e.mappedLocalClaimURI),requested:!0});r.push(t)}else c.push(e)}));var s=se(k);null==b||null===(e=b.claimMappings)||void 0===e||e.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:t.claimURI,requested:t.requested};r.find((function(t){var n;return(null==t?void 0:t.mappedLocalClaimURI)===(null==e||null===(n=e.localClaim)||void 0===n?void 0:n.uri)}))||r.push(n)}}))})),x(s),f(r),D(c),o(c.concat(r)),Y(!0)},ve=function(e){var t=!1;return null==ee||ee.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==E||(t=!0)})),t},ge=function(e){var t;return u.createElement(ae.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(O,"-item-heading"),"data-componentId":"".concat(R,"-item-heading")},u.createElement(l.JT,{image:u.createElement(l.Xo,{name:e.displayName,size:"mini","data-testid":"".concat(O,"-item-image-inner"),"data-componentId":"".concat(R,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(O,"-item-image"),"data-componentId":"".concat(R,"-item-image")}),""===e.name?u.createElement(ae.Z.Content,{className:"align-self-center"},u.createElement(l.kW,{warning:!0,popup:!0,compact:!0},T("console:develop.features.applications.edit.sections.attributes.selection.scopelessAttributes.hint")),e.displayName,u.createElement(ae.Z.Subheader,null," "+(null!==(t=e.description)&&void 0!==t?t:""))):u.createElement(ae.Z.Content,null,e.displayName,u.createElement(ae.Z.Subheader,null,u.createElement(l.EK,{withBackground:!0},e.name))))},be=function(e){return u.createElement(U.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(O,"-list"),"data-componentId":"".concat(R,"-list"),fixed:!0},u.createElement(U.Z.Header,{className:"table-header-oidc-user-attribute"},u.createElement(U.Z.Row,null,u.createElement(U.Z.HeaderCell,{width:"1"}),u.createElement(U.Z.HeaderCell,{width:"10"},T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.attribute")),u.createElement(U.Z.HeaderCell,{textAlign:"center",width:"4"},T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.requested")),u.createElement(U.Z.HeaderCell,{width:"4"},T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.columns.mandatory"),u.createElement(l.kW,{icon:"info circle",popup:!0},T("console:develop.features.applications.edit.sections.attributes.selection.mandatoryAttributeHint",{productName:J.ui.productName}))))),u.createElement(U.Z.Body,null,u.createElement(u.Fragment,null,e.map((function(e){return u.createElement(F,{key:e.id,"data-testid":"".concat(O,"-").concat(e.claimURI),claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:m.localDialect,initialMandatory:g===e.mappedLocalClaimURI&&!A||e.mandatory,selectMandatory:le,selectRequested:ce,initialRequested:e.requested,readOnly:g===e.mappedLocalClaimURI&&!A||!ve(e)||y,localClaimDisplayName:e.localClaimDisplayName,subject:g===e.mappedLocalClaimURI&&!A,isOIDCMapping:!ve(e)})})))))},Ee=function(e){var t=se(q);null!=q&&q.includes(e.name)?t=t.filter((function(t){return t!==e.name})):t.push(e.name),V(t)},ye=function(e){return[{checked:e.selected,defaultChecked:e.selected,disabled:!1,onChange:de,popoverText:e.selected?T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.actions.removeScopeRequested"):T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.listItem.actions.makeScopeRequested"),type:"checkbox popup",value:e.name}]};return!h&&b&&K?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{"data-testid":O,"data-componentid":R},u.createElement(I.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},u.createElement(l.X6,{as:"h4"},T("console:develop.features.applications.edit.sections.attributes.selection.heading")),u.createElement(l.X6,{as:"h6",color:"grey"},T("console:develop.features.applications.edit.sections.attributes.selection.description"),(oe=L("develop.applications.editApplication.oidcApplication.attributes.learnMore"),u.createElement(l.eb,{link:oe},T("common:learnMore")))),u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},u.createElement(U.Z,{"data-testid":"".concat(O,"-action-bar"),"data-componentid":"".concat(R,"-action-bar"),basic:"very",compact:!0},u.createElement(U.Z.Body,null,u.createElement(U.Z.Row,null,u.createElement(U.Z.Cell,{collapsing:!0,width:"16"},u.createElement(P.Z,{icon:u.createElement(j.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;W(t),t.length>0?me(t):(V([]),a(r))},placeholder:T("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(O,"-search"),"data-componentid":"".concat(R,"-search")})),u.createElement(U.Z.Cell,{textAlign:"right"}))))),u.createElement(I.Z.Row,{className:"mb-5"},0!==i.length?u.createElement(l.el,{fluid:!0,"data-testid":"".concat(O,"-oidc-scopes"),"data-componentid":"".concat(R,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""!==e.name)return u.createElement(u.Fragment,{key:e.name},u.createElement(l.el.Title,{id:e.name,"data-testid":"".concat(O,"-").concat(e.name,"-title"),"data-componentid":"".concat(R,"-").concat(e.name,"\n                                                                                    -title"),active:(null==q?void 0:q.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return Ee(e)},content:ge(e),hideChevron:!1,actions:ye(e),disabled:y}),u.createElement(l.el.Content,{active:(null==q?void 0:q.includes(e.name))||!1,"data-testid":"".concat(O,"-").concat(e.name,"-content"),"data-componentid":"".concat(R,"-").concat(e.name,"\n                                                                                    -content"),children:be(e.claims),disabled:y}))}))):u.createElement(l.$J,{image:(0,v.jF)().emptySearch,imageSize:"tiny",title:T("console:develop.features.applications.edit.sections.attributes.emptySearchResults.title"),subtitle:[T("console:develop.features.applications.edit.sections.attributes.emptySearchResults.subtitles.0",{searchQuery:G}),T("console:develop.features.applications.edit.sections.attributes.emptySearchResults.subtitles.1")],"data-testid":"".concat(O,"-empty-search-placeholder")})),u.createElement(I.Z.Row,null,u.createElement(l.el,{fluid:!0,"data-testid":"".concat(O,"-oidc-scopes"),"data-componentid":"".concat(R,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""===e.name)return u.createElement(u.Fragment,{key:e.name},u.createElement(l.el.Title,{id:e.name,"data-testid":"".concat(O,"-").concat(e.name,"-title"),"data-componentid":"".concat(R,"-").concat(e.name,"\n                                                                    -title"),active:(null==q?void 0:q.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return Ee(e)},content:ge(e),hideChevron:!1,actions:ye(e),disabled:y}),u.createElement(l.el.Content,{active:(null==q?void 0:q.includes(e.name))||!1,"data-testid":"".concat(O,"-").concat(e.name,"-content"),"data-componentid":"".concat(R,"-").concat(e.name,"\n                                                                    -content"),children:be(e.claims),disabled:y}))}))))),u.createElement(l.kW,null,u.createElement(w.c,{i18nKey:"console:develop.features.applications.edit.sections.attributes.selection.attributeComponentHint"},"Use",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes"),"to manage user attribute to a scope. You can add new attributes by navigating to",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",Q.Q.OIDC))}},"Attributes."))))),u.createElement(I.Z.Row,{className:"mt-5"},u.createElement(I.Z.Column,null,u.createElement(I.Z.Row,null,u.createElement(S.Z,null,u.createElement(S.Z.Field,null,u.createElement("div",{className:"display-flex"},u.createElement(l.OR,{className:"copy-input spaced",value:ne.join(" "),"data-componentid":"".concat(R,"-selected-scope-area")}))))))),u.createElement(l.kW,null,u.createElement(w.c,{i18nKey:"console:develop.features.applications.edit.sections.attributes.selection.selectedScopesComponentHint"},"Request these scopes from your application to retrieve the user attributes you selected."),L("develop.applications.editApplication.attributeManagement.manageOIDCScopes")&&u.createElement(l.eb,{link:L("develop.applications.editApplication.attributeManagement.manageOIDCScopes")},T("console:develop.features.applications.edit.sections.attributes.selection.howToUseScopesHint")))):null};me.defaultProps={"data-componentid":"application-attribute-selection-oidc","data-testid":"application-attribute-selection-oidc"};var fe=n(7955),ve=n(433),ge=n(75917),be=n(83831),Ee=n(59206),ye=n(16782),he=n(87089);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ce(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Ce(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var we=function(e){var t,n,i,r,c,s,m=e.applicationTemplateId,f=e.claimConfigurations,v=e.dropDownOptions,g=e.setSubmissionValues,b=e.setSelectedValue,y=e.defaultSubjectAttribute,h=e.triggerSubmission,C=e.initialSubject,S=e.initialRole,I=e.claimMappingOn,A=e.readOnly,O=e.technology,R=e.onlyOIDCConfigured,U=e.oidcInitialValues,P=e["data-testid"],j=(0,d.$)().t,L=(0,E.Z)().UIConfig,_=(0,p.I0)(),N=Oe((0,u.useState)(),2),M=N[0],D=N[1],Z=Oe((0,u.useState)(),2),k=Z[0],x=Z[1],F=Oe((0,u.useState)(null!=U&&U.subject?U.subject.subjectType:he.UH.PUBLIC),2),H=F[0],q=F[1],V=Oe((0,u.useState)(!1),2),z=V[0],G=V[1];(0,u.useEffect)((function(){if(I&&v&&v.length>0)if(k){var e=v.findIndex((function(e){return(null==e?void 0:e.key)===k}));if(e>-1){var t;D(null===(t=v[e])||void 0===t?void 0:t.value)}else{var n,i,a=v.findIndex((function(e){return(null==e?void 0:e.key)===y}));D(a>-1?null===(n=v[a])||void 0===n?void 0:n.value:null===(i=v[0])||void 0===i?void 0:i.value)}}else if(M){var o,l=null===(o=v.find((function(e){return(null==e?void 0:e.value)===M})))||void 0===o?void 0:o.key;l&&(x(l),D(M))}else{var r,c;D((null==C||null===(r=C.claim)||void 0===r?void 0:r.uri)||(null===(c=v[0])||void 0===c?void 0:c.value))}else if(M)v&&v.length>0&&v.findIndex((function(e){return(null==e?void 0:e.value)===M}))<0&&D(y);else{var s,u;D((null==C||null===(s=C.claim)||void 0===s?void 0:s.uri)||(null===(u=v[0])||void 0===u?void 0:u.value))}}),[v]),(0,u.useEffect)((function(){H||q(he.UH.PUBLIC)}),[]),(0,u.useEffect)((function(){M&&(b(M),G(M!==y))}),[M]),(0,u.useEffect)((function(){if(M&&v){var e,t=null===(e=v.find((function(e){return(null==e?void 0:e.value)===M})))||void 0===e?void 0:e.key;x(t)}}),[M]);var W,Q,B=function(e,t){var n="";return e.map((function(e){e.value===t&&(n=t)})),n},K=function(){var e;return!$.applicationConfig.attributeSettings.advancedAttributeSettings.showSubjectAttribute||R&&!(null!=L&&null!==(e=L.legacyMode)&&void 0!==e&&e.applicationOIDCSubjectIdentifier)||R&&!z};return S&&C?u.createElement(Ee.l0,{id:"application-attributes-advance-settings-form",uncontrolledForm:!0,initialValues:!R&&{oidcInitialValues:U,subjectAttribute:M},validate:function(e){var t={sectorIdentifierURI:void 0};return null!=e&&e.sectorIdentifierURI&&!be.URLUtils.isHttpsUrl(e.sectorIdentifierURI)&&(t.sectorIdentifierURI=j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.validations.invalid")),t},onSubmit:function(e){!function(e){var t,n;if(!e.mandateLinkedLocalAccount||e.validateLinkedLocalAccount){var i={oidc:Ie(Ie({},U),{},{subject:{sectorIdentifierUri:e.sectorIdentifierURI,subjectType:H}}),role:{claim:B(v,e.roleAttribute),includeUserDomain:!!e.role,mappings:[]},subject:{claim:B(v,e.subjectAttribute),includeTenantDomain:!!e.subjectIncludeTenantDomain,includeUserDomain:!!e.subjectIncludeUserDomain,mappedLocalSubjectMandatory:!!e.mandateLinkedLocalAccount,useMappedLocalSubject:!!e.validateLinkedLocalAccount}},l=$.applicationConfig.attributeSettings.advancedAttributeSettings;!l.showIncludeUserstoreDomainSubject&&delete i.subject.includeUserDomain,!l.showIncludeTenantDomain&&delete i.subject.includeTenantDomain,!l.showValidateLinkedLocalAccount&&delete i.subject.useMappedLocalSubject,!l.showMandateLinkedLocalAccount&&delete i.subject.mappedLocalSubjectMandatory,!l.showRoleMapping&&delete i.role.mappings,!l.showIncludeUserstoreDomainRole&&i.role.includeUserDomain,!l.showRoleAttribute&&delete i.role.claim,null!=i&&null!==(t=i.subject)&&void 0!==t&&t.claim&&""!==(null==i||null===(n=i.subject)||void 0===n?void 0:n.claim)||(i.subject.claim=f.subject.claim.uri),g(i)}else _((0,o.V_)({description:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.errorAlert.description"),level:a.QU.WARNING,message:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.errorAlert.message")}))}(e)},triggerSubmit:function(e){return h(e)}},u.createElement(ge.Z,null),u.createElement(l.X6,{hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showSubjectAttribute,as:"h4"},j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.heading")),R&&u.createElement(u.Fragment,null,u.createElement(T.Z,{ariaLabel:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),"data-componentid":"".concat(P,"-reassign-subject-attribute-checkbox"),checked:z,label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),onClick:function(e,t){return G(null==t?void 0:t.checked)},disabled:A}),u.createElement(l.kW,null,u.createElement(w.c,{i18nKey:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.hint")},"This option will allow to use an alternate attribute as the subject identifier instead of the ",u.createElement(l.EK,{withBackground:!0},"userid"),"."))),u.createElement(Ee.gN.Dropdown,{ariaLabel:"Subject attribute",name:"subjectAttribute",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.label"),required:I,value:M,options:v,hidden:K(),readOnly:A,"data-testid":"".concat(P,"-subject-attribute-dropdown"),listen:function(e){D(e?null==e?void 0:e.toString():e)},enableReinitialize:!0,hint:1!==O.length&&m!==ye.jo.CUSTOM_APPLICATION_OIDC&&m!==ye.jo.CUSTOM_APPLICATION_SAML?u.createElement(l.kW,{compact:!0},j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint")):"oauth2"===(null===(W=O[0])||void 0===W?void 0:W.type)||m===ye.jo.CUSTOM_APPLICATION_OIDC?u.createElement(l.kW,{compact:!0},u.createElement(w.c,{i18nKey:"console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintOIDC"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",u.createElement(l.EK,{withBackground:!0},"sub")," claim of the",u.createElement(l.EK,{withBackground:!0},"id_token"),".")):"samlsso"===(null===(Q=O[0])||void 0===Q?void 0:Q.type)||m===ye.jo.CUSTOM_APPLICATION_SAML?u.createElement(l.kW,{compact:!0},u.createElement(w.c,{i18nKey:"console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintSAML"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",u.createElement(l.EK,{withBackground:!0},"subject")," element of the SAML assertion.")):u.createElement(l.kW,{compact:!0},j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint"))}),u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Subject include user domain",name:"subjectIncludeUserDomain",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.label"),required:!1,value:null!=C&&C.includeUserDomain?["includeUserDomain"]:[],readOnly:A,"data-testid":"".concat(P,"-subject-iInclude-user-domain-checkbox"),hidden:K(),hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.hint")}),u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Subject include tenant domain",name:"subjectIncludeTenantDomain",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.label"),required:!1,value:null!=C&&C.includeTenantDomain?["includeTenantDomain"]:[],readOnly:A,"data-testid":"".concat(P,"-subject-include-tenant-domain-checkbox"),hidden:K(),hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.hint")}),u.createElement(ge.Z,{hidden:!0}),R&&u.createElement("div",null,u.createElement(l.xv,null,j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectType.label")),Object.keys(he.UH).map((function(e,t){var n=he.UH[e];return u.createElement(u.Fragment,null,u.createElement(Ee.gN.Radio,{key:t,ariaLabel:"Subject type ".concat(n),name:"subjectType",value:n,label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".label"),hint:n===he.UH.PAIRWISE&&j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".hint"),checked:H===n,listen:function(){q(n)},readOnly:A}))}))),H===he.UH.PAIRWISE&&u.createElement(Ee.gN.Input,{ariaLabel:"Sector Identifier URI",inputType:"url",name:"sectorIdentifierURI",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.label"),required:!1,placeholder:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.placeholder"),hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.hint"),readOnly:A,maxLength:200,minLength:3,width:16,initialValue:null==U||null===(t=U.subject)||void 0===t?void 0:t.sectorIdentifierUri}),u.createElement(ge.Z,null),u.createElement(l.X6,{as:"h4"},j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.heading")),u.createElement(ge.Z,{hidden:!0}),$.applicationConfig.attributeSettings.advancedAttributeSettings.showMandateLinkedLocalAccount?u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Validate linked local account",name:"validateLinkedLocalAccount",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.label"),required:!1,value:null!=C&&C.useMappedLocalSubject?["useMappedLocalSubject"]:[],readOnly:A,"data-testid":"".concat(P,"-validate-linked-local-account-checkbox"),hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showValidateLinkedLocalAccount}):u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Validate linked local account",name:"validateLinkedLocalAccount",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.label"),required:!1,value:null!=C&&C.useMappedLocalSubject?["useMappedLocalSubject"]:[],readOnly:A,"data-testid":"".concat(P,"-validate-linked-local-account-checkbox"),hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showValidateLinkedLocalAccount,hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.hint")}),u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Mandate linked local account",name:"mandateLinkedLocalAccount",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.label"),required:!1,value:null!=C&&C.mappedLocalSubjectMandatory?["mappedLocalSubjectMandatory"]:[],readOnly:A,"data-testid":"".concat(P,"-mandate-linked-local-account-checkbox"),hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showMandateLinkedLocalAccount,hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.hint")}),u.createElement(ge.Z,{hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute||!(null!=L&&null!==(n=L.legacyMode)&&void 0!==n&&n.roleMapping)}),$.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute&&(null==L||null===(i=L.legacyMode)||void 0===i?void 0:i.roleMapping)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},j("console:develop.features.applications.forms.advancedAttributeSettings.sections.role.heading"))),u.createElement(Ee.gN.Dropdown,{ariaLabel:"Role attribute",name:"roleAttribute",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.role.fields.roleAttribute.label"),required:I,value:null==S||null===(r=S.claim)||void 0===r?void 0:r.uri,options:v,readOnly:A,"data-testid":"".concat(P,"-role-attribute-dropdown"),hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute||!(null!=L&&null!==(c=L.legacyMode)&&void 0!==c&&c.roleMapping),hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.role.fields.roleAttribute.hint")}),u.createElement(Ee.gN.CheckboxLegacy,{ariaLabel:"Role",name:"role",label:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.role.fields.role.label"),required:!1,value:null!=S&&S.includeUserDomain?["includeUserDomain"]:[],readOnly:A,"data-testid":"".concat(P,"-role-checkbox"),hidden:!$.applicationConfig.attributeSettings.advancedAttributeSettings.showIncludeUserstoreDomainRole||!(null!=L&&null!==(s=L.legacyMode)&&void 0!==s&&s.roleMapping),hint:j("console:develop.features.applications.forms.advancedAttributeSettings.sections.role.fields.role.hint")})):null};we.defaultProps={"data-testid":"application-advanced-attribute-settings-form"};var Ue=n(13318),Pe=n(49238);function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Le=function(e){var t,n=e.initialMappings,i=e.readOnly,r=e.onChange,c=e["data-testid"],s=(0,d.$)().t,m=(0,E.Z)().UIConfig,f=(0,p.I0)(),v=je((0,u.useState)(),2),g=v[0],b=v[1];return(0,u.useEffect)((function(){(0,Pe.Sd)(null).then((function(e){if(200===e.status){var t=e.data;b(t.Resources)}})).catch((function(){f((0,o.V_)({description:s("console:manage.features.roles.notifications.fetchRoles.genericError.description"),level:a.QU.ERROR,message:s("console:manage.features.roles.notifications.fetchRoles.genericError.message")}))}))}),[n]),u.createElement(u.Fragment,null,(null==m||null===(t=m.legacyMode)||void 0===t?void 0:t.roleMapping)&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:10},u.createElement(l.X6,{as:"h5"},s("console:develop.features.applications.edit.sections.attributes.roleMapping.heading")),u.createElement(Ue.e9,{bottomMargin:!1,data:n?n.map((function(e){return{key:e.localRole.includes("/")?e.localRole.split("/")[1]:e.localRole,value:e.applicationRole}})):[],keyType:"dropdown",keyData:g?g.filter((function(e){return!(e.displayName.includes("Application/")||e.displayName.includes("Internal/"))})).map((function(e){return{id:e.displayName,value:e.displayName}})):[],keyName:s("console:develop.features.applications.edit.sections.attributes.forms.fields.dynamic.localRole.label"),valueName:s("console:develop.features.applications.edit.sections.attributes.forms.fields.dynamic.applicationRole.label"),keyRequiredMessage:s("console:develop.features.applications.edit.sections.attributes.forms.fields.dynamic.localRole.validations.empty"),valueRequiredErrorMessage:s("console:develop.features.applications.edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.empty"),duplicateKeyErrorMsg:s("console:develop.features.applications.edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.duplicate"),readOnly:i,"data-testid":"".concat(c,"-dynamic-field"),listen:function(e){if(r){var t,n=null!==(t=null==e?void 0:e.map((function(e){return{applicationRole:e.value,localRole:e.key.includes("/")?e.key:"Internal/"+e.key}})))&&void 0!==t?t:[];r(n)}}}))))};Le.defaultProps={"data-testid":"application-role-mapping"};var _e=n(2653),Ne=n(33614),Me=n(3216),De=n(61133);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Ze(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||Ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ge="http://wso2.org/claims/userid",We=function(e){var t,n,r,m,f,g,b,E,y,h,C,S=e.appId,A=e.applicationTemplateId,R=e.technology,w=e.featureConfig,U=e.claimConfigurations,P=e.onlyOIDCConfigured,j=e.onUpdate,T=e.readOnly,_=e.inboundProtocolConfig,N=e["data-componentid"],M=(0,d.$)().t,D=(0,p.I0)(),Z=(0,p.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.enableIdentityClaims})),k=qe((0,u.useState)(""),2),x=k[0],F=k[1],H=qe((0,u.useState)([]),2),q=H[0],V=H[1],z=qe((0,u.useState)(),2),G=z[0],W=z[1],Q=qe((0,u.useState)(null),2),B=Q[0],K=Q[1],Y=qe((0,u.useState)(null),2),X=Y[0],J=Y[1],ee=qe((0,u.useState)([]),2),te=ee[0],ne=ee[1],ae=qe((0,u.useState)(!0),2),oe=ae[0],le=ae[1],re=qe((0,u.useState)([]),2),ce=re[0],se=re[1],ue=qe((0,u.useState)([]),2),de=ue[0],pe=ue[1],be=qe((0,u.useState)([]),2),Ee=be[0],ye=be[1],Ce=qe((0,u.useState)(!0),2),Se=Ce[0],Ie=Ce[1],Ae=qe((0,u.useState)([]),2),Oe=Ae[0],Re=Ae[1],Ue=qe((0,u.useState)([]),2),Pe=Ue[0],je=Ue[1],Te=qe((0,u.useState)(!1),2),Ze=Te[0],ke=Te[1],Fe=qe((0,u.useState)([]),2),Ve=Fe[0],ze=Fe[1],We=qe((0,u.useState)(!1),2),$e=We[0],Qe=We[1],Be=qe((0,u.useState)(!1),2),Ke=Be[0],Ye=Be[1],Xe=qe((0,u.useState)(),2),Je=Xe[0],et=Xe[1],tt=qe((0,u.useState)(),2),nt=tt[0],it=tt[1],at=qe((0,u.useState)(null!==(t=null==U||null===(n=U.role)||void 0===n?void 0:n.mappings)&&void 0!==t?t:[]),2),ot=at[0],lt=at[1],rt=qe((0,u.useState)(!0),2),ct=rt[0],st=rt[1],ut=qe((0,u.useState)(void 0),2),dt=ut[0],pt=ut[1],mt=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),ft=v.lD.getInstance(),vt=(0,ve.KD)(),gt=vt.data,bt=vt.isLoading,Et=vt.isValidating,yt=qe((0,u.useState)([]),2),ht=yt[0],Ct=yt[1];(0,u.useEffect)((function(){var e=Ee.filter((function(e){return 0!==ce.filter((function(t){return t.claimURI===e.mappedLocalClaimURI})).length}));e.forEach((function(e){var t=e.mappedLocalClaimURI,n=ce.filter((function(e){return e.claimURI===t}));n&&n[0]&&n[0].displayName&&(e.localClaimDisplayName=n[0].displayName)})),pe(e)}),[ce,Ee]),(0,u.useEffect)((function(){if(!bt&&!Et)return K(gt),Rt(),wt(),void Pt()}),[bt,Et,gt]),(0,u.useEffect)((function(){Ot()}),[de]),(0,u.useEffect)((function(){(0,s.Z)(q)||(le(!0),P?Ut("http://wso2.org/oidc/claim"):(le(!1),Ut(x)))}),[P,q]),(0,u.useEffect)((function(){if(Je){var e=jt();null!==e&&Tt(e)}}),[Je]),(0,u.useEffect)((function(){"CUSTOM"===(null==U?void 0:U.dialect)&&Qe(!0)}),[U]);var St,It=function(e){var t=de.find((function(t){return t.claimURI===e}));if(t){var n,i=null===(n=U.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI})))||void 0===n?void 0:n.mandatory;if(void 0!==i)return i}return!1},At=function(e){var t=de.find((function(t){return t.claimURI===e}));return!!t&&void 0!==U.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI}))},Ot=function(){var e=He(de),t=[],n=[];if(null!=B&&0!==B.length&&0!==ce.length){B.map((function(i){if("openid"!==i.name){var a=[],o=!1;i.claims.map((function(t){e.map((function(e){if(t===e.claimURI){var i=xe(xe({},e),{},{mandatory:It(e.claimURI),requested:At(e.claimURI)});i.requested&&(o=!0),a.push(i),n.push(e)}}))}));var l=xe(xe({},i),{},{claims:a,selected:o});t.push(l)}}));var i=e.filter((function(e){return!n.includes(e)})),a=[],o=!1;i.map((function(e){var t=At(e.claimURI);a.push(xe(xe({},e),{},{mandatory:It(e.claimURI),requested:At(e.claimURI)})),o=t})),t.push({claims:a,description:M("console:develop.features.applications.edit.sections.attributes.selection.scopelessAttributes.description"),displayName:M("console:develop.features.applications.edit.sections.attributes.selection.scopelessAttributes.displayName"),name:M("console:develop.features.applications.edit.sections.attributes.selection.scopelessAttributes.name"),selected:o})}ne((0,O.Z)(t,"name")),J((0,O.Z)(t,"name")),Ie(!1)},Rt=function(){st(!0);var e={"exclude-identity-claims":!Z,filter:null,limit:null,offset:null,sort:null};(0,Ne.WN)(e).then((function(e){se(e)})).catch((function(){D((0,o.V_)({description:M("console:manage.features.claims.local.notifications.fetchLocalClaims.genericError.description"),level:a.QU.ERROR,message:M("console:manage.features.claims.local.notifications.fetchLocalClaims.genericError.message")}))})).finally((function(){st(!1)}))},wt=function(){(0,Ne.jp)(null).then((function(e){V(e)})).catch((function(){D((0,o.V_)({description:M("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.description"),level:a.QU.ERROR,message:M("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.message")}))}))},Ut=function(e){if(null!==e){var t=(l=e,r="",q.map((function(e){e.dialectURI===l&&(r=e.id)})),r),n=!0;e!==x&&(n=!1),W({dialectURI:e,id:t,localDialect:n}),n||null!==(i=t)&&(0,Ne.gR)(i,null).then((function(e){le(!0),Ie(!0),ye(e)})).catch((function(){D((0,o.V_)({description:M("console:manage.features.claims.external.notifications.fetchExternalClaims.genericError.description"),level:a.QU.ERROR,message:M("console:manage.features.claims.external.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){le(!1)}))}var i,l,r},Pt=function(){var e;(0,s.Z)(x)&&F((e="http://wso2.org/claims",(0,Ne.WN)(null).then((function(t){var n=t.slice(0,1)[0].dialectURI;(0,s.Z)(n)||(e=n)})),e))},jt=function(){var e=[],t=!0;return Ye(!1),He(Ve).map((function(n){if(n.addMapping)if((0,s.Z)(null==n?void 0:n.applicationClaim))Ye(!0),t=!1;else{var i,a={applicationClaim:null==n?void 0:n.applicationClaim,localClaim:{uri:null==n||null===(i=n.localClaim)||void 0===i?void 0:i.uri}};e.push(a)}})),t?e:null},Tt=function(e){var t,n=!1,i=[],l=null==Je||null===(t=Je.subject)||void 0===t?void 0:t.claim;if(G.localDialect?Oe.map((function(t){var n,a,o,r,c=e.length>0?(n=t.claimURI,r=n,(a=e).length>0&&(r=null===(o=a.find((function(e){var t;return(null==e||null===(t=e.localClaim)||void 0===t?void 0:t.uri)===n})))||void 0===o?void 0:o.applicationClaim),r):null;if(c){if(t.requested){var s={claim:{uri:c},mandatory:l&&c===l.toString()?$.applicationConfig.attributeSettings.makeSubjectMandatory:t.mandatory};i.push(s)}}else{var u={claim:{uri:t.claimURI},mandatory:l&&t.claimURI===l.toString()?$.applicationConfig.attributeSettings.makeSubjectMandatory:t.mandatory};i.push(u)}})):te.map((function(e){null==e||e.claims.map((function(e){if(e.requested){var t={claim:{uri:e.mappedLocalClaimURI},mandatory:e.mandatory};i.find((function(e){return e.claim.uri===t.claim.uri}))||i.push(t)}}))})),e.findIndex((function(e){return e.localClaim.uri===Ge}))<0&&l&&l.toString()===Ge&&(n=!0),e.length>0&&n){var r={applicationClaim:Ge,localClaim:{uri:Ge}};e.push(r)}var c={claimConfiguration:{claimMappings:e.length>0?e:[],dialect:e.length>0?"CUSTOM":"LOCAL",requestedClaims:i,role:{claim:{uri:null==Je?void 0:Je.role.claim},includeUserDomain:null==Je?void 0:Je.role.includeUserDomain,mappings:ot.length>0?ot:[]},subject:{claim:{uri:null==Je?void 0:Je.subject.claim},includeTenantDomain:null==Je?void 0:Je.subject.includeTenantDomain,includeUserDomain:null==Je?void 0:Je.subject.includeUserDomain,mappedLocalSubjectMandatory:null==Je?void 0:Je.subject.mappedLocalSubjectMandatory,useMappedLocalSubject:null==Je?void 0:Je.subject.useMappedLocalSubject}}},u=null==Je?void 0:Je.oidc;(0,s.Z)(c.claimConfiguration.claimMappings)&&delete c.claimConfiguration.claimMappings,(0,s.Z)(c.claimConfiguration.role.mappings)&&delete c.claimConfiguration.role.mappings,$.applicationConfig.attributeSettings.roleMapping||delete c.claimConfiguration.role,$.applicationConfig.excludeSubjectClaim&&P&&delete c.claimConfiguration.subject;var d=function(){D((0,o.V_)({description:M("console:develop.features.applications.notifications.updateClaimConfig.genericError.description"),level:a.QU.ERROR,message:M("console:develop.features.applications.notifications.updateClaimConfig.genericError.message")}))},p=function(){j(S),D((0,o.V_)({description:M("console:develop.features.applications.notifications.updateClaimConfig.success.description"),level:a.QU.SUCCESS,message:M("console:develop.features.applications.notifications.updateClaimConfig.success.message")}))},m=!(null==R||!R.find((function(e){return e.type===he.AI.OAUTH2})));(0,De.aA)(S,c).then((function(){m?(0,De.lp)(S,u,he.AI.OIDC).then(p).catch(d):p()})).catch(d)},Lt=function(e){e?(Qe(!0),ke(!1)):(Qe(!1),ke(!1))};return oe||!G||ct&&(0,s.Z)(de)||Se?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(l.pJ,{padded:"very"},u.createElement(I.Z,{className:"claim-mapping"},u.createElement("div",{className:"form-container with-max-width"},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},P?u.createElement(me,{claims:ce,externalClaims:de,externalClaimsGroupedByScopes:X,setExternalClaimsGroupedByScopes:J,unfilteredExternalClaimsGroupedByScopes:te,setUnfilteredExternalClaimsGroupedByScopes:ne,setExternalClaims:pe,selectedExternalClaims:Pe,setSelectedExternalClaims:je,selectedDialect:G,selectedSubjectValue:nt,claimMapping:Ve,claimConfigurations:U,defaultSubjectAttribute:Ge,readOnly:T||!(0,i.hasRequiredScopes)(null==w?void 0:w.applications,null==w||null===(r=w.applications)||void 0===r||null===(m=r.scopes)||void 0===m?void 0:m.update,mt),isUserAttributesLoading:dt,setUserAttributesLoading:pt,onlyOIDCConfigured:P,"data-testid":"".concat(N,"-attribute-selection-oidc"),"data-componentid":"".concat(N,"-attribute-selection-oidc")}):u.createElement(ie,{claims:ce,setClaims:se,externalClaims:de,setExternalClaims:pe,selectedClaims:Oe,selectedExternalClaims:Pe,setSelectedClaims:Re,setSelectedExternalClaims:je,selectedDialect:G,selectedSubjectValue:nt,claimMapping:Ve,setClaimMapping:ze,createMapping:function(e){if(G.localDialect){var t=He(Ve);e.map((function(e){var n={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};t.some((function(t){return t.localClaim.uri===e.claimURI}))||t.push(n),ze(t)}))}},removeMapping:function(e){var t,n=He(Ve);n.map((function(n){n.localClaim.uri===e&&(t=n)})),t&&(n.splice(n.indexOf(t),1),ze(n))},updateMappings:function(e,t){if(G.localDialect){var n=He(Ve);e.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};n.some((function(t){return t.localClaim.uri===e.claimURI}))||n.push(t)})),t.map((function(e){var t;n.map((function(n){n.localClaim.uri===e.claimURI&&(t=n)})),t&&n.splice(n.indexOf(t),1)})),ze(n)}},getCurrentMapping:function(e){var t;return He(Ve).map((function(n){n.localClaim.uri===e&&(t=n)})),t},updateClaimMapping:function(e,t,n){var i=He(Ve),a={},o=[];i.forEach((function(i){i.localClaim.uri===e&&(i.applicationClaim=t),n&&(a[i.applicationClaim]?o.push(i.applicationClaim):a[i.applicationClaim]=!0)})),n&&Ct(o),ze(i)},addToClaimMapping:function(e,t){var n=He(Ve);n.forEach((function(n){n.localClaim.uri===e&&(n.addMapping=t)})),ze(n)},claimConfigurations:U,claimMappingOn:$e,defaultSubjectAttribute:Ge,showClaimMappingRevertConfirmation:ke,setClaimMappingOn:Qe,claimMappingError:Ke,readOnly:T||!(0,i.hasRequiredScopes)(null==w?void 0:w.applications,null==w||null===(f=w.applications)||void 0===f||null===(g=f.scopes)||void 0===g?void 0:g.update,mt),isUserAttributesLoading:dt,setUserAttributesLoading:pt,onlyOIDCConfigured:P,duplicatedMappingValues:ht,"data-testid":"".concat(N,"-attribute-selection")})))),!1===dt?u.createElement(I.Z,null,u.createElement(I.Z.Row,{columns:1},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(we,{dropDownOptions:function(){var e=[];if(G.localDialect){if($e){var t=!1,n=[],i=He(Ve);if(Ve.map((function(e){if(e&&e.localClaim){var i={key:null==e?void 0:e.localClaim.uri,text:u.createElement(Me.EP,{key:e.localClaim.id,displayName:e.applicationClaim?e.applicationClaim:e.localClaim.uri,claimURI:e.localClaim.uri,value:e.applicationClaim}),value:e.applicationClaim};e.localClaim.uri===Ge&&(t=!0),n.push(i)}})),0===i.length||!t){var a=ce.filter((function(e){return e.claimURI===Ge}))[0];if(null!=a){var o={key:a.claimURI,text:u.createElement(Me.EP,{key:a.id,displayName:a.displayName,claimURI:a.claimURI,value:a.claimURI}),value:a.claimURI};n.push(o)}}return(0,O.Z)(n,"key")}var l=!1;if(Oe.map((function(t){var n={key:t.claimURI,text:u.createElement(Me.EP,{key:t.id,displayName:t.displayName,claimURI:t.claimURI,value:t.claimURI}),value:t.claimURI};e.push(n),t.claimURI===Ge&&(l=!0)})),!l){var r=ce.filter((function(e){return e.claimURI===Ge}))[0];if(null!=r){var c={key:r.claimURI,text:u.createElement(Me.EP,{key:r.id,displayName:r.displayName,claimURI:r.claimURI,value:r.claimURI}),value:r.claimURI};e.push(c)}}}else{var s=!1;if(Pe.map((function(t){var n={key:t.claimURI,text:u.createElement(Me.EP,{key:t.id,displayName:t.localClaimDisplayName,claimURI:t.claimURI,value:t.mappedLocalClaimURI}),value:t.mappedLocalClaimURI};e.push(n),t.mappedLocalClaimURI===Ge&&(s=!0)})),!s){var d=[].concat(He(de),He(Pe)).filter((function(e){return e.mappedLocalClaimURI===Ge}))[0];if(null!=d){var p={key:d.claimURI,text:u.createElement(Me.EP,{key:d.id,displayName:d.localClaimDisplayName,claimURI:d.claimURI,value:d.mappedLocalClaimURI}),value:d.mappedLocalClaimURI};e.push(p)}}}return(0,O.Z)(e,"value")}(),triggerSubmission:function(e){St=e},claimConfigurations:U,setSubmissionValues:et,setSelectedValue:it,defaultSubjectAttribute:Ge,initialRole:null==U?void 0:U.role,initialSubject:null==U?void 0:U.subject,claimMappingOn:$e,readOnly:T||!(0,i.hasRequiredScopes)(null==w?void 0:w.applications,null==w||null===(b=w.applications)||void 0===b||null===(E=b.scopes)||void 0===E?void 0:E.update,mt),technology:R,applicationTemplateId:A,onlyOIDCConfigured:P,oidcInitialValues:(0,c.Z)(_,he.AI.OIDC)?_[he.AI.OIDC]:void 0,"data-testid":"".concat(N,"-advanced-attribute-settings-form")}))),u.createElement(l.cV,{onClose:function(){return ke(!1)},type:"warning",open:Ze,primaryAction:M("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappingRevert.confirmPrimaryAction"),secondaryAction:M("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappingRevert.confirmSecondaryAction"),onSecondaryActionClick:function(){return Lt(!0)},onPrimaryActionClick:function(){return Lt(!1)}},u.createElement(l.cV.Header,null,M("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationHeading")),u.createElement(l.cV.Message,{warning:!0},M("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationMessage")),u.createElement(l.cV.Content,null,M("console:develop.features.applications.edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationContent"))),!T&&$.applicationConfig.attributeSettings.roleMapping&&u.createElement(Le,{onChange:lt,initialMappings:null==U||null===(y=U.role)||void 0===y?void 0:y.mappings,readOnly:T||!(0,i.hasRequiredScopes)(null==w?void 0:w.applications,null==w||null===(h=w.applications)||void 0===h||null===(C=h.scopes)||void 0===C?void 0:C.update,mt),"data-testid":"".concat(N,"-role-mapping")}),!T&&u.createElement(fe.di,{when:_e.T.APPLICATION_EDIT},u.createElement(ge.Z,{hidden:!0}),u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(L.Z,{primary:!0,size:"small",onClick:function(){ft.publish("application-user-attribute-click-update-button");var e=new Set(Ve.map((function(e){return e.applicationClaim})));$e&&e.size!==Ve.length?D((0,o.V_)({description:M("console:develop.features.applications.notifications.updateClaimConfig.error.description",{description:"Mapped user attributes cannot be duplicated."}),level:a.QU.ERROR,message:M("console:develop.features.applications.notifications.updateClaimConfig.error.message")})):St()},"data-testid":"".concat(N,"-submit-button")},M("common:update")))))):null)};We.defaultProps={"data-componentid":"application-attribute-settings"};var $e=n(96627),Qe=n(58900),Be=n(25258);function Ke(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var et=function(e){var t,n,r=e.appId,c=e.provisioningConfigurations,s=e.onUpdate,m=e.featureConfig,f=e.defaultActiveIndexes,g=e.readOnly,b=e["data-testid"],E=(0,d.$)().t,y=(0,$e.z)().isSuperOrganization,h=(0,p.I0)(),C=Ye((0,u.useState)([]),2),S=C[0],A=C[1],O=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),R=Ye((0,u.useState)(f),2),w=R[0],U=R[1],P=Ye((0,u.useState)(!1),2),j=P[0],T=P[1];return(0,u.useEffect)((function(){if(!g){var e=[];e.push({id:"PRIMARY",name:"PRIMARY"}),y()?(0,Qe.ow)().then((function(t){e.push.apply(e,Ke(t.data)),A(e)})).catch((function(){A(e)})):A(e)}}),[]),u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},E("console:develop.features.applications.edit.sections.provisioning.inbound.heading")),u.createElement(l.X6,{subHeading:!0,as:"h6"},E("console:develop.features.applications.edit.sections.provisioning.inbound.subHeading")),u.createElement(ge.Z,{hidden:!0}),u.createElement(I.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(v.Us,{globalActions:[],authenticators:[{content:u.createElement(Be.yM,{config:c,onSubmit:function(e){T(!0),(0,De.TH)(r,e).then((function(){h((0,o.V_)({description:E("console:develop.features.applications.notifications.updateInboundProvisioningConfig.success.description"),level:a.QU.SUCCESS,message:E("console:develop.features.applications.notifications.updateInboundProvisioningConfig.success.message")})),s(r)})).catch((function(){h((0,o.V_)({description:E("console:develop.features.applications.notifications.updateInboundProvisioningConfig.genericError.description"),level:a.QU.ERROR,message:E("console:develop.features.applications.notifications.updateInboundProvisioningConfig.genericError.message")}))})).finally((function(){T(!1)}))},useStoreList:S,readOnly:g||!(0,i.hasRequiredScopes)(null==m?void 0:m.applications,null==m||null===(t=m.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,O),"data-testid":"".concat(b,"-form"),isSubmitting:j}),id:"scim",title:"SCIM"}],accordionActiveIndexes:w,accordionIndex:0,handleAccordionOnClick:function(e,t){if(t){var n=Ke(w);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);U(n)}},"data-testid":"".concat(b,"-inbound-connector-accordion")})))))};et.defaultProps={"data-testid":"application-inbound-provisioning-configurations",defaultActiveIndexes:[-1]};var tt=n(28900),nt=n(17052);function it(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var rt=function(e){var t,n,i,r,c=e.application,s=e.onUpdate,m=e.readOnly,f=e.defaultActiveIndexes,g=e["data-testid"],b=(0,d.$)().t,E=(0,p.I0)(),y=at((0,u.useState)(!1),2),h=y[0],C=y[1],S=at((0,u.useState)(!1),2),A=S[0],O=S[1],R=at((0,u.useState)(!1),2),U=R[0],P=R[1],T=at((0,u.useState)(void 0),2),L=T[0],N=T[1],M=at((0,u.useState)(f),2),D=M[0],Z=M[1],k=at((0,l.ZK)(),3),x=k[0],F=k[1],H=k[2],q=at((0,u.useState)(void 0),2),V=q[0],z=q[1];(0,u.useEffect)((function(){L||(0,tt.SN)().then((function(e){N(e.identityProviders)}))}),[]);var G=function(e,t){if(t){var n=it(D);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);Z(n)}},W=function(e){!function(e,t){P(!0),(0,De.TH)(e,t).then((function(){E((0,o.V_)({description:b("console:develop.features.applications.notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:b("console:develop.features.applications.notifications.updateApplication.success.message")})),s(c.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?E((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateApplication.error.message")})):E((0,o.V_)({description:b("console:develop.features.applications.notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateApplication.genericError.message")}))})).finally((function(){P(!1)}))}(c.id,function(e){var t,n=null==c||null===(t=c.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,i=n.find((function(t){return t.idp===e.idp&&t.connector===e.connector}));return n.splice(n.indexOf(i),1),n.push(e),{provisioningConfigurations:{outboundProvisioningIdps:n}}}(e))};return u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},b("console:develop.features.applications.edit.sections.provisioning.outbound.heading")),u.createElement(l.X6,{subHeading:!0,as:"h6"},b("console:develop.features.applications.edit.sections.provisioning.outbound.subHeading")),u.createElement(ge.Z,{hidden:!0}),(null==c||null===(t=c.provisioningConfigurations)||void 0===t||null===(n=t.outboundProvisioningIdps)||void 0===n?void 0:n.length)>0?u.createElement(I.Z,null,!m&&u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(l.KM,{floated:"right",onClick:function(){return C(!0)},"data-testid":"".concat(g,"-new-idp-button")},u.createElement(j.Z,{name:"add"}),b("console:develop.features.applications.edit.sections.provisioning.outbound.actions.addIdp")))),u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,null==c||null===(i=c.provisioningConfigurations)||void 0===i||null===(r=i.outboundProvisioningIdps)||void 0===r?void 0:r.map((function(e,t){return u.createElement(v.Us,{key:e.idp,globalActions:!m&&[{icon:"trash alternate",onClick:function(){O(!0),z(e)},type:"icon"}],authenticators:[{content:u.createElement(nt.GH,{initialValues:e,triggerSubmit:null,onSubmit:function(e){W(e)},idpList:L,isEdit:!0,"data-testid":"".concat(g,"-form"),isSubmitting:U}),id:null==e?void 0:e.idp,title:null==e?void 0:e.idp}],accordionActiveIndexes:D,accordionIndex:t,handleAccordionOnClick:G,"data-testid":"".concat(g,"-outbound-connector-accordion")})}))))):u.createElement(I.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{width:16},u.createElement(_.Z,null,u.createElement(l.$J,{title:b("console:develop.features.applications.placeholders.emptyOutboundProvisioningIDPs.title"),image:(0,v.jF)().emptyList,subtitle:[b("console:develop.features.applications.placeholders.emptyOutboundProvisioningIDPs.subtitles")],imageSize:"tiny",action:!m&&u.createElement(l.KM,{onClick:function(){return C(!0)}},u.createElement(j.Z,{name:"add"}),b("console:develop.features.applications.placeholders.emptyOutboundProvisioningIDPs.action"))}))))),V&&u.createElement(l.cV,{onClose:function(){return O(!1)},type:"negative",open:A,assertion:null==V?void 0:V.idp,assertionHint:u.createElement("p",null,u.createElement(w.c,{i18nKey:"console:develop.features.applications.confirmations.deleteOutboundProvisioningIDP.assertionHint",tOptions:{name:null==V?void 0:V.idp}},"Please type ",u.createElement("strong",null,null==V?void 0:V.idp)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){O(!1),F(null)},onPrimaryActionClick:function(){return function(e){var t,n=null==c||null===(t=c.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,i=it(n);i.splice(n.indexOf(e),1);var l={provisioningConfigurations:{outboundProvisioningIdps:i}};(0,De.TH)(c.id,l).then((function(){E((0,o.V_)({description:b("console:develop.features.applications.notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:b("console:develop.features.applications.notifications.updateApplication.success.message")})),s(c.id),O(!1)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?E(F({description:e.response.data.description,level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateApplication.error.message")})):E(F({description:b("console:develop.features.applications.notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateApplication.genericError.message")}))}))}(V)},"data-testid":"".concat(g,"-connector-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(l.cV.Header,{"data-testid":"".concat(g,"-connector-delete-confirmation-modal-header")},b("console:develop.features.applications.confirmations.deleteOutboundProvisioningIDP.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(g,"-connector-delete-confirmation-modal-message")},b("console:develop.features.applications.confirmations.deleteOutboundProvisioningIDP.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(g,"-connector-delete-confirmation-modal-content")},u.createElement("div",{className:"modal-alert-wrapper"}," ",x&&H),b("console:develop.features.applications.confirmations.deleteOutboundProvisioningIDP.content"))),h&&u.createElement(nt.g3,{closeWizard:function(){return C(!1)},application:c,onUpdate:s,"data-testid":"".concat(g,"-idp-create-wizard")}))};rt.defaultProps={"data-testid":"application-outbound-provisioning-configurations",defaultActiveIndexes:[-1]};var ct=function(e){var t,n,a,o,r=e.application,c=e.featureConfig,s=e.provisioningConfigurations,d=e.onUpdate,m=e.readOnly,f=e["data-componentid"],v=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),g=(0,u.useMemo)((function(){var e,t;return(null==r||null===(e=r.provisioningConfigurations)||void 0===e||null===(t=e.outboundProvisioningIdps)||void 0===t?void 0:t.length)>0}),[r]);return u.createElement(l.pJ,{padded:"very"},u.createElement(I.Z,null,u.createElement(I.Z.Row,{columns:1},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},u.createElement(et,{appId:r.id,provisioningConfigurations:s,onUpdate:d,readOnly:m||!(0,i.hasRequiredScopes)(null==c?void 0:c.applications,null==c||null===(t=c.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,v),"data-testid":"".concat(f,"-inbound-configuration")}))),g&&u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},u.createElement(rt,{application:r,provisioningConfigurations:s,onUpdate:d,readOnly:m||!(0,i.hasRequiredScopes)(null==c?void 0:c.applications,null==c||null===(a=c.applications)||void 0===a||null===(o=a.scopes)||void 0===o?void 0:o.update,v),"data-testid":"".concat(f,"-outbound-configuration")})))))};ct.defaultProps={"data-componentid":"provisioning-settings"};var st=n(69825),ut=n(22806);function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var mt=function(e){var t,n,r,c,s,m,f,v=e.appId,g=e.name,b=e.description,E=e.discoverability,y=e.featureConfig,h=e.hiddenFields,C=e.imageUrl,S=e.accessUrl,I=e.isLoading,A=e.onDelete,O=e.onUpdate,R=e.readOnly,U=e.isManagementApp,P=e.application,j=e["data-componentid"],T=(0,p.I0)(),L=(0,d.$)().t,_=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),N=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),M=dt((0,u.useState)(!1),2),D=M[0],Z=M[1],k=dt((0,u.useState)(!1),2),x=k[0],F=k[1],H=dt((0,u.useState)(!1),2),q=H[0],V=H[1];return I?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(u.Fragment,null,u.createElement(l.pJ,{padded:"very"},u.createElement(Be.DU,{name:g,appId:v,application:P,description:b,discoverability:E,onSubmit:function(e){F(!0),(0,De.hN)(e).then((function(){T((0,o.V_)({description:L("console:develop.features.applications.notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:L("console:develop.features.applications.notifications.updateApplication.success.message")})),O(v)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?T((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:L("console:develop.features.applications.notifications.updateApplication.error.message")})):T((0,o.V_)({description:L("console:develop.features.applications.notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:L("console:develop.features.applications.notifications.updateApplication.genericError.message")}))})).finally((function(){F(!1)}))},imageUrl:C,accessUrl:S,hiddenFields:h,readOnly:R||!(0,i.hasRequiredScopes)(null==y?void 0:y.applications,null==y||null===(t=y.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,_),hasRequiredScope:(0,i.hasRequiredScopes)(null==y?void 0:y.applications,null==y||null===(r=y.applications)||void 0===r||null===(c=r.scopes)||void 0===c?void 0:c.update,_),"data-testid":"".concat(j,"-form"),isSubmitting:x,isManagementApp:U})),u.createElement(ge.Z,{hidden:!0}),(0,i.hasRequiredScopes)(null==y?void 0:y.applications,null==y||null===(s=y.applications)||void 0===s||null===(m=s.scopes)||void 0===m?void 0:m.update,_)?N.systemAppsIdentifiers.includes(g)?null:$.applicationConfig.editApplication.showDangerZone(P)?null!=P&&null!==(f=P.advancedConfigurations)&&void 0!==f&&f.fragment?null:u.createElement(fe.di,{when:_e.T.APPLICATION_DELETE},u.createElement(l.v9,{sectionHeader:L("console:develop.features.applications.dangerZoneGroup.header")},u.createElement(l.cN,{actionTitle:L("console:develop.features.applications.dangerZoneGroup.deleteApplication.actionTitle"),header:L("console:develop.features.applications.dangerZoneGroup.deleteApplication.header"),subheader:L("console:develop.features.applications.dangerZoneGroup.deleteApplication.subheader"),onActionClick:function(){return Z(!0)},"data-testid":"".concat(j,"-danger-zone")}))):null:null,u.createElement(l.cV,{onClose:function(){return Z(!1)},type:"negative",open:D,assertionHint:L("console:develop.features.applications.confirmations.deleteApplication.assertionHint"),assertionType:"checkbox",primaryAction:L("common:confirm"),secondaryAction:L("common:cancel"),onSecondaryActionClick:function(){return Z(!1)},onPrimaryActionClick:function(){return V(!0),void(0,De.rw)(v).then((function(){V(!1),T((0,o.V_)({description:L("console:develop.features.applications.notifications.deleteApplication.success.description"),level:a.QU.SUCCESS,message:L("console:develop.features.applications.notifications.deleteApplication.success.message")})),Z(!1),A()})).catch((function(e){V(!1),e.response&&e.response.data&&e.response.data.description?T((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:L("console:develop.features.applications.notifications.deleteApplication.error.message")})):T((0,o.V_)({description:L("console:develop.features.applications.notifications.deleteApplication.genericError.description"),level:a.QU.ERROR,message:L("console:develop.features.applications.notifications.deleteApplication.genericError.message")}))}))},closeOnDimmerClick:!1,primaryActionLoading:q,"data-testid":"".concat(j,"-application-delete-confirmation-modal")},ut.y.isChoreoApplication(P)?u.createElement(u.Fragment,null,u.createElement(l.cV.Header,{"data-testid":"".concat(j,"-application-delete-confirmation-modal-header")},L("console:develop.features.applications.confirmations.deleteChoreoApplication.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(j,"-application-delete-confirmation-modal-message")},L("console:develop.features.applications.confirmations.deleteChoreoApplication.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(j,"-application-delete-confirmation-modal-content")},u.createElement(w.c,{i18nKey:"console:develop.features.applications.confirmations.deleteChoreoApplication.content"},"Deleting this application will break the authentication flows and cause the associated Choreo application to be unusable with its credentials.",u.createElement("b",null,"Proceed at your own risk.")))):u.createElement(u.Fragment,null,u.createElement(l.cV.Header,{"data-testid":"".concat(j,"-application-delete-confirmation-modal-header")},L("console:develop.features.applications.confirmations.deleteApplication.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(j,"-application-delete-confirmation-modal-message")},L("console:develop.features.applications.confirmations.deleteApplication.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(j,"-application-delete-confirmation-modal-content")},L("console:develop.features.applications.confirmations.deleteApplication.content")))))};mt.defaultProps={"data-componentid":"application-general-settings"};var ft=n(93843);function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var bt=function(e){var t,n,r=e.appId,c=e.advancedConfigurations,s=e.featureConfig,m=e.onUpdate,f=e.readOnly,v=e.template,g=e["data-componentid"],b=(0,d.$)().t,E=(0,p.I0)(),y=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),h=vt((0,u.useState)(!1),2),C=h[0],S=h[1];return u.createElement(l.pJ,{className:"advanced-configuration-section",padded:"very"},u.createElement(Be.jw,{config:c,onSubmit:function(e){S(!0),(0,De.TH)(r,e).then((function(){E((0,o.V_)({description:b("console:develop.features.applications.notifications.updateAdvancedConfig.success.description"),level:a.QU.SUCCESS,message:b("console:develop.features.applications.notifications.updateAdvancedConfig.success.message")})),m(r)})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?E((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateAdvancedConfig.error.message")})):E((0,o.V_)({description:b("console:develop.features.applications.notifications.updateAdvancedConfig.genericError.description"),level:a.QU.ERROR,message:b("console:develop.features.applications.notifications.updateAdvancedConfig.genericError.message")}))})).finally((function(){S(!1)}))},readOnly:f||!(0,i.hasRequiredScopes)(null==s?void 0:s.applications,null==s||null===(t=s.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,y),template:v,onAlertFired:function(e){E((0,o.V_)(e))},"data-testid":"".concat(g,"-form"),isSubmitting:C}))};bt.defaultProps={"data-componentid":"application-advanced-settings"};var Et=function(e){var t=e.application,n=e.onUpdate,i=e.readOnly;return u.createElement(l.pJ,{className:"advanced-configuration-section",padded:"very"},u.createElement(Be.u4,{application:t,onApplicationSharingCompleted:function(){return n(null==t?void 0:t.id)},readOnly:i}))};Et.defaultProps={"data-componentid":"application-shared-access"};var yt=n(61375),ht=n(23865),Ct=n(93967),St=n(18606);function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ot=Ct.AsgardeoSPAClient.getInstance(),Rt=function(e){var t,n=(0,d.$)().t,i=(0,p.I0)(),r=(0,p.v9)((function(e){return e.config.ui.features})),c=e.oidcConfigurations,s=e.templateId,m=e["data-testid"],f=It((0,u.useState)(void 0),2),v=f[0],g=f[1];return(0,u.useEffect)((function(){void 0===v&&Ot.getOIDCServiceEndpoints().then((function(e){g({authorize:null==e?void 0:e.authorizationEndpoint,jwks:null==e?void 0:e.jwksUri,logout:null==e?void 0:e.endSessionEndpoint,oidcSessionIFrame:null==e?void 0:e.checkSessionIframe,revoke:null==e?void 0:e.revocationEndpoint,token:null==e?void 0:e.tokenEndpoint})})).catch((function(){i((0,o.V_)({description:n("console:develop.features.applications.notifications.fetchOIDCServiceEndpoints.genericError.description"),level:a.QU.ERROR,message:n("console:develop.features.applications.notifications.fetchOIDCServiceEndpoints.genericError.message")}))}))})),u.createElement(S.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.issuer"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.wellKnown,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.wellKnown"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.wellKnownEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.authorize,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-authorize-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.authorize"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.authorizeEndpoint,"data-testid":"".concat(m,"-authorize-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.token,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-token-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.token"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenEndpoint,"data-testid":"".concat(m,"-token-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.userInfo,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-userInfo-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.userInfo"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.userEndpoint,"data-testid":"".concat(m,"-userInfo-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.introspect,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.introspection"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.introspectionEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.jwks,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-jwks-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.jwks"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.jwksEndpoint,"data-testid":"".concat(m,"-jwks-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.revoke,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-token-revoke-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.revoke"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenRevocationEndpoint,"data-testid":"".concat(m,"-token-revoke-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-logout-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.endSession"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.endSessionEndpoint,"data-testid":"".concat(m,"-logout-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.par,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-pushed-authorization-request-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.pushedAuthorizationRequest"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.pushedAuthorizationRequestEndpoint,"data-testid":"".concat(m,"-pushed-authorization-request-readonly-input")}))),(null==r||null===(t=r.server)||void 0===t?void 0:t.enabled)&&u.createElement(u.Fragment,null,(s===ye.jo.CUSTOM_APPLICATION_OIDC||s===ye.jo.TEMPLATE_IDS.get("oidcWeb")||s===ye.jo.TEMPLATE_IDS.get("spa"))&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,computer:6},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.sessionIframe,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-session-iframe-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.oidcConfigurations.labels.sessionIframe"))),u.createElement(I.Z.Column,{mobile:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.sessionIframeEndpoint,"data-testid":"".concat(m,"-session-iframe-readonly-input")}))))))};Rt.defaultProps={"data-testid":"applications-help-panel-oidc-configs"};var wt=n(40904),Ut=n(12887),Pt=function(e){var t,n,i,a=e.samlConfigurations,o=e["data-testid"],r=(0,d.$)().t,c=v.h.getState().config.deployment.tenant,s=(0,p.v9)((function(e){return e.config.ui.features}));return u.createElement(S.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-issuer-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.issuer"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==a?void 0:a.issuer,"data-testid":"".concat(o,"-issuer-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(wt.XT,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-sso-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.sso"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==a?void 0:a.ssoUrl,"data-testid":"".concat(o,"-sso-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-slo-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.slo"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==a?void 0:a.sloUrl,"data-testid":"".concat(o,"-slo-readonly-input")}))),(null==s||null===(t=s.server)||void 0===t?void 0:t.enabled)&&u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.destination,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-destination-url-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.destinationURL"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==a||null===(n=a.destinationURLs)||void 0===n||null===(i=n.toString())||void 0===i?void 0:i.replace(/,/g,", "),"data-testid":"".concat(o,"-destination-url-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(wt.hb,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-artifact-resolution-url-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.artifactResolutionUrl"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==a?void 0:a.artifactResolutionUrl,"data-testid":"".concat(o,"-artifact-resolution-url-readonly-input")})))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.certificate,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-certificate-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.certificate"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(L.Z,{"data-testid":"".concat(o,"-certificate-button"),className:"idp-certificate-download-button",basic:!0,size:"tiny",color:"orange",onClick:function(){return be.CertificateManagementUtils.exportCertificate(c,null==a?void 0:a.certificate)}},u.createElement(j.Z,{name:"download"}),r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.buttons.certificate")))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(wt.$l,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(o,"-metadata-label")},r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.labels.metadata"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(L.Z,{"data-testid":"".concat(o,"-metadata-button"),basic:!0,size:"tiny",color:"orange",onClick:function(){var e=new Blob([null==a?void 0:a.metadata],{type:"text/xml"});(0,Ut.saveAs)(e,"SAML-Metadata.xml")}},u.createElement(j.Z,{name:"download"}),r("console:develop.features.applications.helpPanel.tabs.start.content.samlConfigurations.buttons.metadata"))))))};Pt.defaultProps={"data-testid":"applications-help-panel-saml-configs"};var jt=n(57477),Tt=n(23861);function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Nt=function(e){var t=e["data-componentid"],n=(0,d.$)().t,i=(0,p.I0)(),r=Lt((0,u.useState)(void 0),2),c=r[0],s=r[1],m=(0,Tt.x)(),f=m.data,v=m.isLoading,g=m.error;(0,u.useEffect)((function(){f instanceof jt.u||g?b():f&&s({passiveStsUrl:f.passiveSTSUrl})}),[f]);var b=function(){i((0,o.V_)({description:n("console:wsFederationConfig.notifications.getConfiguration.error.description"),level:a.QU.ERROR,message:n("console:wsFederationConfig.notifications.getConfiguration.error.message")}))};return!v&&u.createElement(S.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,St.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-componentid":"".concat(t,"-issuer-label")},n("console:develop.features.applications.helpPanel.tabs.start.content.wsFedConfigurations.labels.passiveSTSUrl"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==c?void 0:c.passiveStsUrl,"data-componentid":"".concat(t,"-passive-sts-readonly-input")})))))};function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Nt.defaultProps={"data-componentid":"applications-help-panel-ws-federation-configs"};var Zt=function(e){var t=e.inboundProtocols,n=e.isOIDCConfigLoading,i=e.isSAMLConfigLoading,a=e.templateId,o=e["data-componentid"],r=(0,p.v9)((function(e){return e.application.oidcConfigurations})),c=(0,p.v9)((function(e){return e.application.samlConfigurations})),s=(0,d.$)().t,m=(0,l.fQ)().getLink,f=Mt((0,u.useState)(!1),2),v=f[0],g=f[1],b=Mt((0,u.useState)(!1),2),E=b[0],y=b[1],h=Mt((0,u.useState)(!1),2),C=h[0],S=h[1],A=Mt((0,u.useState)(!1),2),O=A[0],R=A[1];return(0,u.useEffect)((function(){null!=t&&t.length>0&&t.map((function(e){"oauth2"==e.type&&(g(!0),R(n)),"samlsso"==e.type&&(y(!0),R(i)),"passivests"==e.type&&S(!0)}))}),[t]),(0,u.useEffect)((function(){a===ye.jo.CUSTOM_APPLICATION_PASSIVE_STS&&S(!0)}),[a]),O?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(l.pJ,{loading:O,padded:"very","data-testid":o},u.createElement(I.Z,{className:"form-container with-max-width"},u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,(v||a===yt.id||a===ye.jo.CUSTOM_APPLICATION_OIDC)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},s("console:develop.features.applications.edit.sections.info.oidcHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},s("console:develop.features.applications.edit.sections.info.oidcSubHeading"),u.createElement(l.eb,{link:a===ht.id?m("develop.applications.editApplication.singlePageApplication.info.learnMore"):m("develop.applications.editApplication.oidcApplication.info.learnMore")},s("common:learnMore"))),u.createElement(ge.Z,{hidden:!0}),u.createElement(Rt,{oidcConfigurations:r,templateId:a})),v&&E?u.createElement(u.Fragment,null,u.createElement(ge.Z,{className:"x2",hidden:!0})):null,(E||a===ye.jo.CUSTOM_APPLICATION_SAML)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},s("console:develop.features.applications.edit.sections.info.samlHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},s("console:develop.features.applications.edit.sections.info.samlSubHeading"),u.createElement(l.eb,{link:m("develop.applications.editApplication.samlApplication.info.learnMore")},s("common:learnMore"))),u.createElement(ge.Z,{hidden:!0}),u.createElement(Pt,{samlConfigurations:c})),C&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},s("console:develop.features.applications.edit.sections.info.wsFedHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},s("console:develop.features.applications.edit.sections.info.wsFedSubHeading"),u.createElement(l.eb,{link:m("develop.applications.editApplication.wsFedApplication.info.learnMore")},s("common:learnMore"))),u.createElement(ge.Z,{hidden:!0}),u.createElement(Nt,null))))))};Zt.defaultProps={"data-componentid":"application-server-endpoints"};var kt=n(5163);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==xt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||Gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $t=function(e){var t,n,r=e.application,c=e.featureConfig,m=e.isLoading,f=e.setIsLoading,g=e.getConfiguredInboundProtocolsList,b=e.getConfiguredInboundProtocolConfigs,y=e.onDelete,O=e.onUpdate,R=e.template,w=e.readOnly,U=e.urlSearchParams,P=e["data-componentid"],j=(0,d.$)().t,T=(0,$e.z)().isSuperOrganization,L=(0,p.I0)(),_=(0,E.Z)().UIConfig,N=(0,p.v9)((function(e){return e.application.meta.inboundProtocols})),M=(0,p.v9)((function(e){return e.application.oidcConfigurations})),D=(0,p.v9)((function(e){return e.application.samlConfigurations})),Z=(0,p.v9)((function(e){return e.config.ui.isClientSecretHashEnabled})),k=(0,p.v9)((function(e){return e.auth.tenantDomain})),x=(0,p.v9)((function(e){return e.organization.isFirstLevelOrganization})),F=(0,p.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),H=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),q=zt((0,u.useState)(!0),2),V=q[0],z=q[1],G=zt((0,u.useState)(void 0),2),W=G[0],Q=G[1],B=zt((0,u.useState)(void 0),2),K=B[0],Y=B[1],X=zt((0,u.useState)(!1),2),J=X[0],ee=X[1],te=zt((0,u.useState)(void 0),2),ne=te[0],ie=te[1],ae=zt((0,u.useState)([]),2),oe=ae[0],le=ae[1],re=zt((0,u.useState)(!1),2),ce=re[0],se=re[1],ue=zt((0,u.useState)(!1),2),de=ue[0],pe=ue[1],me=zt((0,u.useState)(!1),2),fe=me[0],ve=me[1],ge=zt((0,u.useState)({clientId:"",clientSecret:""}),2),be=ge[0],Ee=ge[1],Ce=zt((0,u.useState)(!1),2),Se=Ce[0],Ie=Ce[1],Ae=zt((0,u.useState)(!1),2),Oe=Ae[0],Re=Ae[1],we=zt((0,u.useState)(void 0),2),Ue=we[0],Pe=we[1],je=zt((0,u.useState)(void 0),2),Te=je[0],Le=je[1],_e=zt((0,u.useState)(void 0),2),Ne=_e[0],Me=_e[1],Ze=zt((0,u.useState)(!1),2),ke=Ze[0],xe=Ze[1],Fe=v.lD.getInstance(),He=(null==r||null===(t=r.advancedConfigurations)||void 0===t?void 0:t.fragment)||!1,qe=Vt(null!==(n=null==_?void 0:_.hiddenAuthenticators)&&void 0!==n?n:[]),Ve=(0,$e.z)().isSubOrganization,ze=function(e){pe(!0),O(e)},Ge=function(){var e=[],t=[];if(!ne&&$.applicationConfig.editApplication.extendTabs&&(null==r?void 0:r.templateId)!==ye.jo.CUSTOM_APPLICATION_OIDC&&(null==r?void 0:r.templateId)!==ye.jo.CUSTOM_APPLICATION_PASSIVE_STS&&(null==r?void 0:r.templateId)!==ye.jo.CUSTOM_APPLICATION_SAML)return[];if(ne&&ne.length>0&&t.push.apply(t,Vt(ne)),c){var n,a,o,l,s,d,p,m,f,v,g,b,E,y;if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_GENERAL_SETTINGS"))&&!Ve())$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(d=K.oidc)||void 0===d?void 0:d.clientId,he.wF.GENERAL,k)&&e.push({componentId:"general",menuItem:u.createElement(C.Z.Item,{"data-tourid":"general"},j("console:develop.features.applications.edit.sections.general.tabName")),render:function(){var e;return $.applicationConfig.editApplication.getOveriddenTab(null==K||null===(e=K.oidc)||void 0===e?void 0:e.clientId,he.wF.GENERAL,et(),null==r?void 0:r.name,null==r?void 0:r.id,k)}});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ACCESS_CONFIG"))&&!He)$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(p=K.oidc)||void 0===p?void 0:p.clientId,he.wF.PROTOCOL,k)&&e.push({componentId:"protocol",menuItem:j("console:develop.features.applications.edit.sections.access.tabName"),render:tt});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ATTRIBUTE_MAPPING"))&&!He&&!ke&&(null!=_&&null!==(n=_.legacyMode)&&void 0!==n&&n.applicationSystemAppsSettings||(null==r?void 0:r.name)!==ye.jo.MY_ACCOUNT_APP_NAME))$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(m=K.oidc)||void 0===m?void 0:m.clientId,he.wF.USER_ATTRIBUTES,k)&&e.push({componentId:"user-attributes",menuItem:u.createElement(C.Z.Item,{"data-tourid":"attributes"},j("console:develop.features.applications.edit.sections.attributes.tabName")),render:function(){var e;return $.applicationConfig.editApplication.getOveriddenTab(null==K||null===(e=K.oidc)||void 0===e?void 0:e.clientId,he.wF.USER_ATTRIBUTES,nt(),null==r?void 0:r.name,null==r?void 0:r.id,k)}});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_SIGN_ON_METHOD_CONFIG"))&&!ke)$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(f=K.oidc)||void 0===f?void 0:f.clientId,he.wF.SIGN_IN_METHOD,k)&&e.push({componentId:"sign-in-method",menuItem:u.createElement(C.Z.Item,{"data-tourid":"sign-in-methods"},j("console:develop.features.applications.edit.sections.signOnMethod.tabName")),render:it});if($.applicationConfig.editApplication.showProvisioningSettings&&(0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_PROVISIONING_SETTINGS"))&&!He&&!ke&&(null!=_&&null!==(a=_.legacyMode)&&void 0!==a&&a.applicationSystemAppsSettings||(null==r?void 0:r.name)!==ye.jo.MY_ACCOUNT_APP_NAME))$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(v=K.oidc)||void 0===v?void 0:v.clientId,he.wF.PROVISIONING,k)&&e.push({componentId:"provisioning",menuItem:j("console:develop.features.applications.edit.sections.provisioning.tabName"),render:ot});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ADVANCED_SETTINGS"))&&!He&&!ke&&(null!=_&&null!==(o=_.legacyMode)&&void 0!==o&&o.applicationSystemAppsSettings||(null==r?void 0:r.name)!==ye.jo.MY_ACCOUNT_APP_NAME))$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(g=K.oidc)||void 0===g?void 0:g.clientId,he.wF.ADVANCED,k)&&e.push({componentId:"advanced",menuItem:u.createElement(C.Z.Item,{"data-tourid":"advanced"},j("console:develop.features.applications.edit.sections.advanced.tabName")),render:at});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS"))&&(null==r?void 0:r.templateId)!=ye.jo.CUSTOM_APPLICATION_PASSIVE_STS&&!He&&!ke&&$.applicationConfig.editApplication.showApplicationShare&&(x||window.AppUtils.getConfig().organizationName)&&(0,i.hasRequiredScopes)(null==c?void 0:c.applications,null==c||null===(l=c.applications)||void 0===l||null===(s=l.scopes)||void 0===s?void 0:s.update,H)&&F!==kt.$B.SUBORGANIZATION&&!ye.jo.SYSTEM_APPS.includes(null==r?void 0:r.clientId))$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(b=K.oidc)||void 0===b?void 0:b.clientId,he.wF.INFO,k)&&(null==_||null===(E=_.legacyMode)||void 0===E?void 0:E.organizations)&&e.push({componentId:"shared-access",menuItem:j("console:develop.features.applications.edit.sections.sharedAccess.tabName"),render:lt});if((0,i.cr)(null==c?void 0:c.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_INFO"))&&!He)$.applicationConfig.editApplication.isTabEnabledForApp(null==K||null===(y=K.oidc)||void 0===y?void 0:y.clientId,he.wF.INFO,k)&&e.push({componentId:"info",menuItem:{content:j("console:develop.features.applications.edit.sections.info.tabName"),icon:"info circle grey"},render:rt});return t.forEach((function(t){e.splice(t.index,0,t)})),e}return[{componentId:"general",menuItem:j("console:develop.features.applications.edit.sections.general.tabName"),render:et},{componentId:"protocol",menuItem:j("console:develop.features.applications.edit.sections.access.tabName"),render:tt},{componentId:"user-attributes",menuItem:j("console:develop.features.applications.edit.sections.attributes.tabName"),render:nt},{componentId:"sign-in-method",menuItem:j("console:develop.features.applications.edit.sections.signOnMethod.tabName"),render:it},$.applicationConfig.editApplication.showProvisioningSettings&&{componentId:"provisioning",menuItem:j("console:develop.features.applications.edit.sections.provisioning.tabName"),render:ot},{componentId:"advanced",menuItem:j("console:develop.features.applications.edit.sections.advanced.tabName"),render:at},{componentId:"shared-access",menuItem:j("console:develop.features.applications.edit.sections.sharedAccess.tabName"),render:lt},{componentId:"info",menuItem:{content:j("console:develop.features.applications.edit.sections.info.tabName"),icon:"info circle grey"},render:rt}]},Qe=(0,u.useMemo)((function(){return Ge()}),[ne,null==r?void 0:r.templateId]);(0,u.useEffect)((function(){if(R){var e=0;if($.applicationConfig.editApplication.extendTabs&&(e=1),Le(e),(0,s.Z)(window.location.hash)){if(U.get(ye.jo.APP_STATE_STRONG_AUTH_PARAM_KEY)!==ye.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE)return void Be(e);var t=null==Qe?void 0:Qe.findIndex((function(e){return e.componentId===ye.jo.SIGN_IN_METHOD_TAB_URL_FRAG}));-1!==t&&Ke(t)}}}),[R,Qe]),(0,u.useEffect)((function(){(null==R?void 0:R.id)===he.u.M2M_APPLICATION&&xe(!0)}),[R]),(0,u.useEffect)((function(){if(void 0!==Ne&&!window.location.hash.includes(he.El.VIEW)&&!(0,s.Z)(window.location.hash)){var e=window.location.hash.split("#"+he.El.TAB_INDEX);if(2===e.length&&(0,s.Z)(e[0])&&/^\d+$/.test(e[1])){var t=parseInt(e[1],10);if(t===Ue)return;Ke(t)}else if(window.location.hash.includes(ye.jo.SIGN_IN_METHOD_TAB_URL_FRAG)){var n=null==Qe?void 0:Qe.findIndex((function(e){return e.componentId===ye.jo.SIGN_IN_METHOD_TAB_URL_FRAG}));Ke(n)}else Be(Te)}}),[window.location.hash,Ne]),(0,u.useEffect)((function(){var e=[];T()&&(0,v.ZY)().then((function(t){t.map((function(t){e.push(t.url)})),le(e)})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?L((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:j("console:develop.features.applications.notifications.fetchAllowedCORSOrigins.error.message")})):L((0,o.V_)({description:j("console:develop.features.applications.notifications.fetchAllowedCORSOrigins.genericError.description"),level:a.QU.ERROR,message:j("console:develop.features.applications.notifications.fetchAllowedCORSOrigins.genericError.message")}))}))}),[ce]),(0,u.useEffect)((function(){(0,s.Z)(N)&&(ee(!0),ut.y.getInboundProtocols(A.oK,!1).finally((function(){ee(!1)})))}),[N]),(0,u.useEffect)((function(){null!=r&&r.inboundProtocols&&null!=r&&r.id&&Ye(r.id)}),[JSON.stringify(null==r?void 0:r.inboundProtocols)]),(0,u.useEffect)((function(){void 0===D&&(Re(!0),ut.y.getSAMLApplicationMeta().finally((function(){Re(!1)})))}),[D,K]),(0,u.useEffect)((function(){void 0===M&&(Ie(!0),ut.y.getOIDCApplicationMeta().finally((function(){Ie(!1)})))}),[M,K]),(0,u.useEffect)((function(){var e;if((!ne||de)&&null!=r&&r.id&&!V){K&&D&&D.certificate&&(K.certificate=D.certificate,K.ssoUrl=D.ssoUrl,K.issuer=D.issuer);var t=$.applicationConfig.editApplication.getTabExtensions({application:r,content:null==R||null===(e=R.content)||void 0===e?void 0:e.quickStart,inboundProtocolConfig:K,inboundProtocols:W,onApplicationUpdate:function(){ze(null==r?void 0:r.id)},onTriggerTabUpdate:function(e){Pe(e)},template:R},c,w,k);ie(t),pe(!1)}}),[ne,R,r,W,K,V]),(0,u.useEffect)((function(){U.get(ye.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)&&ve(!0)}),[U.get(ye.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)]);var Be=function(e){R.id===yt.id&&e>0?Ke(e-1):Ke(e)},Ke=function(e){v.m8.push({hash:"#".concat(he.El.TAB_INDEX).concat(e),pathname:window.location.pathname}),Pe(e)},Ye=function(e){var t,n={},i=[],l=[],c=[];(null==r||null===(t=r.inboundProtocols)||void 0===t?void 0:t.length)>0?(r.inboundProtocols.forEach((function(t){if("openid"!==t.type){var n=function(e){var t=e;return"oauth2"===t?t=he.AI.OIDC:"passivests"===t?t=he.AI.WS_FEDERATION:"wstrust"===t?t=he.AI.WS_TRUST:"samlsso"===t&&(t=he.AI.SAML),t}(t.type);c.includes(n)||(c.push(n),l.push((0,De.S2)(e,n)))}})),z(!0),h().all(l).then(h().spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach((function(e,t){n=Ht(Ht({},n),{},qt({},c[t],e)),i.push(c[t])}))}))).catch((function(e){var t,n,i,l,r,c;404!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&(null!=e&&e.response&&null!=e&&null!==(n=e.response)&&void 0!==n&&n.data&&null!=e&&null!==(i=e.response)&&void 0!==i&&null!==(l=i.data)&&void 0!==l&&l.description?L((0,o.V_)({description:null===(r=e.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.description,level:a.QU.ERROR,message:j("console:develop.features.applications.notifications.getInboundProtocolConfig.error.message")})):L((0,o.V_)({description:j("console:develop.features.applications.notifications.getInboundProtocolConfig.genericError.description"),level:a.QU.ERROR,message:j("console:develop.features.applications.notifications.getInboundProtocolConfig.genericError.message")})))})).finally((function(){!function(e){var t="saml";if(e[t]){var n,i=null===(n=e[t].singleSignOnProfile)||void 0===n?void 0:n.assertion;if(i){var a=i.nameIdFormat;i.nameIdFormat=a.replace(/\//g,":")}}}(n),pe(!0),Q(i),Y(n),z(!1),g(i),b(n)}))):(Q([]),Y({}),z(!1),g([]),b({}))},Xe=function(){null!=r&&r.id&&Ye(r.id)},Je=function(e){!(0,s.Z)(e)&&e.clientSecret&&e.clientId&&(Ee({clientId:e.clientId,clientSecret:e.clientSecret}),ve(!0))},et=function(){var e;return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(mt,{accessUrl:null==r?void 0:r.accessUrl,appId:null==r?void 0:r.id,description:null==r?void 0:r.description,discoverability:null==r||null===(e=r.advancedConfigurations)||void 0===e?void 0:e.discoverableByEndUsers,imageUrl:null==r?void 0:r.imageUrl,name:null==r?void 0:r.name,application:r,isLoading:m,onDelete:y,onUpdate:ze,featureConfig:c,template:R,readOnly:w||$.applicationConfig.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_GENERAL_SETTINGS",r),"data-componentid":"".concat(P,"-general-settings"),isManagementApp:r.isManagementApp}))},tt=function(){var e;return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(ft.E,{application:r,allowedOriginList:oe,certificate:null==r||null===(e=r.advancedConfigurations)||void 0===e?void 0:e.certificate,onAllowedOriginsUpdate:function(){return se(!ce)},onApplicationSecretRegenerate:Je,appId:null==r?void 0:r.id,appName:null==r?void 0:r.name,applicationTemplateId:null==r?void 0:r.templateId,extendedAccessConfig:void 0!==ne,isLoading:m,setIsLoading:f,onUpdate:ze,onProtocolUpdate:Xe,isInboundProtocolConfigRequestLoading:V,inboundProtocolsLoading:V,inboundProtocolConfig:K,inboundProtocols:W,featureConfig:c,template:R,readOnly:w||$.applicationConfig.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_ACCESS_CONFIG",r),isDefaultApplication:ye.jo.DEFAULT_APPS.includes(null==r?void 0:r.name),isSystemApplication:ye.jo.SYSTEM_APPS.includes(null==r?void 0:r.name),"data-componentid":"".concat(P,"-access-settings")}))},nt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(We,{appId:r.id,technology:r.inboundProtocols,claimConfigurations:r.claimConfiguration,featureConfig:c,onlyOIDCConfigured:((null==r?void 0:r.templateId)===yt.id||(null==r?void 0:r.templateId)===ye.jo.CUSTOM_APPLICATION_OIDC)&&0===(null==W?void 0:W.length)||1===(null==W?void 0:W.length)&&W[0]===he.AI.OIDC,onUpdate:ze,applicationTemplateId:null==r?void 0:r.templateId,inboundProtocolConfig:K,readOnly:w,"data-componentid":"".concat(P,"-attribute-settings")}))},it=function(){var e;return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(st.I,{application:r,appId:r.id,authenticationSequence:r.authenticationSequence,clientId:null==K||null===(e=K.oidc)||void 0===e?void 0:e.clientId,hiddenAuthenticators:qe,isLoading:m,onUpdate:ze,featureConfig:c,readOnly:w,"data-componentid":"".concat(P,"-sign-on-methods")}))},at=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(bt,{appId:r.id,advancedConfigurations:r.advancedConfigurations,onUpdate:ze,featureConfig:c,readOnly:w,template:R,"data-componentid":"".concat(P,"-advanced-settings")}))},ot=function(){return $.applicationConfig.editApplication.showProvisioningSettings?u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(ct,{application:r,provisioningConfigurations:r.provisioningConfigurations,onUpdate:ze,featureConfig:c,readOnly:w,"data-componentid":"".concat(P,"-provisioning-settings")})):null},lt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(Et,{application:r,onUpdate:ze,readOnly:w,"data-componentid":"".concat(P,"-shared-access")}))},rt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(Zt,{inboundProtocols:null==r?void 0:r.inboundProtocols,isOIDCConfigLoading:Se,isSAMLConfigLoading:Oe,templateId:null==r?void 0:r.templateId,"data-componentid":"".concat(P,"-server-endpoints")}))};return!r||J||null==W||!ne&&$.applicationConfig.editApplication.extendTabs?u.createElement(l.pO,null):u.createElement(u.Fragment,null,u.createElement(l.M$,{isLoading:m,activeIndex:Ue,"data-componentid":"".concat(P,"-resource-tabs"),defaultActiveIndex:Te,onTabChange:function(e,t){Fe.compute((function(){Fe.publish("application-switch-edit-application-tabs",{type:t.panes[t.activeIndex].componentId})})),Ke(t.activeIndex)},panes:Ge(),onInitialize:function(e){var t=e.panesLength;Me(t)}}),fe&&function(){if(!Z)return null;if(!W.includes(he.AI.OIDC)||(0,s.Z)(null==K?void 0:K.oidc)||!K.oidc.clientId||!K.oidc.clientSecret)return null;var e=be.clientSecret||K.oidc.clientSecret,t=be.clientId||K.oidc.clientId;return u.createElement(l.cV,{"data-componentid":"".concat(P,"-client-secret-hash-disclaimer-modal"),type:"warning",open:!0,primaryAction:j("common:confirm"),onPrimaryActionClick:function(){ve(!1),Ee({clientId:"",clientSecret:""})}},u.createElement(l.cV.Header,{"data-componentid":"".concat(P,"-client-secret-hash-disclaimer-modal-header")},j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.modal.header")),u.createElement(l.cV.Message,{attached:!0,warning:!0,"data-componentid":"".concat(P,"-client-secret-hash-disclaimer-modal-message")},j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.modal.message")),u.createElement(l.cV.Content,{"data-componentid":"".concat(P,"-client-secret-hash-disclaimer-modal-content")},u.createElement(S.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(S.Z.Field,null,u.createElement("label",null,j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.label")),u.createElement(l.OR,{value:t,hideSecretLabel:j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.hide"),showSecretLabel:j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.show"),"data-componentid":"".concat(P,"-client-secret-readonly-input")})),u.createElement(S.Z.Field,null,u.createElement("label",null,j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.label")),u.createElement(l.OR,{secret:!0,value:e,hideSecretLabel:j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.hide"),showSecretLabel:j("console:develop.features.applications.confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.show"),"data-componentid":"".concat(P,"-client-secret-readonly-input")})))))))}())};$t.defaultProps={"data-componentid":"edit-application",getConfiguredInboundProtocolConfigs:function(){return null},getConfiguredInboundProtocolsList:function(){return null}};var Qt=n(84206),Bt=n(52037);function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Jt=function(e){var t,n,E,y,h,C=e.location,S=e["data-componentid"],I=new URLSearchParams(C.search),A="isApplicationHelpShown",O=(0,d.$)().t,R=(0,p.I0)(),w=(0,u.useRef)(null),U=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),P=(0,p.v9)((function(e){return e.helpPanel.docStructure})),j=(0,p.v9)((function(e){return e.application.templates})),T=(0,p.v9)((function(e){return e.config.ui.features})),L=(0,p.v9)((function(e){return e.auth.tenantDomain})),_=Yt((0,u.useState)(void 0),2),N=_[0],M=_[1],D=Yt((0,u.useState)(void 0),2),Z=D[0],k=D[1],x=Yt((0,u.useState)(void 0),2),F=x[0],H=x[1],q=Yt((0,u.useState)(void 0),2),V=(q[0],q[1]),z=Yt((0,u.useState)(void 0),2),G=z[0],W=z[1],$=Yt((0,u.useState)(!1),2),Q=$[0],B=$[1],K=Yt((0,u.useState)(!1),2),Y=K[0],X=K[1],J=Yt((0,u.useState)(),2),ee=J[0],te=J[1],ne=Yt((0,u.useState)(),2),ie=ne[0],ae=ne[1],oe=Yt((0,u.useState)(),2),le=oe[0],re=oe[1],ce=(0,b.b)(N,!!N),se=ce.data,ue=ce.mutate,de=ce.isLoading,pe=ce.error;(0,u.useEffect)((function(){H(de)}),[de]),(0,u.useEffect)((function(){var e,t;pe&&(null!==(e=pe.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?R((0,o.V_)({description:pe.response.data.description,level:a.QU.ERROR,message:O("console:develop.features.applications.notifications.fetchApplication.error.message")})):R((0,o.V_)({description:O("console:develop.features.applications.notifications.fetchApplication.genericError.description"),level:a.QU.ERROR,message:O("console:develop.features.applications.notifications.fetchApplication.genericError.message")})))}),[pe]),(0,u.useEffect)((function(){if(w||F){var e=null==w?void 0:w.current;e&&e.offsetWidth<e.scrollWidth&&B(!0)}}),[w,F]);(0,u.useEffect)((function(){var e,t,n,i,a=null===(e=v.m8.location.pathname)||void 0===e?void 0:e.split("/"),o=a[(null==a?void 0:a.length)-1];i=v.Wj.getUserPreferences(),(0,s.Z)(i)||null!==(t=i.identityAppsSettings)&&void 0!==t&&null!==(n=t.devPortal)&&void 0!==n&&n[A]||(R((0,v.rq)(!0)),function(){var e,t=v.Wj.getUserPreferences();if(!(0,s.Z)(t)&&null!=t&&null!==(e=t.identityAppsSettings)&&void 0!==e&&e.devPortal){var n=(0,r.Z)(t);n.identityAppsSettings.devPortal[A]=!0,v.Wj.setUserPreferences(n)}}()),M(o)}),[]),(0,u.useEffect)((function(){if("object"===Kt(v.m8.location.state)){X(!0);var e=v.m8.location.state;te(e.id),ae(e.name),(null==e?void 0:e.redirectTo)&&re(e.redirectTo)}})),(0,u.useEffect)((function(){se&&j&&j instanceof Array&&j.length>0?ve():Bt.e.getApplicationTemplates().finally()}),[j,se]),(0,u.useEffect)((function(){var e,t;null!=se&&se.templateId||(null==se||null===(e=se.inboundProtocols)||void 0===e?void 0:e.length)>0&&(se.templateId=null!==(t=Qt.Eg.get(se.inboundProtocols[0].type))&&void 0!==t?t:ye.jo.CUSTOM_APPLICATION_OIDC,ve())}),[F,se]),(0,u.useEffect)((function(){T&&T.applications&&((0,i.cr)(T.applications,ye.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))||v.m8.push(v.$x.getPaths().get("PAGE_NOT_FOUND")))}),[T]),(0,u.useEffect)((function(){var e;if(Z){var t=(0,c.Z)(P,ye.jo.EDIT_APPLICATIONS_DOCS_KEY);t&&R((0,v.dv)(null===(e=t[ye.jo.APPLICATION_TEMPLATE_DOC_MAPPING.get(Z.id)])||void 0===e?void 0:e[ye.jo.APPLICATION_DOCS_OVERVIEW]))}}),[Z,P]);var me,fe,ve=function(){var e=null==j?void 0:j.find((function(e){return e.id===se.templateId}));se.templateId!==ye.jo.CUSTOM_APPLICATION_OIDC&&se.templateId!==ye.jo.CUSTOM_APPLICATION_SAML&&se.templateId!==ye.jo.CUSTOM_APPLICATION_PASSIVE_STS||(e=null==j?void 0:j.find((function(e){return e.id===yt.id}))),k(e)};return u.createElement(l.O9,{pageTitle:"Edit Application",title:u.createElement(u.Fragment,null,u.createElement("span",null,null==se?void 0:se.name)),contentTopMargin:!0,description:null!==(t=f.applicationConfig.editApplication.getOverriddenDescription(null==G||null===(n=G.oidc)||void 0===n?void 0:n.clientId,L,null==Z?void 0:Z.name))&&void 0!==t?t:u.createElement("div",{className:"with-label ellipsis",ref:w},(null==Z?void 0:Z.name)&&u.createElement(m.Z,{size:"small"},Z.name),ut.y.isChoreoApplication(se)&&u.createElement(m.Z,{size:"small",className:"choreo-label no-margin-left"},O("extensions:develop.apiResource.managedByChoreoText")),u.createElement(l.GI,{disabled:!Q,content:null==se?void 0:se.description,trigger:u.createElement("span",null,null==se?void 0:se.description)})),image:null!==(E=f.applicationConfig.editApplication.getOverriddenImage(null==G||null===(y=G.oidc)||void 0===y?void 0:y.clientId,L))&&void 0!==E?E:null!=se&&se.imageUrl?u.createElement(l.JT,{name:null==se?void 0:se.name,image:null==se?void 0:se.imageUrl,size:"tiny"}):u.createElement(l.Xo,{name:null==se?void 0:se.name,size:"tiny",floated:"left"}),loadingStateOptions:{count:5,imageType:"square"},isLoading:F,backButton:{"data-componentid":"".concat(S,"-page-back-button"),onClick:function(){Y?le===ye.jo.ROLE_CALLBACK_REDIRECT?v.m8.push({pathname:v.$x.getPaths().get("ROLE_EDIT").replace(":id",ee),state:g.s0.CONNECTED_APPS_TAB_ID}):v.m8.push({pathname:v.$x.getPaths().get("IDP_EDIT").replace(":id",ee),state:g.s0.CONNECTED_APPS_TAB_ID}):v.m8.push(v.$x.getPaths().get("APPLICATIONS"))},text:Y?O("console:develop.features.idp.connectedApps.applicationEdit.back",{idpName:ie}):O("console:develop.pages.applicationsEdit.backButton")},titleTextAlign:"left",bottomMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(S,"-page-layout"),truncateContent:!0,action:u.createElement(u.Fragment,null,f.applicationConfig.editApplication.getActions(null==G||null===(h=G.oidc)||void 0===h?void 0:h.clientId,L,S))},u.createElement($t,{application:se,featureConfig:T,isLoading:F,setIsLoading:H,onDelete:function(){v.m8.push(v.$x.getPaths().get("APPLICATIONS"))},onUpdate:function(){ue()},template:Z,"data-componentid":S,urlSearchParams:I,getConfiguredInboundProtocolsList:function(e){V(e)},getConfiguredInboundProtocolConfigs:function(e){W(e)},readOnly:"true"===I.get(ye.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY)||(null==se?void 0:se.access)===he.Ch.READ||!(0,i.hasRequiredScopes)(null==T?void 0:T.applications,null==T||null===(me=T.applications)||void 0===me||null===(fe=me.scopes)||void 0===fe?void 0:fe.update,U)}))};Jt.defaultProps={"data-componentid":"application-edit"};const en=Jt},23861:(e,t,n)=>{n.d(t,{d:()=>E,x:()=>b});var i,a=n(93967),o=n(57477),l=n(14603),r=n(85850),c=n(43991),s=n(65790);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var v=p((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));i=v,m(v,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),m(v,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),m(v,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),m(v,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var g=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()),b=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,url:r.De.getServiceResourceEndpoints().passiveStsConfigurations},t=(0,c.Z)(e),n=t.data,i=t.error;return{data:n,error:i,isLoading:!i&&!n,isValidating:t.isValidating,mutate:t.mutate}},E=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.PATCH,url:r.De.getServiceResourceEndpoints().passiveStsConfigurations};return g(t).then((function(e){if(200!==e.status&&201!==e.status)throw new o.u(v.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n,i=v.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new o.u(i,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}}}]);