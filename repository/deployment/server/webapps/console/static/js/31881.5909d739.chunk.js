(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[31881],{90631:(e,t,n)=>{"use strict";n.d(t,{X:()=>Ze});var r=n(90009),l=n(96433),a=n(83374),o=n(14603),s=n(90268),i=n(81816),u=n(23587),c=n(52983),d=n(9202),m=n(54221),p=n(39345),f=n(26109),g=n(67127),v=n(21921),h=n(94635),y=n(10594),b=n(73949),E=n(75917),S=n(14969),U=n(74691),R=n(88171),O=n(30640),Z=n(79232),C=n(85814);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return s}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.onAlertFired,n=e.user,r=e.handleUserUpdate,l=e.isReadOnly,a=(0,d.$)().t,s=L((0,c.useState)(!1),2),u=s[0],m=s[1],A=L((0,c.useState)([]),2),w=A[0],P=A[1],T=L((0,c.useState)([]),2),M=T[0],N=T[1],k=L((0,c.useState)([]),2),x=k[0],H=k[1],z=L((0,c.useState)(void 0),2),G=z[0],F=z[1],X=L((0,c.useState)(void 0),2),$=X[0],J=X[1],D=L((0,c.useState)(!1),2),Q=D[0],V=D[1],_=L((0,c.useState)([]),2),B=_[0],Y=_[1],q=L((0,c.useState)(!1),2),W=q[0],K=q[1],ee=L((0,c.useState)(!1),2),te=ee[0],ne=ee[1],re=L((0,c.useState)([]),2),le=re[0],ae=re[1];(0,c.useEffect)((function(){n&&(oe(),Y(n.groups))}),[]),(0,c.useEffect)((function(){n&&(oe(),Y(n.groups))}),[n]),(0,c.useEffect)((function(){n.groups&&ie()}),[n.groups&&G]),(0,c.useEffect)((function(){var e,t="Primary",r=null==n||null===(e=n.userName)||void 0===e?void 0:e.split("/");r.length>1&&(t=r[0]),K(!0),(0,Z.hI)(t).then((function(e){F(e.data.Resources)})).finally((function(){K(!1)}))}),[]);var oe=function(){var e=new Map;n.groups&&n.groups instanceof Array?((0,f.Z)(n.groups,(function(t){var n,r=null==t||null===(n=t.display)||void 0===n?void 0:n.split("/");r[0]!==C.Fn&&r[0]!==C.eT&&e.set(t.display,t.value)})),J(e)):J(void 0)},se=function(){N(Q?[]:w),V(!Q)},ie=function(){var e=G?j(G):[],t=[];(0,f.Z)(e,(function(e){null!=$&&$.has(e.displayName)&&t.push(e)})),N(t),ae(t),P(e),H(e),V(e.length===t.length)},ue=function(){ie(),m(!0)},ce=function(){V(!1),m(!1)},de=function(e,t){var n=t.value,r=[];if((0,g.Z)(n))P(x);else{var l=new RegExp((0,p.Z)(n),"i");w&&w.map((function(e){l.test(e.displayName)&&(r.push(e),P(r))}))}},me=function(e){var t=null==e?void 0:e.split("/"),n={labelColor:"olive",labelText:C.$R};return t[0]!==C.Fn&&t[0]!==C.eT&&(null==t?void 0:t.length)>1&&(n=I(I({},n),{},{labelText:t[0]})),n};return c.createElement(i.pJ,{padded:"very"},c.createElement(i.X6,{as:"h4"},a("console:manage.features.user.updateUser.groups.editGroups.heading")),c.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},a("console:manage.features.user.updateUser.groups.editGroups.subHeading")),c.createElement(E.Z,{hidden:!0}),c.createElement(h.Z,null,c.createElement(h.Z.Row,null,c.createElement(h.Z.Column,{computer:10,tablet:16,mobile:16},(null==$?void 0:$.size)>0?c.createElement(i.pJ,{"data-testid":"user-mgt-groups-list",className:"user-role-edit-header-segment"},c.createElement(h.Z.Row,null,c.createElement(h.Z.Column,null,c.createElement(S.Z,{"data-testid":"user-mgt-groups-list-search-input",icon:c.createElement(U.Z,{name:"search"}),onChange:function(e,t){var r=t.value,l=[];if((0,g.Z)(r))Y(n.groups);else{var a=new RegExp((0,p.Z)(r),"i");B&&(null==B||B.map((function(e){var t;1===(null==e||null===(t=e.display)||void 0===t?void 0:t.split("/")).length&&a.test(e.display)&&(l.push(e),Y(l))})))}},placeholder:a("console:manage.features.user.updateUser.groups.editGroups.searchPlaceholder"),floated:"left",size:"small"}),!l&&c.createElement(R.Z,{"data-testid":"user-mgt-groups-list-update-button",size:"medium",icon:"pencil",floated:"right",onClick:ue}))),c.createElement(h.Z.Row,null,c.createElement(y.Z,{singleLine:!0,compact:!0},c.createElement(y.Z.Header,null,c.createElement(y.Z.Row,null,c.createElement(y.Z.HeaderCell,null,c.createElement("strong",null,a("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.0"))),c.createElement(y.Z.HeaderCell,null,c.createElement("strong",null,a("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.1"))))),c.createElement(y.Z.Body,null,null==B?void 0:B.map((function(e,t){var n,r=null==e||null===(n=e.display)||void 0===n?void 0:n.split("/");if(r[0]!==C.Fn&&r[0]!==C.eT)return c.createElement(y.Z.Row,{key:t},c.createElement(y.Z.Cell,null,1===(null==r?void 0:r.length)?c.createElement(b.Z,{color:"olive"},C.$R):c.createElement(b.Z,{color:"olive"},r[0])),c.createElement(y.Z.Cell,null,1===(null==r?void 0:r.length)?null==e?void 0:e.display:r[1]))})))))):c.createElement(i.pJ,null,c.createElement(i.$J,{"data-testid":"user-mgt-empty-groups-list",title:a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.title"),subtitle:[a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.0"),a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.1"),a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.2")],action:!l&&c.createElement(i.KM,{"data-testid":"user-mgt-empty-groups-list-assign-group-button",onClick:ue},c.createElement(U.Z,{name:"plus"}),"Assign Group"),image:(0,O.jF)().emptyList,imageSize:"tiny"}))))),c.createElement(v.Z,{"data-testid":"user-mgt-update-groups-modal",open:u,size:"small",className:"user-roles"},c.createElement(v.Z.Header,null,a("console:manage.features.user.updateUser.groups.addGroupsModal.heading"),c.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},a("console:manage.features.user.updateUser.groups.addGroupsModal.subHeading"))),c.createElement(v.Z.Content,{image:!0},W?c.createElement(i.pO,null):c.createElement(i.IX,{selectionComponent:!0,searchPlaceholder:a("console:manage.features.transferList.searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:de,"data-testid":"user-mgt-update-groups-modal"},c.createElement(i.Jv,{isListEmpty:!(w.length>0),listType:"unselected",listHeaders:[a("console:manage.features.transferList.list.headers.0"),a("console:manage.features.transferList.list.headers.1")],handleHeaderCheckboxChange:se,isHeaderCheckboxChecked:Q,emptyPlaceholderContent:a("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-update-groups-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:a("console:manage.features.transferList.list.emptyPlaceholders.default")},null==w?void 0:w.map((function(e,t){return c.createElement(i.qT,{handleItemChange:function(){return function(e){var t=j(M);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),N(t)):(t.push(e),N(t)),V(t.length===w.length)}(e)},key:t,listItem:(n=null==e?void 0:e.displayName,l=null===(r=n)||void 0===r?void 0:r.split("/"),1!==(null==l?void 0:l.length)&&(n=l[1]),n),listItemId:null==e?void 0:e.id,listItemIndex:t,listItemTypeLabel:me(null==e?void 0:e.displayName),isItemChecked:M.includes(e),showSecondaryActions:!1,"data-testid":"user-mgt-update-groups-modal-unselected-groups"});var n,r,l}))))),c.createElement(v.Z.Actions,null,c.createElement(h.Z,null,c.createElement(h.Z.Row,{columns:2},c.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(i.Qj,{"data-testid":"user-mgt-update-groups-modal-cancel-button",floated:"left",onClick:ce},a("common:cancel"))),c.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(i.KM,{"data-testid":"user-mgt-update-groups-modal-save-button",floated:"right",loading:te,disabled:te,onClick:function(){return function(e,n){var l=[];n.map((function(e){l.push(e.id)}));var s={Operations:[],schemas:["urn:ietf:params:scim:api:messages:2.0:BulkRequest"]},i={data:{Operations:[{op:"remove",path:"members[display eq "+e.userName+"]"}]},method:"PATCH"},u={data:{Operations:[{op:"add",value:{members:[{display:e.userName,value:e.id}]}}]},method:"PATCH"},c=[],d=[],m=[];$&&(m=j($.values())),(null==l?void 0:l.length)>0&&l.map((function(e){var t;null!==(t=m)&&void 0!==t&&t.includes(e)&&m.splice(m.indexOf(e),1)})),m&&m.length>0&&(m.map((function(e){i=I(I({},i),{path:"/Groups/"+e}),c.push(i)})),c.map((function(e){s.Operations.push(e)}))),l&&(null==l?void 0:l.length)>0&&(l.map((function(e){le.find((function(t){return t.id===e}))||(u=I(I({},u),{path:"/Groups/"+e}),d.push(u))})),d.map((function(e){s.Operations.push(e)}))),ne(!0),(0,O.fU)(s).then((function(){t({description:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.success.description"),level:o.QU.SUCCESS,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.success.message")}),ce(),r(e.id)})).catch((function(e){var n,r,l,s,i,u;404!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null!=e&&e.response&&null!=e&&null!==(r=e.response)&&void 0!==r&&r.data&&null!=e&&null!==(l=e.response)&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&s.description?t({description:null===(i=e.response)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.description,level:o.QU.ERROR,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.error.message")}):t({description:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.genericError.description"),level:o.QU.ERROR,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.genericError.message")}))})).finally((function(){ne(!1)}))}(n,M)}},a("common:save"))))))))},k=n(20708),x=n(65761),H=n(62132),z=n.n(H),G=n(27899),F=n.n(G),X=n(76569),$=n.n(X),J=n(34753),D=n.n(J),Q=n(93598),V=n.n(Q),_=n(46244),B=n.n(_),Y=n(87182),q=n.n(Y),W={};W.styleTagTransform=B(),W.setAttributes=D(),W.insert=$().bind(null,"head"),W.domAPI=F(),W.insertStyleElement=V();z()(q(),W);q()&&q().locals&&q().locals;function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.user,n=(0,d.$)().t,r=K((0,c.useState)([]),2),l=r[0],a=r[1],o=(0,m.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isGroupAndRoleSeparationEnabled}));(0,c.useEffect)((function(){var e,n,r;(null===(n=r=o&&(null==t||null===(e=t.roles)||void 0===e?void 0:e.length)>0?t.roles:s(null==t?void 0:t.groups))||void 0===n?void 0:n.length)>0&&a(r)}),[t]);var s=function(e){var t=[];return null==e||e.forEach((function(e){var n,r=K(null==e||null===(n=e.display)||void 0===n?void 0:n.split(C.Nd),2),l=r[0],a=r[1];l&&a&&[C.Fn,C.eT].includes(l)&&t.push({$ref:e.$ref,display:a,orgId:void 0,orgName:void 0,value:e.value})})),t};return c.createElement(i.pJ,{padded:"very",className:"list-user-roles-section"},c.createElement(i.X6,{as:"h4"},n("console:manage.features.user.updateUser.roles.editRoles.heading")),c.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},n("console:manage.features.user.updateUser.roles.editRoles.subHeading")),c.createElement(i.v0,{type:"info",content:n("console:manage.features.user.updateUser.roles.editRoles.infoMessage")}),c.createElement(E.Z,{hidden:!0}),c.createElement(x.W,{totalRoleList:l,emptyRolesListPlaceholder:c.createElement(i.$J,{subtitle:[n("console:manage.features.user.updateUser.roles.editRoles.placeholders.emptyPlaceholder.subtitles")],title:n("console:manage.features.user.updateUser.roles.editRoles.placeholders.emptyPlaceholder.title"),image:(0,O.jF)().emptyList,imageSize:"tiny"})}))};te.defaultProps={"data-componentid":"edit-user-roles"};var ne=n(47595),re=n(44738),le=n(11542),ae=n(22829),oe=n(49238);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return s}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e){var t=e.onAlertFired,n=e.user,r=e.handleUserUpdate,l=e.isReadOnly,a=e.isGroupAndRoleSeparationEnabled,s=e.showDomain,u=e.permissionsToHide,Z=e.hideApplicationRoles,A=(0,d.$)().t,w=me((0,c.useState)(!1),2),I=w[0],P=w[1],j=me((0,c.useState)([]),2),L=j[0],T=j[1],M=me((0,c.useState)([]),2),N=M[0],k=M[1],x=me((0,c.useState)([]),2),H=x[0],z=x[1],G=me((0,c.useState)(void 0),2),F=G[0],X=G[1],$=me((0,c.useState)(void 0),2),J=$[0],D=$[1],Q=me((0,c.useState)(!1),2),V=Q[0],_=Q[1],B=me((0,c.useState)(!1),2),Y=B[0],q=B[1],W=me((0,c.useState)(""),2),K=W[0],ee=W[1],te=me((0,c.useState)(!1),2),se=te[0],ie=te[1],ce=me((0,c.useState)(!1),2),pe=ce[0],fe=ce[1],ge=me((0,c.useState)(),2),ve=ge[0],he=ge[1],ye=me((0,c.useState)(!1),2),be=ye[0],Ee=ye[1],Se=me((0,c.useState)(!1),2),Ue=Se[0],Re=Se[1],Oe=me((0,c.useState)([]),2),Ze=Oe[0],Ce=Oe[1],Ae=me((0,c.useState)([]),2),we=Ae[0],Ie=Ae[1],Pe=me((0,c.useState)(!1),2),je=Pe[0],Le=Pe[1],Te=(0,m.v9)((function(e){return e.organization.organization})),Me=(0,c.useMemo)((function(){return ae.F.isSuperOrganization(Te)}),[Te]);(0,c.useEffect)((function(){K&&se&&Qe()}),[se]),(0,c.useEffect)((function(){ve&&be&&fe(!0)}),[be]),(0,c.useEffect)((function(){Ce(we)}),[we]),(0,c.useEffect)((function(){if(n){if(!Z)return Ie(n.roles),xe(),void Ne();Ie(n.roles.filter((function(e){var t,n;return 2!==(null===(t=e.display)||void 0===t?void 0:t.split("/").length)&&"Application"!==(null===(n=e.display)||void 0===n?void 0:n.split("/")[0])}))),xe(),Ne()}}),[n]),(0,c.useEffect)((function(){n&&ke()}),[n.roles&&F]),(0,c.useEffect)((function(){Re(!0),Me?(0,oe.Sd)(null).then((function(e){var t=e.data.Resources;Z&&t&&t instanceof Array&&(e.data.Resources=t.filter((function(e){var t;return(null===(t=e.displayName)||void 0===t||!t.includes(C.Fn))&&e}))),X(e.data.Resources)})).finally((function(){Re(!1)})):(0,le.Sr)(Te.id,null,100,null).then((function(e){var t=e.Resources;Z&&t&&t instanceof Array&&(e.Resources=t.filter((function(e){var t;return(null===(t=e.displayName)||void 0===t||!t.includes(C.Fn))&&e}))),X(e.Resources)})).finally((function(){Re(!1)}))}),[]);var Ne=function(){if(a)Ce(Z?we:null==n?void 0:n.roles);else{var e,t=[];null==n||null===(e=n.groups)||void 0===e||e.map((function(e){var n,r=null==e||null===(n=e.display)||void 0===n?void 0:n.split("/");if((null==r?void 0:r.length)>1&&(r[0]==C.Fn||r[0]==C.eT)){if(Z&&"Application"===e[0]&&2===e.length)return;t.push(e)}})),Ie(t),Ce(t)}},ke=function(){var e=F?de(F):[],t=[];if(e&&J){var n=Array.from(null==J?void 0:J.values());(0,f.Z)(e,(function(e){null!=n&&n.includes(e.id)&&t.push(e)}))}k(t),T(e),z(e),_(e.length===t.length)},xe=function(){var e=new Map;if(a)n.roles&&n.roles instanceof Array&&((0,f.Z)(n.roles,(function(t){var n,r=null==t||null===(n=t.display)||void 0===n?void 0:n.split("/");if((null==r?void 0:r.length)>=1&&null!=t&&t.value){if(Z&&"Application"===r[0]&&2===r.length)return;e.set(null==t?void 0:t.display,null==t?void 0:t.value)}})),D(e));else{var t=new Map;n.groups&&n.groups instanceof Array&&((0,f.Z)(n.groups,(function(e){var n,r=null==e||null===(n=e.display)||void 0===n?void 0:n.split("/");if((null==r?void 0:r.length)>=1){if(Z&&"Application"===e[0]&&2===e.length)return;null==t||t.set(e.display,e.value)}})),D(t))}},He=function(e,n){var l,a=[];n.map((function(e){a.push(e.id)}));var s={Operations:[],failOnErrors:1,schemas:["urn:ietf:params:scim:api:messages:2.0:BulkRequest"]},i={data:{Operations:[{op:"remove",path:"users[value eq "+e.id+"]"}],schemas:["urn:ietf:params:scim:schemas:core:2.0:Role"]},method:"PATCH"},u={data:{Operations:[{op:"add",value:{users:[{value:e.id}]}}],schemas:["urn:ietf:params:scim:schemas:core:2.0:Role"]},method:"PATCH"},c=[],d=[],m=[],p=[];J&&(m=de(J.values())),(null==a?void 0:a.length)>0&&a.map((function(e){var t;null!==(t=m)&&void 0!==t&&t.includes(e)?m.splice(m.indexOf(e),1):p.push(e)})),m&&(null===(l=m)||void 0===l?void 0:l.length)>0&&(m.map((function(e){i=ue(ue({},i),{path:"/Roles/"+e}),c.push(i)})),c.map((function(e){s.Operations.push(e)}))),p&&(null==p?void 0:p.length)>0&&(p.map((function(e){u=ue(ue({},u),{path:"/Roles/"+e}),d.push(u)})),d.map((function(e){s.Operations.push(e)}))),Le(!0),(0,O.fU)(s).then((function(){t({description:A("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.success.description"),level:o.QU.SUCCESS,message:A("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.success.message")}),P(!1),r(e.id)})).catch((function(e){var n,r,l,a,s,i;404!==(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null!=e&&e.response&&null!=e&&null!==(r=e.response)&&void 0!==r&&r.data&&null!=e&&null!==(l=e.response)&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.description?t({description:null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.description,level:o.QU.ERROR,message:A("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.error.message")}):t({description:A("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.genericError.description"),level:o.QU.ERROR,message:A("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.genericError.message")}))})).finally((function(){Le(!1)}))},ze=function(e,t){var n=t.value,r=!1,l=[];if((0,g.Z)(n))T(H);else{var a=new RegExp((0,p.Z)(n),"i");L&&L.map((function(e){r=a.test(e.displayName),!s&&e.displayName.split("/").length>1&&(r=a.test(e.displayName.split("/")[1])),r&&(l.push(e),T(l))}))}},Ge=function(){k(V?[]:L),_(!V)},Fe=function(){ke(),P(!0)},Xe=function(){_(!1),P(!1)},$e=function(e){var t=null==e?void 0:e.split("/");if((null==t?void 0:t.length)>0)return"Application"==t[0]?{labelColor:null,labelText:"Application",name:"application-label"}:{labelColor:null,labelText:"Internal",name:"internal-label"}},Je=function(){fe(!pe),Ee(!1)},De=function(){q(!1),ie(!1)},Qe=function(){q(!0)};return c.createElement(c.Fragment,null,c.createElement(i.X6,{as:"h4"},A("console:manage.features.user.updateUser.roles.editRoles.heading")),c.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},A("console:manage.features.user.updateUser.roles.editRoles.subHeading")),c.createElement(E.Z,{hidden:!0}),c.createElement(h.Z,null,c.createElement(h.Z.Row,null,c.createElement(h.Z.Column,{computer:10,tablet:16,mobile:16},!Ue&&(null==J?void 0:J.size)>0?c.createElement(i.pJ,{clearing:!0,"data-testid":"user-mgt-roles-list",className:"user-role-edit-header-segment"},c.createElement(h.Z.Row,null,c.createElement(h.Z.Column,null,c.createElement(S.Z,{"data-testid":"user-mgt-roles-list-search-input",icon:c.createElement(U.Z,{name:"search"}),onChange:function(e,t){var n=t.value,r=!1,l=[];if((0,g.Z)(n))Ce(we);else{var a=new RegExp((0,p.Z)(n),"i");Ze&&(null==Ze||Ze.map((function(e){var t,n=null==e||null===(t=e.display)||void 0===t?void 0:t.split("/");(null==n?void 0:n.length)>=1&&(r=a.test(e.display),!s&&(null==n?void 0:n.length)>1&&(r=a.test(n[1])),r&&(l.push(e),Ce(l)))})))}},placeholder:A("console:manage.features.user.updateUser.roles.editRoles.searchPlaceholder"),floated:"left",size:"small"}),!l&&c.createElement(R.Z,{"data-testid":"user-mgt-roles-list-update-button",size:"medium",icon:"pencil",floated:"right",onClick:Fe}))),c.createElement(h.Z.Row,null,c.createElement(y.Z,{singleLine:!0,compact:!0},c.createElement(y.Z.Header,null,c.createElement(y.Z.Row,null,s&&c.createElement(y.Z.HeaderCell,null,c.createElement("strong",null,A("console:manage.features.user.updateUser.roles.editRoles.roleList.headers.0"))),c.createElement(y.Z.HeaderCell,null,c.createElement("strong",null,A("console:manage.features.user.updateUser.roles.editRoles.roleList.headers.1"))),c.createElement(y.Z.HeaderCell,null))),c.createElement(y.Z.Body,null,null==Ze?void 0:Ze.map((function(e,t){var n,r=null==e||null===(n=e.display)||void 0===n?void 0:n.split("/");if((null==r?void 0:r.length)>=1&&null!=e&&e.value)return c.createElement(y.Z.Row,{key:t},s&&("Application"==r[0]?c.createElement(y.Z.Cell,null,c.createElement(b.Z,{className:"application-label"},C.Fn)):c.createElement(y.Z.Cell,null,c.createElement(b.Z,{className:"internal-label"},C.eT))),c.createElement(y.Z.Cell,{width:8},1==(null==r?void 0:r.length)?r[0]:r[1]),c.createElement(y.Z.Cell,{textAlign:"right"},c.createElement(i.GI,{content:"View permissions",position:"top right",trigger:c.createElement(U.Z,{"data-testid":"user-mgt-roles-list-\n                                                                                        ".concat(r[1],"-\n                                                                                        permissions-button"),color:"grey",className:"mr-2",name:"key",onClick:function(){return function(e){ee(e),ie(!0)}(e.value)}})})))})))))):0===(null==J?void 0:J.size)?c.createElement(i.pJ,null,c.createElement(i.$J,{"data-testid":"user-mgt-user-empty-roles-list",title:A("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.title"),subtitle:[A("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.0"),A("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.1"),A("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.2")],action:!l&&c.createElement(i.KM,{"data-testid":"user-mgt-user-empty-roles-list-assign-group-button",onClick:Fe},c.createElement(U.Z,{name:"plus"}),"Assign Role"),image:(0,O.jF)().emptyList,imageSize:"tiny"})):c.createElement(i.pO,null))),c.createElement(ne.r,{"data-testid":"user-mgt-roles-list-roles-permission-modal",openRolePermissionModal:Y,handleCloseRolePermissionModal:De,roleId:K,permissionsToHide:u}),c.createElement(v.Z,{"data-testid":"user-mgt-update-roles-modal",open:I,size:"small",className:"user-roles"},c.createElement(v.Z.Header,null,A("console:manage.features.user.updateUser.roles.addRolesModal.heading"),c.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},A("console:manage.features.user.updateUser.roles.addRolesModal.subHeading"))),pe?c.createElement(c.Fragment,null,c.createElement(v.Z.Content,null,c.createElement(re.M,{"data-testid":"user-mgt-update-roles-modal-unselected-role-permissions",handleNavigateBack:Je,roleId:ve})),c.createElement(E.Z,{hidden:!0})):c.createElement(v.Z.Content,{image:!0},Ue?c.createElement(i.pO,null):c.createElement(i.IX,{selectionComponent:!0,searchPlaceholder:A("console:manage.features.transferList.searchPlaceholder",{type:"Roles"}),handleUnelectedListSearch:ze,"data-testid":"user-mgt-update-roles-modal"},c.createElement(i.Jv,{isListEmpty:!((null==L?void 0:L.length)>0),listType:"unselected",listHeaders:s?[A("console:manage.features.transferList.list.headers.0"),A("console:manage.features.transferList.list.headers.1"),""]:[A("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:Ge,isHeaderCheckboxChecked:V,emptyPlaceholderContent:A("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"roles"}),"data-testid":"user-mgt-update-roles-modal-unselected-roles-select-all-checkbox",emptyPlaceholderDefaultContent:A("console:manage.features.transferList.list.emptyPlaceholders.default")},null==L?void 0:L.map((function(e,t){var n,r=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");if((null==r?void 0:r.length)>=1)return c.createElement(i.qT,{handleItemChange:function(){return function(e){var t=de(N);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),k(t)):(t.push(e),k(t)),_(t.length===L.length)}(e)},key:t,listItem:(null==r?void 0:r.length)>1?r[1]:r[0],listItemId:e.id,listItemIndex:t,listItemTypeLabel:s?$e(null==e?void 0:e.displayName):null,isItemChecked:N.includes(e),showSecondaryActions:!0,handleOpenPermissionModal:function(){return function(e){he(e),Ee(!0)}(e.id)},"data-testid":"user-mgt-update-roles-modal-unselected-roles"})}))))),c.createElement(v.Z.Actions,null,c.createElement(h.Z,null,c.createElement(h.Z.Row,{column:2},c.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(i.Qj,{"data-testid":"user-mgt-update-roles-modal-cancel-button",floated:"left",onClick:Xe},A("common:cancel"))),c.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(i.KM,{"data-testid":"user-mgt-update-roles-modal-save-button",floated:"right",loading:je,disabled:je,onClick:function(){return He(n,N)}},A("common:save")))))))))};ge.defaultProps={hideApplicationRoles:!1,showDomain:!0};var ve=n(18103),he=n(67680),ye=n(80617),be=n(26187),Ee=n(96627),Se=n(89423),Ue=n(10758);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(e){var t,n=e.user,p=e.handleUserUpdate,f=e.featureConfig,g=e.readOnlyUserStores,v=e.connectorProperties,h=e.isLoading,y=e.isReadOnlyUserStoresLoading,b=(0,d.$)().t,E=(0,Ue.Z)(),S=E.activeTab,U=E.updateActiveTab,R=(0,m.I0)(),O=(0,Ee.z)().isSuperOrganization,Z=(0,r.Z)().UIConfig,C=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),A=(0,m.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isGroupAndRoleSeparationEnabled})),w=null==Z||null===(t=Z.legacyMode)||void 0===t?void 0:t.rolesV1,I=Re((0,c.useState)(!1),2),P=I[0],j=I[1],L=Re((0,c.useState)(!1),2),T=L[0],M=L[1],x=Re((0,c.useState)(!1),2),H=x[0],z=x[1],G=Re((0,c.useState)(!1),2),F=G[0],X=G[1],$=Re((0,c.useState)(!1),2),J=$[0],D=$[1],Q=Re((0,c.useState)(n),2),V=Q[0],_=Q[1],B=Re((0,c.useState)(null),2),Y=B[0],q=B[1],W=Re((0,c.useState)(!1),2),K=W[0],ee=W[1],ne=Re((0,c.useState)(!1),2),re=ne[0],le=ne[1];(0,c.useEffect)((function(){n&&!(0,u.Z)(V,n)&&_(n)}),[n]),(0,c.useEffect)((function(){var e,t,n,r,o,s=(null==V||null===(e=V.userName)||void 0===e?void 0:e.split("/").length)>1?null==V||null===(t=V.userName)||void 0===t?void 0:t.split("/")[0]:l.ss.PRIMARY_USER_STORE;(!(0,a.cr)(null==f?void 0:f.users,Se._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=g&&g.includes(null==s?void 0:s.toString())||!(0,a.hasRequiredScopes)(null==f?void 0:f.users,null==f||null===(n=f.users)||void 0===n||null===(r=n.scopes)||void 0===r?void 0:r.update,C)||null!==(o=V[he.SCIMConfigs.scim.enterpriseSchema])&&void 0!==o&&o.userSourceId)&&j(!0)}),[V,g]),(0,c.useEffect)((function(){O()&&oe()}),[V]),(0,c.useEffect)((function(){var e;null!==(e=V[he.SCIMConfigs.scim.enterpriseSchema])&&void 0!==e&&e.managedOrg&&(ee(!0),le(!0))}),[V]);var ae=function(e){R((0,s.V_)(e))},oe=function(){X(!0),(0,ye.Un)().then((function(e){var t=be.h.getState().profile.profileInfo.userName,n=null==e?void 0:e.realmConfig.adminUser;q(n),t===n&&M(!0),(null==V?void 0:V.userName)===n&&z(!0)})).catch((function(e){D(!0),e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?R((0,s.V_)({description:e.response.data.description||e.response.data.detail,level:o.QU.ERROR,message:b("console:manage.features.users.userSessions.notifications.getAdminUser.error.message")})):R((0,s.V_)({description:b("console:manage.features.users.userSessions.notifications.getAdminUser.genericError.description"),level:o.QU.ERROR,message:b("console:manage.features.users.userSessions.notifications.getAdminUser.genericError.message")}))})).finally((function(){X(!1)}))};return c.createElement(i.M$,{activeIndex:S,isLoading:h,onTabChange:function(e,t){U(t.activeIndex)},panes:[{menuItem:b("console:manage.features.users.editUser.tab.menuItems.0"),render:function(){return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(k.I,{adminUsername:Y,onAlertFired:ae,user:V,handleUserUpdate:p,isReadOnly:P||re,connectorProperties:v,isReadOnlyUserStoresLoading:y,isUserManagedByParentOrg:K,adminUserType:Se.lu.INTERNAL}))}},{menuItem:b("console:manage.features.users.editUser.tab.menuItems.1"),render:function(){return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(N,{onAlertFired:ae,user:V,handleUserUpdate:p,isReadOnly:P}))}},O&&w?{menuItem:b("console:manage.features.users.editUser.tab.menuItems.2"),render:function(){return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(ge,{isGroupAndRoleSeparationEnabled:A,onAlertFired:ae,user:V,handleUserUpdate:p,isReadOnly:P}))}}:null,O&&!w?{menuItem:b("console:manage.features.users.editUser.tab.menuItems.2"),render:function(){return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(te,{user:V}))}}:null,O&&{menuItem:b("console:manage.features.users.editUser.tab.menuItems.3"),render:function(){return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(ve.Y,{user:V,showSessionTerminationButton:!F&&!J&&(H&&T||!H&&T||!H&&!T)}))}}]})}},89469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=(0,n(52983).createContext)(null);r.displayName="UserManagementContext";const l=r},10758:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(52983),l=n(89469);const a=function(){var e=(0,r.useContext)(l.Z);if(!e)throw new Error("useUserManagement must be used within a UserManagementProvider");return e}},58413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(52983),l=n(89469);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,s=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s=function(e){var t=e.children,n=a((0,r.useState)(0),2),o=n[0],s=n[1];return r.createElement(l.Z.Provider,{value:{activeTab:o,updateActiveTab:s}},t)}},87182:e=>{e.exports=[[e.id,".list-user-roles-section .ui.table thead th{background:rgba(0,0,0,0)}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItcm9sZXMtbGlzdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDRDQUE0Qyx3QkFBd0IiLCJmaWxlIjoidXNlci1yb2xlcy1saXN0LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGlzdC11c2VyLXJvbGVzLXNlY3Rpb24gLnVpLnRhYmxlIHRoZWFkIHRoe2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwKX0iXX0= */","",""]]}}]);