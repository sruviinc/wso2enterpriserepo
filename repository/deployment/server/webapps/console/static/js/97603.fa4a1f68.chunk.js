"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[97603,39388,33009,90955,20530,3107],{33009:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappingsComponent:()=>E});var r=n(13318),a=n(81816),s=n(52983),i=n(9202),l=n(39990),o=n(48684),u=n(94635),c=n(97860),m=n(86957),d=n(53830),p=n(85585);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,l=[],o=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.triggerSubmit,n=e.handleAttributeMappingsSubmit,g=e.mandatoryAttributes,E=e.isAttributesListRequestLoading,S=e["data-testid"],y=f((0,s.useState)([]),2),b=y[0],h=y[1],v=f((0,s.useState)([]),2),R=v[0],U=v[1],A=f((0,s.useState)(""),2),T=A[0],M=A[1],x=(0,i.$)().t,C=(0,p.W)().data;return(0,s.useEffect)((function(){var e;C&&M("false"===(null===(e=(0,d.t$)(C))||void 0===e?void 0:e.enableValidator)?x("extensions:manage.features.userStores.create.pageLayout.steps.attributeMappings.emailUsername"):x("extensions:manage.features.userStores.create.pageLayout.steps.attributeMappings.alphanumericUsername"))}),[C]),(0,s.useEffect)((function(){if(g){var e=g.filter((function(e){return e.claimURI===m.Q.USER_NAME_CLAIM_URI})),t=g.filter((function(e){return e.claimURI!==m.Q.USER_NAME_CLAIM_URI}));h(e),U(t)}}),[g]),s.createElement(r.Es,{submitState:t,onSubmit:function(e){n(e)}},s.createElement(o.Z,{className:"attribute-mapping-section",padded:"very"},E?s.createElement(a.pO,null):s.createElement(u.Z,{width:10},null==b?void 0:b.map((function(e,t){return s.createElement(u.Z.Row,{key:t,columns:2},s.createElement(u.Z.Column,{width:8},s.createElement(c.Z.Content,null,null==e?void 0:e.displayName,s.createElement(a.xv,{display:"inline",styles:{color:"red"}}," *"),s.createElement(c.Z.Subheader,null,s.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),s.createElement(u.Z.Column,{width:8},s.createElement(r.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:"This field cannot be empty as email is the primary identifier of the user",type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(S,"-user-store-name-input"),width:14}),s.createElement(a.kW,null,s.createElement(l.c,{i18nKey:"extensions:manage.features.userStores.create.pageLayout.steps.attributeMappings.usernameHint",tOptions:{usernameType:T}},"The mapped attribute for username should be ",s.createElement("strong",null,"unique ")," and be of",s.createElement("strong",null," type ",T),". This field cannot be empty as username is the primary identifier of the user."))))})),null==R?void 0:R.map((function(e,t){return s.createElement(u.Z.Row,{key:t,columns:2},s.createElement(u.Z.Column,{width:8},s.createElement(c.Z.Content,null,null==e?void 0:e.displayName,s.createElement(a.xv,{display:"inline",styles:{color:"red"}}," *"),s.createElement(c.Z.Subheader,null,s.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),s.createElement(u.Z.Column,{width:8},s.createElement(r.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:"This field cannot be empty.",type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(S,"-user-store-name-input"),width:14}),s.createElement(a.kW,null,"The mapped attribute for user ID should be ",s.createElement("strong",null,"unique"),".")))})))))}},90955:(e,t,n)=>{n.r(t),n.d(t,{GeneralUserStoreDetails:()=>c});var r=n(83374),a=n(13318),s=n(67127),i=n(52983),l=n(9202),o=n(94635),u=n(2540),c=function(e){var t=e.triggerSubmit,n=e.featureConfig,c=e.handleBasicDetailsSubmit,m=e.userStoreType,d=e.handleUserStoreAccessTypeChange,p=e.handleUserStoreTypeChange,f=e.setUserStoreNameValid,g=e["data-testid"],E=(0,l.$)().t,S=[{"data-testid":"".concat(g,"-create-user-store-form-user-store-ldap-option-radio-button"),label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.userStoreType.types.ldap.label"),value:u.RemoteUserStoreTypes.LDAP},{"data-testid":"".concat(g,"-create-user-store-form-user-store-ad-option-radio-button"),label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.userStoreType.types.ad.label"),value:u.RemoteUserStoreTypes.ActiveDirectory}],y=[{"data-componentid":"".concat(g,"-create-user-store-form-access-type-read-only-option-radio-button"),hint:{content:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readOnly.hint")},label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readOnly.label"),value:u.RemoteUserStoreAccessTypes.ReadOnly},{"data-componentid":"".concat(g,"-create-user-store-form-access-type-read-write-option-radio-button"),hint:{content:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readWrite.hint")},label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.types.readWrite.label"),value:u.RemoteUserStoreAccessTypes.ReadWrite}];return i.createElement(o.Z,null,i.createElement(o.Z.Row,null,i.createElement(o.Z.Column,null,i.createElement(a.Es,{submitState:t,onSubmit:function(e){c(e)}},i.createElement(a.gN,{className:"uppercase",type:"text",name:"name",label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.name.label"),requiredErrorMessage:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.name.requiredErrorMessage"),required:!0,placeholder:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.name.placeholder"),minLength:3,maxLength:50,width:14,"data-testid":"".concat(g,"-user-store-name-input"),hint:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.name.hint"),listen:function(e){f(e.get("name").length>0),e.set("name",e.get("name").toString().toUpperCase())},validation:function(e,t){if(!(0,s.Z)(e)){var n,r=new RegExp("^[^_/]+$"),a=new RegExp("^([^a-zA-Z0-9]+$)"),i=[u.RemoteUserStoreConstants.PRIMARY_USER_STORE_NAME,u.RemoteUserStoreConstants.FEDERATION_USER_STORE_NAME,u.RemoteUserStoreConstants.DEFAULT_USER_STORE_NAME],l=[u.RemoteUserStoreConstants.INTERNAL_USER_STORE_NAME,u.RemoteUserStoreConstants.APPLICATION_USER_STORE_NAME],o=!0;r.test(e)?i.includes(e.trim().toUpperCase())?(o=!1,n=E("extensions:manage.features.userStores.edit.general.form.validations.restrictedNamesErrorMessage",{name:e})):l.includes(e.trim().toUpperCase())?(o=!1,n=E("extensions:manage.features.userStores.edit.general.form.validations.reservedNamesErrorMessage",{name:e})):a.test(e)?(o=!1,n=E("extensions:manage.features.userStores.edit.general.form.validations.allSymbolsErrorMessage")):o=!0:(o=!1,n=E("extensions:manage.features.userStores.edit.general.form.validations.invalidSymbolsErrorMessage")),o||(f(!1),t.isValid=!1,t.errorMessages.push(n))}}}),i.createElement(a.gN,{requiredErrorMessage:null,type:"text",name:"description",label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.description.label"),required:!1,placeholder:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.description.placeholder"),maxLength:300,minLength:3,width:14,"data-testid":"".concat(g,"-user-store-description-textarea")}),i.createElement(a.gN,{type:"radio",label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.userStoreType.label"),name:"userStoreType",default:"createPw",listen:function(e){p(e.get("userStoreType"))},children:S,value:null!=m?m:"LDAP"}),i.createElement(a.gN,{type:"radio",label:E("extensions:manage.features.userStores.create.pageLayout.steps.generalSettings.form.fields.accessType.label"),name:"accessType",default:"createPw",listen:function(e){d(e.get("accessType"))},children:y,value:null!=m?m:"true",tabIndex:3,hidden:!(0,r.cr)(null==n?void 0:n.userStores,u.RemoteUserStoreConstants.FEATURE_DICTIONARY.get("USERSTORES_READ_WRITE_USERSTORES"))})))))};c.defaultProps={"data-testid":"asgardeo-customer-userstore-general-details"}},39388:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappingsComponent:()=>a.AttributeMappingsComponent,GeneralUserStoreDetails:()=>r.GeneralUserStoreDetails});var r=n(90955),a=n(33009)},20530:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>a.AttributeMappings,SetupGuideTab:()=>r.SetupGuideTab,UserStoreGeneralSettings:()=>s.UserStoreGeneralSettings});var r=n(19205),a=n(3107),s=n(10897)},3107:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>R});var r=n(14603),a=n(90268),s=n(13318),i=n(81816),l=n(99759),o=n(52983),u=n(9202),c=n(54221),m=n(75917),d=n(48684),p=n(94635),f=n(97860),g=n(33614),E=n(30640),S=n(40764),y=n(77499),b=n(2540);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,l=[],o=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e){var t,n,v,R,U,A,T,M=e.userStore,x=e.userStoreId,C=e["data-testid"],w=(0,u.$)().t,N=(0,c.I0)(),L=(0,i.fQ)().getLink,_=(0,i.kH)().isMobileViewport,I=(0,c.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.enableIdentityClaims})),Z=h((0,o.useState)(null),2),O=Z[0],D=Z[1],q=h((0,o.useState)(null),2),G=q[0],k=q[1],j=h((0,o.useState)(null),2),P=j[0],$=j[1],V=h((0,o.useState)(!1),2),W=V[0],Q=V[1];(0,o.useEffect)((function(){F(null,null,null,null,!I)}),[]),(0,o.useEffect)((function(){if(O){var e=[];O.map((function(t){t.properties.map((function(n){"USER_CUSTOM_ATTRIBUTE"===n.key&&"TRUE"===n.value&&e.push(t)}))})),$(e),k((0,l.Z)(O,e))}}),[O]);var F=function(e,t,n,s,i){Q(!0);var l={"exclude-identity-claims":i,filter:s||null,limit:e||null,offset:n||null,sort:t||null};(0,g.WN)(l).then((function(e){D((0,E.fS)(e,b.RemoteUserStoreConstants.DISPLAY_NAME_VALUE,!0))})).catch((function(e){var t,n,s,i;N((0,a.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||w("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:r.QU.ERROR,message:(null==e||null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||w("console:manage.features.claims.local.notifications.getClaims.genericError.message")}))})).finally((function(){Q(!1)}))},H=function(e){var t="";return e.attributeMapping.forEach((function(e){(e.userstore===(null==M?void 0:M.name.toUpperCase())||""===t&&e.userstore===b.RemoteUserStoreConstants.PRIMARY_USER_STORE_NAME)&&(t=e.mappedAttribute)})),t},X=function(e){var t=[];e.forEach((function(e,n){t.push({claimURI:n,mappedAttribute:e})})),function(e){(0,S.TU)(x,e).then((function(){N((0,a.V_)({description:w("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:r.QU.SUCCESS,message:w("console:manage.features.userstores.notifications.updateUserstore.success.message")})),N((0,a.V_)({description:w("console:manage.features.userstores.notifications.updateDelay.description"),level:r.QU.WARNING,message:w("console:manage.features.userstores.notifications.updateDelay.message")}))})).catch((function(e){N((0,a.V_)({description:(null==e?void 0:e.description)||w("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:r.QU.ERROR,message:(null==e?void 0:e.message)||w("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))}))}(t)};return o.createElement(o.Fragment,null,W?o.createElement(i.pO,null):o.createElement(i.pJ,{padded:"very"},o.createElement(i.X6,{as:"h3"},"Update Attribute Mappings",o.createElement(i.X6,{subHeading:!0,as:"h6"},w("extensions:manage.features.userStores.edit.attributeMappings.description"),o.createElement(i.eb,{link:L("manage.userStores.attributeMappings.learnMore")},w("extensions:common.learnMore")))),o.createElement(m.Z,{hidden:!0}),o.createElement(s.Es,{onSubmit:function(e){X(e)}},o.createElement(i.X6,{as:"h5"},"Custom Attributes"),o.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},W?o.createElement(i.pO,null):P&&P.length>0?o.createElement(p.Z,{width:10},null==P?void 0:P.map((function(e,t){return o.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},o.createElement(p.Z.Column,{width:6},o.createElement(f.Z.Content,null,null==e?void 0:e.displayName,o.createElement(i.xv,{display:"inline",styles:{color:"red"}},"*"),o.createElement(f.Z.Subheader,null,o.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),o.createElement(p.Z.Column,{width:6},o.createElement(s.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:w("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(C,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:H(e)})))}))):o.createElement(i.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),null!==(t=(null==P?void 0:P.length)>0&&"false"===(null==M||null===(n=M.properties)||void 0===n||null===(v=n.find((function(e){return e.name===y.rr})))||void 0===v?void 0:v.value))&&void 0!==t?t:o.createElement(i.KM,{type:"submit"},w("common:update")),o.createElement(m.Z,{hidden:!0}),o.createElement(m.Z,null),o.createElement(i.X6,{as:"h5"},"Local Attributes"),o.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},W?o.createElement(i.pO,null):G&&G.length>0?o.createElement(p.Z,{width:10},null==G?void 0:G.map((function(e,t){return o.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},o.createElement(p.Z.Column,{width:6},o.createElement(f.Z.Content,null,null==e?void 0:e.displayName,o.createElement(i.xv,{display:"inline",styles:{color:"red"}},"*"),o.createElement(f.Z.Subheader,null,o.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),o.createElement(p.Z.Column,{width:6},o.createElement(s.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:w("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(C,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:H(e)})))}))):o.createElement(i.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),o.createElement(i.GI,{trigger:o.createElement("div",{className:_?"mb-1x mt-1x inline-button button-width":"inline-button"},o.createElement(i.KM,{type:"submit",disabled:!("false"===(null==M||null===(R=M.properties)||void 0===R||null===(U=R.find((function(e){return e.name===y.rr})))||void 0===U?void 0:U.value))},w("common:update"))),content:w("extensions:manage.features.userStores.edit.attributeMappings.disable.buttonDisableHint"),size:"mini",wide:!0,disabled:!("false"!==(null==M||null===(A=M.properties)||void 0===A||null===(T=A.find((function(e){return e.name===y.rr})))||void 0===T?void 0:T.value))}))))}},97603:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>a.AttributeMappings,AttributeMappingsComponent:()=>r.AttributeMappingsComponent,GeneralUserStoreDetails:()=>r.GeneralUserStoreDetails,SetupGuideTab:()=>a.SetupGuideTab,UserStoreGeneralSettings:()=>a.UserStoreGeneralSettings});var r=n(39388),a=n(20530)}}]);