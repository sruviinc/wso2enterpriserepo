"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[27325,32309,44485,54362],{32309:(e,n,t)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l(a.key),a)}}function r(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,n,t){return(n=l(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n=function(e,n){if("object"!==a(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===a(n)?n:String(n)}t.r(n),t.d(n,{UsernameValidationConstants:()=>s});var s=r((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));o(s,"VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS",{MIN_LENGTH:1,MIN_VALUE:0,USERNAME_MAX_LENGTH:2,USERNAME_MAX_VALUE:50,USERNAME_MIN_LENGTH:1,USERNAME_MIN_VALUE:3}),o(s,"VALIDATION_DEFAULT_CONSTANTS",{USERNAME_MAX:"50",USERNAME_MIN:"3"})},44485:(e,n,t)=>{t.r(n),t.d(n,{UsernameTypes:()=>a.UsernameTypes});var a=t(54362)},54362:(e,n,t)=>{var a;t.r(n),t.d(n,{UsernameTypes:()=>a}),function(e){e.EMAIL="emailType",e.ALPHANUMERIC="customType"}(a||(a={}))},27325:(e,n,t)=>{t.r(n),t.d(n,{UsernameValidationEditPage:()=>T,default:()=>y});var a=t(14603),i=t(90268),r=t(59206),o=t(81816),l=t(85585),s=t(52983),c=t(9202),u=t(54221),m=t(16184),d=t(94635),g=t(16782),f=t(30640),p=t(32309),N=t(44485);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){L(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function L(e,n,t){return(n=function(e){var n=function(e,n){if("object"!==A(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!==A(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===A(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,i,r,o,l=[],s=!0,c=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=r.call(t)).done)&&(l.push(a.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return b(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var O="username-validation-form",T=function(e){var n=e["data-componentid"],t=(0,u.I0)(),A=(0,s.useRef)(null),E=(0,c.$)().t,L=v((0,s.useState)(!1),2),b=L[0],T=L[1],y=v((0,s.useState)(void 0),2),_=y[0],h=y[1],S=v((0,s.useState)(!1),2),U=S[0],R=S[1],V=v((0,s.useState)(void 0),2),C=V[0],x=V[1],M=(0,l.W)(),D=M.data,P=M.isLoading,w=M.error,F=M.mutate,j=null==D?void 0:D.filter((function(e){return"password"===e.field}));(0,s.useEffect)((function(){P||D&&G()}),[P]),(0,s.useEffect)((function(){f.m8.location.state===g.jo.APPLICATION_STATE&&R(!0)}),[]),(0,s.useEffect)((function(){if(w)if(w.response&&w.response.data&&w.response.data.description){var e;if(404===w.response.status)return;t((0,i.V_)({description:null!==(e=w.response.data.description)&&void 0!==e?e:E("extensions:manage.accountLogin.notifications.error.description"),level:a.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.error.message")}))}else t((0,i.V_)({description:E("extensions:manage.accountLogin.notifications.genericError.description"),level:a.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.genericError.message")}))}),[w]);var G=function(){var e=null==D?void 0:D.filter((function(e){return"username"===e.field}));if(!((null==e?void 0:e.length)<1)){var n=e[0].rules,t={enableValidator:"true"==k(n,"AlphanumericValidator","enable.validator")||"true"!=k(n,"EmailFormatValidator","enable.validator")?"true":"false",field:"username",isAlphanumericOnly:"true"!==k(n,"AlphanumericValidator","enable.special.characters"),maxLength:k(n,"LengthValidator","max.length")?k(n,"LengthValidator","max.length"):p.UsernameValidationConstants.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MAX,minLength:k(n,"LengthValidator","min.length")?k(n,"LengthValidator","min.length"):p.UsernameValidationConstants.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MIN,type:"rules"};h(t),x(t)}},k=function(e,n,t){var a=null==e?void 0:e.filter((function(e){return e.validator===n}));if((null==a?void 0:a.length)>0){var i,r=a[0].properties;if((null===(i=r=r.filter((function(e){return e.key===t})))||void 0===i?void 0:i.length)>0)return r[0].value}return null},H=function(e){(function(e){var n=!1,r="";return Number(e.minLength)<3?(n=!0,r=E("extensions:manage.accountLogin.validationError.minLimitError")):Number(e.maxLength)>50?(n=!0,r=E("extensions:manage.accountLogin.validationError.maxLimitError")):Number(e.minLength)>Number(e.maxLength)&&(n=!0,r=E("extensions:manage.accountLogin.validationError.minMaxMismatch")),!n||(t((0,i.V_)({description:r,level:a.QU.ERROR,message:E("extensions:manage.accountLogin.validationError.wrongCombination")})),!1)})(e)&&(T(!0),(0,l.s)(e,j[0],null).then((function(){F(),t((0,i.V_)({description:E("extensions:manage.accountLogin.notifications.success.description"),level:a.QU.SUCCESS,message:E("console:manage.features.validation.notifications.success.message")}))})).catch((function(e){var n,r,o,l,s,c,u,m,d,g,f;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.description?t((0,i.V_)({description:null!==(o=null!==(l=null==e||null===(s=e.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.description)&&void 0!==l?l:null==e||null===(u=e.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.detail)&&void 0!==o?o:E("extensions:manage.accountLogin.notifications.error.description"),level:a.QU.ERROR,message:null!==(d=null==e||null===(g=e.response)||void 0===g||null===(f=g.data)||void 0===f?void 0:f.message)&&void 0!==d?d:E("extensions:manage.accountLogin.notifications.error.message")})):t((0,i.V_)({description:E("extensions:manage.accountLogin.notifications.genericError.description"),level:a.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.genericError.message")}))})).finally((function(){T(!1)})))};return s.createElement(o.Xg,{pageTitle:E("extensions:manage.accountLogin.editPage.pageTitle"),title:s.createElement(s.Fragment,null,E("extensions:manage.accountLogin.editPage.pageTitle")),description:s.createElement(s.Fragment,null,E("extensions:manage.accountLogin.editPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){U?f.m8.push(f.$x.getPaths().get("APPLICATIONS")):f.m8.push(f.$x.getPaths().get("LOGIN_AND_REGISTRATION"))},text:E(U?"extensions:manage.accountLogin.goBackToApplication":"console:manage.features.governanceConnectors.goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},s.createElement(m.R,{innerRef:A},s.createElement(d.Z,{className:"mt-3"},s.createElement(d.Z.Row,{columns:1},s.createElement(d.Z.Column,{width:16},s.createElement(o.pJ,{className:"form-wrapper",padded:"very"},_&&C?s.createElement("div",{className:"validation-configurations password-validation-configurations"},s.createElement(r.l0,{id:O,initialValues:_,uncontrolledForm:!0,validate:null,onSubmit:function(e){return H(e)}},s.createElement("div",null,s.createElement(o.xv,null,E("extensions:manage.accountLogin.editPage.usernameType")),s.createElement(o.kW,{compact:!0},E("extensions:manage.accountLogin.editPage.usernameTypeHint"))),s.createElement("div",null,Object.keys(N.UsernameTypes).map((function(e,t){var a=N.UsernameTypes[e];return s.createElement(r.gN.Radio,{key:t,ariaLabel:"".concat(a," layout swatch"),name:"enableValidator",label:E("extensions:manage.accountLogin.editPage."+a),required:!1,value:"customType"==a?"true":"false","data-componentid":"".concat(n,"-").concat(a,"-radio"),listen:function(){x(I(I({},C),{},{enableValidator:"customType"==a?"true":"false"}))}})}))),"true"==(null==C?void 0:C.enableValidator)&&s.createElement("div",{className:"ml-6"},s.createElement("div",{className:"criteria-username"},s.createElement(o.xv,null,E("extensions:manage.accountLogin.editPage.usernameLength.0")),s.createElement(r.gN.Input,{ariaLabel:"minLength",inputType:"number",name:"minLength",min:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"min",maxLength:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,minLength:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return E("common:minValidation",{min:a});var i=n.maxLength?parseInt(n.maxLength):p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?E("common:maxValidation",{max:i}):void 0},listen:function(e){x(I(I({},C),{},{minLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-min-length")}),s.createElement("label",null,E("extensions:manage.accountLogin.editPage.usernameLength.1")),s.createElement(r.gN.Input,{ariaLabel:"maxLength",inputType:"number",name:"maxLength",min:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"max",maxLength:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,labelPosition:"top",minLength:p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=n.minLength?parseInt(n.minLength):p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return E("common:minValidation",{min:a});var i=p.UsernameValidationConstants.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?E("common:maxValidation",{max:i}):void 0},listen:function(e){x(I(I({},C),{},{maxLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-max-length")}),s.createElement("label",null,E("extensions:manage.accountLogin.editPage.usernameLength.2"))),s.createElement(r.gN.Checkbox,{ariaLabel:"isAlphanumericOnly",name:"isAlphanumericOnly",label:E("extensions:manage.accountLogin.editPage.usernameAlphanumeric"),tabIndex:3,hint:C.isAlphanumericOnly?void 0:E("extensions:manage.accountLogin.editPage.usernameSpecialCharsHint"),listen:function(e){return h(I(I({},C),{},{isAlphanumericOnly:e}))},width:16,defaultValue:_,"data-componentid":"".concat(n,"-is-alphanumeric-only")})),s.createElement(r.gN.Button,{form:O,size:"small",buttonType:"primary_btn",ariaLabel:"Self registration update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:null,loading:b,label:E("common:update"),hidden:null}))):s.createElement(o.pO,null)))))))};T.defaultProps={"data-componentid":"username-validation-edit-page"};const y=T}}]);