"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[15576,41008],{41008:(e,t,n)=>{n.r(t),n.d(t,{createAPIResource:()=>R,deleteAPIResource:()=>f,getAPIResourcePermissions:()=>m,getAPIResourcesForIdenitifierValidation:()=>d,updateAPIResource:()=>g,useAPIResourceDetails:()=>p,useAPIResources:()=>u});var o=n(93967),a=n(57477),r=n(14603),i=n(43991),s=n(26187),c=n(55379),l=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),d=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{filter:e},url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR)};return l(t).then((function(e){if(200===e.status)return Promise.resolve(e.data);throw new a.u(e.data.description,null,e.status,e.request,e,e.config)})).catch((function(e){var t,n;throw new a.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},u=function(e,t,n){var o={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{after:e,before:t,filter:n},url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR)},a=(0,i.Z)(o),l=a.data,d=a.error;return{data:l,error:d,isLoading:!d&&!l,isValidating:a.isValidating,mutate:a.mutate}},p=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR,"/").concat(e)},n=(0,i.Z)(e?t:null),o=n.data,a=n.error;return{data:o,error:a,isLoading:!a&&!o,isValidating:n.isValidating,mutate:n.mutate}},m=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{filter:e},url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/permissions")};return l(t).then((function(e){if(200===e.status)return Promise.resolve(e.data);throw new a.u(e.data.description,null,e.status,e.request,e,e.config)})).catch((function(e){var t,n;throw new a.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},f=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.DELETE,url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR,"/")+"".concat(e)};return l(t).then((function(e){if(204!==e.status)throw new a.u(e.data.description,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n;throw new a.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},g=function(e,t){var n={data:t,method:r.f2.PATCH,url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR,"/").concat(e)};return l(n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){var t,n;throw new a.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},R=function(e){var t={data:e,method:r.f2.POST,url:"".concat(s.h.getState().config.endpoints.authzEndpoint,"/").concat(c.APIResourcesConstants.API_RESOURCE_DIR)};return l(t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){var t,n;throw new a.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}},15576:(e,t,n)=>{n.r(t),n.d(t,{GeneralAPIResource:()=>E});var o=n(31092),a=n(7955),r=n(14603),i=n(90268),s=n(59206),c=n(81816),l=n(52983),d=n(9202),u=n(39990),p=n(54221),m=n(2653),f=n(30640),g=n(41008),R=n(56254);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A="apiResource-general-details",E=function(e){var t=e.isReadOnly,n=e.isManagedByChoreo,v=e.isSubmitting,E=e.handleUpdateAPIResource,I=e.apiResourceData,P=e.isAPIResourceDataLoading,y=e["data-componentid"],b=(0,d.$)().t,C=(0,p.I0)(),S=h((0,l.useState)(!0),2),_=S[0],w=S[1],O=h((0,l.useState)(!1),2),x=O[0],U=O[1],T=h((0,l.useState)(!1),2),D=T[0],N=T[1],k=h((0,l.useState)(void 0),2),V=k[0],j=k[1];return P?l.createElement(c.pO,{dimmer:!0}):l.createElement(l.Fragment,null,n&&l.createElement(o.Z,{severity:"warning"},l.createElement(u.c,{i18nKey:"extensions:develop.apiResource.tabs.choreoApiEditWarning"},"Updating this API resource will create unforeseen errors as this is an API resource managed by Choreo. ",l.createElement("b",null,"Proceed with caution."))),l.createElement(c.pJ,{padded:"very"},l.createElement(s.l0,{"data-testid":"".concat(y,"-form"),onSubmit:function(e){var t;E({displayName:null===(t=e.displayName)||void 0===t?void 0:t.toString().trim()})},id:A,validate:function(e){var t,n={displayName:void 0};return null!==(t=e.displayName)&&void 0!==t&&t.toString().trim()?w(!1):(n.displayName=b("extensions:develop.apiResource.tabs.general.form.fields.name.emptyValidate"),w(!0)),n},uncontrolledForm:!1},I.displayName&&l.createElement(s.gN.Input,{ariaLabel:"Site title input field",inputType:"name",name:"displayName",label:b("extensions:develop.apiResource.tabs.general.form.fields.name.label"),placeholder:b("extensions:develop.apiResource.tabs.general.form.fields.name.placeholder"),readOnly:t,required:!0,initialValue:I.displayName,maxLength:100,minLength:0,width:16,"data-componentid":"".concat(y,"-general-form-displayName")}),I.identifier&&l.createElement(s.gN.Input,{ariaLabel:"Site title input field",inputType:"url",name:"identifier",label:b("extensions:develop.apiResource.tabs.general.form.fields.identifier.label"),readOnly:!0,required:!0,maxLength:100,minLength:0,width:16,"data-componentid":"".concat(y,"-general-form-identifier")},l.createElement(c.OR,{value:I.identifier})),l.createElement(s.gN.Button,{form:A,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button",hidden:t,disabled:v||_,loading:v,"data-componentid":"".concat(y,"-submit-button"),label:b("extensions:develop.apiResource.tabs.general.form.updateButton")}))),l.createElement(l.Fragment,null,!t&&l.createElement(a.di,{when:m.T.API_RESOURCES_DELETE},l.createElement(c.v9,{sectionHeader:b("extensions:develop.apiResource.tabs.general.dangerZoneGroup.header")},l.createElement(c.cN,{"data-testid":"".concat(y,"-danger-zone"),actionTitle:b("extensions:develop.apiResource.tabs.general.dangerZoneGroup.deleteApiResource.button"),header:b("extensions:develop.apiResource.tabs.general.dangerZoneGroup.deleteApiResource.header"),subheader:b("extensions:develop.apiResource.tabs.general.dangerZoneGroup.deleteApiResource.subHeading"),onActionClick:function(){N(!0),j(I)},isButtonDisabled:!1})))),V&&l.createElement(c.cV,{primaryActionLoading:x,onClose:function(){return N(!1)},type:"negative",open:D,assertionHint:b("extensions:develop.apiResource.confirmations.deleteAPIResource.assertionHint"),assertionType:"checkbox",primaryAction:b("common:confirm"),secondaryAction:b("common:cancel"),onSecondaryActionClick:function(){N(!1)},onPrimaryActionClick:function(){return e=V.id,U(!0),void(0,g.deleteAPIResource)(e).then((function(){C((0,i.V_)({description:b("extensions:develop.apiResource.notifications.deleteAPIResource.success.description"),level:r.QU.SUCCESS,message:b("extensions:develop.apiResource.notifications.deleteAPIResource.success.message")})),N(!1),f.m8.push(R.APIResourcesConstants.getPaths().get("API_RESOURCES"))})).catch((function(e){switch(null==e?void 0:e.code){case R.APIResourcesConstants.UNAUTHORIZED_ACCESS:C((0,i.V_)({description:b("extensions:develop.apiResource.notifications.deleteAPIResource.unauthorizedError.description"),level:r.QU.ERROR,message:b("extensions:develop.apiResource.notifications.deleteAPIResource.unauthorizedError.message")}));break;case R.APIResourcesConstants.NO_VALID_API_RESOURCE_ID_FOUND:case R.APIResourcesConstants.API_RESOURCE_NOT_FOUND:C((0,i.V_)({description:b("extensions:develop.apiResource.notifications.deleteAPIResource.notFoundError.description"),level:r.QU.ERROR,message:b("extensions:develop.apiResource.notifications.deleteAPIResource.notFoundError.message")}));break;default:C((0,i.V_)({description:b("extensions:develop.apiResource.notifications.deleteAPIResource.genericError.description"),level:r.QU.ERROR,message:b("extensions:develop.apiResource.notifications.deleteAPIResource.genericError.message")}))}})).finally((function(){U(!1),j(void 0)}));var e},"data-testid":"".concat(y,"-delete-confirmation-modal"),closeOnDimmerClick:!1},l.createElement(c.cV.Header,{"data-testid":"".concat(y,"-delete-confirmation-modal-header")},b("extensions:develop.apiResource.confirmations.deleteAPIResource.header")),l.createElement(c.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(y,"-delete-confirmation-modal-message")},b("extensions:develop.apiResource.confirmations.deleteAPIResource.message")),l.createElement(c.cV.Content,{"data-testid":"".concat(y,"-delete-confirmation-modal-content")},b("extensions:develop.apiResource.confirmations.deleteAPIResource.content"))))};E.defaultProps={"data-componentid":"general-api-resource"}}}]);