/*! For license information please see 37340.a5560f7d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[37340],{37340:(e,t,n)=>{n.d(t,{y:()=>ge});var o=n(7955),i=n(90009),r=n(83374),a=n(14603),l=n(90268),s=n(13318),c=n(81816),u=n(46440),d=n(17),p=n(67127),f=n(62170),m=n(24730),v=n(5043),h=n(52983),g=n(9202),b=n(54221),E=n(35277),y=n(94635),A=n(43554),S=n(75917),L=n(21228),C=n(37940),w=n(20656),R=n(61537),I=n(91478),O=n(2653),T=n(32982),P=n(30640),U=n(29082),_=n(5163),N=n(96627),k=n(50593),M=n(61133),x=n(18606),D=n(16782),j=n(61375),Z=n(41780),z=n(23865),H=n(87089),F=n(22806),V=n(12735),W=n(39345),B=n(21921),q=n(48684),Q=n(73157),G=n(80119),$=n(11542);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}var Y,K=["applicationId","clientId","onApplicationSharingCompleted","onClose","data-componentid"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(this,arguments)}function ee(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(){te=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof g?t:g,a=Object.create(r.prototype),l=new P(o||[]);return i(a,"_invoke",{value:R(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",v="completed",h={};function g(){}function b(){}function E(){}var y={};c(y,a,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(U([])));S&&S!==n&&o.call(S,a)&&(y=S);var L=E.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,a,l){var s=d(e[i],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==X(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,i){n(e,o,t,i)}))}return r=r?r.then(i,i):i()}})}function R(t,n,o){var i=p;return function(r,a){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===r)throw a;return{value:e,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var s=I(l,o);if(s){if(s===h)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===p)throw i=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=m;var c=d(t,n,o);if("normal"===c.type){if(i=o.done?v:f,c.arg===h)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=v,o.method="throw",o.arg=c.arg)}}}function I(t,n){var o=n.method,i=t.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var r=d(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var a=r.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function U(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(X(t)+" is not iterable")}return b.prototype=E,i(L,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=c(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,s,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var a=new w(u(e,n,o,i),r);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(L),c(L,s,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=U,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return l.type="throw",l.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:U(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),h}},t}function ne(e,t,n,o,i,r,a){try{var l=e[r](a),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(o,i)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){ne(r,o,i,a,l,"next",e)}function l(e){ne(r,o,i,a,l,"throw",e)}a(void 0)}))}}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function le(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){e[e.SHARE_ALL=0]="SHARE_ALL",e[e.SHARE_SELECTED=1]="SHARE_SELECTED",e[e.UNSHARE=2]="UNSHARE"}(Y||(Y={}));var se=function(e){var t=e.applicationId,n=e.clientId,o=e.onApplicationSharingCompleted,i=e.onClose,r=e["data-componentid"],s=le(e,K),u=(0,b.I0)(),d=(0,g.$)().t,f=(0,b.v9)((function(e){return e.organization.organization})),m=ie((0,h.useState)([]),2),v=m[0],E=m[1],y=ie((0,h.useState)([]),2),A=y[0],L=y[1],C=ie((0,h.useState)(Y.SHARE_ALL),2),w=C[0],R=C[1],I=ie((0,h.useState)([]),2),O=I[0],T=I[1],U=ie((0,h.useState)([]),2),_=U[0],N=U[1],k=ie((0,h.useState)(),2),M=k[0],x=k[1],D=P.lD.getInstance();(0,h.useEffect)((function(){return E(O||[])}),[O]),(0,h.useEffect)((function(){return L(_||[])}),[_]),(0,h.useEffect)((function(){open&&isOrganizationManagementEnabled&&((0,$.jX)(null,null,null,null,!0,!1).then((function(e){T(e.organizations)})).catch((function(e){null!=e&&e.description?u((0,l.V_)({description:e.description,level:a.QU.ERROR,message:d("console:manage.features.organizations.notifications.getOrganizationList.error.message")})):u((0,l.V_)({description:d("console:manage.features.organizations.notifications.getOrganizationList.genericError.description"),level:a.QU.ERROR,message:d("console:manage.features.organizations.notifications.getOrganizationList.genericError.message")}))})),(0,$.DM)(f.id,t).then((function(e){N(e.data.organizations)})).catch((function(e){e.response.data.description?u((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.message")})):u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.message")}))})))}),[$.jX,open]);var j=(0,h.useCallback)(oe(te().mark((function e(){var r,s,c,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w!==Y.SHARE_ALL){e.next=4;break}r={shareWithAllChildren:!0},e.next=14;break;case 4:if(w!==Y.SHARE_SELECTED){e.next=14;break}if(!w){e.next=11;break}return c=A.map((function(e){return e.id})),e.next=9,(0,$.An)(t,f.id);case 9:e.next=13;break;case 11:c=(0,V.Z)(A,_,"id").map((function(e){return e.id})),s=(0,V.Z)(_,A,"id");case 13:r={shareWithAllChildren:!1,sharedOrganizations:c};case 14:w===Y.SHARE_ALL||w===Y.SHARE_SELECTED?((0,$.Bn)(f.id,t,r).then((function(){i(null,null),u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.description"),level:a.QU.SUCCESS,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.message")})),D.publish("application-share",{"client-id":n})})).catch((function(e){i(null,null),e.response.data.message?u((0,l.V_)({description:e.response.data.message,level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})):u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.description"),level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})),D.publish("application-share-error",{"client-id":n})})).finally((function(){return o()})),null===(p=s)||void 0===p||p.forEach((function(e){(0,$.NY)(f.id,t,e.id).then((function(){i(null,null),u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.success.description",{organization:e.name}),level:a.QU.SUCCESS,message:d("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.success.message")})),D.publish("application-share",{"client-id":n})})).catch((function(t){i(null,null),t.response.data.message?u((0,l.V_)({description:t.response.data.message,level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.message")})):u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.description",{organization:e.name}),level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.message")})),D.publish("application-share-error",{"client-id":n})}))}))):w===Y.UNSHARE&&(0,$.An)(t,f.id).then((function(){i(null,null),u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.description"),level:a.QU.SUCCESS,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.message")})),D.publish("application-share",{"client-id":n})})).catch((function(e){i(null,null),e.response.data.message?u((0,l.V_)({description:e.response.data.message,level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})):u((0,l.V_)({description:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.description"),level:a.QU.ERROR,message:d("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})),D.publish("application-share-error",{"client-id":n})})).finally((function(){return o()}));case 15:case"end":return e.stop()}}),e)}))),[_,A,$.NY,u,f.id,t,i,w]),Z=(0,h.useCallback)((function(){A.length!==O.length?L(O):L([])}),[O,E,A]);return h.createElement(B.Z,J({isLoading:!0,closeOnDimmerClick:!0,dimmer:"blurring",size:"tiny",closeOnDocumentClick:!0,closeOnEscape:!0,"data-testid":"".concat(r,"-share-application-modal")},s),h.createElement(B.Z.Header,null,d("console:develop.features.applications.edit.sections.shareApplication.heading")),h.createElement(B.Z.Content,null,h.createElement(c.X6,{ellipsis:!0,as:"h6"},d("console:manage.features.organizations.shareApplicationSubTitle")),h.createElement(q.Z,{basic:!0},h.createElement(Q.Z,{label:d("console:manage.features.organizations.shareApplicationRadio"),onChange:function(){return R(Y.SHARE_ALL)},checked:w===Y.SHARE_ALL,"data-componentid":"".concat(r,"-share-with-all-checkbox")}),h.createElement(c.kW,{popup:!0,inline:!0},d("console:manage.features.organizations.shareApplicationInfo")),h.createElement(S.Z,{hidden:!0,className:"mb-1 mt-0"}),h.createElement(Q.Z,{label:d("console:manage.features.organizations.shareWithSelectedOrgsRadio"),onChange:function(){return R(Y.SHARE_SELECTED)},checked:w===Y.SHARE_SELECTED,"data-componentid":"".concat(r,"-share-with-all-checkbox")}),h.createElement(G.Z,{visible:w===Y.SHARE_SELECTED,animation:"slide down",duration:1e3},h.createElement(c.IX,{className:"pl-2",disabled:w!==Y.SHARE_SELECTED,selectionComponent:!0,searchPlaceholder:d("console:manage.features.transferList.searchPlaceholder",{type:"organizations"}),handleUnelectedListSearch:function(e,t){var n=t.value,o=[];if((0,p.Z)(n))E(O);else{x(n);var i=new RegExp((0,W.Z)(n),"i");O&&O.map((function(e){i.test(e.name)&&o.push(e)})),E(o)}},"data-componentId":"application-share-modal-organization-transfer-component"},h.createElement(c.Jv,{disabled:w!==Y.SHARE_SELECTED,isListEmpty:!((null==v?void 0:v.length)>0),handleHeaderCheckboxChange:Z,isHeaderCheckboxChecked:(null==A?void 0:A.length)===(null==O?void 0:O.length),listType:"unselected",listHeaders:[d("console:manage.features.transferList.list.headers.1"),""],emptyPlaceholderContent:d("console:develop.placeholders.emptySearchResult.subtitles.0",{query:M})+". "+d("console:develop.placeholders.emptySearchResult.subtitles.1"),"data-testid":"application-share-modal-organization-transfer-component-all-items",emptyPlaceholderDefaultContent:d("console:manage.features.transferList.list.emptyPlaceholders.default")},null==v?void 0:v.map((function(e,t){var n=null==e?void 0:e.name,o=-1!==A.findIndex((function(t){return t.id===e.id}));return h.createElement(c.qT,{disabled:w!==Y.SHARE_SELECTED,handleItemChange:function(){return function(e){var t=ee(A),n=t.findIndex((function(t){return t.id===e.id}));-1!==n?(t.splice(n,1),L(t)):(t.push(e),L(t))}(e)},key:t,listItem:n,listItemId:e.id,listItemIndex:t,isItemChecked:o,showSecondaryActions:!1,"data-testid":"application-share-modal-organization-transfer-component -unselected-organizations"})}))))))),h.createElement(B.Z.Actions,null,h.createElement(c.Qj,{"data-testid":"".concat(r,"-cancel-button"),onClick:function(){return o()}},d("common:cancel")),h.createElement(c.KM,{disabled:w===Y.SHARE_SELECTED&&(0==(null==A?void 0:A.length)||!O),onClick:function(){j()},"data-testid":"".concat(r,"-save-button")},d("console:develop.features.applications.edit.sections.shareApplication.shareApplication"))))};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(){ue=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof g?t:g,a=Object.create(r.prototype),l=new P(o||[]);return i(a,"_invoke",{value:R(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",v="completed",h={};function g(){}function b(){}function E(){}var y={};c(y,a,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(U([])));S&&S!==n&&o.call(S,a)&&(y=S);var L=E.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,a,l){var s=d(e[i],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==ce(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,i){n(e,o,t,i)}))}return r=r?r.then(i,i):i()}})}function R(t,n,o){var i=p;return function(r,a){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===r)throw a;return{value:e,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var s=I(l,o);if(s){if(s===h)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===p)throw i=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=m;var c=d(t,n,o);if("normal"===c.type){if(i=o.done?v:f,c.arg===h)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=v,o.method="throw",o.arg=c.arg)}}}function I(t,n){var o=n.method,i=t.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var r=d(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var a=r.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function U(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(ce(t)+" is not iterable")}return b.prototype=E,i(L,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=c(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,s,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var a=new w(u(e,n,o,i),r);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(L),c(L,s,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=U,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return l.type="throw",l.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:U(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),h}},t}function de(e,t,n,o,i,r,a){try{var l=e[r](a),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(o,i)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ce(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==ce(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}se.defaultProps={"data-componentid":"application-share-modal"};var ge=function(e){var t=e.title,n=e.closeWizard,V=e.template,W=e.subTemplates,B=e.subTemplatesSectionTitle,q=e.subTitle,Q=e.templateLoadingStrategy,G=(e.setIsApplicationSharingEnabled,e["data-testid"]),$=(0,g.$)().t,X=(0,c.fQ)().getLink,Y=(0,N.z)().isSuperOrganization,K=(0,b.I0)(),J=(0,i.Z)().UIConfig,ee=P.h.getState().config.deployment.tenant,te=ve((0,s.cC)(),2),ne=te[0],oe=te[1],ie=ve((0,s.cC)(),2),re=ie[0],ae=ie[1],le=(0,T.Z)().legacyAuthzRuntime,ce=(0,b.v9)((function(e){var t,n,o;return null===(t=e.config)||void 0===t||null===(n=t.deployment)||void 0===n||null===(o=n.extensions)||void 0===o?void 0:o.asgardeoReservedAppRegex})),pe=(0,b.v9)((function(e){return e.config.ui.isClientSecretHashEnabled})),me=(0,b.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),he=(0,b.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.features})),ge=(0,r.cr)(null==he?void 0:he.applications,D.jo.FEATURE_DICTIONARY.get("FAPI_APP_CREATION")),be=(0,b.v9)((function(e){return e.organization.isFirstLevelOrganization})),Ee=ve((0,h.useState)(null),2),ye=Ee[0],Ae=Ee[1],Se=ve((0,h.useState)(void 0),2),Le=Se[0],Ce=Se[1],we=ve((0,h.useState)(H.AI.OAUTH2_OIDC),2),Re=we[0],Ie=we[1],Oe=ve((0,h.useState)(!1),2),Te=Oe[0],Pe=Oe[1],Ue=ve((0,h.useState)(void 0),2),_e=Ue[0],Ne=Ue[1],ke=ve((0,h.useState)(V),2),Me=ke[0],xe=ke[1],De=ve((0,h.useState)([]),2),je=De[0],Ze=De[1],ze=ve((0,h.useState)(!1),2),He=ze[0],Fe=ze[1],Ve=ve((0,h.useState)(!1),2),We=Ve[0],Be=Ve[1],qe=ve((0,h.useState)(!1),2),Qe=qe[0],Ge=qe[1],$e=ve((0,h.useState)(!1),2),Xe=$e[0],Ye=$e[1],Ke=ve((0,h.useState)(!1),2),Je=Ke[0],et=Ke[1],tt=ve((0,h.useState)(!1),2),nt=tt[0],ot=tt[1],it=ve((0,h.useState)(void 0),2),rt=it[0],at=it[1],lt=(0,h.useRef)(),st=(0,h.useRef)(),ct=(0,h.useRef)(),ut=ve((0,h.useState)(void 0),2),dt=ut[0],pt=ut[1],ft=ve((0,c.IK)(),3),mt=ft[0],vt=ft[1],ht=ft[2],gt=P.lD.getInstance();(0,h.useEffect)((function(){rt&&ot(!0)}),[rt]),(0,h.useEffect)((function(){if(Me&&Me.id!==j.id&&Y()){var e=[];(0,P.ZY)().then((function(t){t.map((function(t){e.push(t.url)}))})),Ze(e),vt(null)}}),[Me]),(0,h.useEffect)((function(){Me.id!==j.id?(0,p.Z)(W)||!Array.isArray(W)||W.length<1?Lt(V.id,V):(xe(W[0]),Lt(W[0].id,W[0])):Ae(j)}),[W]),(0,h.useEffect)((function(){var e,t,n;if(Rt("all",!1),(Me.id!==j.id||Re!==H.AI.WS_FEDERATION)&&(Le||_e)){if(!Le){var o;if(Me.id===j.id&&Re===H.AI.SAML)return;if(null!=V&&V.authenticationProtocol||(null===(o=V.subTemplates)||void 0===o?void 0:o.length)>0)return}if(_e){var i,r,a,l=(0,u.Z)(ye),s="inboundProtocolConfiguration.oidc.callbackURLs",c=(0,d.Z)(Le,s,[]);if((0,p.Z)(null==c?void 0:c.filter(Boolean))||((0,m.Z)(l,"application.".concat(s),[]),(0,m.Z)(l,"application.".concat("inboundProtocolConfiguration.oidc.allowedOrigins"),[])),null!=l&&null!==(e=l.application)&&void 0!==e&&null!==(t=e.inboundProtocolConfiguration)&&void 0!==t&&null!==(n=t.saml)&&void 0!==n&&n.templateConfiguration)null==l||(null===(i=l.application)||void 0===i||(null===(r=i.inboundProtocolConfiguration)||void 0===r||(null===(a=r.saml)||void 0===a||delete a.templateConfiguration)));var v,h=(0,u.Z)((0,f.Z)(null==l?void 0:l.application,Le));if(h.name=_e.get("name").toString(),h.templateId=Me.id,!le||Re!==H.AI.OAUTH2_OIDC||"custom-application"!==(null==Me?void 0:Me.templateId)&&(null==Me?void 0:Me.templateId)!==H.u.M2M_APPLICATION||(h.isManagementApp=_e.get("isManagementApp").length>=2),le||(0,p.Z)(h.associatedRoles)&&(h.associatedRoles={allowedAudience:k.nL.DEFAULT_ROLE_AUDIENCE,roles:[]}),Me.id===j.id)if(Re===H.AI.OAUTH2_OIDC)h.templateId=D.jo.CUSTOM_APPLICATION_OIDC,h.inboundProtocolConfiguration={oidc:{grantTypes:["client_credentials"],isFAPIApplication:(null===(v=_e.get("isFAPIApp"))||void 0===v?void 0:v.length)>=2}};else Re===H.AI.SAML&&(h.templateId=D.jo.CUSTOM_APPLICATION_SAML,dt===H.T6.MANUAL&&(h.inboundProtocolConfiguration.saml.manualConfiguration=Object.assign(h.inboundProtocolConfiguration.saml.manualConfiguration,{attributeProfile:{alwaysIncludeAttributesInResponse:!0,enabled:!0}})));Me.id===H.u.M2M_APPLICATION&&(h.inboundProtocolConfiguration={oidc:{grantTypes:[D.jo.CLIENT_CREDENTIALS_GRANT]}}),Pe(!0),yt(h)}}}),[_e,Le]),(0,h.useEffect)((function(){if(Le){var e=(0,u.Z)(fe(fe(fe({},null==ye?void 0:ye.application),Le),{},{name:_e.get("name").toString(),templateId:D.jo.CUSTOM_APPLICATION_PASSIVE_STS}));Re===H.AI.WS_FEDERATION&&Le&&yt(e)}}),[Le]);var bt,Et,yt=function(e){(0,M.W3)(e).then((function(t){gt.compute((function(){Me.id===j.id?gt.publish("application-register-new-application",{type:e.templateId}):gt.publish("application-register-new-application",{type:Me.templateId})})),K((0,l.V_)({description:$("console:develop.features.applications.notifications.addApplication.success.description"),level:a.QU.SUCCESS,message:$("console:develop.features.applications.notifications.addApplication.success.message")}));var n=t.headers.location,o=n.substring(n.lastIndexOf("/")+1);Je?at(o):At(o)})).catch((function(e){var t,n,o;if(403!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status)||(null==e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.code)!==D.jo.ERROR_CREATE_LIMIT_REACHED.getErrorCode())if(e.response&&e.response.data&&e.response.data.code&&e.response.data.code===D.jo.ERROR_CODE_ISSUER_EXISTS)Qe&&(dt!==H.T6.MANUAL?(vt({description:e.response.data.description,level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.addApplication.error.message")}),It()):(Rt("issuer",!0),Ct("issuer")));else if(e.response&&e.response.data&&e.response.data.code&&e.response.data.code===D.jo.ERROR_CODE_INVALID_METADATA_URL)Qe&&(Rt("metaUrl",!0),Ct("metaUrl"));else{if(e.response&&e.response.data&&e.response.data.description)return vt({description:e.response.data.description,level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.addApplication.error.message")}),void It();vt({description:$("console:develop.features.applications.notifications.addApplication.genericError.description"),level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.addApplication.genericError.message")}),It()}else Ye(!0)})).finally((function(){Pe(!1),wt(!1),Rt("all",!1)}))},At=function(e){if(!(0,p.Z)(e)){var t="?",n=0;return Me.id!==z.id&&Me.id!==Z.id&&pe&&(t="".concat(t,"&").concat(D.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY,"=true")),Me.id===j.id&&(n=I.applicationConfig.customApplication.defaultTabIndex),void P.m8.push({hash:"#".concat(H.El.TAB_INDEX).concat(n),pathname:P.$x.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:t})}P.m8.push(P.$x.getPaths().get("APPLICATIONS"))},St=function(){n()},Lt=function(e,t){Q!==H.IJ.LOCAL?(0,M.FG)(e).then((function(e){Ae(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?K((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.fetchTemplate.error.message")})):K((0,l.V_)({description:$("console:develop.features.applications.notifications.fetchTemplate.genericError.description"),level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.fetchTemplate.genericError.message")}))})):Ae(t)},Ct=function(e){var t={behavior:"smooth",block:"center"};switch(e){case"name":lt.current.scrollIntoView(t);break;case"issuer":st.current.scrollIntoView(t);var n=st.current.children[0].children[1].children[0];n.focus(),n.blur();break;case"metaUrl":ct.current.scrollIntoView(t);var o=ct.current.children[0].children[1].children[0];o.focus(),o.blur()}},wt=function(e){Ge(e)},Rt=function(e,t){switch(e){case"issuer":Fe(t);break;case"metaUrl":Be(t);break;default:Be(t),Fe(t)}},It=function(){var e;null===(e=document.getElementById("notification-div"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},Ot=function(){var e,t=(e=ue().mark((function e(t,n){var o,i,r,s;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.toString().trim(),Pt(o)){e.next=5;break}return n.isValid=!1,n.errorMessages.push($("console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.name.validations.invalid",{appName:t.toString(),characterLimit:D.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH})),e.abrupt("return");case 5:if(!Tt(o)){e.next=9;break}return n.isValid=!1,n.errorMessages.push($("console:develop.features.applications.forms.generalDetails.fields.name.validations.reserved",{appName:o,characterLimit:D.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH})),e.abrupt("return");case 9:return i=null,e.prev=10,e.next=13,(0,M.AY)(null,null,"name eq "+t.toString());case 13:i=e.sent,(null===(r=i)||void 0===r||null===(s=r.applications)||void 0===s?void 0:s.length)>0&&(n.isValid=!1,n.errorMessages.push($("console:develop.features.applications.forms.generalDetails.fields.name.validations.duplicate"))),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(10),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.description)){e.next=22;break}return K((0,l.V_)({description:e.t0.response.data.description,level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.fetchApplications.error.message")})),e.abrupt("return");case 22:K((0,l.V_)({description:$("console:develop.features.applications.notifications.fetchApplications.genericError.description"),level:a.QU.ERROR,message:$("console:develop.features.applications.notifications.fetchApplications.genericError.message")}));case 23:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){de(r,o,i,a,l,"next",e)}function l(e){de(r,o,i,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),Tt=function(e){if(!ce)return!1;var t=new RegExp(ce);return e&&t.test(e)},Pt=function(e){return e&&!!e.match(D.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_PATTERN)},Ut=function(){var e=W&&W instanceof Array&&W.length>0,t=Me.id===j.id;if(!e&&!t)return null;if("mobile"===V.id||"desktop"===V.id)return null;var n=t?function(e){var t=Object.values(H.AI);t=t.filter((function(t){return I.applicationConfig.customApplication.allowedProtocolTypes&&I.applicationConfig.customApplication.allowedProtocolTypes.length>0?!!I.applicationConfig.customApplication.allowedProtocolTypes.includes(t)&&t:!(t===H.AI.WS_TRUST||t===H.AI.OIDC||t===H.AI.CUSTOM||e&&t===e)&&t}));var n=[H.AI.OAUTH2_OIDC,H.AI.SAML,H.AI.WS_FEDERATION];return(0,v.Z)(t,(function(e){return n.indexOf(e)}))}():W;return h.createElement(y.Z.Row,{className:"pt-0 mt-0"},h.createElement(y.Z.Column,{mobile:16,tablet:16,computer:14},h.createElement("div",{className:"sub-template-selection"},h.createElement("label",{className:"sub-templates-label"},B),h.createElement(A.Z.Group,{itemsPerRow:3,className:"sub-templates"},n.map((function(e,n){var o=t?e:e.id,i=t?e:e.image,r=t?e===H.AI.OAUTH2_OIDC?h.createElement(h.Fragment,null,h.createElement("div",null,"OAuth2.0"),h.createElement("div",null,"OpenID Connect")):F.y.resolveProtocolDisplayName(e):e.name,a=t?Re===e:Me.id===e.id,l=!t&&e.previewOnly;return h.createElement(c.B0,{key:n,image:fe(fe({},(0,x.B0)()),(0,P.r2)())[i],size:"small",className:"sub-template-selection-card",header:r,selected:a,onClick:function(){e.previewOnly||(t?Ie(e):(xe(e),Lt(e.id,e)))},imageSize:"x30",imageOptions:{relaxed:!0,square:!1,width:"auto"},contentTopBorder:!1,showTooltips:!1,renderDisabledItemsAsGrayscale:!1,disabled:l,overlay:h.createElement(E.Z,{className:"lighter",active:!0},$("common:featureAvailable")),overlayOpacity:.6,"data-testid":"".concat(G,"-").concat(o,"-card")})}))),h.createElement(S.Z,{hidden:!0}))))};return h.createElement(h.Fragment,null,Xe&&h.createElement(U.P,{actionLabel:$("console:develop.features.applications.notifications.tierLimitReachedError.emptyPlaceholder.action"),handleModalClose:function(){Ye(!1),St()},header:$("console:develop.features.applications.notifications.tierLimitReachedError.heading"),description:$("console:develop.features.applications.notifications.tierLimitReachedError.emptyPlaceholder.subtitles"),message:$("console:develop.features.applications.notifications.tierLimitReachedError.emptyPlaceholder.title"),openModal:Xe}),h.createElement(P.wv,{open:!Xe&&!nt,className:"wizard minimal-application-create-wizard",dimmer:"blurring",onClose:St,closeOnDimmerClick:!1,closeOnEscape:!0,"data-testid":"".concat(G,"-modal")},h.createElement(P.wv.MainPanel,null,h.createElement(P.wv.Header,{className:"wizard-header"},t,q&&h.createElement(c.X6,{as:"h6"},q,h.createElement(c.eb,{link:(null==Me?void 0:Me.templateId)===H.u.SPA?X("develop.applications.newApplication.singlePageApplication.learnMore"):(null==Me?void 0:Me.templateId)===H.u.OIDC_WEB_APPLICATION?X("develop.applications.newApplication.oidcApplication.learnMore"):(null==Me?void 0:Me.templateId)===H.u.SAML_WEB_APPLICATION?X("develop.applications.newApplication.samlApplication.learnMore"):(null==Me?void 0:Me.templateId)===H.u.MOBILE_APPLICATION?X("develop.applications.newApplication.mobileApplication.learnMore"):void 0},$("common:learnMore")))),h.createElement(P.wv.Content,null,h.createElement(s.Es,{onSubmit:function(e){Ne(e),ae()},onSubmitError:function(e,t){for(var n=e.entries(),o=n.next();!o.done;){if(!o.value[1]||!t.get(o.value[0]).isValid){Ct(o.value[0]);break}o=n.next()}},submitState:ne,id:"name-input"},h.createElement(y.Z,null,mt&&h.createElement(y.Z.Row,{columns:1,id:"notification-div"},h.createElement(y.Z.Column,{mobile:16,tablet:16,computer:14},ht)),h.createElement(y.Z.Row,{columns:1},h.createElement(y.Z.Column,{mobile:16,tablet:16,computer:14},h.createElement(s.gN,{name:"name",ref:lt,label:$("console:develop.features.applications.forms.generalDetails.fields.name.label"),required:!0,requiredErrorMessage:$("console:develop.features.applications.forms.generalDetails.fields.name.validations.empty"),placeholder:$("console:develop.features.applications.forms.generalDetails.fields.name.placeholder"),type:"text","data-testid":"".concat(G,"-application-name-input"),validation:Ot,displayErrorOn:"blur",maxLength:D.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH}))),Ut(),h.createElement(y.Z.Row,{className:"pt-0 mt-0"},h.createElement(y.Z.Column,{mobile:16,tablet:16,computer:14},(Et=Me.authenticationProtocol,Me.id===j.id?Et=Re:Me.id===H.u.M2M_APPLICATION&&(Et=H.AI.OAUTH2_OIDC),Et===H.AI.OIDC?h.createElement(C.A,{isProtocolConfig:!1,tenantDomain:ee,allowedOrigins:je,fields:["callbackURLs"],hideFieldHints:!0,triggerSubmit:re,templateValues:null==ye?void 0:ye.application,onSubmit:function(e){return Ce(e)},showCallbackURL:!0,addOriginByDefault:Me.id===z.id,isAllowEnabled:!(Me.id===z.id),"data-testid":"".concat(G,"-oauth-protocol-settings-form"),selectedTemplate:Me}):Et===H.AI.SAML?h.createElement(R._,{issuerRef:st,issuerError:He,metaUrlRef:ct,metaUrlError:We,handleProtocolValueChange:wt,fields:["issuer","assertionConsumerURLs"],hideFieldHints:!0,triggerSubmit:re,templateValues:null==ye?void 0:ye.application,onSubmit:function(e){return Ce(e)},setSAMLConfigureMode:pt,"data-testid":"".concat(G,"-saml-protocol-settings-form")}):Et===H.AI.WS_FEDERATION?h.createElement(w.u,{triggerSubmit:re,initialValues:null,templateValues:ye,onSubmit:function(e){return Ce(e)},"data-testid":"".concat(G,"-passive-sts-protocol-settings-form")}):void 0))),le&&Re===H.AI.OAUTH2_OIDC&&("custom-application"===(null==Me?void 0:Me.templateId)||(null==Me?void 0:Me.templateId)===H.u.M2M_APPLICATION)&&h.createElement("div",{className:"pt-0 mt-0"},h.createElement(s.gN,{"data-testid":"".concat(G,"-management-app-checkbox"),name:"isManagementApp",required:!1,requiredErrorMessage:"is required",type:"checkbox",value:["isManagementApp"],children:[{label:$("console:develop.features.applications.forms.generalDetails.fields.isManagementApp.label"),value:"manageApp"}]}),h.createElement(c.kW,{compact:!0},$("console:develop.features.applications.forms.generalDetails.fields.isManagementApp.hint"))),Re===H.AI.OAUTH2_OIDC&&(null==Me?void 0:Me.name)===H.So.STANDARD_BASED_APPLICATION&&ge&&h.createElement("div",{className:"pt-0 mt-0"},h.createElement(s.gN,{"data-componentid":"".concat(G,"-fapi-app-checkbox"),name:"isFAPIApp",required:!1,type:"checkbox",value:["isFAPIApp"],children:[{label:$("console:develop.features.applications.forms.generalDetails.fields.isFapiApp.label"),value:"fapiApp"}]}),h.createElement(c.kW,{compact:!0},$("console:develop.features.applications.forms.generalDetails.fields.isFapiApp.hint"))),isOrganizationManagementEnabled&&(null==J||null===(bt=J.legacyMode)||void 0===bt?void 0:bt.organizations)&&I.applicationConfig.editApplication.showApplicationShare&&(be||window.AppUtils.getConfig().organizationName)&&me!==_.$B.SUBORGANIZATION&&(null==V?void 0:V.id)!==H.u.M2M_APPLICATION&&!pe&&h.createElement(o.di,{when:O.T.APPLICATION_EDIT},h.createElement(y.Z.Row,{columns:1},h.createElement(y.Z.Column,{mobile:16,tablet:16,computer:14},h.createElement("div",{className:"pt-0 mt-0"},h.createElement(L.Z,{onChange:function(e,t){et(t.checked)},label:$("console:develop.features.applications.forms.generalDetails.fields.isSharingEnabled.label")}),h.createElement(c.kW,{inline:!0,popup:!0},$("console:develop.features.applications.forms.generalDetails.fields.isSharingEnabled.hint"))))))))),h.createElement(P.wv.Actions,null,h.createElement(y.Z,null,h.createElement(y.Z.Row,{column:1},h.createElement(y.Z.Column,{mobile:8,tablet:8,computer:8},h.createElement(c.Qj,{floated:"left",onClick:St},$("common:cancel"))),h.createElement(y.Z.Column,{mobile:8,tablet:8,computer:8},h.createElement(c.KM,{floated:"right",onClick:function(){Fe(!1),oe()},"data-testid":"".concat(G,"-next-button"),loading:Te,disabled:Te},$("common:create"))))))),function(){var e,t,n;if(null==Me||null===(e=Me.content)||void 0===e||!e.wizardHelp)return null;var o,i,r=Me.content.wizardHelp;Me.authenticationProtocol===H.AI.SAML&&dt===H.T6.META_FILE&&null!==(t=Me.content)&&void 0!==t&&t.wizardHelp2&&(r=null===(o=Me.content)||void 0===o?void 0:o.wizardHelp2);Me.authenticationProtocol===H.AI.SAML&&dt===H.T6.META_URL&&null!==(n=Me.content)&&void 0!==n&&n.wizardHelp3&&(r=null===(i=Me.content)||void 0===i?void 0:i.wizardHelp3);return h.createElement(P.wv.SidePanel,null,h.createElement(P.wv.Header,{className:"wizard-header help-panel-header muted"},h.createElement("div",{className:"help-panel-header-text"},$("console:develop.features.applications.wizards.minimalAppCreationWizard.help.heading"))),h.createElement(P.wv.Content,null,h.createElement(h.Suspense,{fallback:h.createElement(c.pO,null)},h.createElement(r,null))))}()),nt&&h.createElement(se,{open:nt,applicationId:rt,onClose:function(){return ot(!1)},onApplicationSharingCompleted:function(){ot(!1),At(rt)}}))};ge.defaultProps={"data-testid":"minimal-application-create-wizard",showHelpPanel:!0}},37940:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(83831),i=n(13318),r=n(81816),a=n(99285),l=n(67127),s=n(52983),c=n(9202),u=n(39990),d=n(54221),p=n(94635),f=n(61133),m=n(16782),v=n(23865),h=n(87089);function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=function(e){var t,n,E=e.selectedTemplate,y=e.isProtocolConfig,A=e.allowedOrigins,S=e.fields,L=e.hideFieldHints,C=e.initialValues,w=e.triggerSubmit,R=e.onSubmit,I=e.templateValues,O=e.showCallbackURL,T=e.tenantDomain,P=e.addOriginByDefault,U=e.isAllowEnabled,_=e["data-testid"],N=(0,c.$)().t,k=(0,d.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isSAASDeployment})),M=b((0,s.useState)(""),2),x=M[0],D=M[1],j=b((0,s.useState)(""),2),Z=j[0],z=j[1],H=b((0,s.useState)([]),2),F=H[0],V=H[1],W=b((0,s.useState)([]),2),B=W[0],q=W[1],Q=b((0,s.useState)(!1),2),G=Q[0],$=Q[1],X=b((0,s.useState)(!1),2),Y=X[0],K=X[1],J=b((0,s.useState)(null),2),ee=J[0],te=J[1],ne=b((0,s.useState)(!0),2),oe=ne[0],ie=ne[1],re=b((0,s.useState)(void 0),2),ae=re[0],le=re[1],se=b((0,s.useState)(void 0),2),ce=se[0],ue=se[1],de=b((0,s.useState)(!1),2),pe=de[0],fe=de[1],me=b((0,s.useState)(!1),2),ve=me[0],he=me[1],ge=b((0,s.useState)(!1),2),be=ge[0],Ee=ge[1],ye=(0,d.v9)((function(e){return e.config})),Ae=b((0,s.useState)(A||[]),2),Se=Ae[0],Le=Ae[1];(0,s.useEffect)((function(){(null==E?void 0:E.id)===h.EL.OIDC&&he(!0)}),[E]),(0,s.useEffect)((function(){Y&&x&&""!==x&&K(!1)}),[x]),(0,s.useEffect)((function(){null!=ce&&ce.includes("authorization_code")||null!=ce&&ce.includes("implicit")?ie(!0):ie(!1)}),[ce,pe]),(0,s.useEffect)((function(){var e,t,n,o;void 0===ce&&(null!=I&&null!==(e=I.inboundProtocolConfiguration)&&void 0!==e&&null!==(t=e.oidc)&&void 0!==t&&t.grantTypes&&ue(g(null==I||null===(n=I.inboundProtocolConfiguration)||void 0===n||null===(o=n.oidc)||void 0===o?void 0:o.grantTypes)))}),[I]),(0,s.useEffect)((function(){var e,t;if(I){var n=null==I||null===(e=I.inboundProtocolConfiguration)||void 0===e||null===(t=e.oidc)||void 0===t?void 0:t.callbackURLs;n&&Array.isArray(n)&&n.length>0&&z(n[0])}}),[I]),(0,s.useEffect)((function(){void 0===ae&&null!=E&&E.authenticationProtocol&&(0,f.WL)(E.authenticationProtocol).then((function(e){le(e)}))}),[ae]),(0,s.useEffect)((function(){var e,t;if(E){var n=null==I||null===(e=I.inboundProtocolConfiguration)||void 0===e||null===(t=e.oidc)||void 0===t?void 0:t.grantTypes;(0,a.Z)(n,["refresh_token"]).length>0&&E.id!==v.id&&E.id!==m.jo.MOBILE&&$(!0)}}),[I,E]);var Ce=function(e){var t,n,o=null==e?void 0:e.replace(/['"]+/g,"");(null===(t=o)||void 0===t?void 0:t.split(",").length)>1&&(o="regexp=("+(null===(n=o)||void 0===n?void 0:n.split(",").join("|"))+")");return o},we=function(e){return e&&e.includes("regexp=(")&&(e=(e=(e=e.replace("regexp=(","")).replace(")","")).split("|").join(",")),e};(0,s.useEffect)((function(){var e;if((0,l.Z)(null==C||null===(e=C.inboundProtocolConfiguration)||void 0===e?void 0:e.oidc)){var t,n,o,i,r,a,s,c,u;if((0,l.Z)(null==I||null===(t=I.inboundProtocolConfiguration)||void 0===t||null===(n=t.oidc)||void 0===n?void 0:n.callbackURLs))D("");else D(we(null==I||null===(c=I.inboundProtocolConfiguration)||void 0===c||null===(u=c.oidc)||void 0===u?void 0:u.callbackURLs[0]));null!=I&&null!==(o=I.inboundProtocolConfiguration)&&void 0!==o&&null!==(i=o.oidc)&&void 0!==i&&i.publicClient&&V(["supportPublicClients"]),null!=I&&null!==(r=I.inboundProtocolConfiguration)&&void 0!==r&&null!==(a=r.oidc)&&void 0!==a&&null!==(s=a.refreshToken)&&void 0!==s&&s.renewRefreshToken&&q(["refreshToken"])}else{var d,p,f,m,v,h,g;D(we(null==C||null===(d=C.inboundProtocolConfiguration)||void 0===d||null===(p=d.oidc)||void 0===p?void 0:p.callbackURLs[0])),null!=C&&null!==(f=C.inboundProtocolConfiguration)&&void 0!==f&&null!==(m=f.oidc)&&void 0!==m&&m.publicClient&&V(["supportPublicClients"]),null!=C&&null!==(v=C.inboundProtocolConfiguration)&&void 0!==v&&null!==(h=v.oidc)&&void 0!==h&&null!==(g=h.refreshToken)&&void 0!==g&&g.renewRefreshToken&&q(["refreshToken"])}}),[C]);var Re,Ie,Oe,Te=function(e){var t,n=[];(null==e?void 0:e.split(",").length)>1?n=null==e?void 0:e.split(","):n.push(e);var i=null===(t=n)||void 0===t?void 0:t.map((function(e){var t;return null===(t=o.URLUtils.urlComponents(e))||void 0===t?void 0:t.origin}));return g(new Set(i.filter((function(e){return Se.includes(e)}))))},Pe=function(e,t){var n={inboundProtocolConfiguration:{oidc:{}}};return oe&&(O||!S||S.includes("callbackURLs"))&&(n.inboundProtocolConfiguration.oidc.callbackURLs=[Ce(t||x)]),S&&!S.includes("publicClient")||(n.inboundProtocolConfiguration.oidc.publicClient=e.get("publicClients").includes("supportPublicClients")),n.inboundProtocolConfiguration.oidc.refreshToken={expiryInSeconds:parseInt(null==ae?void 0:ae.defaultRefreshTokenExpiryTime,10)},(G||!S||S.includes("RefreshToken"))&&(n.inboundProtocolConfiguration.oidc.refreshToken={expiryInSeconds:parseInt(null==ae?void 0:ae.defaultRefreshTokenExpiryTime,10),renewRefreshToken:e.get("RefreshToken").includes("refreshToken")}),oe&&(O||!S||S.includes("callbackURLs"))&&(n.inboundProtocolConfiguration.oidc.allowedOrigins=Te(t||x)),!oe&&ce&&(n.inboundProtocolConfiguration.oidc.grantTypes=ce,n.inboundProtocolConfiguration.oidc.allowedOrigins=Te(t||x)),(null==E?void 0:E.templateId)===h.u.SPA&&ae&&(n.inboundProtocolConfiguration.oidc.accessToken={applicationAccessTokenExpiryInSeconds:parseInt(null==ae?void 0:ae.defaultApplicationAccessTokenExpiryTime,10),userAccessTokenExpiryInSeconds:parseInt(null==ae?void 0:ae.defaultUserAccessTokenExpiryTime,10)}),n},Ue=function(e){var t=g(Se);t.push(e),Le(t)};return I?s.createElement(i.Es,{onSubmit:function(e){oe||!y?Re((function(t){(0,l.Z)(x)&&(0,l.Z)(t)?K(!0):R(Pe(e,t))})):R(Pe(e))},submitState:w},s.createElement(p.Z,null,y&&ve&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:8},s.createElement(i.gN,{name:"grant",label:N("console:develop.features.applications.forms.inboundOIDC.fields.grant.label"),type:"checkbox",required:!0,requiredErrorMessage:N("console:develop.features.applications.forms.inboundOIDC.fields.grant.validations.empty"),children:(Ie=null==ae?void 0:ae.allowedGrantTypes,Oe=[],Ie&&Ie.options.map((function(e){Oe.push({displayName:e.displayName,name:e.name})})),Oe),value:null==I||null===(t=I.inboundProtocolConfiguration)||void 0===t||null===(n=t.oidc)||void 0===n?void 0:n.grantTypes,"data-testid":"".concat(_,"-grant-type-checkbox-group"),listen:function(e){return function(e){var t=e.get("grant");ue(t),fe(!pe)}(e)}}),s.createElement(r.kW,null,N("console:develop.features.applications.forms.inboundOIDC.fields.grant.hint")))),(!S||S.includes("callbackURLs"))&&oe&&s.createElement(p.Z.Row,{column:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16,className:"field"},s.createElement(r.wE,{isCustom:E.templateId===m.jo.MOBILE,labelEnabled:!0,handleAddAllowedOrigin:function(e){return Ue(e)},handleRemoveAllowedOrigin:function(e){return function(e){var t=g(Se);t.includes(e)&&t.splice(t.indexOf(e),1),Le(t)}(e)},tenantDomain:T,allowedOrigins:Se,urlState:x,setURLState:D,labelName:E.templateId===m.jo.MOBILE?"Authorized redirect URIs":N("console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.callBackUrls.label"),placeholder:E.templateId===m.jo.MOBILE?N("console:develop.features.applications.forms.inboundOIDC.mobileApp.mobileAppPlaceholder"):N("console:develop.features.applications.forms.inboundOIDC.fields.callBackUrls.placeholder"),validationErrorMsg:N(be?"console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.urlDeepLinkError":"console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.invalid"),emptyErrorMessage:N("console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.empty"),skipInternalValidation:E.templateId===m.jo.MOBILE,validation:function(e){return!!(E.templateId===m.jo.MOBILE||o.URLUtils.isURLValid(e,!0)&&(o.URLUtils.isHttpUrl(e)||o.URLUtils.isHttpsUrl(e)))&&(o.URLUtils.isMobileDeepLink(e)?(te(null),!0):(Ee(!0),!1))},computerWidth:10,setShowError:K,showError:Y,hint:!L&&N("console:develop.features.applications.forms.inboundOIDC.fields.callBackUrls.hint"),addURLTooltip:N("common:addURL"),duplicateURLErrorMessage:N("common:duplicateURLError"),"data-testid":"".concat(_,"-callback-url-input"),getSubmit:function(e){Re=e},productName:ye.ui.productName,required:!0,showPredictions:!1,customLabel:ee,isAllowEnabled:U,addOriginByDefault:P,popupHeaderPositive:N("console:develop.features.URLInput.withLabel.positive.header"),popupHeaderNegative:N("console:develop.features.URLInput.withLabel.negative.header"),popupContentPositive:N("console:develop.features.URLInput.withLabel.positive.content",{productName:ye.ui.productName}),popupContentNegative:N("console:develop.features.URLInput.withLabel.negative.content",{productName:ye.ui.productName}),popupDetailedContentPositive:N("console:develop.features.URLInput.withLabel.positive.detailedContent.0"),popupDetailedContentNegative:N("console:develop.features.URLInput.withLabel.negative.detailedContent.0"),insecureURLDescription:N("console:common.validations.inSecureURL.description"),showLessContent:N("common:showLess"),showMoreContent:N("common:showMore")}),Z&&k&&s.createElement(r.v0,{type:"info",content:s.createElement(s.Fragment,null,s.createElement(u.c,{i18nKey:"console:develop.features.applications.forms.inboundOIDC.fields.callBackUrls.info",tOptions:{callBackURLFromTemplate:Z}},"Don\u2019t have an app? Try out a sample app using ",s.createElement("strong",null,Z),"as the Authorized URL."),(void 0===x||""===x)&&s.createElement(r.Qj,{className:"m-1 p-1 with-no-border orange",onClick:function(e){e.preventDefault();var t=new URL(Z);Ue(t.origin),D(Z)},"data-testid":"".concat(_,"-add-now-button")},s.createElement("span",{style:{fontWeight:"bold"}},"Add Now")))}))),!S||S.includes("publicClient")&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:10},s.createElement(i.gN,{name:"publicClients",label:"",required:!1,requiredErrorMessage:"this is needed",type:"checkbox",value:F,children:[{label:N("console:develop.features.applications.forms.inboundOIDC.fields.public.label"),value:"supportPublicClients"}],"data-testid":"".concat(_,"-public-client-checkbox")}),!L&&s.createElement(r.kW,null,N("console:develop.features.applications.forms.inboundOIDC.fields.public.hint")))),!S||S.includes("RefreshToken")||G&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:10},s.createElement(i.gN,{name:"RefreshToken",label:"",required:!1,requiredErrorMessage:N("console:develop.features.applications.forms.inboundOIDC.sections.refreshToken.fields.renew.validations.empty"),type:"checkbox",value:B,children:[{label:N("console:develop.features.applications.forms.inboundOIDC.sections.refreshToken.fields.renew.label"),value:"refreshToken"}],"data-testid":"".concat(_,"-renew-refresh-token-checkbox")}),!L&&s.createElement(r.kW,null,N("console:develop.features.applications.forms.inboundOIDC.sections.refreshToken.fields.renew.hint")))))):s.createElement(r.pO,null)};A.defaultProps={"data-testid":"oauth-protocol-settings-wizard-form",hideFieldHints:!1,showCallbackURL:!1}},20656:(e,t,n)=>{n.d(t,{u:()=>c});var o=n(13318),i=n(81816),r=n(53337),a=n(52983),l=n(9202),s=n(94635),c=function(e){var t=e.initialValues,n=e.templateValues,c=e.triggerSubmit,u=e.onSubmit,d=e["data-testid"],p=(0,l.$)().t;return n?a.createElement(o.Es,{onSubmit:function(e){u(function(e){return{inboundProtocolConfiguration:{passiveSts:{realm:e.get("realm"),replyTo:e.get("replyTo")}}}}(e))},submitState:c},a.createElement(s.Z,null,a.createElement(s.Z.Row,null,a.createElement(s.Z.Column,{mobile:16},a.createElement(o.gN,{name:"realm",label:p("console:develop.features.applications.forms.inboundSTS.fields.realm.label"),required:!0,requiredErrorMessage:p("console:develop.features.applications.forms.inboundSTS.fields.realm.validations.empty"),placeholder:p("console:develop.features.applications.forms.inboundSTS.fields.realm.placeholder"),type:"text",value:t?null==t?void 0:t.realm:null==n?void 0:n.realm,"data-testid":"".concat(d,"-realm-input")}),a.createElement(i.kW,null,p("console:develop.features.applications.forms.inboundSTS.fields.realm.hint")))),a.createElement(s.Z.Row,null,a.createElement(s.Z.Column,{mobile:16},a.createElement(o.gN,{name:"replyTo",label:p("console:develop.features.applications.forms.inboundSTS.fields.replyTo.label"),required:!0,requiredErrorMessage:p("console:develop.features.applications.forms.inboundSTS.fields.replyTo.validations.empty"),placeholder:p("console:develop.features.applications.forms.inboundSTS.fields.replyTo.placeholder"),validation:function(e,t){r.I.url(e)||(t.isValid=!1,t.errorMessages.push(p("console:develop.features.applications.forms.inboundSTS.fields.replyTo.validations.invalid")))},type:"text",value:t?null==t?void 0:t.replyTo:null==n?void 0:n.replyTo,"data-testid":"".concat(d,"-reply-url-input")}),a.createElement(i.kW,null,p("console:develop.features.applications.forms.inboundSTS.fields.replyTo.hint")))))):a.createElement(i.pO,null)};c.defaultProps={"data-testid":"passive-sts-protocol-settings-wizard-form"}},61537:(e,t,n)=>{n.d(t,{_:()=>A});var o=n(83831),i=n(13318),r=n(81816),a=n(53337),l=n(67127),s=n(52983),c=n(9202),u=n(39990),d=n(54221),p=n(94635),f=n(88171),m=n(74691),v=n(91478),h=n(30640),g=n(87089),b=n(22806);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=function(e){var t=e.fields,n=e.hideFieldHints,y=e.initialValues,A=e.templateValues,L=e.triggerSubmit,C=e.onSubmit,w=e.setSAMLConfigureMode,R=e.issuerRef,I=e.metaUrlRef,O=e.issuerError,T=e.metaUrlError,P=e.handleProtocolValueChange,U=e["data-testid"],_=(0,c.$)().t,N=E((0,s.useState)(""),2),k=N[0],M=N[1],x=E((0,s.useState)(""),2),D=x[0],j=x[1],Z=E((0,s.useState)(""),2),z=Z[0],H=Z[1],F=E((0,s.useState)(""),2),V=F[0],W=F[1],B=E((0,s.useState)(!1),2),q=B[0],Q=B[1],G=E((0,s.useState)(null),2),$=G[0],X=G[1],Y=E((0,s.useState)(void 0),2),K=Y[0],J=Y[1],ee=E((0,s.useState)(!1),2),te=ee[0],ne=ee[1],oe=E((0,s.useState)(),2),ie=oe[0],re=oe[1],ae=E((0,s.useState)(null),2),le=ae[0],se=ae[1],ce=E((0,s.useState)(null),2),ue=ce[0],de=ce[1],pe=E((0,s.useState)(!1),2),fe=pe[0],me=pe[1],ve=(0,d.v9)((function(e){return e.config})),he=(0,d.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isSAASDeployment}));(0,s.useEffect)((function(){var e;if(J(g.T6.MANUAL),(0,l.Z)(null==y||null===(e=y.inboundProtocolConfiguration)||void 0===e?void 0:e.saml)){var t,n,o,i,r=null==A||null===(t=A.inboundProtocolConfiguration)||void 0===t||null===(n=t.saml)||void 0===n?void 0:n.manualConfiguration.assertionConsumerUrls,a=null==A||null===(o=A.inboundProtocolConfiguration)||void 0===o||null===(i=o.saml)||void 0===i?void 0:i.manualConfiguration.issuer;(0,l.Z)(r)?M(""):M(r.toString()),(0,l.Z)(a)?j(""):j(a.toString())}else{var s,c,u,d,p,f;M(null==y||null===(s=y.inboundProtocolConfiguration)||void 0===s||null===(c=s.saml)||void 0===c||null===(u=c.manualConfiguration.assertionConsumerUrls)||void 0===u?void 0:u.toString()),j(null==y||null===(d=y.inboundProtocolConfiguration)||void 0===d||null===(p=d.saml)||void 0===p||null===(f=p.manualConfiguration.issuer)||void 0===f?void 0:f.toString())}}),[y]),(0,s.useEffect)((function(){ie&&fe&&me(!1)}),[ie]),(0,s.useEffect)((function(){K&&w(K)}),[K]),(0,s.useEffect)((function(){var e,t,n,o,i,r;if(A){var a=null==A||null===(e=A.inboundProtocolConfiguration)||void 0===e||null===(t=e.saml)||void 0===t||null===(n=t.templateConfiguration)||void 0===n?void 0:n.assertionConsumerUrls,l=null==A||null===(o=A.inboundProtocolConfiguration)||void 0===o||null===(i=o.saml)||void 0===i||null===(r=i.templateConfiguration)||void 0===r?void 0:r.issuer;a&&Array.isArray(a)&&a.length>0&&H(a[0]),l&&W(l)}}),[A]);var ge,be,Ee,ye,Ae,Se=function(e){te?(M(e),e||ne(!1)):k?(M(k),ne(!0)):(e&&ne(!0),M(e))},Le=function(e,n){var o;return K===g.T6.MANUAL?(o={inboundProtocolConfiguration:{saml:{manualConfiguration:{}}}},t&&!t.includes("assertionConsumerURLs")||(o.inboundProtocolConfiguration.saml.manualConfiguration.assertionConsumerUrls=n?n.split(","):k.split(",")),t&&!t.includes("issuer")||(o.inboundProtocolConfiguration.saml.manualConfiguration.issuer=e.get("issuer")),t&&!t.includes("applicationQualifier")||(o.inboundProtocolConfiguration.saml.manualConfiguration.serviceProviderQualifier=e.get("applicationQualifier"))):K===g.T6.META_URL?o={inboundProtocolConfiguration:{saml:{metadataURL:e.get("url")}}}:K===g.T6.META_FILE&&(o={inboundProtocolConfiguration:{saml:{metadataFile:ie}}}),o};return K?s.createElement(i.Es,{onSubmit:function(e){P(!0),K===g.T6.MANUAL?ge((function(t){(0,l.Z)(k)&&(0,l.Z)(t)?Q(!0):C(Le(e,t))})):K===g.T6.META_FILE&&(0,l.Z)(ie)?me(!0):C(Le(e))},submitState:L},s.createElement(p.Z,null,s.createElement(p.Z.Row,null,s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16},s.createElement(f.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(g.T6).map((function(e,t){return s.createElement(f.Z,{key:t,active:K===e,className:"saml-config-mode-wizard-tab",content:b.y.resolveSAMLConfigModeDisplayName(e),onClick:function(t){t.preventDefault(),J(e),ne(!1)}})}))))),K==g.T6.MANUAL?s.createElement(s.Fragment,null,(!t||t.includes("issuer"))&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16},s.createElement(i.gN,{name:"issuer",ref:R,displayErrorOn:"blur",label:_("console:develop.features.applications.forms.inboundSAML.fields.issuer.label"),required:!0,requiredErrorMessage:_("console:develop.features.applications.forms.inboundSAML.fields.issuer.validations.empty"),type:"text",placeholder:_("console:develop.features.applications.forms.inboundSAML.fields.issuer.placeholder"),value:D,validation:function(e,t){O?(t.isValid=!1,t.errorMessages.push(_("console:develop.features.applications.forms.inboundSAML.fields.issuer.errorMessage"))):j(e)},"data-testid":"".concat(U,"-issuer-input")}),!n&&s.createElement(r.kW,null,_("console:develop.features.applications.forms.inboundSAML.fields.issuer.hint")))),(!t||t.includes("applicationQualifier"))&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16},s.createElement(i.gN,{name:"applicationQualifier",label:_("console:develop.features.applications.forms.inboundSAML.fields.qualifier.label"),required:!1,requiredErrorMessage:_("console:develop.features.applications.forms.inboundSAML.fields.qualifier.validations.empty"),type:"text",placeholder:_("console:develop.features.applications.forms.inboundSAML.fields.qualifier.placeholder"),value:null==y||null===(be=y.inboundProtocolConfiguration.saml)||void 0===be||null===(Ee=be.manualConfiguration)||void 0===Ee?void 0:Ee.serviceProviderQualifier,"data-testid":"".concat(U,"-application-qualifier-input")}),!n&&s.createElement(r.kW,null,_("console:develop.features.applications.forms.inboundSAML.fields.qualifier.hint")))),(!t||t.includes("assertionConsumerURLs"))&&s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16,className:"field"},s.createElement(r.wE,{urlState:k,setURLState:Se,labelName:_("console:develop.features.applications.forms.inboundSAML.fields.assertionURLs.label"),placeholder:_("console:develop.features.applications.forms.inboundSAML.fields.assertionURLs.placeholder"),validationErrorMsg:_("console:develop.features.applications.forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.invalid"),emptyErrorMessage:_("console:develop.features.applications.forms.inboundSAML.fields.assertionURLs.validations.empty"),validation:function(e){return!(!o.URLUtils.isURLValid(e,!0)||!o.URLUtils.isHttpUrl(e)&&!o.URLUtils.isHttpsUrl(e)||!o.URLUtils.isMobileDeepLink(e)||(X(null),0))},computerWidth:10,required:!0,showError:q,setShowError:Q,hint:!n&&_("console:develop.features.applications.forms.inboundSAML.fields.assertionURLs.hint"),addURLTooltip:_("common:addURL"),duplicateURLErrorMessage:_("common:duplicateURLError"),"data-testid":"".concat(U,"-assertion-consumer-url-input"),getSubmit:function(e){ge=e},showPredictions:!1,customLabel:$,popupHeaderPositive:_("console:develop.features.URLInput.withLabel.positive.header"),popupHeaderNegative:_("console:develop.features.URLInput.withLabel.negative.header"),popupContentPositive:_("console:develop.features.URLInput.withLabel.positive.content",{productName:ve.ui.productName}),popupContentNegative:_("console:develop.features.URLInput.withLabel.negative.content",{productName:ve.ui.productName}),popupDetailedContentPositive:_("console:develop.features.URLInput.withLabel.positive.detailedContent.0"),popupDetailedContentNegative:_("console:develop.features.URLInput.withLabel.negative.detailedContent.0"),insecureURLDescription:_("console:common.validations.inSecureURL.description"),showLessContent:_("common:showLess"),showMoreContent:_("common:showMore")}),z&&he&&s.createElement(r.v0,{visible:!0,type:"info",content:s.createElement(s.Fragment,null,s.createElement(u.c,{i18nKey:"console:develop.features.applications.forms.inboundSAML.fields.assertionURLs.info",tOptions:{assertionURLFromTemplate:z}},"Don\u2019t have an app? Try out a sample app using ",s.createElement("strong",null,z),"as the assertion Response URL. (You can download and run a sample at a later step.)"),(void 0===k||""===k)&&s.createElement(r.Qj,{className:"m-1 p-1 with-no-border orange",onClick:function(e){e.preventDefault(),M(z),j(V),ne(!0)},"data-testid":"".concat(U,"-add-now-button")},s.createElement("span",{style:{fontWeight:"bold"}},"Add Now")))})))):K===g.T6.META_URL?s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16},s.createElement(i.gN,{name:"url",ref:I,displayErrorOn:"blur",label:_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.label"),required:!0,requiredErrorMessage:_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.validations.empty"),type:"text",placeholder:_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.placeholder"),validation:function(e,t){a.I.url(e)||(t.isValid=!1,t.errorMessages.push(_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.validations.invalid"))),null!==v.commonConfig&&void 0!==v.commonConfig&&v.commonConfig.blockLoopBackCalls&&o.URLUtils.isLoopBackCall(e)&&(t.isValid=!1,t.errorMessages.push(_("console:develop.features.idp.forms.common.internetResolvableErrorMessage"))),T&&(t.isValid=!1,t.errorMessages.push(_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.errorMessage")))},value:null==y||null===(ye=y.inboundProtocolConfiguration)||void 0===ye||null===(Ae=ye.saml)||void 0===Ae?void 0:Ae.metadataURL,"data-testid":"".concat(U,"-meta-url-input")}),!n&&s.createElement(r.kW,null,_("console:develop.features.applications.forms.inboundSAML.fields.metaURL.hint")))):K===g.T6.META_FILE?s.createElement(p.Z.Row,{columns:1},s.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16},s.createElement(r.GB,{key:1,fileStrategy:S,file:le,pastedContent:ue,onChange:function(e){se(e.file),de(e.pastedContent),re(e.serialized)},uploadButtonText:"Upload Metadata File",dropzoneText:"Drag and drop a XML file here.","data-testid":"".concat(U,"-form-wizard-saml-xml-config-file-picker"),icon:(0,h._5)().uploadPlaceholder,placeholderIcon:s.createElement(m.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:fe,hidePasteOption:!0}))):void 0)):s.createElement(r.pO,null)};A.defaultProps={"data-testid":"saml-protocol-settings-wizard-form",hideFieldHints:!1};var S=new r.R2}}]);