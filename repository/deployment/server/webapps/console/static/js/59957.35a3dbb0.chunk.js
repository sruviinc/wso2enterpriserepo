"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[59957],{59957:(e,t,n)=>{n.r(t),n.d(t,{UsersList:()=>A});var r=n(96433),i=n(83374),o=n(83831),l=n(81816),a=n(52983),s=n(9202),u=n(54221),c=n(97860),d=n(74691),m=n(30640),f=n(89423),p=n(67680),v=n(99839),y=n(28438);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,l,a=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return a}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t,n=e.advancedSearch,g=e.defaultListItemLimit,h=e.handleUserDelete,S=e.isLoading,C=e.readOnlyUserStores,A=e.featureConfig,R=e.onColumnSelectionChange,T=e.onListItemClick,w=e.onSearchQueryClear,I=e.searchQuery,O=e.selection,N=e.showListItemActions,P=e.showMetaContent,L=e.userMetaListContent,_=e.usersList,j=e["data-componentid"],M=(0,s.$)().t,k=E((0,a.useState)(!1),2),D=k[0],F=k[1],x=E((0,a.useState)(void 0),2),Y=x[0],V=x[1],H=E((0,a.useState)(!1),2),z=H[0],$=H[1],q=(0,u.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),Q=(0,u.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.username})),Z=(0,u.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.isPrivilegedUser})),J=function(e){m.m8.push(v.UsersConstants.getPaths().get("CUSTOMER_USER_EDIT_PATH").replace(":id",e))},W=function(e){var t,n,r,o=(0,i.WX)(null==e?void 0:e.userName);return null!==(t=e.name)&&void 0!==t&&t.givenName?e.name.givenName[0]:null!==(n=e.name)&&void 0!==n&&n.familyName?e.name.familyName[0]:e.emails[0]?e.emails[0][0]:(r=o,new RegExp(/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi).test(r)?"":o[0])},X=function(){return I&&0===(null==_?void 0:_.totalResults)?a.createElement(l.$J,{action:a.createElement(l.Qj,{onClick:w},M("console:manage.features.users.usersList.search.emptyResultPlaceholder.clearButton")),image:(0,m.jF)().emptySearch,imageSize:"tiny",title:M("console:manage.features.users.usersList.search.emptyResultPlaceholder.title"),subtitle:[M("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.0",{query:I}),M("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===(null==_?void 0:_.totalResults)?a.createElement(l.$J,{"data-componentid":"".concat(j,"-empty-list-empty-placeholder"),image:(0,m.jF)().newList,imageSize:"tiny",title:M("console:manage.features.users.placeholders.emptyList.title"),subtitle:[M("console:manage.features.users.usersList.list.emptyResultPlaceholder.subTitle.0",{type:"users"})]}):null};return a.createElement(a.Fragment,null,a.createElement(l.wQ,{className:"users-table",externalSearch:n,isLoading:S,loadingStateOptions:{count:null!=g?g:m.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(N){var e=[{"data-componentid":"users-list-item-edit-button",hidden:function(){return!(0,i.cr)(null==A?void 0:A.users,f._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,o,l,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n||null===(r=n.split("/")[0])||void 0===r?void 0:r.toUpperCase():"PRIMARY";return!(0,i.hasRequiredScopes)(null==A?void 0:A.users,null==A||null===(o=A.users)||void 0===o||null===(l=o.scopes)||void 0===l?void 0:l.update,q)||!(0,i.cr)(null==A?void 0:A.users,f._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=C&&C.includes(a.toString())?"eye":"pencil alternate"},onClick:function(e,t){return J(null==t?void 0:t.id)},popupText:function(e){var t,n,r,o,l,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n||null===(r=n.split("/")[0])||void 0===r?void 0:r.toUpperCase():"PRIMARY";return!(0,i.hasRequiredScopes)(null==A?void 0:A.users,null==A||null===(o=A.users)||void 0===o||null===(l=o.scopes)||void 0===l?void 0:l.update,q)||!(0,i.cr)(null==A?void 0:A.users,f._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=C&&C.includes(a.toString())?M("common:view"):M("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"users-list-item-delete-button",hidden:function(e){var t,n,o,l,a,s=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n||null===(o=n.split("/")[0])||void 0===o?void 0:o.toUpperCase():r.ss.PRIMARY_USER_STORE;return!(0,i.cr)(null==A?void 0:A.users,f._F.FEATURE_DICTIONARY.get("USER_DELETE"))||!(0,i.hasRequiredScopes)(null==A?void 0:A.users,null==A||null===(l=A.users)||void 0===l||null===(a=l.scopes)||void 0===a?void 0:a.delete,q)||(null==C?void 0:C.includes(s.toString()))||Z&&y.UserManagementUtils.isAuthenticatedUser(Q,null==e?void 0:e.userName)},icon:function(){return"trash alternate"},onClick:function(e,t){F(!0),V(t)},popupText:function(){return M("console:manage.features.users.usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r=y.UserManagementUtils.resolveUserListHeader(e),i=y.UserManagementUtils.resolveUserListSubheader(e),o=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);return a.createElement(c.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(j,"-item-heading")},a.createElement(l.Yt,{"data-componentid":"users-list-item-image",name:W(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),a.createElement(c.Z.Content,null,r,!o&&a.createElement(c.Z.Subheader,{"data-componentid":"".concat(j,"-item-sub-heading")},i)))},title:"User"},{allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){return function(e){var t,n,r,i,o=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n||null===(r=n.split("/")[0])||void 0===r?void 0:r.toUpperCase():"PRIMARY",l=null===(i=e[p.SCIMConfigs.scim.enterpriseSchema])||void 0===i?void 0:i.idpType;return l?l.split("/").length>1?null!=C&&C.includes(o.toString())?l.split("/")[1]+"-remote":l.split("/")[1]:l:"N/A"}(e)},title:a.createElement(a.Fragment,null,a.createElement("div",{className:"header-with-popup"},a.createElement("span",null,M("extensions:manage.users.list.columns.idpType")),a.createElement(l.GI,{trigger:a.createElement("div",{className:"inline"},a.createElement(d.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:M("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}];if(!P||!L)return e;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw o}}}}(L.entries());try{for(r.s();!(t=r.n()).done;){var s=E(t.value,2),u=s[0],m=s[1];if("name"!==u&&"emails"!==u&&"profileUrl"!==u&&""!==m){var f={allowToggleVisibility:!0,dataIndex:m,id:u,key:u,title:m};"meta.lastModified"===u&&(f=b(b({},f),{},{render:function(e){var t;return o.CommonUtils.humanizeDateDifference(null==e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),"userName"===u&&(f=b(b({},f),{},{render:function(e){return(0,i.WX)(null==e?void 0:e.userName)}})),n.push(f)}}}catch(v){r.e(v)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:null==_?void 0:_.Resources,onColumnSelectionChange:R,onRowClick:function(e,t){J(null==t?void 0:t.id),T&&T(e,t)},placeholders:X(),selectable:O,showHeader:!0,transparent:!S&&null!==X(),"data-componentid":j}),Y&&a.createElement(l.cV,{primaryActionLoading:z,"data-componentid":"".concat(j,"-confirmation-modal"),onClose:function(){return F(!1)},type:"negative",open:D,assertionHint:M("console:manage.features.user.deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return F(!1)},onPrimaryActionClick:function(){return e=Y.id,$(!0),void h(e).finally((function(){$(!1),V(void 0),F(!1)}));var e},closeOnDimmerClick:!1},a.createElement(l.cV.Header,{"data-componentid":"".concat(j,"-confirmation-modal-header")},M("console:manage.features.user.deleteUser.confirmationModal.header")),a.createElement(l.cV.Message,{"data-componentid":"".concat(j,"-confirmation-modal-message"),attached:!0,negative:!0},M("console:manage.features.user.deleteUser.confirmationModal.message")),a.createElement(l.cV.Content,{"data-componentid":"".concat(j,"-confirmation-modal-content")},null!==(t=Y[p.SCIMConfigs.scim.enterpriseSchema])&&void 0!==t&&t.userSourceId?M("console:manage.features.user.deleteJITUser.confirmationModal.content"):M("console:manage.features.user.deleteUser.confirmationModal.content"))))};A.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0}}}]);