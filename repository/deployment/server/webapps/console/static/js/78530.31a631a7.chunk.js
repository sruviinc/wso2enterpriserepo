"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[78530],{1971:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(96433),o=n(83374),r=n(14603),i=n(90268),s=n(81816),l=n(52983),c=n(9202),d=n(39990),u=n(54221),m=n(74691),f=n(64226),v=n(30640),p=n(43234),g=n(97032),h=n(18319),A=n(39872),E=n(7502),S=n(17643),y=n(44847),O=n(28438),C=n(68521),N=n(99839);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,i,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const _=function(){var e=(0,c.$)().t,t=(0,u.I0)(),n=(0,u.v9)((function(e){return e.config.ui.features})),U=(0,u.v9)((function(e){return e.profile.profileInfo})),_=(0,u.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),b=R((0,l.useState)(r.I),2),I=b[0],M=b[1],T=R((0,l.useState)(!1),2),k=T[0],w=T[1],G=R((0,l.useState)(void 0),2),P=G[0],D=G[1],L=R((0,l.useState)(!1),2),B=L[0],j=L[1],F=R((0,l.useState)(void 0),2),x=F[0],Q=F[1],Y=R((0,l.useState)(!1),2),z=Y[0],V=Y[1],q=R((0,l.useState)(void 0),2),K=q[0],W=q[1],Z=R((0,l.useState)(!0),2),$=Z[0],H=Z[1],J=R((0,l.useState)(!1),2),X=J[0],ee=J[1],te=R((0,l.useState)(void 0),2),ne=te[0],ae=te[1];(0,l.useEffect)((function(){var e,t,r,i;if(I){var s=(null==I||null===(e=I.userName)||void 0===e?void 0:e.split("/").length)>1?null==I||null===(t=I.userName)||void 0===t?void 0:t.split("/")[0]:a.ss.PRIMARY_USER_STORE;(!(0,o.cr)(null==n?void 0:n.users,A._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=P&&P.includes(null==s?void 0:s.toString())||!(0,o.hasRequiredScopes)(null==n?void 0:n.users,null==n||null===(r=n.users)||void 0===r||null===(i=r.scopes)||void 0===i?void 0:i.update,_))&&H(!0)}}),[I,P]),(0,l.useEffect)((function(){var e=[];(0,p.aA)(g.v.ACCOUNT_MANAGEMENT_CATEGORY_ID).then((function(t){t.map((function(t){t.id!==g.v.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==g.v.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),(0,p.aA)(g.v.USER_ONBOARDING_CONNECTOR_ID).then((function(t){t.map((function(t){t.id===g.v.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===g.v.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),Q(e)}))}))}),[]),(0,l.useEffect)((function(){var e,t;I&&((0,o.hasRequiredScopes)(null==n?void 0:n.guestUser,null==n||null===(e=n.guestUser)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.read,_)&&se(),ae(O.UserManagementUtils.isDisplayNameEnabled(v.h.getState().profile.profileSchemas,I.displayName)))}),[I]),(0,l.useEffect)((function(){var e=v.m8.location.pathname.split("/"),t=e[e.length-1];le(t)}),[]),(0,l.useEffect)((function(){V(!0),y.UserStoreUtils.getReadOnlyUserStores().then((function(e){D(e)})).finally((function(){V(!1)}))}),[]);var oe,re,ie,se=function(){(0,p.Un)().then((function(e){W(null==e?void 0:e.realmConfig)}))},le=function(e){w(!0),(0,h.M_)(e,null).then((function(e){M(e)})).catch((function(){})).finally((function(){w(!1)}))},ce=function(e){le(e),E.Q.isAuthenticatedUser(null==U?void 0:U.userName,null==I?void 0:I.userName)&&t((0,f.G)())};return l.createElement(s.O9,{isLoading:k,loadingStateOptions:{count:5,imageType:"circular"},title:void 0!==(null==I?void 0:I.active)?l.createElement(l.Fragment,null,null!=I&&I.active?l.createElement(s.GI,{trigger:l.createElement(m.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:e("common:enabled"),inverted:!0}):l.createElement(s.GI,{trigger:l.createElement(m.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:e("common:disabled"),inverted:!0}),l.createElement(l.Fragment,null,ne?I.displayName:(0,o.nk)(I,null,S.administratorConfig.adminRoleName))):l.createElement(l.Fragment,null,ne?I.displayName:(0,o.nk)(I,null,S.administratorConfig.adminRoleName)),description:(ie=I.emails?(oe=null==I?void 0:I.emails,re="",oe&&Array.isArray(oe)&&oe.length>0&&(re=oe.find((function(e){return"string"==typeof e}))),re):I.userName,ne?ie:(0,o.nk)(I,null,S.administratorConfig.adminRoleName)===ie?S.administratorConfig.adminRoleName:ie),image:l.createElement(s.Yt,{editable:!$,name:ne?I.displayName:(0,o.nk)(I),size:"tiny",image:null==I?void 0:I.profileUrl,onClick:function(){return!$&&j(!0)},"data-hj-suppress":""}),backButton:{"data-testid":"user-mgt-edit-admin-back-button",onClick:function(){v.m8.push(N.UsersConstants.getPaths().get("COLLABORATOR_USERS_PATH"))},text:e("extensions:manage.admins.editPage.backButton")},titleTextAlign:"left",bottomMargin:!1},l.createElement(C.EditGuestUser,{realmConfigs:K,featureConfig:n,user:I,handleUserUpdate:ce,readOnlyUserStores:P,connectorProperties:x,isReadOnlyUserStoresLoading:z}),B&&l.createElement(s.Oi,{open:B,name:ne?I.displayName:(0,o.nk)(I),emails:(0,o.r1)(null==I?void 0:I.emails),onClose:function(){return j(!1)},closeOnDimmerClick:!1,onCancel:function(){return j(!1)},onSubmit:function(n,a){var o={Operations:[{op:"replace",value:{profileUrl:a}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};ee(!0),(0,h.gS)(null==I?void 0:I.id,o).then((function(){t((0,i.V_)({description:e("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:r.QU.SUCCESS,message:e("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")})),ce(null==I?void 0:I.id)})).catch((function(n){n.response&&n.response.data&&(n.response.data.description||n.response.data.detail)?t((0,i.V_)({description:n.response.data.description||n.response.data.detail,level:r.QU.ERROR,message:e("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):t((0,i.V_)({description:e("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:r.QU.ERROR,message:e("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){j(!1),ee(!0)}))},isSubmitting:X,imageUrl:null==I?void 0:I.profileUrl,heading:e("console:common.modals.editAvatarModal.heading"),submitButtonText:e("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:e("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:l.createElement(d.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",l.createElement("a",{href:"https://www.gravatar.com"}," Gravatar Official Website"),"or use one of the following."),header:e("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:e("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:e("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:e("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:e("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:e("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}},"data-hj-suppress":""}))}},70418:(e,t,n)=>{n.r(t);n(97651),n(94757),n(1971),n(37905)}}]);