"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[62278],{62278:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(7955),i=a(14603),c=a(90268),r=a(81816),l=a(52983),o=a(9202),s=a(54221),d=a(94635),u=a(97860),m=a(28141),f=a(75917),g=a(91478),p=a(33614),E=a(30640),h=a(97988),y=a(68836),v=a(97865);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,c,r,l=[],o=!0,s=!1;try{if(c=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=c.call(a)).done)&&(l.push(n.value),l.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{if(!o&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Z=function(e){var t=e.attributeType,a=e.attributeUri,y=e.mappedLocalClaims,C=e.updateMappedClaims,Z=e["data-testid"],A=e.id,R=b((0,l.useState)(null),2),S=R[0],w=R[1],D=b((0,l.useState)(void 0),2),T=D[0],U=D[1],I=b((0,l.useState)(!0),2),_=I[0],L=I[1],M=b((0,l.useState)(!1),2),O=M[0],x=M[1],k=(0,s.I0)(),V=(0,o.$)().t,j=function(e){(0,p.vR)(null!=e?e:A).then((function(e){w(e)})).catch((function(e){k((0,c.V_)({description:(null==e?void 0:e.description)||V("console:manage.features.claims.dialects.notifications.fetchADialect.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||V("console:manage.features.claims.dialects.notifications.fetchADialect.genericError.message")}))}))};(0,l.useEffect)((function(){A&&j()}),[A]);var P=function(e,a,n,r){A&&L(!0),A&&U(void 0),A&&(0,p.gR)(A,{filter:r,limit:e,offset:a,sort:n}).then((function(e){var a=g.attributeConfig.attributeMappings.getExternalAttributes(t,e);U((0,E.fS)(a,"claimURI",!0))})).catch((function(e){var a,n,r,l;k((0,c.V_)({description:(null==e||null===(a=e.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.description)||V("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,v.i)(t)}),level:i.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||V("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){L(!1)}))};(0,l.useEffect)((function(){P()}),[A]);var Q=function(e){(0,p.Nx)(e).then((function(){E.m8.push(E.$x.getPaths().get("CLAIM_DIALECTS")),k((0,c.V_)({description:V("console:manage.features.claims.dialects.notifications.deleteDialect.success.description",{type:(0,v.i)(t,!0)}),level:i.QU.SUCCESS,message:V("console:manage.features.claims.dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){k((0,c.V_)({description:(null==e?void 0:e.description)||V("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.description",{type:(0,v.i)(t,!0)}),level:i.QU.ERROR,message:(null==e?void 0:e.message)||V("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.message")}))}))};return l.createElement(l.Fragment,null,g.attributeConfig.attributeMappings.editAttributeMappingDetails&&l.createElement(l.Fragment,null,l.createElement(d.Z,null,l.createElement(d.Z.Row,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(u.Z,{as:"h4"},V("console:manage.features.claims.dialects.pageLayout.edit.updateDialectURI",{type:(0,v.i)(t,!0)})),l.createElement(r.pJ,null,_?l.createElement(m.Z,null,l.createElement(m.Z.Line,{length:"short"}),l.createElement(m.Z.Line,{length:"medium"})):l.createElement(h.T8,{dialect:S,"data-testid":"".concat(Z,"-edit-dialect-details"),attributeType:t,onUpdate:function(e){j(e)}}))))),l.createElement(f.Z,{hidden:!0}),l.createElement(d.Z,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(u.Z,{as:"h4"},V("console:manage.features.claims.dialects.pageLayout.edit.updateExternalAttributes",{type:(0,v.i)(t,!0)})))),l.createElement(f.Z,{hidden:!0}),l.createElement(f.Z,{hidden:!0})),l.createElement(h._v,{dialectID:A,isLoading:_,claims:T,update:P,"data-testid":"".concat(Z,"-edit-external-claims"),attributeType:t,attributeUri:a,mappedLocalClaims:y,updateMappedClaims:C}),l.createElement(f.Z,{hidden:!0}),g.attributeConfig.attributeMappings.showDangerZone&&l.createElement(d.Z,null,l.createElement(d.Z.Row,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(n.di,{when:n.TA.SCOPE_DELETE},l.createElement(r.v9,{sectionHeader:V("common:dangerZone"),"data-testid":"".concat(Z,"-danger-zone-group")},l.createElement(r.cN,{actionTitle:V("console:manage.features.claims.dialects.dangerZone.actionTitle",{type:(0,v.i)(t,!0,!0)}),header:V("console:manage.features.claims.dialects.dangerZone.header",{type:(0,v.i)(t,!0)}),subheader:V("console:manage.features.claims.dialects.dangerZone.subheader",{type:(0,v.i)(t)}),onActionClick:function(){return x(!0)},"data-testid":"".concat(Z,"-dialect-delete-danger-zone")})))))),g.attributeConfig.attributeMappings.showDangerZone&&O&&l.createElement(r.cV,{onClose:function(){return x(!1)},type:"negative",open:O,assertion:S.dialectURI,assertionHint:l.createElement("p",null,"Please type ",l.createElement("strong",null,S.dialectURI)," to confirm."),assertionType:"input",primaryAction:V("console:manage.features.claims.dialects.confirmations.action"),secondaryAction:V("common:cancel"),onSecondaryActionClick:function(){return x(!1)},onPrimaryActionClick:function(){return Q(S.id)},"data-testid":"".concat(Z,"-delete-confirmation-modal"),closeOnDimmerClick:!1},l.createElement(r.cV.Header,{"data-testid":"".concat(Z,"-delete-confirmation-modal-header")},V("console:manage.features.claims.dialects.confirmations.header")),l.createElement(r.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(Z,"-delete-confirmation-modal-message")},V("console:manage.features.claims.dialects.confirmations.message")),l.createElement(r.cV.Content,{"data-testid":"".concat(Z,"-delete-confirmation-modal-content")},V("console:manage.features.claims.dialects.confirmations.content",{type:(0,v.i)(t)}))))};Z.defaultProps={attributeType:y.Q.OTHERS,"data-testid":"external-dialect-edit"};const A=Z}}]);