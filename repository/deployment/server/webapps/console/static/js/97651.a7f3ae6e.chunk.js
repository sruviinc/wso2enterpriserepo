"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[97651,95494,6933,19245,64903,68521],{95494:(e,t,n)=>{n.r(t),n.d(t,{disconnectAgentConnection:()=>o.disconnectAgentConnection,generateToken:()=>o.generateToken,getAgentConnections:()=>o.getAgentConnections,regenerateToken:()=>o.regenerateToken});var o=n(6933)},6933:(e,t,n)=>{n.r(t),n.d(t,{disconnectAgentConnection:()=>u,generateToken:()=>c,getAgentConnections:()=>l,regenerateToken:()=>d});var o=n(93967),r=n(14603),i=n(30640),a="Resource not found.",s=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),l=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.GET,url:"".concat(i.h.getState().config.endpoints.userStoreAgentConnection,"/").concat(e)};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n,o;if((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)!==a)return Promise.reject(null==e||null===(o=e.response)||void 0===o?void 0:o.data)}))},u=function(e,t){var n={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.DELETE,url:"".concat(i.h.getState().config.endpoints.userStoreAgentConnection,"/").concat(e,"/agent/").concat(t)};return s(n).then((function(e){return 204!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n,o;if((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)!==a)return Promise.reject(null==e||null===(o=e.response)||void 0===o?void 0:o.data)}))},c=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(i.h.getState().config.endpoints.userStoreAgentToken)};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n,o;if((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)!==a)return Promise.reject(null==e||null===(o=e.response)||void 0===o?void 0:o.data)}))},d=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(i.h.getState().config.endpoints.userStoreAgentToken,"/regenerate")};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n,o;if((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)!==a)return Promise.reject(null==e||null===(o=e.response)||void 0===o?void 0:o.data)}))}},64903:(e,t,n)=>{n.r(t),n.d(t,{updateOrganizationConfig:()=>u,useOrganizationConfig:()=>l});var o=n(93967),r=n(14603),i=n(43991),a=n(26187),s=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),l=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={headers:{"Content-Type":"application/json"},method:r.f2.GET,url:a.h.getState().config.endpoints.organizationEndpoint.replace("{organization}",e)},s=(0,i.Z)(n?o:null,t),l=s.data,u=s.error;return{data:l,error:u,isLoading:!u&&!l,isValidating:s.isValidating,mutate:s.mutate}},u=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.PATCH,url:a.h.getState().config.endpoints.organizationPatchEndpoint};return s(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},68521:(e,t,n)=>{n.r(t),n.d(t,{AllUsersList:()=>o.AllUsersList,ChangePasswordComponent:()=>r.ChangePasswordComponent,ConsumerUserGroupsList:()=>r.ConsumerUserGroupsList,ConsumerUserProfile:()=>r.ConsumerUserProfile,EditConsumerUser:()=>r.EditConsumerUser,EditGuestUser:()=>i.EditGuestUser,GuestUsersList:()=>i.GuestUsersList,OnboardedGuestUsersList:()=>i.OnboardedGuestUsersList,UserRolesList:()=>i.UserRolesList,UsersList:()=>r.UsersList});var o=n(76898),r=n(63947),i=n(59873)},97651:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var o=n(7955),r=n(83374),i=n(14603),a=n(90268),s=n(81816),l=n(46440),u=n(67127),c=n(52983),d=n(9202),m=n(54221),f=n(94635),v=n(74691),p=n(88171),g=n(5873),E=n(30640),A=n(54004),h=n(80617),S=n(26021),R=n(39162),C=n(53830),T=n(17643),I=n(67680),y=n(30458),U=n(14761),b=n(95494),P=n(64322),L=n(64903),N=n(68521),O=n(99839),_=n(52213),D=n(79951);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},M.apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var V;!function(e){e[e.EXTERNAL_ADMINS=0]="EXTERNAL_ADMINS",e[e.INTERNAL_ADMINS=1]="INTERNAL_ADMINS"}(V||(V={}));var z=function(e){var t,n,w=e.location,x=e["data-componentid"],j=new URLSearchParams(w.search),Q=(0,d.$)().t,z=(0,m.I0)(),F=(0,s.fQ)().getLink,W=(0,o.Ac)(y.FeatureGateConstants.SAAS_FEATURES_IDENTIFIER),Z=(0,m.v9)((function(e){return e.config.ui.features})),X=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),B=(0,m.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.deployment)||void 0===n?void 0:n.clientHost})),H=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.username})),K=(0,m.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.deployment)||void 0===n?void 0:n.tenant})),q=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.tenants})),Y=G((0,c.useState)(void 0),2),$=Y[0],J=Y[1],ee=G((0,c.useState)(""),2),te=ee[0],ne=ee[1],oe=G((0,c.useState)(""),2),re=oe[0],ie=oe[1],ae=G((0,c.useState)(0),2),se=ae[0],le=ae[1],ue=G((0,c.useState)(E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),ce=ue[0],de=ue[1],me=G((0,c.useState)(!1),2),fe=me[0],ve=me[1],pe=G((0,c.useState)(!1),2),ge=pe[0],Ee=pe[1],Ae=G((0,c.useState)([]),1)[0],he=G((0,c.useState)(_.InvitationStatus.ACCEPTED),2),Se=he[0],Re=he[1],Ce=G((0,c.useState)(!1),2),Te=Ce[0],Ie=Ce[1],ye=G((0,c.useState)([]),2),Ue=ye[0],be=ye[1],Pe=G((0,c.useState)([]),2),Le=Pe[0],Ne=Pe[1],Oe=G((0,c.useState)([]),2),_e=Oe[0],De=Oe[1],we=G((0,c.useState)([]),2),Me=we[0],xe=we[1],ke=G((0,c.useState)(!1),2),je=ke[0],Ge=ke[1],Qe=G((0,c.useState)(!0),2),Ve=Qe[0],ze=Qe[1],Fe=G((0,c.useState)(O.AdminAccountTypes.INTERNAL),2),We=Fe[0],Ze=Fe[1],Xe=G((0,c.useState)(O.CONSUMER_USERSTORE),2),Be=Xe[0],He=Xe[1],Ke=G((0,c.useState)(null),2),qe=Ke[0],Ye=Ke[1],$e=G((0,c.useState)(!1),2),Je=$e[0],et=$e[1],tt=G((0,c.useState)(!1),2),nt=tt[0],ot=tt[1],rt=G((0,c.useState)(!1),2),it=rt[0],at=rt[1],st=G((0,c.useState)(!1),2),lt=st[0],ut=st[1],ct=G((0,c.useState)(!1),2),dt=ct[0],mt=ct[1],ft=G((0,c.useState)(!1),2),vt=ft[0],pt=ft[1],gt=G((0,c.useState)(!1),2),Et=gt[0],At=gt[1],ht=G((0,c.useState)(!1),2),St=ht[0],Rt=ht[1],Ct=G((0,c.useState)(!1),2),Tt=Ct[0],It=Ct[1],yt=G((0,c.useState)(V.EXTERNAL_ADMINS),2),Ut=yt[0],bt=yt[1],Pt=G((0,c.useState)([]),2),Lt=Pt[0],Nt=Pt[1],Ot=G((0,c.useState)(""),2),_t=Ot[0],Dt=Ot[1],wt=G((0,c.useState)(""),2),Mt=wt[0],xt=wt[1],kt=G((0,c.useState)({}),2),jt=kt[0],Gt=kt[1],Qt=G((0,c.useState)({Resources:[],itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),2),Vt=Qt[0],zt=Qt[1],Ft=G((0,c.useState)({Resources:[],itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),2),Wt=Ft[0],Zt=Ft[1],Xt=E.h.getState().auth.tenantDomain,Bt=E.lD.getInstance(),Ht=ce+1,Kt=O.UsersConstants.GROUPS_ATTRIBUTE,qt=(0,L.useOrganizationConfig)(Xt,{revalidateIfStale:!0},W===o.iK.ENABLED),Yt=qt.data,$t=qt.isLoading,Jt=qt.isValidating,en=qt.error,tn=(0,S.WW)(Ht,se+1,""===te?null:te,null,O.PRIMARY_USERSTORE,Kt,!T.administratorConfig.enableAdminInvite||Se===_.InvitationStatus.ACCEPTED),nn=tn.data,on=tn.isLoading,rn=tn.error,an=tn.mutate,sn=(0,P.useInvitedUsersList)(T.administratorConfig.enableAdminInvite),ln=sn.data,un=sn.isLoading,cn=sn.error,dn=sn.mutate,mn=(0,h.yA)(),fn=mn.data,vn=mn.error;(0,c.useEffect)((function(){return bn(),gn(),En(),xt((0,U.getAssociationType)(q,K)),_.InvitationStatus.ACCEPTED.toUpperCase()===Se.toUpperCase()&&(Sn&&0!=Sn.totalResults||((null==ln?void 0:ln.filter((function(e){return e.status===_.InvitationStatus.PENDING.toUpperCase()})).length)>0?(Re(_.InvitationStatus.PENDING),Ie(!0)):(null==ln?void 0:ln.filter((function(e){return e.status===_.InvitationStatus.EXPIRED.toUpperCase()})).length)>0&&(Re(_.InvitationStatus.EXPIRED),Ie(!0)))),function(){Re(_.InvitationStatus.ACCEPTED),Ie(!0)}}),[]),(0,c.useEffect)((function(){ot(null==Yt?void 0:Yt.isEnterpriseLoginEnabled)}),[$t,Jt]),(0,c.useEffect)((function(){var e,t,n,o,r,s,l,u,c,d,m;rn&&(null!=rn&&null!==(e=rn.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?z((0,a.V_)({description:null!==(n=null!==(o=null==rn||null===(r=rn.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==o?o:null==rn||null===(l=rn.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.detail)&&void 0!==n?n:Q("console:manage.features.users.notifications.fetchUsers.error.description"),level:i.QU.ERROR,message:null!==(c=null==rn||null===(d=rn.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)&&void 0!==c?c:Q("console:manage.features.users.notifications.fetchUsers.error.message")})):z((0,a.V_)({description:Q("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[rn]),(0,c.useEffect)((function(){var e,t,n,o,r,s,l,u,c,d,m;cn&&(null!=cn&&null!==(e=cn.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?z((0,a.V_)({description:null!==(n=null!==(o=null==cn||null===(r=cn.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==o?o:null==cn||null===(l=cn.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.detail)&&void 0!==n?n:Q("console:manage.features.users.notifications.fetchUsers.error.description"),level:i.QU.ERROR,message:null!==(c=null==cn||null===(d=cn.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)&&void 0!==c?c:Q("console:manage.features.users.notifications.fetchUsers.error.message")})):z((0,a.V_)({description:Q("console:manage.features.users.notifications.fetchUsers.genericError. description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[cn]),(0,c.useEffect)((function(){var e,t,n,o,r,s,l,u,c,d,m;vn&&(null!=vn&&null!==(e=vn.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?z((0,a.V_)({description:null!==(n=null!==(o=null==vn||null===(r=vn.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==o?o:null==vn||null===(l=vn.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.detail)&&void 0!==n?n:Q("console:manage.features.users.notifications.fetchUsers.error.description"),level:i.QU.ERROR,message:null!==(c=null==vn||null===(d=vn.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)&&void 0!==c?c:Q("console:manage.features.users.notifications.fetchUsers.error.message")})):z((0,a.V_)({description:Q("console:manage.features.users.notifications.fetchUsers.genericError. description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[vn]),(0,c.useEffect)((function(){var e,t,n,o,r,s,l,u,c,d,m;en&&(null!=en&&null!==(e=en.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.description?z((0,a.V_)({description:null!==(n=null!==(o=null==en||null===(r=en.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.description)&&void 0!==o?o:null==en||null===(l=en.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.detail)&&void 0!==n?n:Q("extensions:manage.users.administratorSettings.error.description"),level:i.QU.ERROR,message:null!==(c=null==en||null===(d=en.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)&&void 0!==c?c:Q("extensions:manage.users.administratorSettings.error.message")})):z((0,a.V_)({description:Q("extensions:manage.users.administratorSettings.genericError.description"),level:i.QU.ERROR,message:Q("extensions:manage.users.administratorSettings.genericError.message")})))}),[en]),(0,c.useEffect)((function(){if(Se!==_.InvitationStatus.ACCEPTED){if(le(0),"email co "===te||""===te||null===te)return be(ln),void De([]);if(te){var e=ln;if(_e.length>0&&(e=_e),te.includes("email sw ")){var t=te.split("sw ")[1];e=e.filter((function(e){return e.email.startsWith(t)}))}else if(te.includes("email ew ")){var n=te.split("ew ")[1];e=e.filter((function(e){return e.email.endsWith(n)}))}else if(te.includes("email eq ")){var o=te.split("eq ")[1];e=e.filter((function(e){return e.email===o}))}else if(te.includes("email co ")){var r=te.split("co ")[1];e=e.filter((function(e){return e.email.includes(r)}))}be(e),De(e)}}}),[te]),(0,c.useEffect)((function(){if(Se!==_.InvitationStatus.ACCEPTED){var e=null==Ue?void 0:Ue.filter((function(e){return e.status===Se.toUpperCase()}));e.length>ce?(e=e.slice(se,se+ce),Ne(e),Ge(e.length===ce)):(Ne(e),Ge(!1))}}),[Ue,se,ce,Te]),(0,c.useEffect)((function(){be(ln)}),[ln]),(0,c.useEffect)((function(){Te&&(le(0),de(E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),In(),Ie(!1))}),[Te]),(0,c.useEffect)((function(){j.get(O.UsersConstants.USER_CREATE_WIZARD_TRIGGER_URL_SEARCH_PARAM_KEY)&&(Bt.publish("manage-users-click-create-new",{type:"collaborator"}),Ee(!0))}),[j.get(O.UsersConstants.USER_CREATE_WIZARD_TRIGGER_URL_SEARCH_PARAM_KEY)]),(0,c.useEffect)((function(){Ut===V.INTERNAL_ADMINS&&Pn()}),[Ut,_t,Je]),(0,c.useEffect)((function(){An()}),[qe]),(0,c.useEffect)((function(){var e,t,n,o,r,i,a,s=k({},jt);(Be!==O.CONSUMER_USERSTORE&&(s=k({},Vt)),(0,u.Z)(re))||(s.Resources=null===(a=s)||void 0===a?void 0:a.Resources.filter((function(e){var t;return-1!==(null==e||null===(t=e.display)||void 0===t?void 0:t.split("/")[1]).indexOf(re)})));var l=null===(e=s)||void 0===e||null===(t=e.Resources)||void 0===t?void 0:t.slice(se,se+ce);Ut!==V.EXTERNAL_ADMINS&&(0,u.Z)(l)&&le(0),Rt((null===(n=s)||void 0===n||null===(o=n.Resources)||void 0===o?void 0:o.length)>se+ce),Zt({Resources:l,itemsPerPage:ce,startIndex:se,totalResults:null===(r=s)||void 0===r||null===(i=r.Resources)||void 0===i?void 0:i.length}),pt(!1)}),[jt,Vt,se,ce,Be,re]);var pn=function(e){var t;if(e){var n=(0,l.Z)(e),o=[],r=function(e){var t;return(null===(t=e[I.SCIMConfigs.scim.enterpriseSchema])||void 0===t?void 0:t.userAccountType)===O.UserAccountTypes.OWNER};n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if(!(null==(t=e)||null===(n=t.roles)||void 0===n?void 0:n.some((function(e){return e.display===T.administratorConfig.adminRoleName}))))return null;var t,n;if(r(e)&&C.QH.isAuthenticatedUser(H,null==e?void 0:e.userName))return o[0]=e,null;if(C.QH.isAuthenticatedUser(H,null==e?void 0:e.userName))return o[0]=e,null;if(r(e))return o[1]=e,null;var i=null;if((null==e?void 0:e.emails)instanceof Array){var a=null==e?void 0:e.emails[0];i="string"==typeof a?a:null==a?void 0:a.value}return e.emails=[i],e}));return n.Resources=o.concat(n.Resources).filter((function(e){return null!=e})),function(e,t){var n,o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e;(null===(n=i.Resources)||void 0===n?void 0:n.length)===t?(null===(o=i.Resources)||void 0===o||o.splice(-1,r),J(!0)):J(!1);return i}(n,Ht,1)}},gn=function(){at(!0),(0,P.getUserStores)().then((function(e){var t=[],n=null==e?void 0:e.filter((function(e){return e.enabled})).map((function(e,n){return e.typeName===O.UsersConstants.READONLY_USERSTORE_TYPE_NAME&&(t.push(e.name.toUpperCase()),Ye(e.id)),{key:n,text:e.name.toUpperCase(),value:e.name.toUpperCase()}}));It(!1),Nt(n),xe(t),ut(n.length<=1)})).catch((function(e){var t,n,o,r,s,l,u,c,d,m,f;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?z((0,a.V_)({description:null!==(o=null!==(r=null==e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description)&&void 0!==r?r:null==e||null===(u=e.response)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.detail)&&void 0!==o?o:Q("console:manage.features.users.notifications.fetchUserStores.error.description"),level:i.QU.ERROR,message:null!==(d=null==e||null===(m=e.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)&&void 0!==d?d:Q("console:manage.features.users.notifications.fetchUserStores.error.message")})):(z((0,a.V_)({description:Q("console:manage.features.users.notifications.fetchUserStores.genericError.description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.fetchUserStores.genericError.message")})),It(!0))})).finally((function(){at(!1)}))},En=function(){var e={filter:"displayName eq "+T.administratorConfig.adminRoleName,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:0};(0,A.QW)(e).then((function(e){var t;if((null==e||null===(t=e.data)||void 0===t?void 0:t.Resources.length)>0){var n,o,r=null==e||null===(n=e.data)||void 0===n||null===(o=n.Resources[0])||void 0===o?void 0:o.id;Dt(r)}})).catch((function(e){e.response&&e.response.data&&e.response.data.description?z((0,a.V_)({description:e.response.data.description,level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.getAdminRole.error.message")})):z((0,a.V_)({description:Q("console:manage.features.users.notifications.getAdminRole.genericError.description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.getAdminRole.genericError.message")}))}))},An=function(){(0,u.Z)(qe)||(0,b.getAgentConnections)(qe).then((function(e){e.forEach((function(e){e.connected&&et(!0)}))})).catch((function(e){z((0,a.V_)({description:(null==e?void 0:e.description)||Q("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||Q("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}))}))},hn=function(e,t){He(t.value),mt(null==Me?void 0:Me.includes(t.value.toString().toUpperCase())),le(0),de(E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),pt(!0)},Sn=(0,c.useMemo)((function(){return pn(nn)}),[nn]),Rn=function(e,t){le((t.activePage-1)*ce)},Cn=function(e,t){de(t.value)},Tn=[{key:1,text:"Accepted",value:"Accepted"},{key:2,text:"Pending",value:"Pending"},{key:3,text:"Expired",value:"Expired"}],In=function(){ve(!fe),ne(""),ie("")},yn=function(e){if(Ut!==V.INTERNAL_ADMINS){if(ne(e),Se===_.InvitationStatus.ACCEPTED){if("userName sw "===e)return void ne(null);ne(e)}}else ie(null==e?void 0:e.trim())},Un=function(e,t){Re(t.value),Ie(!0)},bn=function(){var e=Z.users.disabledFeatures;ze(null==e?void 0:e.includes(O.ADVANCED_USER_MGT))},Pn=function(){var e=[],t=[];At(!0),(0,u.Z)(_t)||(Gt({Resources:[],itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),zt({Resources:[],itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),(0,A.xQ)(_t).then((function(n){var o;(null==n||null===(o=n.data)||void 0===o?void 0:o.users).forEach((function(n){var o=n.display.split("/");o.length>1&&(o[0]===O.CONSUMER_USERSTORE?e.push(n):t.push(n))})),Gt({Resources:e,itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:e.length}),Je&&zt({Resources:t,itemsPerPage:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:t.length}),At(!0)})).catch((function(e){var t,n,o,r,s,l,u,c,d,m,f;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?z((0,a.V_)({description:null!==(o=null!==(r=null==e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description)&&void 0!==r?r:null==e||null===(u=e.response)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.detail)&&void 0!==o?o:Q("console:manage.features.users.notifications.fetchUsers.error.description"),level:i.QU.ERROR,message:null!==(d=null==e||null===(m=e.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)&&void 0!==d?d:Q("console:manage.features.users.notifications.fetchUsers.error.message")})):z((0,a.V_)({description:Q("console:manage.features.users.notifications.fetchUsers.genericError. description"),level:i.QU.ERROR,message:Q("console:manage.features.users.notifications.fetchUsers.genericError.message")}))})).finally((function(){At(!1)})))},Ln=c.createElement(c.Fragment,null,c.createElement(s.KM,{"data-componentid":"".concat(x,"-add-admin-button"),onClick:function(){Bt.publish("admins-click-add-new-button")},className:"tablet or lower hidden"},c.createElement(v.Z,{name:"add"}),Q("extensions:manage.users.buttons.addCollaboratorBtn"),c.createElement(v.Z,{name:"dropdown",className:"ml-3 mr-0"})),c.createElement(p.Z,{"data-componentid":"".concat(x,"-add-admin-button"),icon:"add",onClick:function(){Bt.publish("admins-click-add-new-button")},className:"mobile only tablet only",primary:!0})),Nn=[{"data-componentid":"admins-add-external-admin",key:1,text:"Invite admins to Asgardeo",value:O.AdminAccountTypes.EXTERNAL},{"data-componentid":"admins-add-internal-admin",key:2,text:"Assign admins from users",value:O.AdminAccountTypes.INTERNAL}];(0,r.hasRequiredScopes)(null==Z?void 0:Z.guestUser,null==Z||null===(t=Z.guestUser)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.create,X)&&Nn.push();var On,_n=function(e,t){Re(_.InvitationStatus.ACCEPTED),bt(t.activeIndex),In(),At(!0)},Dn=function(){var e;return c.createElement(s.PS,{className:"mt-5",advancedSearch:c.createElement(E.nC,{onFilter:yn,filterAttributeOptions:Se===_.InvitationStatus.ACCEPTED?[{key:0,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"},{key:2,text:"First Name",value:"name.givenName"},{key:3,text:"Last Name",value:"name.familyName"}]:[{key:0,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"email"}],filterAttributePlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterAttribute. placeholder"),filterConditionsPlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:Q("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:Se===_.InvitationStatus.ACCEPTED?"userName":"email",defaultSearchOperator:"co",triggerClearQuery:fe}),currentListSize:Se===_.InvitationStatus.ACCEPTED?null==Sn||null===(e=Sn.Resources)||void 0===e?void 0:e.length:null==Le?void 0:Le.length,listItemLimit:ce,onItemsPerPageDropdownChange:Cn,"data-componentid":"".concat(x,"-list-layout"),onPageChange:Rn,showPagination:!0,showTopActionPanel:!0,showPaginationPageLimit:!dt,totalPages:Se===_.InvitationStatus.ACCEPTED?Math.ceil((null==Sn?void 0:Sn.totalResults)/ce):Math.ceil((null==Ue?void 0:Ue.length)/ce),totalListSize:Se===_.InvitationStatus.ACCEPTED?null==Sn?void 0:Sn.totalResults:null==Ue?void 0:Ue.length,isLoading:Se===_.InvitationStatus.ACCEPTED&&on||T.administratorConfig.enableAdminInvite&&un,onSearchQueryClear:In,resetPagination:Te,paginationOptions:{disableNextButton:Se===_.InvitationStatus.ACCEPTED?!$:!je},disableRightActionPanel:!0,leftActionPanel:T.administratorConfig.enableAdminInvite&&c.createElement(g.Z,{"data-componentid":"".concat(x,"-list-userstore-dropdown"),selection:!0,options:Tn&&Tn,onChange:Un,text:"Filter by: ".concat(Se),disabled:Se===_.InvitationStatus.ACCEPTED&&on||T.administratorConfig.enableAdminInvite&&un})},Se===_.InvitationStatus.ACCEPTED&&c.createElement(N.OnboardedGuestUsersList,{advancedSearch:c.createElement(E.nC,{onFilter:yn,filterAttributeOptions:[{key:0,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:Q("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:Q("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:fe}),onboardedGuestUsersList:Sn,userMetaListContent:null,realmConfigs:null==fn?void 0:fn.realmConfig,onEmptyListPlaceholderActionClick:function(){return Ee(!0)},onSearchQueryClear:In,searchQuery:te,"data-componentid":"".concat(x,"-list"),readOnlyUserStores:null,featureConfig:Z,onUserDelete:function(){an()},adminType:O.AdminAccountTypes.EXTERNAL,adminRoleId:_t}),Se===_.InvitationStatus.PENDING&&c.createElement(N.GuestUsersList,{invitationStatusOption:Se,onEmptyListPlaceholderActionClick:function(){return Ee(!0)},onboardedGuestUserList:Sn,onSearchQueryClear:In,guestUsersList:Le,getGuestUsersList:function(){return dn()},searchQuery:te}),Se===_.InvitationStatus.EXPIRED&&c.createElement(N.GuestUsersList,{invitationStatusOption:Se,onEmptyListPlaceholderActionClick:function(){return Ee(!0)},onboardedGuestUserList:Sn,onSearchQueryClear:In,guestUsersList:null==Le?void 0:Le.filter((function(e){return e.status===_.InvitationStatus.EXPIRED.toUpperCase()})),getGuestUsersList:function(){return dn()},searchQuery:te}))},wn=function(){var e;return c.createElement(s.PS,{className:"mt-5",advancedSearch:c.createElement(E.nC,{disableSearchFilterDropdown:!0,onFilter:yn,filterAttributeOptions:[{key:0,text:Q("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],placeholder:Q("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:"",defaultSearchOperator:"",triggerClearQuery:fe}),currentListSize:null==Wt||null===(e=Wt.Resources)||void 0===e?void 0:e.length,listItemLimit:ce,onItemsPerPageDropdownChange:Cn,"data-componentid":"".concat(x,"-list-layout"),onPageChange:Rn,showPagination:!0,showTopActionPanel:!0,showPaginationPageLimit:!dt,totalPages:Math.ceil((null==Wt?void 0:Wt.totalResults)/ce),totalListSize:null==Wt?void 0:Wt.totalResults,isLoading:Et,onSearchQueryClear:In,resetPagination:vt,paginationOptions:{disableNextButton:!St},leftActionPanel:lt?null:c.createElement(g.Z,{"data-componentid":"".concat(x,"-userstore-dropdown"),selection:!0,options:Lt,onChange:hn,text:Be,loading:it,disabled:Tt})},c.createElement(N.OnboardedGuestUsersList,{onboardedGuestUsersList:Wt,userMetaListContent:null,realmConfigs:null==fn?void 0:fn.realmConfig,onEmptyListPlaceholderActionClick:function(){return Ee(!0)},onSearchQueryClear:In,searchQuery:re,"data-componentid":"".concat(x,"-list"),readOnlyUserStores:null,featureConfig:Z,onUserDelete:function(){Pn()},adminType:O.AdminAccountTypes.INTERNAL,adminRoleId:_t,associationType:Mt}))},Mn=function(){return T.administratorConfig.enableAdminInvite&&un||W===o.iK.ENABLED&&(Jt||$t)};return c.createElement(s.Xg,{pageTitle:"Administrators",action:W===o.iK.ENABLED&&$t?c.createElement("div",null):c.createElement(o.di,{when:o.TA.USER_WRITE},W===o.iK.ENABLED&&!Ve&&c.createElement(p.Z,{"data-componentid":"".concat(x,"-admin-settings-button"),icon:"setting",onClick:function(){E.m8.push(O.UsersConstants.getPaths().get("COLLABORATOR_SETTINGS_EDIT_PATH"))}}),nt&&!Ve?c.createElement(g.Z,{loading:Mn(),disabled:Mn(),"data-componentid":"".concat(x,"-add-admin-dropdown"),direction:"left",floating:!0,icon:null,trigger:Ln},c.createElement(g.Z.Menu,null,Nn.map((function(e){return c.createElement(g.Z.Item,M({key:e.value,onClick:function(){return t=e.value,void(Ve||t!==O.AdminAccountTypes.INTERNAL?t===O.AdminAccountTypes.EXTERNAL&&(Bt.publish("admins-click-create-new",{type:"external admin"}),Ze(O.AdminAccountTypes.EXTERNAL),Ee(!0)):(Bt.publish("admins-click-create-new",{type:"internal admin"}),Ze(O.AdminAccountTypes.INTERNAL),Ee(!0)));var t}},e,{disabled:!nt}))})))):c.createElement(c.Fragment,null,c.createElement(s.KM,{loading:Mn(),disabled:Mn(),"data-componentid":"".concat(x,"-add-admin-button"),onClick:function(){Bt.publish("admins-click-add-new-button"),Ze(O.AdminAccountTypes.EXTERNAL),Ee(!0)},className:"tablet or lower hidden"},c.createElement(v.Z,{name:"add"}),Q("extensions:manage.users.buttons.addCollaboratorBtn")),c.createElement(p.Z,{loading:Mn(),disabled:Mn(),"data-componentid":"".concat(x,"-add-admin-button"),icon:"add",onClick:function(){Bt.publish("admins-click-add-new-button"),Ze(O.AdminAccountTypes.EXTERNAL),Ee(!0)},className:"mobile only tablet only",primary:!0}))),title:Q("extensions:manage.users.collaboratorsTitle"),description:c.createElement(c.Fragment,null,Q("extensions:manage.users.collaboratorsSubTitle"),c.createElement(s.eb,{link:F("manage.users.collaboratorAccounts.learnMore")},Q("extensions:common.learnMore"))),contentTopMargin:!1,"data-componentid":"".concat(x,"-page-layout"),actionColumnWidth:8,headingColumnWidth:8},c.createElement(s.pJ,{className:"mt-0 mb-5"},c.createElement(f.Z,{verticalAlign:"middle"},c.createElement(f.Z.Column,{floated:"left",width:9},c.createElement(s.xv,{className:"message-info-text"},c.createElement("p",null," ",Q("extensions:manage.users.collaboratorAccounts.consoleInfo")," "))),c.createElement(f.Z.Column,{floated:"right",width:6},c.createElement(s.OR,{value:B,"data-componentid":"".concat(x,"-tenanted-console-link")})))),nt&&!Ve?c.createElement(s.M$,{activeIndex:Ut,"data-testid":"".concat(x,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:_n,panes:(On=[],On.push({componentId:"external-admins",menuItem:{content:"Asgardeo"},render:Dn}),On.push({componentId:"internal-admins",menuItem:{content:K+" organization"},render:wn}),On)}):Dn(),ge?T.administratorConfig.enableAdminInvite?c.createElement(D.AddUserWizard,{"data-componentid":"".concat(x,"-add-admin-wizard-modal"),closeWizard:function(){Ee(!1)},updateList:function(){return dn()},rolesList:Ae,emailVerificationEnabled:!0,onInvitationSendSuccessful:function(){dn(),Bt.publish("manage-users-finish-creating-collaborator-user"),We===O.AdminAccountTypes.EXTERNAL&&(Re(_.InvitationStatus.PENDING),bt(V.EXTERNAL_ADMINS)),We===O.AdminAccountTypes.INTERNAL&&(Re(_.InvitationStatus.ACCEPTED),bt(V.INTERNAL_ADMINS)),Ie(!0)},defaultUserTypeSelection:T.administratorConfig.adminRoleName,adminTypeSelection:We,onUserUpdate:function(){We===O.AdminAccountTypes.EXTERNAL&&(bt(V.EXTERNAL_ADMINS),an()),We===O.AdminAccountTypes.INTERNAL&&(Re(_.InvitationStatus.ACCEPTED),bt(V.INTERNAL_ADMINS),Pn())}}):c.createElement(R.G,{"data-componentid":"".concat(x,"-add-admin-wizard-modal"),closeWizard:function(){Ee(!1)},listOffset:se,listItemLimit:ce,updateList:function(){return dn()},rolesList:Ae,emailVerificationEnabled:!1,isAdminUser:!0,defaultUserTypeSelection:O.UserAccountTypes.ADMINISTRATOR}):null)};z.defaultProps={"data-componentid":"asgardeo-administrators"};const F=z},79951:(e,t,n)=>{n.r(t),n.d(t,{AddAdminUserBasic:()=>r.AddAdminUserBasic,AddConsumerUserBasic:()=>r.AddConsumerUserBasic,AddConsumerUserGroups:()=>r.AddConsumerUserGroups,AddConsumerUserWizardSummary:()=>r.AddConsumerUserWizardSummary,AddUserWizard:()=>o.AddUserWizard,AddUserWizardSummary:()=>r.AddUserWizardSummary,UserTypeSelection:()=>r.UserTypeSelection,WizardStepsFormTypes:()=>o.WizardStepsFormTypes});var o=n(23019),r=n(11759)}}]);