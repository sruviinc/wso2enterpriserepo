"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[33167,4196,52224,79505,11059,17589,49905,5971],{4196:(e,n,t)=>{t.r(n),t.d(n,{addNewTenant:()=>a.addNewTenant,checkDuplicateTenants:()=>a.checkDuplicateTenants,getAssociatedTenants:()=>a.getAssociatedTenants,getDomainQueryParam:()=>a.getDomainQueryParam,makeTenantDefault:()=>a.makeTenantDefault});var a=t(26419)},52224:(e,n,t)=>{t.r(n),t.d(n,{TenantManagementConstants:()=>a.TenantManagementConstants});var a=t(79505)},79505:(e,n,t)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function o(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,n,t){return(n=s(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e){var n=function(e,n){if("object"!==a(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===a(n)?n:String(n)}t.r(n),t.d(n,{TenantManagementConstants:()=>c});var c=o((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));i(c,"TENANT_URI_PLACEHOLDER","myorg"),i(c,"EU_PROD_CONSOLE_FALLBACK_URL","https://console.eu.asgardeo.io"),i(c,"US_PROD_CONSOLE_FALLBACK_URL","https://console.asgardeo.io"),i(c,"FORM_FIELD_CONSTRAINTS",{TENANT_NAME_ALPHANUMERIC:new RegExp("^[a-z0-9]+$"),TENANT_NAME_FIRST_ALPHABET:new RegExp("^[a-z]"),TENANT_NAME_MAX_LENGTH:30,TENANT_NAME_MIN_LENGTH:4,TENANT_NAME_PATTERN:new RegExp("^[a-z][a-z0-9]{3,29}$")})},11059:(e,n,t)=>{var a;t.r(n),t.d(n,{Region:()=>a}),function(e){e.US="US",e.EU="EU"}(a||(a={}))},33167:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var a=t(14603),r=t(90268),o=t(59206),i=t(81816),s=t(36382),c=t(87692),l=t(67127),m=t(52983),u=t(9202),d=t(54221),g=t(74691),E=t(94635),f=t(43554),T=t(74066),p=t(75917),N=t(82915),_=t(27696),R=t(4196),v=t(49439),C=t(52224),A=t(11059),h=t(17589);function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,o,i,s=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(a=o.call(t)).done)&&(s.push(a.value),s.length!==n);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var S=function(e){var n,t,y=e["data-testid"],S=(0,d.I0)(),b=(0,u.$)().t,M=L((0,m.useState)(!1),2),w=M[0],O=M[1],x=L((0,m.useState)(!1),2),U=x[0],I=x[1],Z=L((0,m.useState)(!1),2),P=Z[0],D=Z[1],F=L((0,m.useState)(!1),2),H=F[0],k=F[1],j=L((0,m.useState)(!1),2),z=j[0],B=j[1],Q=L((0,m.useState)(!1),2),K=Q[0],G=Q[1],X=L((0,m.useState)(),2),$=X[0],q=X[1],V=L((0,m.useState)(C.TenantManagementConstants.TENANT_URI_PLACEHOLDER),2),W=V[0],J=V[1],Y=L((0,m.useState)(),2),ee=Y[0],ne=Y[1],te=(0,d.v9)((function(e){var n,t,a;return null===(n=e.config)||void 0===n||null===(t=n.deployment)||void 0===t||null===(a=t.extensions)||void 0===a?void 0:a.deploymentRegion})),ae=(0,d.v9)((function(e){var n,t,a;return null===(n=e.config)||void 0===n||null===(t=n.deployment)||void 0===t||null===(a=t.extensions)||void 0===a?void 0:a.regionQualifiedConsoleUrl})),re=(0,d.v9)((function(e){var n,t;return null===(n=e.config)||void 0===n||null===(t=n.deployment)||void 0===t?void 0:t.tenantPrefix})),oe=(0,m.useMemo)((function(){if(te)return te===A.Region.EU?A.Region.US:A.Region.EU}),[te]),ie=(0,m.useMemo)((function(){if(!ae)return C.TenantManagementConstants.US_PROD_CONSOLE_FALLBACK_URL;if(te===A.Region.US){if(ae.includes("."+A.Region.EU.toLowerCase())&&C.TenantManagementConstants.EU_PROD_CONSOLE_FALLBACK_URL,ae.includes("asgardeo.io")){var e=ae.indexOf("asgardeo.io");return[ae.slice(0,e),"".concat(A.Region.EU.toLowerCase(),"."),ae.slice(e)].join("")}if(ae.includes("asg.io")){var n=ae.indexOf("asg.io");return[ae.slice(0,n),"".concat(A.Region.EU.toLowerCase(),"."),ae.slice(n)].join("")}return C.TenantManagementConstants.EU_PROD_CONSOLE_FALLBACK_URL}return ae.includes("."+A.Region.EU.toLowerCase())?ae.replace(/.eu/g,""):C.TenantManagementConstants.US_PROD_CONSOLE_FALLBACK_URL}),[ae]),se=L((0,i.IK)(),3),ce=se[0],le=se[1],me=se[2],ue=_.lD.getInstance();(0,m.useEffect)((function(){ee&&K&&U&&!w&&(G(!1),fe())}),[ee,K]);var de,ge=function(e){var n=!!e&&!!e.match(C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_PATTERN);return n||(k(!1),Ee.cancel()),n},Ee=(0,m.useCallback)((0,s.Z)((function(e){(0,R.checkDuplicateTenants)(e).then((function(e){200==e.status&&O(!0),k(!1)})).catch((function(e){404==e.response.status&&O(!1),k(!1)}))}),1e3),[]),fe=function(){D(!0),q(b("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.duplicateCheck")),(0,R.checkDuplicateTenants)(null==ee?void 0:ee.tenantName).then((function(e){D(!1),200==e.status&&(O(!0),le({description:b("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.validations.duplicate",{tenantName:ee.tenantName}),level:a.QU.ERROR,message:b("extensions:manage.features.tenant.notifications.addTenant.genericError.message")}))})).catch((function(e){404==e.response.status?Te(ee.tenantName):(D(!1),le({description:b("extensions:manage.features.tenant.notifications.addTenant.genericError.description"),level:a.QU.ERROR,message:b("extensions:manage.features.tenant.notifications.addTenant.genericError.message")}))}))},Te=function(e){D(!0),q(b("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.tenantCreate")),(0,R.addNewTenant)(e).then((function(n){201===n.status&&(ue.publish("create-new-organization"),S((0,r.V_)({description:b("extensions:manage.features.tenant.notifications.addTenant.success.description",e),level:a.QU.SUCCESS,message:b("extensions:manage.features.tenant.notifications.addTenant.success.message")})),q(b("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.tenantSwitch")),(0,c.Z)((function(){D(!1),(0,h.handleTenantSwitch)(e)}),5e3))})).catch((function(e){var n,t;D(!1),null!==(n=e.response.data)&&void 0!==n&&n.code&&["TM-10011","TM-10004","TM-10008","TM-10005"].includes(e.response.data.code)?le({description:b("extensions:manage.features.tenant.notifications.missingClaims.description"),level:a.QU.ERROR,message:b("extensions:manage.features.tenant.notifications.missingClaims.message")}):null!==(t=e.response.data)&&void 0!==t&&t.code&&["TM-10013"].includes(e.response.data.code)?le({description:b("extensions:manage.features.tenant.notifications.addTenant.limitReachError.description"),level:a.QU.ERROR,message:b("extensions:manage.features.tenant.notifications.addTenant.limitReachError.message")}):le({description:b("extensions:manage.features.tenant.notifications.addTenant.genericError.description"),level:a.QU.ERROR,message:b("extensions:manage.features.tenant.notifications.addTenant.genericError.message")})}))};return m.createElement(i.Xg,{padded:!1,contentTopMargin:!1,className:"tenant-creation-page pt-5"},m.createElement(E.Z,{centered:!0,className:"tenant-form-container"},m.createElement(E.Z.Column,{mobile:16,tablet:16,computer:6,largeScreen:6,widescreen:6},m.createElement(i.dn,{transparent:!0,className:"onboard-apps-animated-illustration",size:"tiny",width:50,colored:!0,icon:(0,v.TenantCreationIcons)().asgardeoLogo}),m.createElement(f.Z,{fluid:!0,centered:!0,className:"basic-card no-hover"},m.createElement(f.Z.Content,{className:"p-5"},ce&&me,m.createElement(E.Z,{centered:!0},m.createElement(E.Z.Row,null,m.createElement("div",{className:"card-heading"},m.createElement(i.X6,{as:"h2"},b("extensions:manage.features.tenant.tenantCreationPrompt.heading")))),m.createElement(E.Z.Row,null,m.createElement("div",null,m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading1")),m.createElement(i.xv,{display:"inline"},m.createElement(T.Z,{name:null===(n=String(te))||void 0===n?void 0:n.toLowerCase()}),te," "),m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading7")),m.createElement(p.Z,{hidden:!0,fitted:!0}),m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading4")),m.createElement(p.Z,{hidden:!0,fitted:!0}),m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading5")),m.createElement(i.rU,{link:ie},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading2")),m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading6")),m.createElement(i.xv,{display:"inline"},m.createElement(T.Z,{name:null===(t=String(oe))||void 0===t?void 0:t.toLowerCase()}),oe," "),m.createElement(i.xv,{muted:!0,display:"inline"},b("extensions:manage.features.tenant.tenantCreationPrompt.subHeading7"))))),m.createElement(o.l0,{id:"create-tenant-form",onSubmit:function(e){ne(e)},triggerSubmit:function(e){de=e},uncontrolledForm:!1},m.createElement(o.gN.Input,{className:z||W===C.TenantManagementConstants.TENANT_URI_PLACEHOLDER||U&&!w?"":"error",ariaLabel:"Tenant Name",inputType:"resource_name",name:"tenantName",label:b("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.label"),placeholder:b("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.placeholder"),required:!0,listen:function(e){return n=e,O(!1),void((0,l.Z)(n)?(J(C.TenantManagementConstants.TENANT_URI_PLACEHOLDER),I(!1)):(J(n),I(ge(n))));var n},maxLength:C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MAX_LENGTH,minLength:C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MIN_LENGTH,validation:function(e){ge(e.toString())&&(k(!0),Ee(e.toString()))},width:16,onBlur:function(){return B(!1)},onFocus:function(){return B(!0)},"data-testid":"".concat(y,"-type-input")})),H?m.createElement(i.xv,{className:"tenant-uri-prefix"},"".concat(null!=ae?ae:"https://console.asgardeo.io","/").concat(null!=re?re:"t","/"),m.createElement(g.Z,{name:"circle notched",color:"grey",loading:!0})):m.createElement("span",null,"".concat(null!=ae?ae:"https://console.asgardeo.io","/").concat(null!=re?re:"t","/"),m.createElement("span",{className:"".concat(W!==C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?U&&!w?"valid-tenant placeholder-uri-bold":"invalid-tenant placeholder-uri-bold":W==C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?U&&!w?"valid-tenant placeholder-uri-bold":"placeholder-uri":void 0)},W,m.createElement(i.kW,{icon:"info circle",popup:!0},b("extensions:manage.features.tenant.wizards.addTenant.tooltips.message")))),m.createElement(E.Z,{className:"m-0 pt-2"},m.createElement(E.Z.Row,{className:"p-0"},W===C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?m.createElement(g.Z,{name:"circle",color:"grey"}):W.match(C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_FIRST_ALPHABET)?m.createElement(g.Z,{name:"check circle",color:"green"}):z?m.createElement(g.Z,{name:"circle",color:"grey"}):m.createElement(g.Z,{name:"remove circle",color:"red"}),m.createElement(i.xv,{muted:!0},"Must begin with an alphabet character")),m.createElement(E.Z.Row,{className:"p-0"},W===C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?m.createElement(g.Z,{name:"circle",color:"grey"}):W.length>=C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MIN_LENGTH&&W.length<C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MAX_LENGTH?m.createElement(g.Z,{name:"check circle",color:"green"}):z?m.createElement(g.Z,{name:"circle",color:"grey"}):m.createElement(g.Z,{name:"remove circle",color:"red"}),m.createElement(i.xv,{muted:!0},"More than 4 characters, Less than 30 characters")),m.createElement(E.Z.Row,{className:"p-0"},W===C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?m.createElement(g.Z,{name:"circle",color:"grey"}):W.match(C.TenantManagementConstants.FORM_FIELD_CONSTRAINTS.TENANT_NAME_ALPHANUMERIC)?m.createElement(g.Z,{name:"check circle",color:"green"}):z?m.createElement(g.Z,{name:"circle",color:"grey"}):m.createElement(g.Z,{name:"remove circle",color:"red"}),m.createElement(i.xv,{muted:!0},"Only consist of lowercase alphanumerics")),m.createElement(E.Z.Row,{className:"p-0"},W===C.TenantManagementConstants.TENANT_URI_PLACEHOLDER?m.createElement(g.Z,{name:"circle",color:"grey"}):!U||H||w?z?m.createElement(g.Z,{name:"circle",color:"grey"}):m.createElement(g.Z,{name:"remove circle",color:"red"}):m.createElement(g.Z,{name:"check circle",color:"green"}),m.createElement(i.xv,{muted:!0},"Must be unique"))),P&&m.createElement(i.pO,{text:$})),m.createElement(f.Z.Content,null,m.createElement(E.Z,{className:"pr-5 pl-5"},m.createElement(E.Z.Row,{column:1},m.createElement(E.Z.Column,{mobile:8,tablet:8,computer:8},m.createElement(i.Qj,{floated:"left",onClick:function(){ue.publish("console-click-logout"),N.m.push(window.AppUtils.getConfig().routes.logout)},disabled:P,"data-testid":"".concat(y,"-cancel-button")},b("common:logout"))),m.createElement(E.Z.Column,{mobile:8,tablet:8,computer:8},m.createElement(i.KM,{floated:"right",onClick:function(){de(),G(!0)},loading:P,"data-testid":"".concat(y,"-create-button"),disabled:P||H},b("common:create"))))))))))};S.defaultProps={"data-testid":"create-tenant-page"};const b=S},49905:(e,n,t)=>{t.r(n),t.d(n,{getDeploymentRegion:()=>a});var a=function(){return window.AppUtils.getConfig().extensions.deploymentRegion}},17589:(e,n,t)=>{t.r(n),t.d(n,{getDeploymentRegion:()=>a.getDeploymentRegion,handleTenantSwitch:()=>r.handleTenantSwitch});var a=t(49905),r=t(5971)},5971:(e,n,t)=>{t.r(n),t.d(n,{handleTenantSwitch:()=>r});var a=t(83831),r=function(e){var n=window.AppUtils.getConfig().clientOrigin+"/t/"+e+"/"+window.AppUtils.getConfig().appBase+"?disable_silent_sign_in=true&switch_tenant=true";a.SessionStorageUtils.clearItemFromSessionStorage("auth_callback_url_console"),window.location.replace(n)}}}]);