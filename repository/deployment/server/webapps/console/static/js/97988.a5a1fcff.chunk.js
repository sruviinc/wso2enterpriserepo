/*! For license information please see 97988.a5a1fcff.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[97988],{97988:(e,t,n)=>{n.d(t,{$E:()=>ft,C$:()=>Ye,Sf:()=>Ut,ZW:()=>A,A4:()=>G,T8:()=>ie,_v:()=>It,AI:()=>te,RH:()=>wt});var r=n(7955),a=n(83374),i=n(14603),o=n(90268),l=n(13318),c=n(81816),s=n(23587),u=n(52983),m=n(9202),d=n(54221),f=n(74691),p=n(97860),g=n(58585),h=n(94635),v=n(33614);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.claim,n=e.update,s=e["data-testid"],f=I((0,u.useState)(!1),2),p=f[0],g=f[1],y=I((0,l.cC)(),2),E=y[0],C=y[1],w=(0,d.I0)(),R=(0,m.$)().t,A=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),x=(0,d.v9)((function(e){return e.config.ui.features})),U=(0,u.useMemo)((function(){var e,t;return!(0,a.hasRequiredScopes)(null==x?void 0:x.attributeDialects,null==x||null===(e=x.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,A)}),[x,A]);return u.createElement(c.pJ,null,u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},u.createElement("p",null,R("console:manage.features.claims.local.additionalProperties.hint")),u.createElement(l.e9,{data:t.properties,keyType:"text",keyName:R("console:manage.features.claims.local.additionalProperties.key"),valueName:R("console:manage.features.claims.local.additionalProperties.value"),submit:E,keyRequiredMessage:R("console:manage.features.claims.local.additionalProperties.keyRequiredErrorMessage"),valueRequiredErrorMessage:R("console:manage.features.claims.local.additionalProperties.valueRequiredErrorMessage"),requiredField:!0,update:function(e){var r=S({},t);delete r.id,delete r.dialectURI;var a=S(S({},r),{},{properties:b(e)});g(!0),(0,v.iC)(t.id,a).then((function(){w((0,o.V_)({description:R("console:manage.features.claims.local.notifications.updateClaim.success.description"),level:i.QU.SUCCESS,message:R("console:manage.features.claims.local.notifications.updateClaim.success.message")})),n()})).catch((function(e){w((0,o.V_)({description:(null==e?void 0:e.description)||R("console:manage.features.claims.local.notifications.updateClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||R("console:manage.features.claims.local.notifications.updateClaim.genericError.message")}))})).finally((function(){g(!1)}))},"data-testid":"".concat(s,"-form-properties-dynamic-field"),readOnly:U}))),u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:6},u.createElement(r.di,{when:r.TA.ATTRIBUTE_EDIT},u.createElement(c.KM,{onClick:function(){C()},"data-testid":"".concat(s,"-submit-button"),loading:p,disabled:p},R("common:update")))))))};A.defaultProps={"data-testid":"edit-local-claims-additional-properties"};var x=n(59206),U=n(67127),O=n(16029),L=n(75917),T=n(91478),_=n(67680),M=n(2653),D=n(30640),Z=n(80617),N=n(26021),j=n(7502),P=n(85585),k=n(68836);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V="local-claim-basic-details-form",H=[k.Q.GROUPS_CLAIM_URI,k.Q.ROLES_CLAIM_URI,k.Q.APPLICATION_ROLES_CLAIM_URI],G=function(e){var t=e.claim,n=e.update,l=e["data-testid"],s=(0,d.I0)(),p=q((0,u.useState)(!1),2),g=p[0],y=p[1],b=q((0,u.useState)(!1),2),E=b[0],S=b[1],C=q((0,u.useState)(!1),2),I=C[0],w=C[1],R=q((0,u.useState)(!1),2),A=R[0],z=R[1],G=q((0,u.useState)(!1),2),$=G[0],F=G[1],B=q((0,u.useState)(!1),2),W=B[0],X=B[1],K=q((0,u.useState)(!1),2),Y=K[0],J=K[1],ee=(0,u.useRef)(null),te=(0,u.useRef)(null),ne=(0,u.useRef)(null),re=(0,u.useRef)(null),ae=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),ie=(0,d.v9)((function(e){return e.config.ui.features})),oe=q((0,u.useState)(!0),2),le=oe[0],ce=oe[1],se=q((0,u.useState)(void 0),2),ue=se[0],me=se[1],de=q((0,u.useState)(void 0),2),fe=de[0],pe=de[1],ge=q((0,u.useState)(!1),2),he=ge[0],ve=ge[1],ye=q((0,u.useState)(!1),2),be=ye[0],Ee=ye[1],Se=(0,m.$)().t,Ce=(0,P.W)().data;(0,u.useEffect)((function(){Ce&&me((0,j.t)(Ce))}),[Ce]),(0,u.useEffect)((function(){if("true"===(null==ue?void 0:ue.enableValidator)&&null!==T.attributeConfig&&void 0!==T.attributeConfig&&T.attributeConfig.systemClaims.includes(k.Q.EMAIL_CLAIM_URI)){var e=null===T.attributeConfig||void 0===T.attributeConfig?void 0:T.attributeConfig.systemClaims.indexOf(k.Q.EMAIL_CLAIM_URI);null===T.attributeConfig||void 0===T.attributeConfig||T.attributeConfig.systemClaims.splice(e,1)}else"false"!==(null==ue?void 0:ue.enableValidator)||null!==T.attributeConfig&&void 0!==T.attributeConfig&&T.attributeConfig.systemClaims.includes(k.Q.EMAIL_CLAIM_URI)||null===T.attributeConfig||void 0===T.attributeConfig||T.attributeConfig.systemClaims.push(k.Q.EMAIL_CLAIM_URI)}),[ue,T.attributeConfig]),(0,u.useEffect)((function(){null!=t&&t.supportedByDefault&&S(!0),null!=t&&t.readOnly&&z(!0),t&&((null===T.attributeConfig||void 0===T.attributeConfig?void 0:T.attributeConfig.systemClaims.length)<=0||-1===(null===T.attributeConfig||void 0===T.attributeConfig?void 0:T.attributeConfig.systemClaims.indexOf(null==t?void 0:t.claimURI)))?ce(!1):ce(!0)}),[t,ue]),(0,u.useEffect)((function(){var e=Ie();if(t){var n=[];e.forEach((function(e){n.push((0,v.ne)(e))})),Promise.allSettled(n).then((function(e){e.filter((function(e){if("fulfilled"===e.status)return!0;var t,n,r=e.reason;return 404!==r.code&&s((0,o.V_)({description:null==r||null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description,level:i.QU.ERROR,message:Se("console:manage.features.claims.dialects.notifications.fetchExternalClaims.genericError.message")})),!1})).flatMap((function(e){return"fulfilled"===e.status?e.value:[]})).find((function(e){return e.mappedLocalClaimURI===t.claimURI}))&&X(!0)})).finally((function(){return J(!0)}))}}),[t]),(0,u.useEffect)((function(){(0,Z.PP)(Z.vH.USER_ONBOARDING_CONNECTOR_ID,Z.vH.SELF_SIGN_UP_CONNECTOR_ID).then((function(e){pe(e)})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?s((0,o.V_)({description:Se("console:manage.features.governanceConnectors.notifications.getConnector.error.description",{description:e.response.data.description}),level:i.QU.ERROR,message:Se("console:manage.features.governanceConnectors.notifications.getConnector.error.message")})):s((0,o.V_)({description:Se("console:manage.features.governanceConnectors.notifications.getConnector.genericError.description"),level:i.QU.ERROR,message:Se("console:manage.features.governanceConnectors.notifications.getConnector.genericError.message")}))}))}),[]),(0,u.useEffect)((function(){(0,U.Z)(null==fe?void 0:fe.properties)||fe.properties.map((function(e){e.name===Z.vH.ACCOUNT_CONFIRMATION&&("false"===e.value?ve(!1):ve(!0)),e.name===Z.vH.SELF_REGISTRATION_ENABLE&&("false"===e.value?Ee(!1):Ee(!0))}))}),[fe]);var Ie=function(){var e,t=[];return t.push(k.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE")),t.push(k.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE_USER")),t.push(k.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_EXT_ENT_USER")),null!==(e=_.SCIMConfigs.scimDialectID)&&void 0!==e&&e.customEnterpriseSchema&&t.push(_.SCIMConfigs.scimDialectID.customEnterpriseSchema),t},we=(0,u.useMemo)((function(){return!!le||!(0,a.hasRequiredScopes)(null==ie?void 0:ie.attributeDialects,null==ie||null===(e=ie.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,ae);var e,t}),[ie,ae,le]),Re=function(e){(0,v.wf)(e).then((function(){D.m8.push(D.$x.getPaths().get("LOCAL_CLAIMS")),s((0,o.V_)({description:Se("console:manage.features.claims.local.notifications.deleteClaim.success.description"),level:i.QU.SUCCESS,message:Se("console:manage.features.claims.local.notifications.deleteClaim.success.message")}))})).catch((function(e){s((0,o.V_)({description:(null==e?void 0:e.description)||Se("console:manage.features.claims.local.notifications.deleteClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||Se("console:manage.features.claims.local.notifications.deleteClaim.genericError.message")}))})).finally((function(){w(!1)}))},Ae=function(e){var r,a,l,c,u={attributeMapping:t.attributeMapping,claimURI:t.claimURI,description:void 0!==(null==e?void 0:e.description)?null===(r=e.description)||void 0===r?void 0:r.toString():null==t?void 0:t.description,displayName:void 0!==(null==e?void 0:e.name)?null===(a=e.name)||void 0===a?void 0:a.toString():null==t?void 0:t.displayName,displayOrder:T.attributeConfig.editAttributes.getDisplayOrder(t.displayOrder,null===(l=e.displayOrder)||void 0===l?void 0:l.toString()),properties:t.properties,readOnly:void 0!==(null==e?void 0:e.readOnly)?!!e.readOnly:null==t?void 0:t.readOnly,regEx:void 0!==(null==e?void 0:e.regularExpression)?null===(c=e.regularExpression)||void 0===c?void 0:c.toString():null==t?void 0:t.regEx,required:!(void 0===(null==e?void 0:e.required)||null!=e&&e.readOnly)&&!!e.required,supportedByDefault:void 0!==(null==e?void 0:e.supportedByDefault)?!!e.supportedByDefault:null==t?void 0:t.supportedByDefault};F(!0),(0,v.iC)(t.id,u).then((function(){s((0,o.V_)({description:Se("console:manage.features.claims.local.notifications.updateClaim.success.description"),level:i.QU.SUCCESS,message:Se("console:manage.features.claims.local.notifications.updateClaim.success.message")})),n(),s((0,o.wu)(!0)),(0,N.w7)().then((function(e){s((0,o.Um)(e))})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description&&s((0,o.V_)({description:e.response.data.description,level:i.QU.ERROR,message:Se("console:manage.notifications.getProfileSchema.error.message")})),s((0,o.V_)({description:Se("console:manage.notifications.getProfileSchema.genericError.description"),level:i.QU.ERROR,message:Se("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){s((0,o.wu)(!1))}))})).catch((function(e){s((0,o.V_)({description:(null==e?void 0:e.description)||Se("console:manage.features.claims.local.notifications.updateClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||Se("console:manage.features.claims.local.notifications.updateClaim.genericError.description")}))})).finally((function(){F(!1)}))};return u.createElement(u.Fragment,null,I&&u.createElement(c.cV,{onClose:function(){return w(!1)},type:"negative",open:I,assertionHint:Se("console:manage.features.claims.local.confirmation.hint"),assertionType:"checkbox",primaryAction:Se("console:manage.features.claims.local.confirmation.primaryAction"),secondaryAction:Se("common:cancel"),onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){return Re(t.id)},"data-testid":"".concat(l,"-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(c.cV.Header,null,Se("console:manage.features.claims.local.confirmation.header")),u.createElement(c.cV.Message,{attached:!0,negative:!0},Se("console:manage.features.claims.local.confirmation.message")),u.createElement(c.cV.Content,null,Se("console:manage.features.claims.local.confirmation.content"))),u.createElement(c.pJ,{padded:"very"},u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},u.createElement(O.Z,null,u.createElement(O.Z.Field,{"data-testid":"".concat(l,"-form-attribute-uri-readonly-input")},u.createElement("label",null,Se("console:manage.features.claims.local.attributes.attributeURI")),u.createElement(c.OR,{value:t?t.claimURI:""}),u.createElement(c.kW,null,"Unique identifier of the attribute.")))))),u.createElement(x.l0,{id:V,uncontrolledForm:!0,onSubmit:function(e){Ae(e)},"data-testid":l},u.createElement(x.gN.Input,{ariaLabel:"name",inputType:"name",name:"name",label:Se("console:manage.features.claims.local.forms.name.label"),required:!0,message:Se("console:manage.features.claims.local.forms.name.requiredErrorMessage"),placeholder:Se("console:manage.features.claims.local.forms.name.placeholder"),value:null==t?void 0:t.displayName,ref:ee,validation:function(e){if(!e.toString().match(/^[A-za-z0-9#+._\-\s]{1,30}$/))return Se("console:manage.features.claims.local.forms.name.validationErrorMessages.invalidName")},"data-testid":"".concat(l,"-form-name-input"),maxLength:30,minLength:1,hint:Se("console:manage.features.claims.local.forms.nameHint"),readOnly:we}),u.createElement(x.gN.Textarea,{ariaLabel:"description",inputType:"description",name:"description",label:Se("console:manage.features.claims.local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:Se("console:manage.features.claims.local.forms.description.placeholder"),ref:re,value:null==t?void 0:t.description,maxLength:255,minLength:3,"data-testid":"".concat(l,"-form-description-input"),hint:Se("console:manage.features.claims.local.forms.descriptionHint"),readOnly:we}),!T.attributeConfig.localAttributes.createWizard.showRegularExpression&&!le&&u.createElement(x.gN.Input,{ariaLabel:"regularExpression",inputType:"default",name:"regularExpression",label:Se("console:manage.features.claims.local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:Se("console:manage.features.claims.local.forms.regEx.placeholder"),value:null==t?void 0:t.regEx,ref:te,"data-testid":"".concat(l,"-form-regex-input"),maxLength:k.Q.REGEX_FIELD_MAX_LENGTH,minLength:k.Q.REGEX_FIELD_MIN_LENGTH,hint:Se("console:manage.features.claims.local.forms.regExHint"),readOnly:we}),!H.includes(null==t?void 0:t.claimURI)&&Y?!le&&u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{mobile:16,tablet:16,computer:14},u.createElement(c.v0,{type:"info",content:W?Se("console:manage.features.claims.local.forms.infoMessages.configApplicabilityInfo"):u.createElement(u.Fragment,null,Se("console:manage.features.claims.local.forms.infoMessages.disabledConfigInfo"),u.createElement("div",null,"Add SCIM mapping from",u.createElement(c.rU,{external:!1,onClick:function(){return D.m8.push(D.$x.getPaths().get("SCIM_MAPPING"))}}," here"),"."))}))):null,t&&!H.includes(null==t?void 0:t.claimURI)&&t.claimURI!==k.Q.USER_ID_CLAIM_URI&&t.claimURI!==k.Q.USER_NAME_CLAIM_URI&&t.claimURI!==k.Q.GROUPS_CLAIM_URI&&!le&&Y&&u.createElement(x.gN.Checkbox,Q({ariaLabel:"supportedByDefault",name:"supportedByDefault",label:Se("console:manage.features.claims.local.forms.supportedByDefault.label"),required:!1,defaultValue:null==t?void 0:t.supportedByDefault,listen:function(e){S(!(null==e||!e.supportedByDefault))},"data-testid":"".concat(l,"-form-supported-by-default-input"),readOnly:we,disabled:!W||he&&be&&(null==t?void 0:t.claimURI)===k.Q.EMAIL_CLAIM_URI&&"true"===(null==ue?void 0:ue.enableValidator)},g?{checked:!0}:{defaultValue:null==t?void 0:t.supportedByDefault})),T.attributeConfig.editAttributes.showDisplayOrderInput&&!H.includes(null==t?void 0:t.claimURI)&&E&&!le&&u.createElement(x.gN.Input,{ariaLabel:"displayOrder",inputType:"default",name:"displayOrder",type:"number",min:"0",label:Se("console:manage.features.claims.local.forms.displayOrder.label"),required:!1,placeholder:Se("console:manage.features.claims.local.forms.displayOrder.placeholder"),value:(null==t?void 0:t.displayOrder.toString())||0,maxLength:50,minLength:1,ref:ne,"data-testid":"".concat(l,"-form-display-order-input"),hint:Se("console:manage.features.claims.local.forms.displayOrderHint"),readOnly:we}),t&&!H.includes(null==t?void 0:t.claimURI)&&T.attributeConfig.editAttributes.showRequiredCheckBox&&t.claimURI!==k.Q.GROUPS_CLAIM_URI&&!le&&Y&&u.createElement(x.gN.Checkbox,Q({ariaLabel:"required",name:"required",required:!1,requiredErrorMessage:"",label:Se("console:manage.features.claims.local.forms.required.label"),"data-testid":"".concat(l,"-form-required-checkbox"),readOnly:we,hint:Se("console:manage.features.claims.local.forms.requiredHint"),listen:function(e){y(e)},disabled:A||!W||he&&be&&(null==t?void 0:t.claimURI)===k.Q.EMAIL_CLAIM_URI&&"true"===(null==ue?void 0:ue.enableValidator)},A?{value:!1}:{defaultValue:null==t?void 0:t.required})),he&&!H.includes(null==t?void 0:t.claimURI)&&be&&"true"===(null==ue?void 0:ue.enableValidator)&&(null==t?void 0:t.claimURI)===k.Q.EMAIL_CLAIM_URI&&u.createElement(c.v0,{info:!0},u.createElement(f.Z,{name:"info circle"}),Se("console:manage.features.claims.local.forms.requiredWarning")),t&&!H.includes(null==t?void 0:t.claimURI)&&t.claimURI!==k.Q.USER_ID_CLAIM_URI&&t.claimURI!==k.Q.USER_NAME_CLAIM_URI&&t.claimURI!==k.Q.GROUPS_CLAIM_URI&&t.claimURI!==k.Q.EMAIL_CLAIM_URI&&!le&&Y&&u.createElement(x.gN.Checkbox,{ariaLabel:"readOnly",name:"readOnly",required:!1,label:Se("console:manage.features.claims.local.forms.readOnly.label"),requiredErrorMessage:"",defaultValue:null==t?void 0:t.readOnly,"data-testid":"".concat(l,"-form-readonly-checkbox"),readOnly:we,hint:Se("console:manage.features.claims.local.forms.readOnlyHint"),listen:function(e){z(e)},disabled:!W}),!le&&u.createElement(r.di,{when:M.T.ATTRIBUTE_EDIT},u.createElement(x.gN.Button,{form:V,ariaLabel:"submit",size:"small",buttonType:"primary_btn",loading:$,disabled:$,label:Se("common:update"),name:"submit"})))),u.createElement(L.Z,{hidden:!0}),T.attributeConfig.editAttributes.showDangerZone&&!H.includes(null==t?void 0:t.claimURI)&&!le&&t.claimURI!==k.Q.EMAIL_CLAIM_URI&&u.createElement(r.di,{when:M.T.ATTRIBUTE_DELETE},u.createElement(c.v9,{sectionHeader:Se("common:dangerZone"),"data-testid":"".concat(l,"-danger-zone-group")},u.createElement(c.cN,{actionTitle:Se("console:manage.features.claims.local.dangerZone.actionTitle"),header:Se("console:manage.features.claims.local.dangerZone.header"),subheader:Se("console:manage.features.claims.local.dangerZone.subheader"),onActionClick:function(){return w(!0)},"data-testid":"".concat(l,"-local-claim-delete-danger-zone")}))))};G.defaultProps={"data-testid":"local-claims-basic-details-edit"};var $=n(58900);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.claim,n=e.update,s=e["data-testid"],f=(0,d.I0)(),p=Y((0,u.useState)([]),2),g=p[0],y=p[1],b=Y((0,u.useState)(!1),2),E=b[0],S=b[1],C=Y((0,l.cC)(),2),I=C[0],w=C[1],R=(0,m.$)().t,A=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),x=(0,d.v9)((function(e){return e.config.ui.features}));(0,u.useEffect)((function(){var e=[];e.push({id:"PRIMARY",name:"PRIMARY"}),(0,$.ow)().then((function(t){e.push.apply(e,K(t.data)),y(e)})).catch((function(){y(e)}))}),[]);var U=(0,u.useMemo)((function(){var e,t;return!(0,a.hasRequiredScopes)(null==x?void 0:x.attributeDialects,null==x||null===(e=x.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,A)}),[x,A]);return u.createElement(c.pJ,{padded:"very"},u.createElement(h.Z,{"data-testid":s},u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},u.createElement("p",null,R("console:manage.features.claims.local.mappedAttributes.hint")),u.createElement(L.Z,{hidden:!0}),u.createElement(l.Es,{submitState:I,onSubmit:function(e){var r=W({},t);delete r.id,delete r.dialectURI;var a=W(W({},r),{},{attributeMapping:Array.from(e).map((function(e){var t=Y(e,2),n=t[0];return{mappedAttribute:t[1].toString(),userstore:n.toString()}}))});S(!0),(0,v.iC)(t.id,a).then((function(){f((0,o.V_)({description:R("console:manage.features.claims.local.notifications.updateClaim.success.description"),level:i.QU.SUCCESS,message:R("console:manage.features.claims.local.notifications.updateClaim.success.message")})),n()})).catch((function(e){f((0,o.V_)({description:(null==e?void 0:e.description)||R("console:manage.features.claims.local.notifications.updateClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||R("console:manage.features.claims.local.notifications.updateClaim.genericError.message")}))})).finally((function(){S(!1)}))}},u.createElement(h.Z,null,g.map((function(e,n){var r,a;return u.createElement(h.Z.Row,{columns:2,key:n},u.createElement(h.Z.Column,{width:4},e.name),u.createElement(h.Z.Column,{width:12},u.createElement(l.gN,{type:"text",name:e.name,placeholder:R("console:manage.features.claims.local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:R("console:manage.features.claims.local.forms.attribute.requiredErrorMessage"),value:null==t||null===(r=t.attributeMapping)||void 0===r||null===(a=r.find((function(t){return t.userstore.toLowerCase()===e.name.toLowerCase()})))||void 0===a?void 0:a.mappedAttribute,"data-testid":"".concat(s,"-form-store-name-input"),readOnly:U})))})))))),u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:8},u.createElement(r.di,{when:r.TA.ATTRIBUTE_EDIT},u.createElement(c.KM,{onClick:function(){w()},"data-testid":"".concat(s,"-form-submit-button"),loading:E,disabled:E},R("common:update")))))))};te.defaultProps={"data-testid":"edit-local-claims-mapped-attributes"};var ne=n(97865);function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t,n,r=e.dialect,a=e.attributeType,s=e.onUpdate,f=e["data-testid"],p=(0,d.I0)(),g=(0,m.$)().t,y=(0,d.v9)((function(e){return e.config})),b=re((0,u.useState)(!1),2),E=b[0],S=b[1];return u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:6},u.createElement(l.Es,{onSubmit:function(e){var t=e.get("dialectURI").toString();S(!0),(0,v.sD)(r.id,t).then((function(){p((0,o.V_)({description:g("console:manage.features.claims.dialects.notifications.updateDialect.success.description"),level:i.QU.SUCCESS,message:g("console:manage.features.claims.dialects.notifications.updateDialect.success.message")})),s(window.btoa(t).replace(/=/g,""))})).catch((function(e){p((0,o.V_)({description:(null==e?void 0:e.description)||g("console:manage.features.claims.dialects.notifications.updateDialect.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||g("console:manage.features.claims.dialects.notifications.updateDialect.genericError.message")}))})).finally((function(){S(!1)}))}},u.createElement(l.gN,{type:"text",placeholder:g("console:manage.features.claims.dialects.forms.dialectURI.placeholder",{type:(0,ne.i)(a,!0)}),value:null==r?void 0:r.dialectURI,required:!0,readOnly:!1===(null===(t=y.ui)||void 0===t?void 0:t.isDefaultDialectEditingEnabled)&&k.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id),requiredErrorMessage:g("console:manage.features.claims.dialects.forms.dialectURI.requiredErrorMessage"),label:g("console:manage.features.claims.dialects.forms.dialectURI.label"),name:"dialectURI","data-testid":"".concat(f,"-form-dialect-uri-input")}),!1===(null===(n=y.ui)||void 0===n?void 0:n.isDefaultDialectEditingEnabled)&&k.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id)?null:u.createElement(u.Fragment,null,u.createElement(L.Z,{hidden:!0}),u.createElement(c.KM,{type:"submit","data-testid":"".concat(f,"-form-submit-button"),loading:E,disabled:E},g("console:manage.features.claims.dialects.forms.submit")))))))};function oe(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ie.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"edit-dialect-details"};var ue=function(e){var t,n=e.claimID,r=e.update,a=e.dialectID,s=e.submit,f=e.claimURI,p=e.wizard,g=e.onSubmit,y=e.addedClaim,b=e.externalClaims,E=e.attributeType,S=e["data-testid"],C=le((0,u.useState)(),2),I=C[0],w=C[1],R=le((0,u.useState)(null),2),A=R[0],x=R[1],U=le((0,u.useState)(),2),O=U[0],L=U[1],T=le((0,u.useState)(!1),2),_=T[0],M=T[1],Z=(0,d.I0)(),N=(0,d.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.enableIdentityClaims})),j=(0,m.$)().t;(0,u.useEffect)((function(){M(!0);var e={"exclude-identity-claims":!N,filter:null,limit:null,offset:null,sort:null};(0,v.WN)(e).then((function(e){M(!1),w((0,D.fS)(e,"displayName",!0))})).catch((function(e){var t,n,r,a;Z((0,o.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||j("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:i.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||j("console:manage.features.claims.local.notifications.getClaims.genericError.message")}))})),p||(0,v.g0)(a,n).then((function(e){x(e)})).catch((function(e){var t,n,r,a;Z((0,o.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||j("console:manage.features.claims.external.notifications.getExternalAttribute.genericError.description",{type:(0,ne.i)(E)}),level:i.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||j("console:manage.features.claims.external.notifications.getExternalAttribute.genericError.message")}))}))}),[]),(0,u.useEffect)((function(){if(b&&I&&(A||y)){var e=oe(I);b.forEach((function(t){e=oe(k(t.mappedLocalClaimURI,e))})),e.unshift(Q()),L(e)}}),[b,I,A,y]);var P,k=function(e,t){var n=t||I;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))},Q=function(){return I.find((function(e){return p?(null==e?void 0:e.claimURI)===(null==y?void 0:y.mappedLocalClaimURI):(null==e?void 0:e.claimURI)===(null==A?void 0:A.mappedLocalClaimURI)}))};return u.createElement(l.Es,{onSubmit:function(e){p?(g(function(e){var t=y.claimURI.split(":");if(t.length>1){var n=t.filter((function(e,n){return n<t.length-1})).join(":")+":"+e.get("claimURI");e.set("claimURI",n)}return e}(e)),r()):(0,v.DW)(a,n,{claimURI:f,mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){Z((0,o.V_)({description:j("console:manage.features.claims.external.notifications.updateExternalAttribute.success.description",{type:(0,ne.i)(E)}),level:i.QU.SUCCESS,message:j("console:manage.features.claims.external.notifications.updateExternalAttribute.success.message",{type:(0,ne.i)(E)})})),r()})).catch((function(e){var t,n,r,a;Z((0,o.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||j("console:manage.features.claims.external.notifications.updateExternalAttribute.genericError.description",{type:(0,ne.i)(E)}),level:i.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||j("console:manage.features.claims.external.notifications.updateExternalAttribute.genericError.message")}))}))},submitState:s},u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:p?2:1},p&&u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{name:"claimURI",label:j("console:manage.features.claims.external.forms.attributeURI.label",{type:(0,ne.i)(E,!0)}),required:!0,requiredErrorMessage:j("console:manage.features.claims.external.forms.attributeURI.label",{type:(0,ne.i)(E,!0)}),placeholder:j("console:manage.features.claims.external.forms.attributeURI.label",{type:(0,ne.i)(E)}),type:"text",value:(P=y.claimURI.split(":"),P.length>1?P[P.length-1]:y.claimURI),"data-testid":"".concat(S,"-form-claim-uri-input"),validation:function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(b);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(j("console:manage.features.claims.external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,ne.i)(E)}));break}}}catch(a){r.e(a)}finally{r.f()}}})),u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"dropdown",name:"localClaim",label:j("console:manage.features.claims.external.forms.localAttribute.label"),required:!0,requiredErrorMessage:j("console:manage.features.claims.external.forms.localAttribute.requiredErrorMessage"),placeholder:j("console:manage.features.claims.external.forms.attributeURI.placeholder"),search:!0,loading:_,value:p?y.mappedLocalClaimURI:null==A?void 0:A.mappedLocalClaimURI,children:null!==(t=null==O?void 0:O.map((function(e,t){return{key:t,text:u.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,u.createElement(c.EK,{className:"description",compact:!0,withBackground:!1},null==e?void 0:e.claimURI)),value:null==e?void 0:e.claimURI}})))&&void 0!==t?t:[],"data-testid":"".concat(S,"-local-claim-dropdown")})))))};ue.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"edit-external-claim"};var me=n(40904),de=n(34936),fe=n(21921),pe=n(73949),ge=n(43554);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(){ve=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),l=new L(r||[]);return a(o,"_invoke",{value:A(e,n,l)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};s(E,o,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(T([])));C&&C!==n&&r.call(C,o)&&(E=C);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(a,i,o,l){var c=m(e[a],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==he(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function A(t,n,r){var a=d;return function(i,o){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var c=x(l,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?g:f,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=m(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(he(t)+" is not iterable")}return y.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new R(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(I),s(I,c,"Generator"),s(I,o,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function ye(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ye(i,r,a,o,l,"next",e)}function l(e){ye(i,r,a,o,l,"throw",e)}o(void 0)}))}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce=function(e){var t,n,r,a,i,o,s,d,p,g=e.submitState,v=e.onSubmit,y=e.values,b=e.claimURIBase,E=e.validateMapping,S=e.setValidateMapping,C=e["data-testid"],I=Ee((0,u.useState)(""),2),w=I[0],R=I[1],A=Ee((0,u.useState)(!1),2),x=A[0],U=A[1],O=Ee((0,u.useState)(!1),2),L=O[0],_=O[1],M=Ee((0,u.useState)(!1),2),Z=M[0],N=M[1],j=Ee((0,u.useState)(!1),2),P=j[0],Q=j[1],q=Ee((0,u.useState)(!1),2),z=q[0],V=q[1],H=Ee((0,u.useState)(!1),2),G=H[0],$=H[1],F=Ee((0,u.useState)(!1),2),B=F[0],W=F[1],X=Ee((0,u.useState)(!0),2),K=X[0],Y=X[1],J=Ee((0,u.useState)(!0),2),ee=J[0],te=J[1],ne=Ee((0,u.useState)(!1),2),re=ne[0],ae=ne[1],ie=Ee((0,u.useState)(null==y||null===(t=y.get("oidc"))||void 0===t?void 0:t.toString()),2),oe=ie[0],le=ie[1],ce=Ee((0,u.useState)(null==y||null===(n=y.get("scim"))||void 0===n?void 0:n.toString()),2),se=ce[0],ue=ce[1],me=Ee((0,u.useState)(!1),2),de=me[0],fe=me[1],he=(0,u.useRef)(null),ye=(0,u.useRef)(null),Se=(0,u.useRef)(null),Ce=(0,u.useRef)(null),Ie=(0,u.useRef)(null),we=(0,u.useRef)(null),Re=(0,u.useRef)(null),Ae=(0,u.useRef)(null),xe=(0,m.$)().t;(0,u.useEffect)((function(){var e,t;U((null==y||null===(e=y.get("supportedByDefault"))||void 0===e?void 0:e.length)>0),R(null==y||null===(t=y.get("claimURI"))||void 0===t?void 0:t.toString())}),[y]),(0,u.useEffect)((function(){if(!ee||!K){var e=ye.current.children[0].children[1].children[0];e.focus(),e.blur(),Y(!0),te(!0)}}),[ee,K]);var Ue=function(e,t){t.current=setTimeout((function(){return e(!0)}),500)},Oe=function(e,t){clearTimeout(t.current),e(!1)};return u.createElement(l.Es,{onSubmit:function(e){var t,n,r,a,i,o,l={claimURI:b+"/"+e.get("claimURI").toString().trim(),description:null===(t=e.get("description"))||void 0===t?void 0:t.toString(),displayName:e.get("name").toString(),displayOrder:e.get("displayOrder")?parseInt(null===(n=e.get("displayOrder"))||void 0===n?void 0:n.toString()):0,readOnly:(null===(r=e.get("readOnly"))||void 0===r?void 0:r.length)>0,regEx:null===(a=e.get("regularExpression"))||void 0===a?void 0:a.toString(),required:(null===(i=e.get("required"))||void 0===i?void 0:i.length)>0,supportedByDefault:(null===(o=e.get("supportedByDefault"))||void 0===o?void 0:o.length)>0};if(T.attributeConfig.localAttributes.createWizard.customWIzard){if(re)return;if(""===oe)return;""!==se&&e.set("scim",se),e.set("oidc",oe)}K&&ee&&!E&&v(l,e)},submitState:g},u.createElement(h.Z,null,T.attributeConfig.localAttributes.createWizard.customWIzard&&u.createElement(u.Fragment,null,u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"text",name:"claimURI",label:xe("console:manage.features.claims.local.forms.attributeID.label"),className:"mb-1",required:!0,requiredErrorMessage:xe("console:manage.features.claims.local.forms.attributeID.requiredErrorMessage"),placeholder:xe("console:manage.features.claims.local.forms.attributeID.placeholder"),value:null==y||null===(r=y.get("claimURI"))||void 0===r?void 0:r.toString(),maxLength:30,loading:E,listen:function(e){R(e.get("claimURI").toString()),le(e.get("claimURI").toString().replace(/\./g,"")),ue(e.get("claimURI").toString().replace(/\./g,"")),fe(!1)},onMouseOver:function(){Ue(N,we)},onMouseOut:function(){Oe(N,we)},validation:function(e,t){if(""===e)return Y(!0),void te(!0);var n=!0;return(!e.match(/^\w+$/)||e.length>30)&&(n=!1),n?K&&ee?(S(!0),void(T.attributeConfig.localAttributes.createWizard.checkOIDCAvailability&&T.attributeConfig.localAttributes.checkAttributeNameAvailability(e,"BOTH").then((function(e){S(!1),e.has("SCIM")&&te(e.get("SCIM")),e.has("OIDC")&&Y(e.get("OIDC"))})))):(t.isValid=!1,void t.errorMessages.push(xe("console:manage.features.claims.dialects.forms.fields.attributeName.validation.alreadyExists"))):(t.isValid=!1,void t.errorMessages.push(xe("console:manage.features.claims.dialects.forms.fields.attributeName.validation.invalid")))},ref:ye,"data-testid":"".concat(C,"-form-claim-uri-input")}),u.createElement(c.GI,{content:xe("console:manage.features.claims.local.forms.attributeHint"),inverted:!0,open:Z,onClose:function(){Oe(N,we)},position:"bottom left",context:ye}),u.createElement(pe.Z,{className:"mb-3 ml-0"},u.createElement("em",null,"Attribute URI"),":\xa0","".concat(b,"/").concat(w||""))),u.createElement(h.Z.Column,{width:16},u.createElement(ge.Z,{fluid:!0},u.createElement(ge.Z.Content,null,u.createElement(ge.Z.Header,{className:"mb-2"},xe("extensions:manage.attributes.generatedAttributeMapping.title")),u.createElement(ge.Z.Meta,{className:"mb-5"},xe("extensions:manage.attributes.generatedAttributeMapping.description")),u.createElement(ge.Z.Description,{className:"mt-1 mb-1"},B&&u.createElement(c.v0,{className:"mb-4",size:"tiny",type:"error",content:"The SCIM mapping value entered contains illegal characters. Only alphabets, numbers, `_` are allowed."}),G&&u.createElement(c.v0,{className:"mb-4",size:"tiny",type:"error",content:"The OpenID Connect mapping value entered contains illegal characters. Only alphabets, numbers, `#`, and `_` are allowed."}),u.createElement(h.Z,{verticalAlign:"middle"},u.createElement(h.Z.Row,{columns:2},u.createElement(h.Z.Column,{width:5},u.createElement(c.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,D.r2)().oidc,spaced:"right",size:"micro",floated:"left"}),u.createElement("span",null,xe("extensions:manage.attributes.generatedAttributeMapping.OIDCProtocol"))),u.createElement(h.Z.Column,{width:11},u.createElement(c._D,{maxLength:30,text:oe,validation:"^[A-za-z0-9#_]+$",errorHandler:function(e){$(e)},onEdit:function(e){ae(e)},onChangesSaved:function(){var e=be(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return le(t),e.next=4,T.attributeConfig.localAttributes.checkAttributeNameAvailability(t,"OIDC").then((function(e){Y(e.get("OIDC"))}));case 4:$(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),!de&&u.createElement(h.Z.Row,{columns:3},u.createElement(h.Z.Column,{width:3},u.createElement(c.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,D.r2)().scim,spaced:"right",size:"micro",floated:"left"}),u.createElement("span",null,xe("extensions:manage.attributes.generatedAttributeMapping.SCIMProtocol"))),u.createElement(h.Z.Column,{width:11},u.createElement(c._D,{maxLength:30,textPrefix:"urn:scim:wso2:schema:",validation:"^[a-zA-Z0-9_.-]*$",errorHandler:function(e){W(e)},onEdit:function(e){ae(e)},onChangesSaved:function(){var e=be(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return ue(t),e.next=4,T.attributeConfig.localAttributes.checkAttributeNameAvailability(t,"SCIM").then((function(e){te(e.get("SCIM"))}));case 4:W(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),text:se})),u.createElement(h.Z.Column,{width:2},se?u.createElement(c.GI,{trigger:u.createElement(f.Z,{name:"trash alternate",link:!0,onClick:function(){ue(""),fe(!0)}}),content:"Remove Mapping",position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null))))))))),u.createElement(h.Z.Row,{columns:T.attributeConfig.localAttributes.createWizard.customWIzard?1:2},u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{onMouseOver:function(){Ue(_,Ie)},onMouseOut:function(){Oe(_,Ie)},type:"text",name:"name",label:xe("console:manage.features.claims.local.forms.name.label"),required:!0,requiredErrorMessage:xe("console:manage.features.claims.local.forms.name.requiredErrorMessage"),placeholder:xe("console:manage.features.claims.local.forms.name.placeholder"),value:null==y||null===(a=y.get("name"))||void 0===a?void 0:a.toString(),maxLength:30,ref:he,"data-testid":"".concat(C,"-form-name-input")}),u.createElement(c.GI,{content:xe("console:manage.features.claims.local.forms.nameHint"),inverted:!0,open:L,trigger:u.createElement("span",null),onClose:function(){Oe(_,Ie)},position:"bottom left",context:he}),T.attributeConfig.localAttributes.createWizard.customWIzard&&u.createElement(c.kW,null,xe("extensions:manage.attributes.displayNameHint"))),!T.attributeConfig.localAttributes.createWizard.customWIzard&&u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"text",name:"claimURI",label:xe("console:manage.features.claims.local.forms.attributeID.label"),required:!0,requiredErrorMessage:xe("console:manage.features.claims.local.forms.attributeID.requiredErrorMessage"),placeholder:xe("console:manage.features.claims.local.forms.attributeID.placeholder"),value:null==y||null===(i=y.get("claimURI"))||void 0===i?void 0:i.toString(),maxLength:30,listen:function(e){R(e.get("claimURI").toString())},onMouseOver:function(){Ue(N,we)},onMouseOut:function(){Oe(N,we)},ref:ye,"data-testid":"".concat(C,"-form-claim-uri-input")}),u.createElement(c.GI,{content:xe("console:manage.features.claims.local.forms.attributeHint"),inverted:!0,open:Z,trigger:u.createElement("p",null),onClose:function(){Oe(N,we)},position:"bottom left",context:ye}),w?u.createElement(pe.Z,null,u.createElement("em",null,"Attribute URI"),":\xa0",b+"/"+w):null)),u.createElement(h.Z.Row,{columns:2},!T.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"textarea",name:"description",label:xe("console:manage.features.claims.local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:xe("console:manage.features.claims.local.forms.description.placeholder"),value:null==y||null===(o=y.get("description"))||void 0===o?void 0:o.toString(),"data-testid":"".concat(C,"-form-description-input")})),!T.attributeConfig.localAttributes.createWizard.showOnlyMandatory||!T.attributeConfig.localAttributes.createWizard.showRegularExpression&&u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"text",name:"regularExpression",label:xe("console:manage.features.claims.local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:xe("console:manage.features.claims.local.forms.regEx.placeholder"),value:null==y||null===(s=y.get("regularExpression"))||void 0===s?void 0:s.toString(),onMouseOver:function(){Ue(Q,Re)},onMouseOut:function(){Oe(Q,Re)},ref:Se,"data-testid":"".concat(C,"-form-regex-input"),maxLength:k.Q.REGEX_FIELD_MAX_LENGTH,minLength:k.Q.REGEX_FIELD_MIN_LENGTH}),u.createElement(c.GI,{content:xe("console:manage.features.claims.local.forms.regExHint"),inverted:!0,open:P,trigger:u.createElement("span",null),onClose:function(){Oe(Q,Re)},position:"bottom left",context:Se}))),!T.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:16},u.createElement(l.gN,{type:"checkbox",name:"supportedByDefault",required:!1,requiredErrorMessage:"",children:[{label:xe("console:manage.features.claims.local.forms.supportedByDefault.label"),value:"Support"}],value:null==y?void 0:y.get("supportedByDefault"),listen:function(e){U((null==e?void 0:e.get("supportedByDefault").length)>0)},"data-testid":"".concat(C,"-form-supported-by-default-checkbox")}))),x&&T.attributeConfig.localAttributes.createWizard.showDisplayOrder&&u.createElement(h.Z.Row,{columns:16},u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{type:"number",min:"0",name:"displayOrder",label:xe("console:manage.features.claims.local.forms.displayOrder.label"),required:!1,requiredErrorMessage:"",placeholder:xe("console:manage.features.claims.local.forms.displayOrder.placeholder"),value:null!==(d=null==y||null===(p=y.get("displayOrder"))||void 0===p?void 0:p.toString())&&void 0!==d?d:"0",onMouseOver:function(){Ue(V,Ae)},onMouseOut:function(){Oe(V,Ae)},ref:Ce,"data-testid":"".concat(C,"-form-display-order-input")}),u.createElement(c.GI,{content:xe("console:manage.features.claims.local.forms.displayOrderHint"),inverted:!0,open:z,trigger:u.createElement("span",null),onClose:function(){Oe(V,Ae)},position:"bottom left",context:Ce}))),!T.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:16},u.createElement(l.gN,{type:"checkbox",name:"required",required:!1,requiredErrorMessage:"",children:[{label:xe("console:manage.features.claims.local.forms.required.label"),value:"Required"}],value:null==y?void 0:y.get("required"),"data-testid":"".concat(C,"-form-required-checkbox")}))),!T.attributeConfig.localAttributes.createWizard.showOnlyMandatory||T.attributeConfig.localAttributes.createWizard.showReadOnlyAttribute&&u.createElement(h.Z.Row,{column:1},u.createElement(h.Z.Column,null,u.createElement(l.gN,{type:"checkbox",name:"readOnly",required:!1,requiredErrorMessage:"",children:[{label:xe("console:manage.features.claims.local.forms.readOnly.label"),value:"ReadOnly"}],value:null==y?void 0:y.get("readOnly"),"data-testid":"".concat(C,"-form-readonly-checkbox")})))))};function Ie(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||Re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ce.defaultProps={currentStep:0,"data-testid":"local-claim-basic-details-form"};var xe=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,a=e["data-testid"],i=we((0,u.useState)([]),2),o=i[0],c=i[1],s=(0,d.v9)((function(e){return e.config.ui.hiddenUserStores})),f=(0,m.$)().t;return(0,u.useEffect)((function(){var e=[];T.attributeConfig.localAttributes.createWizard.showPrimaryUserStore&&e.push({description:"",enabled:!0,id:"PRIMARY",name:"PRIMARY",self:""}),(0,$.ow)().then((function(t){s&&s.length>0?t.data.map((function(t){s.length>0&&!s.includes(t.name)&&e.push(t)})):e.push.apply(e,Ie(t.data)),c(e)})).catch((function(){c(e)}))}),[]),u.createElement(h.Z,{"data-testid":a},u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:14},u.createElement("h4",null,f("console:manage.features.claims.local.wizard.steps.mapAttributes")),u.createElement("p",null,f("console:manage.features.claims.local.mappedAttributes.hint")),u.createElement(L.Z,{hidden:!0}),u.createElement(L.Z,{hidden:!0}),u.createElement(l.Es,{submitState:n,onSubmit:function(e){var n={attributeMapping:Array.from(e).map((function(e){var t=we(e,2),n=t[0];return{mappedAttribute:t[1],userstore:n}}))};t(n,e)}},u.createElement(h.Z,null,o.map((function(e,t){var n;return u.createElement(u.Fragment,null,(null==e?void 0:e.enabled)&&u.createElement(h.Z.Row,{columns:2,key:t},u.createElement(h.Z.Column,{className:"centered-text",width:4},e.name),u.createElement(h.Z.Column,{width:12},u.createElement(l.gN,{type:"text",name:e.name,placeholder:f("console:manage.features.claims.local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:f("console:manage.features.claims.local.forms.attribute.requiredErrorMessage"),value:null==r||null===(n=r.get(e.name))||void 0===n?void 0:n.toString(),"data-testid":"".concat(a,"-form-store-name-input")}))))})))))))};xe.defaultProps={"data-testid":"mapped-attributes"};var Ue=n(71325),Oe=n(10594),Le=function(e){var t,n=e.data,r=e["data-testid"],a=(0,m.$)().t,i=function(e,t){return u.createElement(h.Z.Row,{className:"summary-field",columns:2},u.createElement(h.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},u.createElement("div",{className:"label"},e)),u.createElement(h.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},u.createElement("div",{className:"value"},t)))},o=function(e){return u.createElement(Ue.Z.Item,null,u.createElement(pe.Z,{basic:!0,circular:!0},e))};return u.createElement(h.Z,{className:"wizard-summary","data-testid":r},u.createElement(h.Z.Row,null,u.createElement(h.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},u.createElement("div",{className:"general-details"},u.createElement("h3",null,n.displayName),u.createElement("div",{className:"description"},n.description)))),u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{textAlign:"center"},u.createElement(Ue.Z,null,n.supportedByDefault&&o(a("console:manage.features.claims.local.wizard.summary.supportedByDefault")),n.required&&o(a("console:manage.features.claims.local.wizard.summary.required")),n.readOnly&&o(a("console:manage.features.claims.local.wizard.summary.readOnly"))))),n.claimURI?i(a("console:manage.features.claims.local.wizard.summary.attributeURI"),u.createElement(O.Z.Field,null,u.createElement(c.OR,{value:n?null==n?void 0:n.claimURI:""}))):null,n.displayOrder?i(a("console:manage.features.claims.local.wizard.summary.displayOrder"),n.displayOrder):null,n.regEx?i(a("console:manage.features.claims.local.wizard.summary.regEx"),n.regEx):null,(null===(t=n.attributeMapping)||void 0===t?void 0:t.length)>0?i("Mapped attributes",u.createElement(Oe.Z,null,u.createElement(Oe.Z.Header,null,u.createElement(Oe.Z.Row,null,u.createElement(Oe.Z.HeaderCell,null,a("console:manage.features.claims.local.wizard.summary.userstore")),u.createElement(Oe.Z.HeaderCell,null,a("console:manage.features.claims.local.wizard.summary.attribute")))),u.createElement(Oe.Z.Body,null,n.attributeMapping.map((function(e,t){return u.createElement(Oe.Z.Row,{key:t,columns:2},u.createElement(Oe.Z.Cell,null,e.userstore),u.createElement(Oe.Z.Cell,null,e.mappedAttribute))}))))):null)};Le.defaultProps={"data-testid":"local-claims-summary"};var Te=n(42776),_e=function(e){var t,n=e.submitState,r=e.onSubmit,a=e.values,i=e["data-testid"],o=(0,m.$)().t;return u.createElement(l.Es,{onSubmit:function(e){r(e)},submitState:n},u.createElement(l.gN,{type:"text",name:"dialectURI",label:o("console:manage.features.claims.dialects.forms.dialectURI.label",{type:(0,Te.i)(k.Q.OTHERS,!0)}),required:!0,requiredErrorMessage:o("console:manage.features.claims.dialects.forms.dialectURI.requiredErrorMessage"),placeholder:o("console:manage.features.claims.dialects.forms.dialectURI.placeholder"),value:null==a||null===(t=a.get("dialectURI"))||void 0===t?void 0:t.toString(),"data-testid":"".concat(i,"-form-dialect-uri-input")}))};_e.defaultProps={"data-testid":"dialect-details"};var Me=n(20803),De=n(3148),Ze=n(93092),Ne=n(45408),je=n(7683);const Pe=(0,Ze.Z)((function(e,t){var n=(0,je.Z)(t);return(0,Ne.Z)(n)&&(n=void 0),(0,Ne.Z)(e)?(0,Me.Z)(e,(0,De.Z)(t,1,Ne.Z,!0),void 0,n):[]}));var ke=n(60611),Qe=n(82915),qe=n(62211),ze=function(){return{general:qe.r}},Ve=function(){return{general:qe.r}};function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==He(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===He(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(){Be=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),l=new L(r||[]);return a(o,"_invoke",{value:A(e,n,l)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};s(E,o,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(T([])));C&&C!==n&&r.call(C,o)&&(E=C);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(a,i,o,l){var c=m(e[a],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==He(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function A(t,n,r){var a=d;return function(i,o){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var c=x(l,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?g:f,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=m(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(He(t)+" is not iterable")}return y.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new R(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(I),s(I,c,"Generator"),s(I,o,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function We(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ye=function(e){var t=e.open,n=e.onClose,r=e.update,a=e.claimURIBase,s=e["data-testid"],p=Xe((0,u.useState)(0),2),g=p[0],y=p[1],b=Xe((0,u.useState)(null),2),E=b[0],S=b[1],C=Xe((0,u.useState)(null),2),I=C[0],w=C[1],R=Xe((0,u.useState)(null),2),A=R[0],x=R[1],O=Xe((0,u.useState)(null),2),L=O[0],_=O[1],M=Xe((0,u.useState)(!1),2),Z=M[0],j=M[1],P=Xe((0,u.useState)(!1),2),Q=P[0],q=P[1],z=Xe((0,u.useState)(!1),2),V=z[0],H=z[1],G=Xe((0,u.useState)(!1),2),F=G[0],B=G[1],W=Xe((0,u.useState)(!1),2),X=W[0],K=W[1],Y=Xe((0,u.useState)(null),2),J=Y[0],ee=Y[1],te=(0,u.useRef)(!1),ne=(0,d.v9)((function(e){return e.config.ui.hiddenUserStores})),re=Xe((0,l.cC)(),2),ae=re[0],ie=re[1],oe=Xe((0,l.cC)(),2),le=oe[0],ce=oe[1],se=(0,d.I0)(),ue=(0,m.$)().t,me=Xe((0,c.IK)(),3),de=me[0],pe=me[1],ge=me[2],he=D.lD.getInstance(),ve=(0,$.zU)(null).data;(0,u.useEffect)((function(){var e=!1;ne&&ne.length>0?T.attributeConfig.localAttributes.isUserStoresHidden(ne).then((function(t){t.map((function(t){t.enabled&&(e=!0)})),j(t.length>0&&e)})):(null==ve?void 0:ve.length)>0?j(!0):j(!1)}),[ne,ve]),(0,u.useEffect)((function(){X&&F&&J&&(Qe.m.push({pathname:ke.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",J),search:k.Q.NEW_LOCAL_CLAIM_URL_SEARCH_PARAM}),q(!1),n(),r())}),[X,F,J]);var ye=function(){var e,t=(e=Be().mark((function e(t,a,l){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.attributeConfig.localAttributes.createCustomDialect){e.next=3;break}return e.next=3,T.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(e){""===e&&(0,v.CM)(T.attributeConfig.localAttributes.customDialectURI)}));case 3:q(!0),(0,v.ij)(t).then((function(e){if(he.publish("manage-attribute-add-new-attribute"),se((0,o.V_)({description:ue("console:manage.features.claims.local.notifications.addLocalClaim.success.description"),level:i.QU.SUCCESS,message:ue("console:manage.features.claims.local.notifications.addLocalClaim.success.message")})),T.attributeConfig.localAttributes.mapClaimToCustomDialect&&a?(l?B(!0):T.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(e){(0,v.wg)(e,{claimURI:"".concat(T.attributeConfig.localAttributes.customDialectURI,":").concat(a.get("scim")),mappedLocalClaimURI:t.claimURI}).then((function(){be()})).finally((function(){return B(!0)}))})),T.attributeConfig.localAttributes.getDialect(k.Q.OIDC_MAPPING[0]).then((function(e){(0,v.wg)(e.id,{claimURI:"".concat(a.get("oidc")),mappedLocalClaimURI:t.claimURI}).finally((function(){return K(!0)}))}))):(K(!0),B(!0)),(0,U.Z)(e.headers.location))n(),r(),q(!1);else{var c=e.headers.location,s=c.substring(c.lastIndexOf("/")+1);ee(s)}})).catch((function(e){q(!1),pe({description:(null==e?void 0:e.description)||ue("console:manage.features.claims.local.notifications.addLocalClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||ue("console:manage.features.claims.local.notifications.addLocalClaim.genericError.message")})}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){We(i,r,a,o,l,"next",e)}function l(e){We(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),be=function(){se((0,o.wu)(!0)),(0,N.w7)().then((function(e){se((0,o.Um)(e))})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description&&se((0,o.V_)({description:e.response.data.description,level:i.QU.ERROR,message:ue("console:manage.notifications.getProfileSchema.error.message")})),se((0,o.V_)({description:ue("console:manage.notifications.getProfileSchema.genericError.description"),level:i.QU.ERROR,message:ue("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){se((0,o.wu)(!1))}))},Ee=[{content:u.createElement(Ce,{submitState:ae,validateMapping:V,setValidateMapping:H,onSubmit:function(e,t){var n=$e($e({},E),e),r=new Map;S(n),w(t),t.has("scim")?r.set("scim",t.get("scim").toString()):te.current=!0,t.has("oidc")&&r.set("oidc",t.get("oidc").toString()),_(r),T.attributeConfig.localAttributes.createWizard.identifyAsCustomAttrib&&(n.properties&&n.properties.length>0?n.properties.push({key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}):n.properties=[{key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}]),Z?y(1):(n.attributeMapping=[{mappedAttribute:n.claimURI.split("/").pop(),userstore:"PRIMARY"}],ye(n,r,!(null==te||!te.current)))},values:I,claimURIBase:a,"data-testid":"".concat(s,"-local-claims-basic-details")}),icon:Ve().general,title:ue("console:manage.features.claims.local.wizard.steps.general")},Z?{content:u.createElement(xe,{submitState:le,onSubmit:function(e,t){var n=$e($e({},E),e);S(n),x(t),T.attributeConfig.localAttributes.createWizard.showPrimaryUserStore||n.attributeMapping.push({mappedAttribute:n.claimURI.split("/").pop(),userstore:"PRIMARY"}),T.attributeConfig.localAttributes.createWizard.showSummary?y(2):ye(n,L,!(null==te||!te.current))},values:A,"data-testid":"".concat(s,"-mapped-attributes")}),icon:Ve().general,title:ue("console:manage.features.claims.local.wizard.steps.mapAttributes")}:void 0,T.attributeConfig.localAttributes.createWizard.showSummary?{content:u.createElement(Le,{data:E,"data-testid":"".concat(s,"-local-claims-summary")}),icon:Ve().general,title:ue("console:manage.features.claims.local.wizard.steps.summary")}:void 0].filter((function(e){return void 0!==e})),Se=function(){if(1===Ee.length&&ie(),2===Ee.length)switch(g){case 0:ie();break;case 1:ce()}switch(g){case 0:ie();break;case 1:ce();break;case 2:ye(E,L,!(null==te||!te.current))}};return u.createElement(fe.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":s,closeOnDimmerClick:!1},u.createElement(fe.Z.Header,{className:"wizard-header"},ue("console:manage.features.claims.local.wizard.header"),I&&I.get("name")?" - "+I.get("name"):""),Ee.length>1&&u.createElement(fe.Z.Content,{className:"steps-container","data-testid":"".concat(s,"-steps")},u.createElement(c.Rg.Group,{current:g},Ee.map((function(e,t){return u.createElement(c.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(s,"-step-").concat(t)})})))),u.createElement(fe.Z.Content,{className:"content-container",scrolling:!0},de&&ge,Ee[g].content),u.createElement(fe.Z.Actions,null,u.createElement(h.Z,null,u.createElement(h.Z.Row,{column:1},u.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(c.Qj,{floated:"left",onClick:function(){return n()}},"Cancel")),u.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},g<Ee.length-1&&u.createElement(c.KM,{floated:"right",onClick:Se,loading:V,"data-testid":"".concat(s,"-next-button")},ue("common:next")," ",u.createElement(f.Z,{name:"arrow right"})),g===Ee.length-1&&u.createElement(c.KM,{floated:"right",onClick:Se,"data-testid":"".concat(s,"-finish-button"),loading:Q||V,disabled:Q},ue("common:finish")),g>0&&u.createElement(c.Qj,{floated:"right",onClick:function(){y(g-1)},"data-testid":"".concat(s,"-previous-button")},u.createElement(f.Z,{name:"arrow left"})," ",ue("common:previous")))))))};Ye.defaultProps={"data-testid":"add-local-claims-wizard"};var Je=n(39990);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ot(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function nt(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(){rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),l=new L(r||[]);return a(o,"_invoke",{value:A(e,n,l)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};s(E,o,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(T([])));C&&C!==n&&r.call(C,o)&&(E=C);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(a,i,o,l){var c=m(e[a],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==et(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function A(t,n,r){var a=d;return function(i,o){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var c=x(l,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?g:f,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=m(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(et(t)+" is not iterable")}return y.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new R(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(I),s(I,c,"Generator"),s(I,o,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function at(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(e){var t,n,r=e.dialectId,a=e.update,s=e.wizard,f=e.onSubmit,p=e.externalClaims,g=e.triggerSubmit,y=e.attributeType,b=e.claimDialectUri,E=e.mappedLocalClaims,S=e.cancel,C=e["data-testid"],I=it((0,u.useState)(),2),w=I[0],R=I[1],A=it((0,u.useState)(),2),x=A[0],U=A[1],O=it((0,u.useState)(),2),L=O[0],_=O[1],M=it((0,u.useState)([]),2),Z=M[0],N=M[1],j=it((0,u.useState)(!1),2),P=j[0],Q=j[1],q=it((0,u.useState)(""),2),z=q[0],V=q[1],H=it((0,u.useState)(!0),2),G=H[0],$=H[1],F=it((0,u.useState)(!1),2),B=F[0],W=F[1],X=it((0,u.useState)(!1),2),K=X[0],Y=X[1],J=it((0,u.useState)(!0),2),ee=J[0],te=J[1],re=it((0,u.useState)(!1),2),ae=re[0],ie=re[1],oe=it((0,l.cC)(),2),le=oe[0],ce=oe[1],se=(0,d.I0)(),ue=(0,d.v9)((function(e){var t,n;return null==e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.enableIdentityClaims})),me=(0,m.$)().t;(0,u.useEffect)((function(){"oidc"!==y&&b!==T.attributeConfig.localAttributes.customDialectURI&&(Z&&x&&0!==Z.length&&0!==x.length?Y(!1):Y(!0))}),[Z,x]),(0,u.useEffect)((function(){T.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)&&0===(null==Z?void 0:Z.length)?ie(!0):ie(!1),"oidc"!==y&&b!==T.attributeConfig.localAttributes.customDialectURI?Z&&0!==Z.length?x&&0!==x.length?Y(!1):Y(!0):Y(!1):"oidc"===y||b!==T.attributeConfig.localAttributes.customDialectURI||x&&0!==x.length?Y(!1):Y(!0)}),[Z,x]),(0,u.useEffect)((function(){T.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)?de().finally():te(!1)}),[]);var de=function(){var e,t=(e=rt().mark((function e(){var t,n,a,l,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,(0,v.jb)(r);case 4:t=e.sent,N(t.attributes),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),se((0,o.V_)({description:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.description)||me("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:i.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.message)||me("console:manage.features.claims.local.notifications.getClaims.genericError.message")}));case 11:return e.prev=11,te(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){at(i,r,a,o,l,"next",e)}function l(e){at(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){if(p&&p.length&&!ee){var e=new Set(p.map((function(e){return e.claimURI})));N(nt((null!=Z?Z:[]).filter((function(t){return!e.has(t)}))))}}),[p,ee]),(0,u.useEffect)((function(){var e={"exclude-identity-claims":!ue,filter:null,limit:null,offset:null,sort:null};$(!0),(0,v.WN)(e).then((function(e){var t=e.sort((function(e,t){return e.displayName>t.displayName?1:-1}));R(t),_(t),$(!1)})).catch((function(e){var t,n,r,a;se((0,o.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||me("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:i.QU.ERROR,message:(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||me("console:manage.features.claims.local.notifications.getClaims.genericError.message")})),$(!1)}))}),[]),(0,u.useEffect)((function(){if(p&&w){var e=nt(w);null==E||E.forEach((function(t){e=nt(fe(t,e))})),_(e),U(e)}}),[p,P]),(0,u.useEffect)((function(){w&&Q(!0)}),[w]);var fe=function(e,t){var n=t||w;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))};return G&&ee?u.createElement(c.pO,null):u.createElement(l.Es,{onSubmit:function(e){s?(f(e),V(""),ce()):(W(!0),(0,v.wg)(r,{claimURI:e.get("claimURI").toString(),mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){se((0,o.V_)({description:me("console:manage.features.claims.external.notifications.addExternalAttribute.success.description",{type:(0,ne.i)(y)}),level:i.QU.SUCCESS,message:me("console:manage.features.claims.external.notifications.addExternalAttribute.success.message",{type:(0,ne.i)(y,!0)})})),ce(),a(),!s&&S&&S()})).catch((function(e){se((0,o.V_)({description:(null==e?void 0:e.description)||me("console:manage.features.claims.external.notifications.addExternalAttribute.genericError.description",{type:(0,ne.i)(y)}),level:i.QU.ERROR,message:(null==e?void 0:e.message)||me("console:manage.features.claims.external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){W(!1)})))},resetState:le,submitState:g},u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:2},u.createElement(h.Z.Column,{width:8},T.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)?u.createElement(l.gN,{name:"claimURI",label:me("console:manage.features.claims.external.forms.attributeURI.label",{type:(0,ne.i)(y,!0)}),required:!0,requiredErrorMessage:me("console:manage.features.claims.external.forms.attributeURI.requiredErrorMessage",{type:(0,ne.i)(y,!0)}),placeholder:me("console:manage.features.claims.external.forms.attributeURI.placeholder",{type:(0,ne.i)(y)}),type:"dropdown","data-testid":"".concat(C,"-form-claim-uri-input"),listen:function(e){V(e.get("claimURI").toString())},validation:function(e,t){var n,r=tt(p);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(me("console:manage.features.claims.external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,ne.i)(y)}));break}}}catch(a){r.e(a)}finally{r.f()}y===k.Q.OIDC&&(e.toString().match(/^[A-za-z0-9#_]+$/)||(t.isValid=!1,t.errorMessages.push(me("console:manage.features.claims.external.forms.attributeURI.validationErrorMessages.invalidName",{type:(0,ne.i)(y)}))))},children:null!==(t=null==Z?void 0:Z.map((function(e,t){return{key:t,text:e.split(":").pop(),value:e.split(":").pop()}})))&&void 0!==t?t:[]}):u.createElement(l.gN,{name:"claimURI",label:me("console:manage.features.claims.external.forms.attributeURI.label",{type:(0,ne.i)(y,!0)}),required:!0,requiredErrorMessage:me("console:manage.features.claims.external.forms.attributeURI.requiredErrorMessage",{type:(0,ne.i)(y,!0)}),placeholder:me("console:manage.features.claims.external.forms.attributeURI.placeholder",{type:(0,ne.i)(y)}),type:"text",listen:function(e){V(e.get("claimURI").toString())},maxLength:30,"data-testid":"".concat(C,"-form-claim-uri-input"),validation:function(e,t){var n,r=tt(p);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(me("console:manage.features.claims.external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,ne.i)(y)}));break}}}catch(a){r.e(a)}finally{r.f()}y===k.Q.OIDC&&(e.toString().match(/^[A-za-z0-9#_]+$/)||(t.isValid=!1,t.errorMessages.push(me("console:manage.features.claims.external.forms.attributeURI.validationErrorMessages.invalidName",{type:(0,ne.i)(y)}))))}})),u.createElement(h.Z.Column,{width:8},u.createElement(l.gN,{loading:G,type:"dropdown",name:"localClaim",label:me("console:manage.features.claims.external.forms.localAttribute.label"),required:!0,requiredErrorMessage:me("console:manage.features.claims.external.forms.localAttribute.requiredErrorMessage"),placeholder:me("console:manage.features.claims.external.forms.localAttribute.placeholder"),search:function(e){return e},onSearchChange:function(e,t){var n=t.searchQuery,r=x.filter((function(e){return e.displayName.toLowerCase().includes(n.toLowerCase())}));_(r)},onClose:function(){_(x)},children:null!==(n=null==L?void 0:L.map((function(e,t){return{key:t,text:u.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,u.createElement(c.EK,{className:"description",compact:!0,withBackground:!1},e.claimURI)),value:e.claimURI}})))&&void 0!==n?n:[],"data-testid":"".concat(C,"-form-local-claim-dropdown")})),u.createElement(h.Z.Column,{width:16},y!==k.Q.OIDC&&y!==k.Q.OTHERS&&u.createElement(pe.Z,{className:"mb-3 mt-2 ml-0"},u.createElement("em",null,"Attribute URI"),":\xa0",z?"".concat(b).concat(y==k.Q.SCIM?":":"/").concat(z||""):""))),!G&&!ee&&(ae||K)&&u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:16,textAlign:"left",verticalAlign:"top"},u.createElement(c.v0,{visible:!0,type:"warning",content:u.createElement(u.Fragment,null,ae?u.createElement(Je.c,{i18nKey:"console:manage.features.claims.external.forms.emptyMessage"},"All the SCIM attributes are mapped to local claims."):u.createElement(u.Fragment,null,u.createElement(Je.c,{i18nKey:"console:manage.features.claims.external.forms.warningMessage"},"There are no local attributes available for mapping. Add new local attributes from"),u.createElement(c.rU,{external:!1,onClick:function(){return D.m8.push(D.$x.getPaths().get("LOCAL_CLAIMS"))}}," here"),"."))}))),s&&u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:16,textAlign:"right",verticalAlign:"top"},u.createElement(c.KM,{type:"submit","data-testid":"".concat(C,"-form-submit-button"),loading:B,disabled:B||K||ae},me("console:manage.features.claims.external.forms.submit"))))))};function st(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ct.defaultProps={attributeType:k.Q.OTHERS,claimDialectUri:k.Q.CUSTOM_MAPPING,"data-testid":"add-external-claims"};var ft=function(e){var t=e.open,n=e.onClose,r=e.update,a=e.attributeType,s=e["data-testid"],p=ut((0,u.useState)(0),2),g=p[0],y=p[1],b=ut((0,u.useState)(null),2),E=b[0],S=b[1],C=ut((0,u.useState)([]),2),I=C[0],w=C[1],R=ut((0,u.useState)(!1),2),A=R[0],x=R[1],U=ut((0,l.cC)(),2),O=U[0],L=U[1],T=ut((0,l.cC)(),2),_=T[0],M=T[1],D=(0,d.I0)(),Z=(0,m.$)().t,N=ut((0,c.IK)(),3),j=N[0],P=N[1],k=N[2],Q=[{content:u.createElement(_e,{submitState:O,onSubmit:function(e){y(1),S(e)},values:E,"data-testid":"".concat(s,"-dialect-details")}),icon:ze().general,title:Z("console:manage.features.claims.dialects.wizard.steps.dialectURI")},{content:u.createElement(yt,{submitState:_,onSubmit:function(e){y(2),w(e)},values:I,onExternalClaimsChanged:function(e){w(st(e))},"data-testid":"".concat(s,"-external-claims"),attributeType:a}),icon:ze().general,title:Z("console:manage.features.claims.dialects.wizard.steps.externalAttribute",{type:(0,Te.i)(a,!0)})},{content:u.createElement(Et,{dialectURI:null==E?void 0:E.get("dialectURI").toString(),claims:I,"data-testid":"".concat(s,"-summary"),attributeType:a}),icon:ze().general,title:Z("console:manage.features.claims.dialects.wizard.steps.summary")}],q=function(){switch(g){case 0:L();break;case 1:M();break;case 2:x(!0),(0,v.CM)(null==E?void 0:E.get("dialectURI").toString()).then((function(){var e=window.btoa(null==E?void 0:E.get("dialectURI").toString()).replace(/=/g,""),t=[];I.forEach((function(n){t.push((0,v.wg)(e,n))})),Promise.all(t).then((function(){D((0,o.V_)({description:Z("console:manage.features.claims.dialects.notifications.addDialect.success.description"),level:i.QU.SUCCESS,message:Z("console:manage.features.claims.dialects.notifications.addDialect.success.message")}))})).catch((function(){D((0,o.V_)({description:Z("console:manage.features.claims.dialects.notifications.addDialect.genericError.description"),level:i.QU.WARNING,message:Z("console:manage.features.claims.dialects.notifications.addDialect.genericError.message")}))})).finally((function(){n(),r()}))})).catch((function(e){P({description:(null==e?void 0:e.description)||Z("console:manage.features.claims.dialects.notifications.addDialect.error.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||Z("console:manage.features.claims.dialects.notifications.addDialect.error.message")})})).finally((function(){x(!1)}))}};return u.createElement(fe.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":s,closeOnDimmerClick:!1},u.createElement(fe.Z.Header,{className:"wizard-header"},Z("console:manage.features.claims.dialects.wizard.header"),E&&E.get("dialectURI")?" - "+E.get("dialectURI"):""),u.createElement(fe.Z.Content,{className:"steps-container","data-testid":"".concat(s,"-steps")},u.createElement(c.Rg.Group,{current:g},Q.map((function(e,t){return u.createElement(c.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(s,"-step-").concat(t)})})))),u.createElement(fe.Z.Content,{className:"content-container",scrolling:!0},j&&k,Q[g].content),u.createElement(fe.Z.Actions,null,u.createElement(h.Z,null,u.createElement(h.Z.Row,{column:1},u.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(c.Qj,{floated:"left",onClick:function(){return n()},"data-testid":"".concat(s,"-cancel-button")},Z("common:cancel"))),u.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},g<Q.length-1&&u.createElement(c.KM,{floated:"right",onClick:q,"data-testid":"".concat(s,"-next-button")},Z("common:next")," ",u.createElement(f.Z,{name:"arrow right"})),g===Q.length-1&&u.createElement(c.KM,{floated:"right",onClick:q,"data-testid":"".concat(s,"-finish-button"),loading:A,disabled:A},Z("common:finish")),g>0&&u.createElement(c.Qj,{floated:"right",onClick:function(){y(g-1)},"data-testid":"".concat(s,"-previous-button")},u.createElement(f.Z,{name:"arrow left"})," ",Z("common:previous")))))))};function pt(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){if(e){if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ft.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"add-dialect-wizard"};var yt=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,a=e.onExternalClaimsChanged,i=e.shouldShowInitialValues,o=e.attributeType,l=e.claimDialectUri,d=e.wizard,f=e.dialectId,p=e.mappedLocalClaims,g=e.onClaimListChange,v=e["data-testid"],y=gt((0,u.useState)([]),2),b=y[0],E=y[1],S=gt((0,u.useState)([]),2),C=S[0],I=S[1],w=gt((0,u.useState)([]),2),R=w[0],A=w[1],x=(0,u.useRef)(!0),U=(0,u.useRef)(!0),O=(0,m.$)().t;(0,u.useEffect)((function(){A(p)}),[p]),(0,u.useEffect)((function(){x.current?x.current=!1:t(_())}),[n]),(0,u.useEffect)((function(){r&&(E(r),U.current&&(I(r),U.current=!1))}),[r]),(0,u.useEffect)((function(){"function"==typeof g&&(b.length===C.length?g(!0):g(!1))}),[b]);var T=function(e,t,n){switch(e){case k.Q.SCIM:return"".concat(t,":").concat(n);case k.Q.OIDC:case k.Q.OTHERS:return n;default:return"".concat(t,"/").concat(n)}},_=function(){return i?b:Pe(b,C,s.Z)};return u.createElement(h.Z,null,u.createElement(h.Z.Row,{columns:2},u.createElement(h.Z.Column,{width:16},u.createElement(ct,{wizard:!0,onSubmit:function(e){var t={claimURI:T(o,l,e.get("claimURI").toString()),mappedLocalClaimURI:e.get("localClaim").toString()},n=[].concat(pt(b),[t]);A((function(e){return[].concat(pt(e),[t.mappedLocalClaimURI])})),E(n),a&&a(n)},externalClaims:b,"data-testid":"".concat(v,"-add-external-claims"),attributeType:o,claimDialectUri:l,dialectId:f,mappedLocalClaims:R}),u.createElement(L.Z,{hidden:!0}),_().length>0?u.createElement(Ut,{isLoading:!1,list:_(),localClaim:wt.ADD_EXTERNAL,onEdit:function(e,t){var n,r=pt(b),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ht(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;(0,s.Z)(e,o)&&(k.Q.CLAIM_URI_ATTRIBUTE_KEY in e&&(o.claimURI=t.get("claimURI").toString(),o.mappedLocalClaimURI=t.get("localClaim").toString()))}}catch(l){i.e(l)}finally{i.f()}E(r),a&&a(r)},onDelete:function(e){var t=e,n=b.filter((function(t){return!(0,s.Z)(e,t)}));E(n),A(R.filter((function(e){return e!==t.mappedLocalClaimURI}))),a&&a(n)},"data-testid":"".concat(v,"-list"),attributeType:o,isEditable:!1}):d&&u.createElement(c.$J,{title:O("console:manage.features.claims.external.placeholders.empty.title",{type:(0,ne.i)(o,!0)}),subtitle:[O("console:manage.features.claims.external.placeholders.empty.subtitle",{type:(0,ne.i)(o)})],image:(0,D.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(v,"-empty-placeholder")}))))};yt.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"external-claims",mappedLocalClaims:[],shouldShowInitialValues:!0,wizard:!0};var bt=n(32442),Et=function(e){var t=e.dialectURI,n=e.claims,r=e.attributeType,a=e["data-testid"],i=(0,m.$)().t;return u.createElement(h.Z,{className:"wizard-summary","data-testid":a},u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},u.createElement("div",{className:"general-details"},u.createElement("h3",null,t)))),u.createElement(h.Z.Row,{columns:1},u.createElement(h.Z.Column,{width:16},u.createElement(Oe.Z,null,u.createElement(Oe.Z.Header,null,u.createElement(Oe.Z.Row,null,u.createElement(Oe.Z.HeaderCell,null),u.createElement(Oe.Z.HeaderCell,null,i("console:manage.features.claims.dialects.wizard.summary.externalAttribute",{type:(0,ne.i)(r,!0)})),u.createElement(Oe.Z.HeaderCell,null,i("console:manage.features.claims.dialects.wizard.summary.mappedAttribute")))),u.createElement(Oe.Z.Body,null,n.map((function(e,t){return u.createElement(Oe.Z.Row,{key:t,columns:2},u.createElement(Oe.Z.Cell,null,u.createElement(bt.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"mini"},u.createElement(c.Xo,null),u.createElement("span",{className:"claims-letter"},(n=e.claimURI,(r=n.replace("http://","").split("/"))[r.length-1][0].toLocaleUpperCase())))),u.createElement(Oe.Z.Cell,null,e.claimURI),u.createElement(Oe.Z.Cell,null,e.mappedLocalClaimURI));var n,r})),0===n.length&&u.createElement(Oe.Z.Row,null,u.createElement(Oe.Z.Cell,{colSpan:3,textAlign:"center"},u.createElement(c.v0,{type:"warning",content:i("console:manage.features.claims.dialects.wizard.summary.notFound",{type:(0,ne.i)(r,!0)})}))))))))};function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Et.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"add-dialect-summary"};var It=function(e){var t,n,r,s,p,g,y,b,E=e.attributeType,S=e.attributeUri,C=e.mappedLocalClaims,I=e.updateMappedClaims,w=e["data-testid"],R=(0,m.$)().t,A=[{key:0,text:R("console:manage.features.claims.external.attributes.attributeURI",{type:(0,ne.i)(E,!0,!0)}),value:"claimURI"},{key:1,text:R("console:manage.features.claims.external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],x=(0,d.v9)((function(e){return e.config.ui.features})),U=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),O=St((0,u.useState)(0),2),_=O[0],M=O[1],Z=St((0,u.useState)(D.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),N=Z[0],j=Z[1],P=St((0,u.useState)([]),2),Q=P[0],q=P[1],z=St((0,u.useState)(A[0]),2),V=z[0],H=z[1],G=St((0,u.useState)(!0),2),$=G[0],F=G[1],B=St((0,u.useState)(!1),2),W=B[0],X=B[1],K=St((0,u.useState)(""),2),Y=K[0],J=K[1],ee=St((0,u.useState)(!1),2),te=ee[0],re=ee[1],ae=St((0,u.useState)(!0),2),ie=ae[0],oe=ae[1],le=St((0,u.useState)(!1),2),ce=le[0],se=le[1],ue=St((0,l.cC)(),2),pe=ue[0],ge=ue[1],he=St((0,l.cC)(),2),ve=he[0],ye=he[1],be=(0,d.I0)(),Ee=e.dialectID,Se=e.claims,Ce=e.update,Ie=e.isLoading,we=D.lD.getInstance();(0,u.useEffect)((function(){Se&&(q(Se),Ae())}),[Se]),(0,u.useEffect)((function(){q((0,D.fS)(Q,V.value,$))}),[V,$]);var Re=function(e){try{var t=(0,D.gQ)(Se,e,V.value,$);q(t),J(e),M(0),ye()}catch(n){be((0,o.V_)({description:null==n?void 0:n.message,level:i.QU.ERROR,message:R("console:manage.features.claims.external.advancedSearch.error")}))}},Ae=function(){re(!te),J(""),q(Se)};return u.createElement(c.PS,{advancedSearch:u.createElement(D.nC,{onFilter:Re,filterAttributeOptions:[{key:0,text:R("console:manage.features.claims.external.attributes.attributeURI",{type:(0,ne.i)(E,!0,!0)}),value:"claimURI"},{key:1,text:R("console:manage.features.claims.external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,ne.i)(E,!0,!0)}),filterConditionsPlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterCondition.placeholder",{type:(0,ne.i)(E,!0,!0)}),filterValuePlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:R("console:manage.features.claims.external.advancedSearch.placeholder",{type:(0,ne.i)(E,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:te,"data-testid":"".concat(w,"-list-advanced-search")}),currentListSize:N,listItemLimit:N,onItemsPerPageDropdownChange:function(e,t){j(t.value)},onPageChange:function(e,t){M((t.activePage-1)*N)},onSortStrategyChange:function(e,t){H(A.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){F(e)},resetPagination:ve,showPagination:!0,sortOptions:A,sortStrategy:V,showTopActionPanel:Ie||!(!Y&&(null==Q?void 0:Q.length)<=0),totalPages:Math.ceil((null==Q?void 0:Q.length)/N),totalListSize:null==Q?void 0:Q.length,rightActionPanel:u.createElement(u.Fragment,null,(null===T.attributeConfig||void 0===T.attributeConfig||null===(t=T.attributeConfig.editAttributeMappings)||void 0===t?void 0:t.showAddExternalAttributeButton(Ee))&&(0,a.hasRequiredScopes)(null==x?void 0:x.attributeDialects,null==x||null===(n=x.attributeDialects)||void 0===n||null===(r=n.scopes)||void 0===r?void 0:r.create,U)&&u.createElement(c.KM,{loading:Se&&S!==(null===(s=Se[0])||void 0===s?void 0:s.claimDialectURI),onClick:function(){var e;S===(null===(e=Se[0])||void 0===e?void 0:e.claimDialectURI)&&X(!0)},disabled:W||Se&&S!==(null===(p=Se[0])||void 0===p?void 0:p.claimDialectURI),"data-testid":"".concat(w,"-list-layout-add-button")},u.createElement(f.Z,{name:"add"}),R("console:manage.features.claims.external.pageLayout.edit.primaryAction",{type:(0,ne.i)(E,!0)})),E===k.Q.OIDC&&(null==x||null===(g=x.oidcScopes)||void 0===g?void 0:g.enabled)&&(0,a.hasRequiredScopes)(null==x?void 0:x.oidcScopes,null==x||null===(y=x.oidcScopes)||void 0===y||null===(b=y.scopes)||void 0===b?void 0:b.feature,U)&&u.createElement(c.kq,{onClick:function(){D.m8.push(D.$x.getPaths().get("OIDC_SCOPES"))},"data-componentid":"".concat(w,"-oidc-scopes-button")},u.createElement(me.NX,{fill:"black",className:"icon"}),R("console:develop.features.sidePanel.oidcScopes"))),"data-testid":"".concat(w,"-list-layout")},W&&u.createElement(fe.Z,{open:W,onClose:function(){X(!1)},dimmer:"blurring",size:"small","data-testid":"".concat(w,"-add-external-claim-modal"),closeOnDimmerClick:!1},u.createElement(fe.Z.Header,null,R("console:manage.features.claims.external.pageLayout.edit.header",{type:(0,ne.i)(E,!0)})),u.createElement(fe.Z.Content,{scrolling:!0,className:"edit-attribute-mapping"},u.createElement(yt,{"data-testid":"".concat(w,"-add-external-claims"),onSubmit:function(e){!function(e){var t=e.map((function(e){return(0,v.wg)(Ee,{claimURI:e.claimURI,mappedLocalClaimURI:e.mappedLocalClaimURI})}));se(!0),Promise.all(t).then((function(){be((0,o.V_)({description:R("console:manage.features.claims.external.notifications.addExternalAttribute.success.description",{type:(0,ne.i)(E)}),level:i.QU.SUCCESS,message:R("console:manage.features.claims.external.notifications.addExternalAttribute.success.message")})),Ce(),I(!0)})).catch((function(e){be((0,o.V_)({description:(null==e?void 0:e.description)||R("console:manage.features.claims.external.notifications.addExternalAttribute.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||R("console:manage.features.claims.external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){se(!1),X(!1)}))}(e)},submitState:pe,values:Se,shouldShowInitialValues:!1,attributeType:E,claimDialectUri:S,dialectId:Ee,wizard:!1,mappedLocalClaims:C,onClaimListChange:function(e){oe(e)}})),u.createElement(fe.Z.Actions,null,u.createElement(c.Qj,{onClick:function(){X(!1)},"data-testid":"".concat(w,"-add-external-claim-modal-cancel-button")},R("common:cancel")),u.createElement(c.KM,{disabled:ie||ce,loading:ce,onClick:function(){we.publish("manage-attribute-mappings-add-new-attribute",{type:(0,de.Z)(E)}),ge()},"data-testid":"".concat(w,"-add-external-claim-modal-save-button")},R("common:save")))),u.createElement(h.Z,{columns:1},u.createElement(h.Z.Column,{width:16},u.createElement(L.Z,{hidden:!0}),u.createElement(Ut,{advancedSearch:u.createElement(D.nC,{onFilter:Re,filterAttributeOptions:[{key:0,text:R("console:manage.features.claims.external.attributes.attributeURI",{type:(0,ne.i)(E,!0,!0)}),value:"claimURI"},{key:1,text:R("console:manage.features.claims.external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,ne.i)(E,!0,!0)}),filterConditionsPlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:R("console:manage.features.claims.external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:R("console:manage.features.claims.external.advancedSearch.placeholder",{type:(0,ne.i)(E,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:te,"data-testid":"".concat(w,"-list-advanced-search")}),showTableHeaders:!0,isLoading:Ie,list:function(e,t,n){return null==e?void 0:e.slice(n,n+t)}(Q,N,_),localClaim:wt.EXTERNAL,update:function(){return Ce()},dialectID:Ee,onEmptyListPlaceholderActionClick:function(){return X(!0)},onSearchQueryClear:Ae,searchQuery:Y,"data-testid":"".concat(w,"-list"),attributeType:E,featureConfig:x,updateMappedClaims:I}))))};It.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"edit-external-claims",isLoading:!0};var wt,Rt=n(40764);function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e[e.LOCAL=0]="LOCAL",e[e.EXTERNAL=1]="EXTERNAL",e[e.DIALECT=2]="DIALECT",e[e.ADD_EXTERNAL=3]="ADD_EXTERNAL"}(wt||(wt={}));var Ut=function(e){var t=e.showTableHeaders,n=e.advancedSearch,h=e.defaultListItemLimit,y=e.featureConfig,b=e.list,E=e.localClaim,S=e.update,C=e.dialectID,I=e.onEdit,w=e.onDelete,R=e.isLoading,A=e.onEmptyListPlaceholderActionClick,x=e.onListItemClick,U=e.onSearchQueryClear,O=e.selection,L=e.searchQuery,_=e.attributeType,M=e.showListItemActions,Z=e.isEditable,j=e.updateMappedClaims,P=e["data-testid"],Q=At((0,u.useState)(!1),2),q=Q[0],z=Q[1],V=At((0,u.useState)(null),2),H=V[0],G=V[1],$=At((0,u.useState)(null),2),F=$[0],B=$[1],W=At((0,u.useState)([]),2),X=W[0],K=W[1],Y=At((0,u.useState)(""),2),J=Y[0],ee=Y[1],te=At((0,u.useState)(void 0),2),re=te[0],ae=te[1],ie=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),oe=(0,d.I0)(),le=At((0,l.cC)(),2),ce=le[0],se=le[1],me=(0,u.useRef)([]),de=(0,u.useRef)([]),fe=(0,m.$)().t,pe=At((0,c.ZK)(),3),ge=pe[0],he=pe[1],ve=pe[2],ye="oidc";null==b||b.forEach((function(e,t){me.current.push(me.current[t]||u.createRef()),de.current.push(de.current[t]||u.createRef())})),(0,u.useEffect)((function(){Ee(b)&&(0,Rt.GN)(null).then((function(e){K(e)})).catch((function(e){var t,n;oe((0,o.V_)({description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:fe("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:i.QU.ERROR,message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:fe("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}))}))}),[JSON.stringify(b)]);var be,Ee=function(e){return E===wt.LOCAL},Se=function(e){return E===wt.DIALECT},Ce=function(e){return E===wt.EXTERNAL},Ie=function(){z(!1),B(null),G(null)},we=function(e){(0,v.wf)(e).then((function(){S(),Ie(),j(!0),oe((0,o.V_)({description:fe("console:manage.features.claims.local.notifications.deleteClaim.success.description"),level:i.QU.SUCCESS,message:fe("console:manage.features.claims.local.notifications.deleteClaim.success.message")}))})).catch((function(e){oe(he({description:(null==e?void 0:e.description)||fe("console:manage.features.claims.local.notifications.deleteClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||fe("console:manage.features.claims.local.notifications.deleteClaim.genericError.message")}))}))},Re=function(e,t){(0,v.q)(e,t.id).then((function(){S(),T.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(){Ae()})),j(!0),Ie(),oe((0,o.V_)({description:fe("console:manage.features.claims.external.notifications.deleteExternalClaim.success.description",{type:t.claimURI}),level:i.QU.SUCCESS,message:fe("console:manage.features.claims.external.notifications.deleteExternalClaim.success.message")}))})).catch((function(e){oe((0,o.V_)({description:(null==e?void 0:e.description)||fe("console:manage.features.claims.external.notifications.deleteExternalClaim.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||fe("console:manage.features.claims.external.notifications.deleteExternalClaim.genericError.message")}))}))},Ae=function(){oe((0,o.wu)(!0)),(0,N.w7)().then((function(e){oe((0,o.Um)(e))})).catch((function(e){var t,n;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description&&oe((0,o.V_)({description:e.response.data.description,level:i.QU.ERROR,message:fe("console:manage.notifications.getProfileSchema.error.message")})),oe((0,o.V_)({description:fe("console:manage.notifications.getProfileSchema.genericError.description"),level:i.QU.ERROR,message:fe("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){oe((0,o.wu)(!1))}))},xe=function(e){(0,v.Nx)(e).then((function(){S(),Ie(),oe((0,o.V_)({description:fe("console:manage.features.claims.dialects.notifications.deleteDialect.success.description"),level:i.QU.SUCCESS,message:fe("console:manage.features.claims.dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){oe((0,o.V_)({description:(null==e?void 0:e.description)||fe("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.description"),level:i.QU.ERROR,message:(null==e?void 0:e.message)||fe("console:manage.features.claims.dialects.notifications.deleteDialect.genericError.message")}))}))},Ue=function(e,t){G(e),B(t),z(!0)},Oe=function(){return L?u.createElement(c.$J,{action:u.createElement(c.Qj,{onClick:U},fe("console:manage.placeholders.emptySearchResult.action")),image:(0,D.jF)().emptySearch,imageSize:"tiny",title:fe("console:manage.placeholders.emptySearchResult.title"),subtitle:[fe("console:manage.placeholders.emptySearchResult.subtitles.0",{query:L}),fe("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(P,"-empty-search-placeholder")}):0===(null==b?void 0:b.length)?u.createElement(c.$J,{action:T.attributeConfig.attributesPlaceholderAddButton(_)&&u.createElement(r.di,{when:r.TA.SCOPE_WRITE},u.createElement(c.KM,{onClick:A},u.createElement(f.Z,{name:"add"}),Ee(b)?fe("console:manage.features.claims.list.placeholders.emptyList.action.local"):Se()?fe("console:manage.features.claims.list.placeholders.emptyList.action.dialect",{type:(0,ne.i)(_,!0)}):fe("console:manage.features.claims.list.placeholders.emptyList.action.external",{type:(0,ne.i)(_,!0)}))),image:(0,D.jF)().newList,imageSize:"tiny",title:Ee(b)?fe("console:manage.features.claims.list.placeholders.emptyList.title.local"):Se()?fe("console:manage.features.claims.list.placeholders.emptyList.title.dialect"):fe("console:manage.features.claims.list.placeholders.emptyList.title.external",{type:(0,ne.i)(_,!0)}),subtitle:[],"data-testid":"".concat(P,"-empty-placeholder")}):null},Le=function(e){var t=e.claimURI.split("/");return t[t.length-1]};return u.createElement(u.Fragment,null,q?(be=Ee(F)?{assertion:F.displayName,delete:we,message:fe("console:manage.features.claims.list.confirmation.local.message"),name:fe("console:manage.features.claims.list.confirmation.local.name")}:Se()?{assertion:F.dialectURI,delete:xe,message:fe("console:manage.features.claims.list.confirmation.dialect.message"),name:fe("console:manage.features.claims.list.confirmation.dialect.name")}:{assertion:F.claimURI,delete:Re,message:fe("console:manage.features.claims.list.confirmation.external.message",{type:F.claimURI})+(_&&_===ye?"If this attribute is attached to any scope, this action will also remove the attribute from the relevant scope.":k.Q.EMPTY_STRING),name:fe("console:manage.features.claims.list.confirmation.external.name",{type:F.claimURI})},u.createElement(c.cV,{onClose:Ie,type:"negative",open:q,assertionHint:fe("console:manage.features.claims.list.confirmation.hint"),assertionType:"checkbox",primaryAction:fe("console:manage.features.claims.list.confirmation.action"),secondaryAction:fe("common:cancel"),onSecondaryActionClick:function(){z(!1),he(null)},onPrimaryActionClick:function(){H===wt.EXTERNAL?be.delete(C,F):be.delete(F.id)},"data-testid":"".concat(P,"-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(c.cV.Header,{"data-testid":"".concat(P,"-delete-confirmation-modal-header")},fe("console:manage.features.claims.list.confirmation.header")),u.createElement(c.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(P,"-delete-confirmation-modal-message")},fe("console:manage.features.claims.list.confirmation.message",{name:be.name})),u.createElement(c.cV.Content,{"data-testid":"".concat(P,"-delete-confirmation-modal-content")},u.createElement("div",{className:"modal-alert-wrapper"}," ",ge&&ve),fe("console:manage.features.claims.list.confirmation.content",{message:be.message})))):null,u.createElement(c.wQ,{className:"external-dialects-list",externalSearch:n,isLoading:R,loadingStateOptions:{count:null!=h?h:D.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(M)return Ee(b)?[{icon:function(){var e,t;return(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,ie)?"pencil alternate":"eye"},onClick:function(e,t){D.m8.push(D.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",null==t?void 0:t.id))},popupText:function(){var e,t;return(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,ie)?fe("common:edit"):fe("common:view")},renderer:"semantic-icon"},T.attributeConfig.attributes.deleteAction&&{hidden:function(){var e,t;return!(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.delete,ie)},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(wt.LOCAL,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:Se()?[{hidden:function(){var e,t;return!(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.create,ie)},icon:function(){return"pencil alternate"},onClick:function(e,t){D.m8.push(D.$x.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id))},popupText:function(){return fe("common:edit")},renderer:"semantic-icon"},T.attributeConfig.attributeMappings.deleteAction&&{hidden:function(){var e,t;return!(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.delete,ie)},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(wt.DIALECT,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:Ce()?[{hidden:function(e){return J!==(null==e?void 0:e.id)},icon:function(){return"check"},onClick:function(){return se()},popupText:function(){return fe("common:update")},renderer:"semantic-icon"},T.attributeConfig.externalAttributes.showActions(C)&&{hidden:function(){var e,t;return T.attributeConfig.externalAttributes.isAttributeEditable?!(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.create,ie):!T.attributeConfig.externalAttributes.isAttributeEditable},icon:function(e){return T.attributeConfig.externalAttributes.getEditIcon(e,J)},link:function(e){return T.attributeConfig.externalAttributes.isEditActionClickable(e)},onClick:function(e,t){return T.attributeConfig.externalAttributes.editAttribute(t,J,ee)},popupText:function(e){return T.attributeConfig.externalAttributes.getEditPopupText(e,J)},renderer:"semantic-icon"},T.attributeConfig.externalAttributes.showDeleteIcon(C,b)&&{hidden:function(e){var t,n;if(!(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(t=y.attributeDialects)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.delete,ie)||T.attributeConfig.externalAttributes.hideDeleteIcon(e))return!0;if(T.attributeConfig.defaultScimMapping&&Object.keys(T.attributeConfig.defaultScimMapping).length>0){var r=T.attributeConfig.defaultScimMapping[e.claimDialectURI];return!(!r||!r.get(e.claimURI))}},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(wt.EXTERNAL,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:[{hidden:function(e){return!(0,s.Z)(re,e)},icon:function(){return"check"},onClick:function(){return se()},popupText:function(){return fe("common:update")},renderer:"semantic-icon"},{hidden:function(){return!Z},icon:function(e){return(0,s.Z)(re,e)?"times":"pencil alternate"},onClick:function(e,t){ae(re?void 0:t)},popupText:function(){return fe("common:edit")},renderer:"semantic-icon"},{icon:function(){return"trash alternate"},onClick:function(e,t){return w(t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]}(),columns:function(){if(Ee(b))return[{allowToggleVisibility:!1,dataIndex:"displayName",id:"displayName",key:"displayName",render:function(e){var t=function(e){var t,n,r=[];return null==X||X.forEach((function(t){var n,a;null!==(n=null==e||null===(a=e.attributeMapping)||void 0===a?void 0:a.find((function(e){return e.userstore.toLowerCase()===t.name.toLowerCase()})))&&void 0!==n||r.push(t.name)})),null!==(t=null==e||null===(n=e.attributeMapping)||void 0===n?void 0:n.find((function(e){return"PRIMARY"===e.userstore})))&&void 0!==t||r.push("Primary"),r}(e),n=t.length>0;return u.createElement(p.Z,{as:"h6",image:!0},u.createElement(u.Fragment,null,T.attributeConfig.attributes.showUserstoreMappingWarningIcon&&n&&u.createElement(c.GI,{trigger:u.createElement(f.Z,{className:"notification-icon",name:"warning circle",size:"small",color:"red"}),content:u.createElement("div",null,fe("console:manage.features.claims.list.warning"),u.createElement("ul",null,t.map((function(e,t){return u.createElement("li",{key:t},e)})))),inverted:!0}),u.createElement(c.JT,{image:u.createElement(c.Xo,{name:Le(e),size:"mini","data-testid":"".concat(P,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(P,"-item-image")})),u.createElement(p.Z.Content,null,e.displayName,u.createElement(p.Z.Subheader,null,u.createElement("code",{className:"inline-code compact transparent"},e.claimURI))))},title:fe("console:manage.features.claims.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k.Q.EMPTY_STRING}];if(Se())return[{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return u.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(P,"-item-heading")},u.createElement(c.JT,{image:u.createElement(c.Xo,{name:e.dialectURI,size:"mini","data-testid":"".concat(P,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(P,"-item-image")}),u.createElement(p.Z.Content,null,e.dialectURI))},title:fe("console:manage.features.claims.list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k.Q.EMPTY_STRING}];if(Ce()){return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return u.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(P,"-item-heading")},u.createElement(c.JT,{image:u.createElement(c.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(P,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(P,"-item-image")}),u.createElement(c.GI,{inverted:!0,position:"top center",key:"".concat(e.claimURI,"-popup"),content:e.claimURI,trigger:u.createElement(p.Z.Content,{className:"ellipsis"},e.claimURI)}))},title:_&&_===k.Q.SCIM?fe("console:manage.features.claims.list.columns.claimURI"):fe("console:manage.features.claims.list.columns.name"),width:8},{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return J===(null==e?void 0:e.id)?u.createElement(ue,{claimID:e.id,dialectID:C,update:function(){ee(""),S()},submit:ce,claimURI:e.claimURI,externalClaims:b,"data-testid":"".concat(P,"-edit-external-claim"),attributeType:_}):u.createElement(c.GI,{inverted:!0,position:"top center",key:"".concat(e.mappedLocalClaimURI,"-popup"),content:e.mappedLocalClaimURI,trigger:u.createElement("code",null,e.mappedLocalClaimURI)})},title:fe("console:manage.features.claims.list.columns.dialectURI"),width:6},(i=T.attributeConfig.externalAttributes.showActions(C)&&T.attributeConfig.externalAttributes.isAttributeEditable&&(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.create,ie),o=T.attributeConfig.externalAttributes.showDeleteIcon(C,b)&&(0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(n=y.attributeDialects)||void 0===n||null===(r=n.scopes)||void 0===r?void 0:r.delete,ie),i||o?{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k.Q.EMPTY_STRING}:null)].filter(Boolean)}var e,t,n,r,i,o;return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return e?(0,s.Z)(re,e)?u.createElement(ue,{dialectID:C,update:function(){ae(void 0)},submit:ce,claimURI:e.claimURI,onSubmit:function(t){I(e,t)},wizard:!0,addedClaim:e,externalClaims:b}):u.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(P,"-item-heading")},u.createElement(c.JT,{name:e.claimURI,image:u.createElement(c.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(P,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(P,"-item-image")}),u.createElement(p.Z.Content,null,e.claimURI,u.createElement(p.Z.Subheader,null,e.mappedLocalClaimURI))):null},title:fe("console:manage.features.claims.list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k.Q.EMPTY_STRING}]}(),data:b,onRowClick:function(e,t){var n,r;if((0,a.hasRequiredScopes)(null==y?void 0:y.attributeDialects,null==y||null===(n=y.attributeDialects)||void 0===n||null===(r=n.scopes)||void 0===r?void 0:r.create,ie)){if(Ee(b))D.m8.push(D.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",t.id));else if(Se())D.m8.push(D.$x.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id));else if(Ce()&&T.attributeConfig.externalAttributes.isRowClickable(C,g.Z))T.attributeConfig.externalAttributes.isAttributeEditable&&ee(J?"":t.id);else{if(!Z)return;ae(t)}x&&x(e,t)}},placeholders:Oe(),selectable:O,showHeader:t,transparent:!R&&null!==Oe(),"data-testid":P,isRowSelectable:function(e){return T.attributeConfig.isRowSelectable(e)},fixed:_!==ye}))};Ut.defaultProps={attributeType:k.Q.OTHERS,"data-testid":"claims-list",selection:!0,showListItemActions:!0,showTableHeaders:!1}},97865:(e,t,n)=>{n.d(t,{i:()=>r.i});var r=n(42776)},42776:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(68836),a=function(e,t,n){switch(e){case r.Q.OIDC:return n?"OIDC":"OpenID Connect";case r.Q.SCIM:return"SCIM";case r.Q.AXSCHEMA:return"Axschema";case r.Q.EIDAS:return"eIDAS";default:return t?"Custom":"custom"}}}}]);