"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[95620],{23861:(e,n,t)=>{t.d(n,{d:()=>C,x:()=>_});var r,o=t(93967),i=t(57477),a=t(14603),l=t(85850),s=t(43991),c=t(65790);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function f(e,n,t){return n&&d(e.prototype,n),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,n,t){return(n=E(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){var n=function(e,n){if("object"!==u(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===u(n)?n:String(n)}var m=f((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=m,g(m,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),g(m,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),g(m,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),g(m,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new c.O(r.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new c.O(r.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new c.O(r.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var p=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),_=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.GET,url:l.De.getServiceResourceEndpoints().passiveStsConfigurations},n=(0,s.Z)(e),t=n.data,r=n.error;return{data:t,error:r,isLoading:!r&&!t,isValidating:n.isValidating,mutate:n.mutate}},C=function(e){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.PATCH,url:l.De.getServiceResourceEndpoints().passiveStsConfigurations};return p(n).then((function(e){if(200!==e.status&&201!==e.status)throw new i.u(m.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var n,t,r=m.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new i.u(r,e.stack,null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}},95620:(e,n,t)=>{t.r(n),t.d(n,{WSFederationConfigurationPage:()=>v,default:()=>O});var r=t(57477),o=t(83374),i=t(14603),a=t(90268),l=t(59206),s=t(81816),c=t(52983),u=t(9202),d=t(54221),f=t(94635),g=t(28141),E=t(75917),m=t(16184),p=t(30640),_=t(23861);function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return R(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var v=function(e){var n=e["data-componentid"],t=(0,c.useRef)(null),R=(0,c.useRef)(null),v=(0,d.v9)((function(e){return e.config.ui.features})),O=(0,d.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),S=(0,c.useMemo)((function(){var e,n;return!(0,o.hasRequiredScopes)(null==v?void 0:v.server,null==v||null===(e=v.server)||void 0===e||null===(n=e.scopes)||void 0===n?void 0:n.update,O)}),[v,O]),h=(0,d.I0)(),b=(0,u.$)().t,F=C((0,c.useState)(void 0),2),w=F[0],y=F[1],A=(0,_.x)(),T=A.data,I=A.isLoading,N=A.mutate,D=A.error;(0,c.useEffect)((function(){T instanceof r.u||D?W():T&&y({enableRequestSigning:T.enableRequestSigning})}),[T]);var W=function(){h((0,a.V_)({description:b("console:wsFederationConfig.notifications.getConfiguration.error.description"),level:i.QU.ERROR,message:b("console:wsFederationConfig.notifications.getConfiguration.error.message")}))},P=function(e){var n={enableRequestSigning:e};(0,_.d)(n).then((function(){h((0,a.V_)({description:b("console:wsFederationConfig.notifications.updateConfiguration.success.description"),level:i.QU.SUCCESS,message:b("console:wsFederationConfig.notifications.updateConfiguration.success.message")}))})).catch((function(){h((0,a.V_)({description:b("console:wsFederationConfig.notifications.updateConfiguration.error.description"),level:i.QU.ERROR,message:b("console:wsFederationConfig.notifications.updateConfiguration.error.message")}))})).finally((function(){N()}))};return c.createElement(s.Xg,{title:b("console:wsFederationConfig.title"),pageTitle:b("console:wsFederationConfig.title"),description:b("console:wsFederationConfig.description"),backButton:{onClick:function(){p.m8.push(p.$x.getPaths().get("LOGIN_AND_REGISTRATION"))},text:b("console:manage.features.governanceConnectors.goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(n,"-form-layout")},c.createElement(m.R,{innerRef:t},c.createElement(f.Z,{className:"mt-2"},c.createElement(f.Z.Row,{columns:1},c.createElement(f.Z.Column,{width:16},c.createElement(s.pJ,{className:"form-wrapper",padded:"very"},I?c.createElement(f.Z.Row,{columns:1},c.createElement("div",null,c.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(n,"-loading-card")},c.createElement("div",{className:"content no-padding"},c.createElement("div",{className:"header-section"},c.createElement(g.Z,null,c.createElement(g.Z.Header,null,c.createElement(g.Z.Line,{length:"medium"}),c.createElement(g.Z.Line,{length:"full"}))),c.createElement(E.Z,{hidden:!0}))),c.createElement("div",{className:"content extra extra-content"},c.createElement("div",{className:"action-button"},c.createElement(g.Z,null,c.createElement(g.Z.Line,{length:"very short"}))))),c.createElement(E.Z,{hidden:!0}))):c.createElement(c.Fragment,null,c.createElement(l.l0,{id:"wsfederation-configuration-form",uncontrolledForm:!0,onSubmit:null,initialValues:w,enableReinitialize:!0,ref:R,noValidate:!0,autoComplete:"new-password"},c.createElement(f.Z,null,c.createElement(f.Z.Row,{columns:1,key:1},c.createElement(f.Z.Column,{key:"enableRequestSigning"},c.createElement(l.gN.Checkbox,{ariaLabel:"Enable Authentication Requests Signing",name:"enableRequestSigning",label:b("console:wsFederationConfig.form.enableRequestSigning.label"),readOnly:S,width:16,"data-componentid":"".concat(n,"-enable-request-signing"),toggle:!0,listen:function(e){P(e)}}))))))))))))};v.defaultProps={"data-componentid":"wsfederation-configuration-page"};const O=v}}]);