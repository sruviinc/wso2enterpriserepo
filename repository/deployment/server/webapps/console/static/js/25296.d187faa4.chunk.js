"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[25296,64322,1818,63381,93502,94721,52213,48264,3497],{64322:(e,t,n)=>{n.r(t),n.d(t,{deleteGuestUser:()=>i.deleteGuestUser,deleteInvite:()=>i.deleteInvite,generateInviteLink:()=>i.generateInviteLink,getInvitedUserList:()=>i.getInvitedUserList,getUserStores:()=>o.getUserStores,resendInvite:()=>i.resendInvite,sendInvite:()=>i.sendInvite,updateInvite:()=>i.updateInvite,useInvitedUsersList:()=>i.useInvitedUsersList});var i=n(1818),o=n(63381)},1818:(e,t,n)=>{n.r(t),n.d(t,{deleteGuestUser:()=>g,deleteInvite:()=>f,generateInviteLink:()=>E,getInvitedUserList:()=>d,resendInvite:()=>h,sendInvite:()=>m,updateInvite:()=>p,useInvitedUsersList:()=>v});var i=n(93967),o=n(57477),r=n(14603),a=n(85850),s=n(43991),l=n(26187),c=n(99839),u=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()),d=function(){var e={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.GET,url:l.h.getState().config.endpoints.inviteEndpoint};return u(e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},v=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{"Content-Type":"application/json"},method:r.f2.GET,url:l.h.getState().config.endpoints.inviteEndpoint},n=(0,s.Z)(e?t:null),i=n.data,o=n.error;return{data:i,error:o,isLoading:!o&&!i,isValidating:n.isValidating,mutate:n.mutate}},m=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:l.h.getState().config.endpoints.inviteEndpoint};return u(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.DELETE,url:l.h.getState().config.endpoints.inviteEndpoint+"/"+e};return u(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e,t){var n={data:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.PATCH,url:l.h.getState().config.endpoints.inviteEndpoint+"/"+e};return u(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},g=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.DELETE,url:l.h.getState().config.endpoints.userEndpoint+"/"+e};return u(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},h=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:l.h.getState().config.endpoints.resendEndpoint.replace("{}",e)};return u(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},E=function(e,t){var n={data:{username:e,userstore:t},headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:a.De.resolveServerHost()+l.h.getState().config.endpoints.inviteLinkEndpoint};return u(n).then((function(e){if(201!==e.status)throw new o.u(c.UsersConstants.INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n,i,r,a;throw new o.u(null!==(t=null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)&&void 0!==t?t:c.UsersConstants.RESOURCE_NOT_FOUND_ERROR_MESSAGE,e.stack,null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.code,e.request,e.response,e.config)}))}},63381:(e,t,n)=>{n.r(t),n.d(t,{getUserStores:()=>c});var i=n(93967),o=n(57477),r=n(14603),a=n(30640),s=n(99839),l=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()).bind(i.AsgardeoSPAClient.getInstance()),c=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.GET,params:{requiredAttributes:s.UsersConstants.USER_STORE_PROPERTY_READ_ONLY},url:a.h.getState().config.endpoints.userStores};return l(e).then((function(e){if(200!==e.status)throw new o.u(s.UsersConstants.INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n,i,r,a;throw new o.u(null!==(t=null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)&&void 0!==t?t:s.UsersConstants.RESOURCE_NOT_FOUND_ERROR_MESSAGE,e.stack,null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.code,e.request,e.response,e.config)}))}},25296:(e,t,n)=>{n.r(t),n.d(t,{GuestUsersList:()=>h});var i=n(83374),o=n(14603),r=n(90268),a=n(81816),s=n(52983),l=n(9202),c=n(54221),u=n(97860),d=n(93502),v=n(30640),m=n(64322),f=n(52213);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h=function(e){var t,n,g=e.guestUsersList,h=e.getGuestUsersList,E=e.isGuestUsersRequestLoading,S=e.invitationStatusOption,y=e.searchQuery,I=e.onSearchQueryClear,C=e["data-testid"],A=(0,l.$)().t,b=(0,c.I0)(),R=p((0,s.useState)(!1),2),U=R[0],w=R[1],T=p((0,s.useState)(void 0),2),O=T[0],P=T[1],j=p((0,s.useState)(!1),2),k=j[0],_=j[1],L=p((0,s.useState)(void 0),2),V=L[0],D=L[1],M=p((0,s.useState)(void 0),2),N=M[0],H=M[1],Z=p((0,s.useState)(!1),2),x=Z[0],G=Z[1],Q=p((0,s.useState)(!1),2),q=Q[0],X=Q[1],F=p((0,s.useState)(!0),1)[0],J=p((0,s.useState)(!1),2),$=J[0],z=J[1],Y=(0,c.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),B=(0,c.v9)((function(e){return e.config.ui.features})),K=function(e){z(!0),function(e){return(0,m.deleteInvite)(e).then((function(){b((0,r.V_)({description:A("console:manage.features.invite.notifications.deleteInvite.success.description"),level:o.QU.SUCCESS,message:A("console:manage.features.invite.notifications.deleteInvite.success.message")})),h()})).catch((function(e){var t,n,i,a,s,l,c,u,d,v,m;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?b((0,r.V_)({description:null!==(i=null!==(a=null==e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description)&&void 0!==a?a:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==i?i:A("console:manage.features.invite.notifications.deleteInvite.error.description"),level:o.QU.ERROR,message:null!==(d=null==e||null===(v=e.response)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.message)&&void 0!==d?d:A("console:manage.features.invite.notifications.deleteInvite.error.message")})):b((0,r.V_)({description:A("console:manage.features.invite.notifications.deleteInvite.genericError.description"),level:o.QU.ERROR,message:A("console:manage.features.invite.notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){z(!1),w(!1),h()}))},W=function(e){z(!0),function(e){return(0,m.resendInvite)(e).then((function(){b((0,r.V_)({description:A("console:manage.features.invite.notifications.resendInvite.success.description"),level:o.QU.SUCCESS,message:A("console:manage.features.invite.notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,i,a,s,l,c,u,d,v,m;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?b((0,r.V_)({description:null!==(i=null!==(a=null==e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description)&&void 0!==a?a:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==i?i:A("console:manage.features.invite.notifications.resendInvite.error.description"),level:o.QU.ERROR,message:null!==(d=null==e||null===(v=e.response)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.message)&&void 0!==d?d:A("console:manage.features.invite.notifications.resendInvite.error.message")})):b((0,r.V_)({description:A("console:manage.features.invite.notifications.resendInvite.genericError.description"),level:o.QU.ERROR,message:A("console:manage.features.invite.notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){z(!1),_(!1),h()}))},ee=function(){return y&&0===(null==g?void 0:g.length)?s.createElement(a.$J,{action:s.createElement(a.Qj,{onClick:I},A("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,v.jF)().emptySearch,imageSize:"tiny",title:A("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.title"),subtitle:[A("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.subTitle.0",{query:y}),A("console:manage.features.invite.placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==g?void 0:g.length)?S===f.InvitationStatus.EXPIRED?s.createElement(a.$J,{image:(0,v.jF)().newList,imageSize:"tiny",subtitle:["There are no collaborator users with expired invitations at the moment."]}):s.createElement(a.$J,{image:(0,v.jF)().newList,imageSize:"tiny",subtitle:["There are no collaborator users with pending invitations at the moment."]}):null},te=function(e,t){var n={roles:t};X(!0),(0,m.updateInvite)(e,n).then((function(){b((0,r.V_)({description:A("console:manage.features.invite.notifications.updateInvite.success.description"),level:o.QU.SUCCESS,message:A("console:manage.features.invite.notifications.updateInvite.success.message")})),h()})).catch((function(e){var t,n,i,a,s,l,c,u,d,v,m;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.description?b((0,r.V_)({description:null!==(i=null!==(a=null==e||null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description)&&void 0!==a?a:null==e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.detail)&&void 0!==i?i:A("console:manage.features.invite.notifications.updateInvite.error.description"),level:o.QU.ERROR,message:null!==(d=null==e||null===(v=e.response)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.message)&&void 0!==d?d:A("console:manage.features.invite.notifications.updateInvite.error.message")})):b((0,r.V_)({description:A("console:manage.features.invite.notifications.updateInvite.genericError.description"),level:o.QU.ERROR,message:A("console:manage.features.invite.notifications.updateInvite.genericError.message")}))})).finally((function(){X(!1)})),G(!1)};return s.createElement(s.Fragment,null,s.createElement(a.wQ,{showSearch:!0,padded:!0,isLoading:E,loadingStateOptions:{count:5,imageType:"square"},placeholders:ee(),actions:[{hidden:function(){return F},icon:function(){return"briefcase"},onClick:function(e,t){H(t),G(!0)},popupText:function(){return"roles"},renderer:"semantic-icon"},{hidden:function(){var e,t;return!(0,i.hasRequiredScopes)(null==B?void 0:B.users,null==B||null===(e=B.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,Y)},icon:function(){return"redo alternate"},onClick:function(e,t){D(t),_(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{hidden:function(){var e,t;return!(0,i.hasRequiredScopes)(null==B?void 0:B.users,null==B||null===(e=B.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,Y)},icon:function(){return"trash alternate"},onClick:function(e,t){P(t),w(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:g,columns:[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return s.createElement(u.Z,{as:"h6",image:!0},s.createElement(a.JT,{image:s.createElement(a.Xo,{name:e.email,size:"mini","data-testid":"".concat(C,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(C,"-item-image"),"data-hj-suppress":""}),s.createElement(u.Z.Content,null,e.email,s.createElement(u.Z.Subheader,null,e.roles.toString())))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],onRowClick:null,showHeader:!0,transparent:!E&&null!==ee()}),s.createElement(d.InviteeRoleSelection,{invitee:N,showSelectionModal:x,handleSelectionModalClose:function(){return G(!1)},handleInviteeRolesUpdate:te,readOnly:!(0,i.hasRequiredScopes)(null==B?void 0:B.users,null==B||null===(t=B.users)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,Y),isSubmitting:q}),U&&s.createElement(a.cV,{primaryActionLoading:$,"data-testid":"".concat(C,"-confirmation-modal"),onClose:function(){return w(!1)},type:"negative",open:U,assertion:O.email,assertionHint:A("console:manage.features.invite.confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){return K(O.id)},closeOnDimmerClick:!1},s.createElement(a.cV.Header,{"data-testid":"".concat(C,"-confirmation-modal-header")},A("console:manage.features.invite.confirmationModal.deleteInvite.header")),s.createElement(a.cV.Message,{"data-testid":"".concat(C,"-confirmation-modal-message"),attached:!0,negative:!0},A("console:manage.features.invite.confirmationModal.deleteInvite.message")),s.createElement(a.cV.Content,{"data-testid":"".concat(C,"-confirmation-modal-content")},A("console:manage.features.invite.confirmationModal.deleteInvite.content"))),k&&s.createElement(a.cV,{primaryActionLoading:$,"data-testid":"".concat(C,"-confirmation-modal"),onClose:function(){return _(!1)},type:"warning",open:k,assertion:V.email,assertionHint:A("console:manage.features.invite.confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return _(!1)},onPrimaryActionClick:function(){return W(V.id)},closeOnDimmerClick:!1},s.createElement(a.cV.Header,{"data-testid":"".concat(C,"-confirmation-modal-header")},A("console:manage.features.invite.confirmationModal.resendInvite.header")),s.createElement(a.cV.Message,{"data-testid":"".concat(C,"-confirmation-modal-message"),attached:!0,warning:!0},A("console:manage.features.invite.confirmationModal.resendInvite.message")),s.createElement(a.cV.Content,{"data-testid":"".concat(C,"-confirmation-modal-content")},A("console:manage.features.invite.confirmationModal.resendInvite.content"))))}},93502:(e,t,n)=>{n.r(t),n.d(t,{InviteeRoleSelection:()=>p});var i=n(81816),o=n(52983),r=n(9202),a=n(21921),s=n(16029),l=n(75917),c=n(94635),u=n(49238);function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=function(e){var t=e.invitee,n=e.showSelectionModal,m=e.handleSelectionModalClose,f=e.handleInviteeRolesUpdate,p=e.readOnly,g=e.isSubmitting,h=(0,r.$)().t,E=(0,i.fQ)().getLink,S=v((0,o.useState)(void 0),2),y=S[0],I=S[1],C=v((0,o.useState)(void 0),2)[1],A=v((0,o.useState)(void 0),2),b=A[0],R=A[1],U=v((0,o.useState)(!1),2)[1],w=v((0,o.useState)(!1),1)[0];(0,o.useEffect)((function(){var e=[];U(!0),(0,u.Sd)(null).then((function(t){t.data.Resources.map((function(t){"system"!==t.displayName&&"everyone"!==t.displayName&&"selfsignup"!==t.displayName&&e.push(t)})),I(e),C(e)})).finally((function(){U(!1)}))}),[]),(0,o.useEffect)((function(){null!=t&&t.roles&&R(t.roles)}),[null==t?void 0:t.roles]),(0,o.useEffect)((function(){if(w){var e=d(null==t?void 0:t.roles);y.map((function(t){e.push(t.displayName)})),R(e)}else R([])}),[w]);return o.createElement(a.Z,{open:n,size:"small",className:"user-roles attribute-modal",dimmer:"blurring"},o.createElement(a.Z.Header,null,h("console:manage.features.invite.rolesUpdateModal.header"),o.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},h("console:manage.features.invite.rolesUpdateModal.subHeader"),o.createElement(i.eb,{link:E("manage.users.collaboratorAccounts.roles.learnMore")},h("extensions:common.learnMore")))),o.createElement(a.Z.Content,null,o.createElement(i.pJ,null,o.createElement(s.Z.Group,null,o.createElement(l.Z,{hidden:!0}),null==y?void 0:y.map((function(e,t){var n,i=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");if((null==i?void 0:i.length)>=1&&!i.includes("everyone")&&!i.includes("system")&&!i.includes("selfsignup"))return o.createElement(o.Fragment,null,o.createElement(s.Z.Radio,{onChange:function(){return function(e){var t=[];t.push(e),R(t)}(null==e?void 0:e.displayName)},key:t,label:(null==i?void 0:i.length)>1?i[1]:i[0],checked:b.includes(null==e?void 0:e.displayName),"data-testid":"user-mgt-update-roles-modal-unselected-roles",readOnly:p}),o.createElement(l.Z,{hidden:!0}))}))))),o.createElement(a.Z.Actions,null,o.createElement(c.Z,null,o.createElement(c.Z.Row,{column:2},o.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},o.createElement(i.Qj,{"data-testid":"group-mgt-update-roles-modal-cancel-button",floated:"left",onClick:m},h("common:cancel"))),o.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},!p&&o.createElement(i.KM,{"data-testid":"group-mgt-update-roles-modal-save-button",floated:"right",onClick:function(){return f(null==t?void 0:t.id,b)},loading:g,disabled:g},h("common:save")))))))}},52213:(e,t,n)=>{n.r(t),n.d(t,{InvitationStatus:()=>i.InvitationStatus,InviteUserStatus:()=>i.InviteUserStatus,InviteValidationStatus:()=>i.InviteValidationStatus});var i=n(48264)},48264:(e,t,n)=>{var i,o,r;n.r(t),n.d(t,{InvitationStatus:()=>r,InviteUserStatus:()=>i,InviteValidationStatus:()=>o}),function(e){e.PENDING="PENDING",e.EXPIRED="EXPIRED"}(i||(i={})),function(e){e.ACCEPTED="ACCEPTED",e.EXPIRED="EXPIRED",e.REJECTED="REJECTED"}(o||(o={})),function(e){e.ACCEPTED="Accepted",e.PENDING="Pending",e.EXPIRED="Expired"}(r||(r={}))}}]);